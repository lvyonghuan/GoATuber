(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function Kd(r,e){const t=Object.create(null),i=r.split(",");for(let n=0;n<i.length;n++)t[i[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}const Qe={},Xs=[],St=()=>{},US=()=>!1,GS=/^on[^a-z]/,eh=r=>GS.test(r),Zd=r=>r.startsWith("onUpdate:"),yt=Object.assign,Jd=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},VS=Object.prototype.hasOwnProperty,Le=(r,e)=>VS.call(r,e),pe=Array.isArray,zs=r=>th(r)==="[object Map]",t0=r=>th(r)==="[object Set]",de=r=>typeof r=="function",Ge=r=>typeof r=="string",Qd=r=>typeof r=="symbol",He=r=>r!==null&&typeof r=="object",r0=r=>He(r)&&de(r.then)&&de(r.catch),i0=Object.prototype.toString,th=r=>i0.call(r),HS=r=>th(r).slice(8,-1),n0=r=>th(r)==="[object Object]",ep=r=>Ge(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,hu=Kd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rh=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},$S=/-(\w)/g,Wr=rh(r=>r.replace($S,(e,t)=>t?t.toUpperCase():"")),jS=/\B([A-Z])/g,ys=rh(r=>r.replace(jS,"-$1").toLowerCase()),ih=rh(r=>r.charAt(0).toUpperCase()+r.slice(1)),Zh=rh(r=>r?`on${ih(r)}`:""),Ca=(r,e)=>!Object.is(r,e),Jh=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},Cu=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},XS=r=>{const e=parseFloat(r);return isNaN(e)?r:e},zS=r=>{const e=Ge(r)?Number(r):NaN;return isNaN(e)?r:e};let mv;const mf=()=>mv||(mv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yr(r){if(pe(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],n=Ge(i)?KS(i):yr(i);if(n)for(const s in n)e[s]=n[s]}return e}else{if(Ge(r))return r;if(He(r))return r}}const WS=/;(?![^(]*\))/g,YS=/:([^]+)/,qS=/\/\*[^]*?\*\//g;function KS(r){const e={};return r.replace(qS,"").split(WS).forEach(t=>{if(t){const i=t.split(YS);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function me(r){let e="";if(Ge(r))e=r;else if(pe(r))for(let t=0;t<r.length;t++){const i=me(r[t]);i&&(e+=i+" ")}else if(He(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const ZS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",JS=Kd(ZS);function s0(r){return!!r||r===""}const Oi=r=>Ge(r)?r:r==null?"":pe(r)||He(r)&&(r.toString===i0||!de(r.toString))?JSON.stringify(r,o0,2):String(r),o0=(r,e)=>e&&e.__v_isRef?o0(r,e.value):zs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n])=>(t[`${i} =>`]=n,t),{})}:t0(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!pe(e)&&!n0(e)?String(e):e;let sr;class a0{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=sr,!e&&sr&&(this.index=(sr.scopes||(sr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=sr;try{return sr=this,e()}finally{sr=t}}}on(){sr=this}off(){sr=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function QS(r){return new a0(r)}function eE(r,e=sr){e&&e.active&&e.effects.push(r)}function l0(){return sr}function u0(r){sr&&sr.cleanups.push(r)}const tp=r=>{const e=new Set(r);return e.w=0,e.n=0,e},h0=r=>(r.w&pn)>0,c0=r=>(r.n&pn)>0,tE=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=pn},rE=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const n=e[i];h0(n)&&!c0(n)?n.delete(r):e[t++]=n,n.w&=~pn,n.n&=~pn}e.length=t}},Mu=new WeakMap;let ta=0,pn=1;const vf=30;let Gr;const ss=Symbol(""),gf=Symbol("");class rp{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,eE(this,i)}run(){if(!this.active)return this.fn();let e=Gr,t=ln;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Gr,Gr=this,ln=!0,pn=1<<++ta,ta<=vf?tE(this):vv(this),this.fn()}finally{ta<=vf&&rE(this),pn=1<<--ta,Gr=this.parent,ln=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Gr===this?this.deferStop=!0:this.active&&(vv(this),this.onStop&&this.onStop(),this.active=!1)}}function vv(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let ln=!0;const f0=[];function So(){f0.push(ln),ln=!1}function Eo(){const r=f0.pop();ln=r===void 0?!0:r}function er(r,e,t){if(ln&&Gr){let i=Mu.get(r);i||Mu.set(r,i=new Map);let n=i.get(t);n||i.set(t,n=tp()),d0(n)}}function d0(r,e){let t=!1;ta<=vf?c0(r)||(r.n|=pn,t=!h0(r)):t=!r.has(Gr),t&&(r.add(Gr),Gr.deps.push(r))}function ki(r,e,t,i,n,s){const o=Mu.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&pe(r)){const l=Number(i);o.forEach((u,h)=>{(h==="length"||h>=l)&&a.push(u)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":pe(r)?ep(t)&&a.push(o.get("length")):(a.push(o.get(ss)),zs(r)&&a.push(o.get(gf)));break;case"delete":pe(r)||(a.push(o.get(ss)),zs(r)&&a.push(o.get(gf)));break;case"set":zs(r)&&a.push(o.get(ss));break}if(a.length===1)a[0]&&_f(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);_f(tp(l))}}function _f(r,e){const t=pe(r)?r:[...r];for(const i of t)i.computed&&gv(i);for(const i of t)i.computed||gv(i)}function gv(r,e){(r!==Gr||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function iE(r,e){var t;return(t=Mu.get(r))==null?void 0:t.get(e)}const nE=Kd("__proto__,__v_isRef,__isVue"),p0=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Qd)),sE=ip(),oE=ip(!1,!0),aE=ip(!0),_v=lE();function lE(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=Ve(this);for(let s=0,o=this.length;s<o;s++)er(i,"get",s+"");const n=i[e](...t);return n===-1||n===!1?i[e](...t.map(Ve)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){So();const i=Ve(this)[e].apply(this,t);return Eo(),i}}),r}function uE(r){const e=Ve(this);return er(e,"has",r),e.hasOwnProperty(r)}function ip(r=!1,e=!1){return function(i,n,s){if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&s===(r?e?wE:y0:e?_0:g0).get(i))return i;const o=pe(i);if(!r){if(o&&Le(_v,n))return Reflect.get(_v,n,s);if(n==="hasOwnProperty")return uE}const a=Reflect.get(i,n,s);return(Qd(n)?p0.has(n):nE(n))||(r||er(i,"get",n),e)?a:_t(a)?o&&ep(n)?a:a.value:He(a)?r?sh(a):bn(a):a}}const hE=m0(),cE=m0(!0);function m0(r=!1){return function(t,i,n,s){let o=t[i];if(to(o)&&_t(o)&&!_t(n))return!1;if(!r&&(!Iu(n)&&!to(n)&&(o=Ve(o),n=Ve(n)),!pe(t)&&_t(o)&&!_t(n)))return o.value=n,!0;const a=pe(t)&&ep(i)?Number(i)<t.length:Le(t,i),l=Reflect.set(t,i,n,s);return t===Ve(s)&&(a?Ca(n,o)&&ki(t,"set",i,n):ki(t,"add",i,n)),l}}function fE(r,e){const t=Le(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&ki(r,"delete",e,void 0),i}function dE(r,e){const t=Reflect.has(r,e);return(!Qd(e)||!p0.has(e))&&er(r,"has",e),t}function pE(r){return er(r,"iterate",pe(r)?"length":ss),Reflect.ownKeys(r)}const v0={get:sE,set:hE,deleteProperty:fE,has:dE,ownKeys:pE},mE={get:aE,set(r,e){return!0},deleteProperty(r,e){return!0}},vE=yt({},v0,{get:oE,set:cE}),np=r=>r,nh=r=>Reflect.getPrototypeOf(r);function gl(r,e,t=!1,i=!1){r=r.__v_raw;const n=Ve(r),s=Ve(e);t||(e!==s&&er(n,"get",e),er(n,"get",s));const{has:o}=nh(n),a=i?np:t?ap:Ma;if(o.call(n,e))return a(r.get(e));if(o.call(n,s))return a(r.get(s));r!==n&&r.get(e)}function _l(r,e=!1){const t=this.__v_raw,i=Ve(t),n=Ve(r);return e||(r!==n&&er(i,"has",r),er(i,"has",n)),r===n?t.has(r):t.has(r)||t.has(n)}function yl(r,e=!1){return r=r.__v_raw,!e&&er(Ve(r),"iterate",ss),Reflect.get(r,"size",r)}function yv(r){r=Ve(r);const e=Ve(this);return nh(e).has.call(e,r)||(e.add(r),ki(e,"add",r,r)),this}function bv(r,e){e=Ve(e);const t=Ve(this),{has:i,get:n}=nh(t);let s=i.call(t,r);s||(r=Ve(r),s=i.call(t,r));const o=n.call(t,r);return t.set(r,e),s?Ca(e,o)&&ki(t,"set",r,e):ki(t,"add",r,e),this}function xv(r){const e=Ve(this),{has:t,get:i}=nh(e);let n=t.call(e,r);n||(r=Ve(r),n=t.call(e,r)),i&&i.call(e,r);const s=e.delete(r);return n&&ki(e,"delete",r,void 0),s}function Tv(){const r=Ve(this),e=r.size!==0,t=r.clear();return e&&ki(r,"clear",void 0,void 0),t}function bl(r,e){return function(i,n){const s=this,o=s.__v_raw,a=Ve(o),l=e?np:r?ap:Ma;return!r&&er(a,"iterate",ss),o.forEach((u,h)=>i.call(n,l(u),l(h),s))}}function xl(r,e,t){return function(...i){const n=this.__v_raw,s=Ve(n),o=zs(s),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=n[r](...i),h=t?np:e?ap:Ma;return!e&&er(s,"iterate",l?gf:ss),{next(){const{value:c,done:f}=u.next();return f?{value:c,done:f}:{value:a?[h(c[0]),h(c[1])]:h(c),done:f}},[Symbol.iterator](){return this}}}}function ji(r){return function(...e){return r==="delete"?!1:this}}function gE(){const r={get(s){return gl(this,s)},get size(){return yl(this)},has:_l,add:yv,set:bv,delete:xv,clear:Tv,forEach:bl(!1,!1)},e={get(s){return gl(this,s,!1,!0)},get size(){return yl(this)},has:_l,add:yv,set:bv,delete:xv,clear:Tv,forEach:bl(!1,!0)},t={get(s){return gl(this,s,!0)},get size(){return yl(this,!0)},has(s){return _l.call(this,s,!0)},add:ji("add"),set:ji("set"),delete:ji("delete"),clear:ji("clear"),forEach:bl(!0,!1)},i={get(s){return gl(this,s,!0,!0)},get size(){return yl(this,!0)},has(s){return _l.call(this,s,!0)},add:ji("add"),set:ji("set"),delete:ji("delete"),clear:ji("clear"),forEach:bl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=xl(s,!1,!1),t[s]=xl(s,!0,!1),e[s]=xl(s,!1,!0),i[s]=xl(s,!0,!0)}),[r,t,e,i]}const[_E,yE,bE,xE]=gE();function sp(r,e){const t=e?r?xE:bE:r?yE:_E;return(i,n,s)=>n==="__v_isReactive"?!r:n==="__v_isReadonly"?r:n==="__v_raw"?i:Reflect.get(Le(t,n)&&n in i?t:i,n,s)}const TE={get:sp(!1,!1)},SE={get:sp(!1,!0)},EE={get:sp(!0,!1)},g0=new WeakMap,_0=new WeakMap,y0=new WeakMap,wE=new WeakMap;function PE(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CE(r){return r.__v_skip||!Object.isExtensible(r)?0:PE(HS(r))}function bn(r){return to(r)?r:op(r,!1,v0,TE,g0)}function b0(r){return op(r,!1,vE,SE,_0)}function sh(r){return op(r,!0,mE,EE,y0)}function op(r,e,t,i,n){if(!He(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const s=n.get(r);if(s)return s;const o=CE(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return n.set(r,a),a}function Ws(r){return to(r)?Ws(r.__v_raw):!!(r&&r.__v_isReactive)}function to(r){return!!(r&&r.__v_isReadonly)}function Iu(r){return!!(r&&r.__v_isShallow)}function x0(r){return Ws(r)||to(r)}function Ve(r){const e=r&&r.__v_raw;return e?Ve(e):r}function T0(r){return Cu(r,"__v_skip",!0),r}const Ma=r=>He(r)?bn(r):r,ap=r=>He(r)?sh(r):r;function S0(r){ln&&Gr&&(r=Ve(r),d0(r.dep||(r.dep=tp())))}function E0(r,e){r=Ve(r);const t=r.dep;t&&_f(t)}function _t(r){return!!(r&&r.__v_isRef===!0)}function oe(r){return w0(r,!1)}function Ys(r){return w0(r,!0)}function w0(r,e){return _t(r)?r:new ME(r,e)}class ME{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ve(e),this._value=t?e:Ma(e)}get value(){return S0(this),this._value}set value(e){const t=this.__v_isShallow||Iu(e)||to(e);e=t?e:Ve(e),Ca(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ma(e),E0(this))}}function x(r){return _t(r)?r.value:r}const IE={get:(r,e,t)=>x(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const n=r[e];return _t(n)&&!_t(t)?(n.value=t,!0):Reflect.set(r,e,t,i)}};function P0(r){return Ws(r)?r:new Proxy(r,IE)}function yf(r){const e=pe(r)?new Array(r.length):{};for(const t in r)e[t]=C0(r,t);return e}class AE{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return iE(Ve(this._object),this._key)}}class OE{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Ri(r,e,t){return _t(r)?r:de(r)?new OE(r):He(r)&&arguments.length>1?C0(r,e,t):oe(r)}function C0(r,e,t){const i=r[e];return _t(i)?i:new AE(r,e,t)}class RE{constructor(e,t,i,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new rp(e,()=>{this._dirty||(this._dirty=!0,E0(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=Ve(this);return S0(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function M0(r,e,t=!1){let i,n;const s=de(r);return s?(i=r,n=St):(i=r.get,n=r.set),new RE(i,n,s||!n,t)}function FE(r,...e){}function un(r,e,t,i){let n;try{n=i?r(...i):r()}catch(s){oh(s,e,t)}return n}function Er(r,e,t,i){if(de(r)){const s=un(r,e,t,i);return s&&r0(s)&&s.catch(o=>{oh(o,e,t)}),s}const n=[];for(let s=0;s<r.length;s++)n.push(Er(r[s],e,t,i));return n}function oh(r,e,t,i=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const u=s.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](r,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){un(l,null,10,[r,o,a]);return}}LE(r,t,n,i)}function LE(r,e,t,i=!0){console.error(r)}let Ia=!1,bf=!1;const kt=[];let ci=0;const qs=[];let Pi=null,qn=0;const I0=Promise.resolve();let lp=null;function $t(r){const e=lp||I0;return r?e.then(this?r.bind(this):r):e}function DE(r){let e=ci+1,t=kt.length;for(;e<t;){const i=e+t>>>1;Aa(kt[i])<r?e=i+1:t=i}return e}function up(r){(!kt.length||!kt.includes(r,Ia&&r.allowRecurse?ci+1:ci))&&(r.id==null?kt.push(r):kt.splice(DE(r.id),0,r),A0())}function A0(){!Ia&&!bf&&(bf=!0,lp=I0.then(R0))}function BE(r){const e=kt.indexOf(r);e>ci&&kt.splice(e,1)}function NE(r){pe(r)?qs.push(...r):(!Pi||!Pi.includes(r,r.allowRecurse?qn+1:qn))&&qs.push(r),A0()}function Sv(r,e=Ia?ci+1:0){for(;e<kt.length;e++){const t=kt[e];t&&t.pre&&(kt.splice(e,1),e--,t())}}function O0(r){if(qs.length){const e=[...new Set(qs)];if(qs.length=0,Pi){Pi.push(...e);return}for(Pi=e,Pi.sort((t,i)=>Aa(t)-Aa(i)),qn=0;qn<Pi.length;qn++)Pi[qn]();Pi=null,qn=0}}const Aa=r=>r.id==null?1/0:r.id,kE=(r,e)=>{const t=Aa(r)-Aa(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function R0(r){bf=!1,Ia=!0,kt.sort(kE);const e=St;try{for(ci=0;ci<kt.length;ci++){const t=kt[ci];t&&t.active!==!1&&un(t,null,14)}}finally{ci=0,kt.length=0,O0(),Ia=!1,lp=null,(kt.length||qs.length)&&R0()}}function UE(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||Qe;let n=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:c,trim:f}=i[h]||Qe;f&&(n=t.map(d=>Ge(d)?d.trim():d)),c&&(n=t.map(XS))}let a,l=i[a=Zh(e)]||i[a=Zh(Wr(e))];!l&&s&&(l=i[a=Zh(ys(e))]),l&&Er(l,r,6,n);const u=i[a+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Er(u,r,6,n)}}function F0(r,e,t=!1){const i=e.emitsCache,n=i.get(r);if(n!==void 0)return n;const s=r.emits;let o={},a=!1;if(!de(r)){const l=u=>{const h=F0(u,e,!0);h&&(a=!0,yt(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!s&&!a?(He(r)&&i.set(r,null),null):(pe(s)?s.forEach(l=>o[l]=null):yt(o,s),He(r)&&i.set(r,o),o)}function ah(r,e){return!r||!eh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(r,e[0].toLowerCase()+e.slice(1))||Le(r,ys(e))||Le(r,e))}let Dt=null,L0=null;function Au(r){const e=Dt;return Dt=r,L0=r&&r.type.__scopeId||null,e}function ke(r,e=Dt,t){if(!e||r._n)return r;const i=(...n)=>{i._d&&Bv(-1);const s=Au(e);let o;try{o=r(...n)}finally{Au(s),i._d&&Bv(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Qh(r){const{type:e,vnode:t,proxy:i,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:h,renderCache:c,data:f,setupState:d,ctx:p,inheritAttrs:m}=r;let v,g;const _=Au(r);try{if(t.shapeFlag&4){const b=n||i;v=ai(h.call(b,b,c,s,d,f,p)),g=l}else{const b=e;v=ai(b.length>1?b(s,{attrs:l,slots:a,emit:u}):b(s,null)),g=e.props?l:GE(l)}}catch(b){_a.length=0,oh(b,r,1),v=Me(lr)}let y=v;if(g&&m!==!1){const b=Object.keys(g),{shapeFlag:T}=y;b.length&&T&7&&(o&&b.some(Zd)&&(g=VE(g,o)),y=Ui(y,g))}return t.dirs&&(y=Ui(y),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),v=y,Au(_),v}const GE=r=>{let e;for(const t in r)(t==="class"||t==="style"||eh(t))&&((e||(e={}))[t]=r[t]);return e},VE=(r,e)=>{const t={};for(const i in r)(!Zd(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function HE(r,e,t){const{props:i,children:n,component:s}=r,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Ev(i,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let c=0;c<h.length;c++){const f=h[c];if(o[f]!==i[f]&&!ah(u,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Ev(i,o,u):!0:!!o;return!1}function Ev(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==r[s]&&!ah(t,s))return!0}return!1}function $E({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const jE=r=>r.__isSuspense;function XE(r,e){e&&e.pendingBranch?pe(r)?e.effects.push(...r):e.effects.push(r):NE(r)}const Tl={};function Ee(r,e,t){return D0(r,e,t)}function D0(r,e,{immediate:t,deep:i,flush:n,onTrack:s,onTrigger:o}=Qe){var a;const l=l0()===((a=It)==null?void 0:a.scope)?It:null;let u,h=!1,c=!1;if(_t(r)?(u=()=>r.value,h=Iu(r)):Ws(r)?(u=()=>r,i=!0):pe(r)?(c=!0,h=r.some(b=>Ws(b)||Iu(b)),u=()=>r.map(b=>{if(_t(b))return b.value;if(Ws(b))return ts(b);if(de(b))return un(b,l,2)})):de(r)?e?u=()=>un(r,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),Er(r,l,3,[d])}:u=St,e&&i){const b=u;u=()=>ts(b())}let f,d=b=>{f=_.onStop=()=>{un(b,l,4)}},p;if(Ra)if(d=St,e?t&&Er(e,l,3,[u(),c?[]:void 0,d]):u(),n==="sync"){const b=Dw();p=b.__watcherHandles||(b.__watcherHandles=[])}else return St;let m=c?new Array(r.length).fill(Tl):Tl;const v=()=>{if(_.active)if(e){const b=_.run();(i||h||(c?b.some((T,S)=>Ca(T,m[S])):Ca(b,m)))&&(f&&f(),Er(e,l,3,[b,m===Tl?void 0:c&&m[0]===Tl?[]:m,d]),m=b)}else _.run()};v.allowRecurse=!!e;let g;n==="sync"?g=v:n==="post"?g=()=>Wt(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),g=()=>up(v));const _=new rp(u,g);e?t?v():m=_.run():n==="post"?Wt(_.run.bind(_),l&&l.suspense):_.run();const y=()=>{_.stop(),l&&l.scope&&Jd(l.scope.effects,_)};return p&&p.push(y),y}function zE(r,e,t){const i=this.proxy,n=Ge(r)?r.includes(".")?B0(i,r):()=>i[r]:r.bind(i,i);let s;de(e)?s=e:(s=e.handler,t=e);const o=It;io(this);const a=D0(n,s.bind(i),t);return o?io(o):os(),a}function B0(r,e){const t=e.split(".");return()=>{let i=r;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}function ts(r,e){if(!He(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),_t(r))ts(r.value,e);else if(pe(r))for(let t=0;t<r.length;t++)ts(r[t],e);else if(t0(r)||zs(r))r.forEach(t=>{ts(t,e)});else if(n0(r))for(const t in r)ts(r[t],e);return r}function mn(r,e){const t=Dt;if(t===null)return r;const i=ch(t)||t.proxy,n=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Qe]=e[s];o&&(de(o)&&(o={mounted:o,updated:o}),o.deep&&ts(a),n.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:u}))}return r}function En(r,e,t,i){const n=r.dirs,s=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(So(),Er(l,t,8,[r.el,a,r,e]),Eo())}}function WE(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ot(()=>{r.isMounted=!0}),Yr(()=>{r.isUnmounting=!0}),r}const hr=[Function,Array],N0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hr,onEnter:hr,onAfterEnter:hr,onEnterCancelled:hr,onBeforeLeave:hr,onLeave:hr,onAfterLeave:hr,onLeaveCancelled:hr,onBeforeAppear:hr,onAppear:hr,onAfterAppear:hr,onAppearCancelled:hr},YE={name:"BaseTransition",props:N0,setup(r,{slots:e}){const t=qr(),i=WE();let n;return()=>{const s=e.default&&U0(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==lr){o=m;break}}const a=Ve(r),{mode:l}=a;if(i.isLeaving)return ec(o);const u=wv(o);if(!u)return ec(o);const h=xf(u,a,i,t);Tf(u,h);const c=t.subTree,f=c&&wv(c);let d=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();n===void 0?n=m:m!==n&&(n=m,d=!0)}if(f&&f.type!==lr&&(!Kn(u,f)||d)){const m=xf(f,a,i,t);if(Tf(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},ec(o);l==="in-out"&&u.type!==lr&&(m.delayLeave=(v,g,_)=>{const y=k0(i,f);y[String(f.key)]=f,v._leaveCb=()=>{g(),v._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=_})}return o}}},qE=YE;function k0(r,e){const{leavingVNodes:t}=r;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function xf(r,e,t,i){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:c,onLeave:f,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:_}=e,y=String(r.key),b=k0(t,r),T=(C,M)=>{C&&Er(C,i,9,M)},S=(C,M)=>{const A=M[1];T(C,M),pe(C)?C.every(F=>F.length<=1)&&A():C.length<=1&&A()},E={mode:s,persisted:o,beforeEnter(C){let M=a;if(!t.isMounted)if(n)M=m||a;else return;C._leaveCb&&C._leaveCb(!0);const A=b[y];A&&Kn(r,A)&&A.el._leaveCb&&A.el._leaveCb(),T(M,[C])},enter(C){let M=l,A=u,F=h;if(!t.isMounted)if(n)M=v||l,A=g||u,F=_||h;else return;let O=!1;const I=C._enterCb=D=>{O||(O=!0,D?T(F,[C]):T(A,[C]),E.delayedLeave&&E.delayedLeave(),C._enterCb=void 0)};M?S(M,[C,I]):I()},leave(C,M){const A=String(r.key);if(C._enterCb&&C._enterCb(!0),t.isUnmounting)return M();T(c,[C]);let F=!1;const O=C._leaveCb=I=>{F||(F=!0,M(),I?T(p,[C]):T(d,[C]),C._leaveCb=void 0,b[A]===r&&delete b[A])};b[A]=r,f?S(f,[C,O]):O()},clone(C){return xf(C,e,t,i)}};return E}function ec(r){if(lh(r))return r=Ui(r),r.children=null,r}function wv(r){return lh(r)?r.children?r.children[0]:void 0:r}function Tf(r,e){r.shapeFlag&6&&r.component?Tf(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function U0(r,e=!1,t){let i=[],n=0;for(let s=0;s<r.length;s++){let o=r[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===ot?(o.patchFlag&128&&n++,i=i.concat(U0(o.children,e,a))):(e||o.type!==lr)&&i.push(a!=null?Ui(o,{key:a}):o)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Oe(r,e){return de(r)?(()=>yt({name:r.name},e,{setup:r}))():r}const ma=r=>!!r.type.__asyncLoader,lh=r=>r.type.__isKeepAlive;function KE(r,e){V0(r,"a",e)}function G0(r,e){V0(r,"da",e)}function V0(r,e,t=It){const i=r.__wdc||(r.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return r()});if(uh(e,i,t),t){let n=t.parent;for(;n&&n.parent;)lh(n.parent.vnode)&&ZE(i,e,t,n),n=n.parent}}function ZE(r,e,t,i){const n=uh(e,r,i,!0);cp(()=>{Jd(i[e],n)},t)}function uh(r,e,t=It,i=!1){if(t){const n=t[r]||(t[r]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;So(),io(t);const a=Er(e,t,r,o);return os(),Eo(),a});return i?n.unshift(s):n.push(s),s}}const Vi=r=>(e,t=It)=>(!Ra||r==="sp")&&uh(r,(...i)=>e(...i),t),hp=Vi("bm"),Ot=Vi("m"),JE=Vi("bu"),H0=Vi("u"),Yr=Vi("bum"),cp=Vi("um"),QE=Vi("sp"),ew=Vi("rtg"),tw=Vi("rtc");function rw(r,e=It){uh("ec",r,e)}const fp="components";function Sl(r,e){return j0(fp,r,!0,e)||r}const $0=Symbol.for("v-ndc");function nn(r){return Ge(r)?j0(fp,r,!1)||r:r||$0}function j0(r,e,t=!0,i=!1){const n=Dt||It;if(n){const s=n.type;if(r===fp){const a=Rw(s,!1);if(a&&(a===e||a===Wr(e)||a===ih(Wr(e))))return s}const o=Pv(n[r]||s[r],e)||Pv(n.appContext[r],e);return!o&&i?s:o}}function Pv(r,e){return r&&(r[e]||r[Wr(e)]||r[ih(Wr(e))])}function tc(r,e,t,i){let n;const s=t&&t[i];if(pe(r)||Ge(r)){n=new Array(r.length);for(let o=0,a=r.length;o<a;o++)n[o]=e(r[o],o,void 0,s&&s[o])}else if(typeof r=="number"){n=new Array(r);for(let o=0;o<r;o++)n[o]=e(o+1,o,void 0,s&&s[o])}else if(He(r))if(r[Symbol.iterator])n=Array.from(r,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(r);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];n[a]=e(r[u],u,a,s&&s[a])}}else n=[];return t&&(t[i]=n),n}function tt(r,e,t={},i,n){if(Dt.isCE||Dt.parent&&ma(Dt.parent)&&Dt.parent.isCE)return e!=="default"&&(t.name=e),Me("slot",t,i&&i());let s=r[e];s&&s._c&&(s._d=!1),K();const o=s&&X0(s(t)),a=Be(ot,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&r._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function X0(r){return r.some(e=>ro(e)?!(e.type===lr||e.type===ot&&!X0(e.children)):!0)?r:null}const Sf=r=>r?sb(r)?ch(r)||r.proxy:Sf(r.parent):null,va=yt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Sf(r.parent),$root:r=>Sf(r.root),$emit:r=>r.emit,$options:r=>dp(r),$forceUpdate:r=>r.f||(r.f=()=>up(r.update)),$nextTick:r=>r.n||(r.n=$t.bind(r.proxy)),$watch:r=>zE.bind(r)}),rc=(r,e)=>r!==Qe&&!r.__isScriptSetup&&Le(r,e),iw={get({_:r},e){const{ctx:t,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:l}=r;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(rc(i,e))return o[e]=1,i[e];if(n!==Qe&&Le(n,e))return o[e]=2,n[e];if((u=r.propsOptions[0])&&Le(u,e))return o[e]=3,s[e];if(t!==Qe&&Le(t,e))return o[e]=4,t[e];Ef&&(o[e]=0)}}const h=va[e];let c,f;if(h)return e==="$attrs"&&er(r,"get",e),h(r);if((c=a.__cssModules)&&(c=c[e]))return c;if(t!==Qe&&Le(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,Le(f,e))return f[e]},set({_:r},e,t){const{data:i,setupState:n,ctx:s}=r;return rc(n,e)?(n[e]=t,!0):i!==Qe&&Le(i,e)?(i[e]=t,!0):Le(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(s[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!t[o]||r!==Qe&&Le(r,o)||rc(e,o)||(a=s[0])&&Le(a,o)||Le(i,o)||Le(va,o)||Le(n.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:Le(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function z0(){return W0().slots}function nw(){return W0().attrs}function W0(){const r=qr();return r.setupContext||(r.setupContext=ab(r))}function Cv(r){return pe(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let Ef=!0;function sw(r){const e=dp(r),t=r.proxy,i=r.ctx;Ef=!1,e.beforeCreate&&Mv(e.beforeCreate,r,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:c,mounted:f,beforeUpdate:d,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:_,destroyed:y,unmounted:b,render:T,renderTracked:S,renderTriggered:E,errorCaptured:C,serverPrefetch:M,expose:A,inheritAttrs:F,components:O,directives:I,filters:D}=e;if(u&&ow(u,i,null),o)for(const L in o){const Q=o[L];de(Q)&&(i[L]=Q.bind(t))}if(n){const L=n.call(t,t);He(L)&&(r.data=bn(L))}if(Ef=!0,s)for(const L in s){const Q=s[L],ee=de(Q)?Q.bind(t,t):de(Q.get)?Q.get.bind(t,t):St,X=!de(Q)&&de(Q.set)?Q.set.bind(t):St,G=k({get:ee,set:X});Object.defineProperty(i,L,{enumerable:!0,configurable:!0,get:()=>G.value,set:W=>G.value=W})}if(a)for(const L in a)Y0(a[L],i,t,L);if(l){const L=de(l)?l.call(t):l;Reflect.ownKeys(L).forEach(Q=>{vi(Q,L[Q])})}h&&Mv(h,r,"c");function B(L,Q){pe(Q)?Q.forEach(ee=>L(ee.bind(t))):Q&&L(Q.bind(t))}if(B(hp,c),B(Ot,f),B(JE,d),B(H0,p),B(KE,m),B(G0,v),B(rw,C),B(tw,S),B(ew,E),B(Yr,_),B(cp,b),B(QE,M),pe(A))if(A.length){const L=r.exposed||(r.exposed={});A.forEach(Q=>{Object.defineProperty(L,Q,{get:()=>t[Q],set:ee=>t[Q]=ee})})}else r.exposed||(r.exposed={});T&&r.render===St&&(r.render=T),F!=null&&(r.inheritAttrs=F),O&&(r.components=O),I&&(r.directives=I)}function ow(r,e,t=St){pe(r)&&(r=wf(r));for(const i in r){const n=r[i];let s;He(n)?"default"in n?s=rt(n.from||i,n.default,!0):s=rt(n.from||i):s=rt(n),_t(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function Mv(r,e,t){Er(pe(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function Y0(r,e,t,i){const n=i.includes(".")?B0(t,i):()=>t[i];if(Ge(r)){const s=e[r];de(s)&&Ee(n,s)}else if(de(r))Ee(n,r.bind(t));else if(He(r))if(pe(r))r.forEach(s=>Y0(s,e,t,i));else{const s=de(r.handler)?r.handler.bind(t):e[r.handler];de(s)&&Ee(n,s,r)}}function dp(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=r.appContext,a=s.get(e);let l;return a?l=a:!n.length&&!t&&!i?l=e:(l={},n.length&&n.forEach(u=>Ou(l,u,o,!0)),Ou(l,e,o)),He(e)&&s.set(e,l),l}function Ou(r,e,t,i=!1){const{mixins:n,extends:s}=e;s&&Ou(r,s,t,!0),n&&n.forEach(o=>Ou(r,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=aw[o]||t&&t[o];r[o]=a?a(r[o],e[o]):e[o]}return r}const aw={data:Iv,props:Av,emits:Av,methods:ra,computed:ra,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:ra,directives:ra,watch:uw,provide:Iv,inject:lw};function Iv(r,e){return e?r?function(){return yt(de(r)?r.call(this,this):r,de(e)?e.call(this,this):e)}:e:r}function lw(r,e){return ra(wf(r),wf(e))}function wf(r){if(pe(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Gt(r,e){return r?[...new Set([].concat(r,e))]:e}function ra(r,e){return r?yt(Object.create(null),r,e):e}function Av(r,e){return r?pe(r)&&pe(e)?[...new Set([...r,...e])]:yt(Object.create(null),Cv(r),Cv(e??{})):e}function uw(r,e){if(!r)return e;if(!e)return r;const t=yt(Object.create(null),r);for(const i in e)t[i]=Gt(r[i],e[i]);return t}function q0(){return{app:null,config:{isNativeTag:US,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hw=0;function cw(r,e){return function(i,n=null){de(i)||(i=yt({},i)),n!=null&&!He(n)&&(n=null);const s=q0(),o=new Set;let a=!1;const l=s.app={_uid:hw++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:Bw,get config(){return s.config},set config(u){},use(u,...h){return o.has(u)||(u&&de(u.install)?(o.add(u),u.install(l,...h)):de(u)&&(o.add(u),u(l,...h))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,h){return h?(s.components[u]=h,l):s.components[u]},directive(u,h){return h?(s.directives[u]=h,l):s.directives[u]},mount(u,h,c){if(!a){const f=Me(i,n);return f.appContext=s,h&&e?e(f,u):r(f,u,c),a=!0,l._container=u,u.__vue_app__=l,ch(f.component)||f.component.proxy}},unmount(){a&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,h){return s.provides[u]=h,l},runWithContext(u){Ru=l;try{return u()}finally{Ru=null}}};return l}}let Ru=null;function vi(r,e){if(It){let t=It.provides;const i=It.parent&&It.parent.provides;i===t&&(t=It.provides=Object.create(i)),t[r]=e}}function rt(r,e,t=!1){const i=It||Dt;if(i||Ru){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Ru._context.provides;if(n&&r in n)return n[r];if(arguments.length>1)return t&&de(e)?e.call(i&&i.proxy):e}}function fw(r,e,t,i=!1){const n={},s={};Cu(s,hh,1),r.propsDefaults=Object.create(null),K0(r,e,n,s);for(const o in r.propsOptions[0])o in n||(n[o]=void 0);t?r.props=i?n:b0(n):r.type.props?r.props=n:r.props=s,r.attrs=s}function dw(r,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=r,a=Ve(n),[l]=r.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=r.vnode.dynamicProps;for(let c=0;c<h.length;c++){let f=h[c];if(ah(r.emitsOptions,f))continue;const d=e[f];if(l)if(Le(s,f))d!==s[f]&&(s[f]=d,u=!0);else{const p=Wr(f);n[p]=Pf(l,a,p,d,r,!1)}else d!==s[f]&&(s[f]=d,u=!0)}}}else{K0(r,e,n,s)&&(u=!0);let h;for(const c in a)(!e||!Le(e,c)&&((h=ys(c))===c||!Le(e,h)))&&(l?t&&(t[c]!==void 0||t[h]!==void 0)&&(n[c]=Pf(l,a,c,void 0,r,!0)):delete n[c]);if(s!==a)for(const c in s)(!e||!Le(e,c))&&(delete s[c],u=!0)}u&&ki(r,"set","$attrs")}function K0(r,e,t,i){const[n,s]=r.propsOptions;let o=!1,a;if(e)for(let l in e){if(hu(l))continue;const u=e[l];let h;n&&Le(n,h=Wr(l))?!s||!s.includes(h)?t[h]=u:(a||(a={}))[h]=u:ah(r.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(s){const l=Ve(t),u=a||Qe;for(let h=0;h<s.length;h++){const c=s[h];t[c]=Pf(n,l,c,u[c],r,!Le(u,c))}}return o}function Pf(r,e,t,i,n,s){const o=r[t];if(o!=null){const a=Le(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=n;t in u?i=u[t]:(io(n),i=u[t]=l.call(null,e),os())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===ys(t))&&(i=!0))}return i}function Z0(r,e,t=!1){const i=e.propsCache,n=i.get(r);if(n)return n;const s=r.props,o={},a=[];let l=!1;if(!de(r)){const h=c=>{l=!0;const[f,d]=Z0(c,e,!0);yt(o,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}if(!s&&!l)return He(r)&&i.set(r,Xs),Xs;if(pe(s))for(let h=0;h<s.length;h++){const c=Wr(s[h]);Ov(c)&&(o[c]=Qe)}else if(s)for(const h in s){const c=Wr(h);if(Ov(c)){const f=s[h],d=o[c]=pe(f)||de(f)?{type:f}:yt({},f);if(d){const p=Lv(Boolean,d.type),m=Lv(String,d.type);d[0]=p>-1,d[1]=m<0||p<m,(p>-1||Le(d,"default"))&&a.push(c)}}}const u=[o,a];return He(r)&&i.set(r,u),u}function Ov(r){return r[0]!=="$"}function Rv(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function Fv(r,e){return Rv(r)===Rv(e)}function Lv(r,e){return pe(e)?e.findIndex(t=>Fv(t,r)):de(e)&&Fv(e,r)?0:-1}const J0=r=>r[0]==="_"||r==="$stable",pp=r=>pe(r)?r.map(ai):[ai(r)],pw=(r,e,t)=>{if(e._n)return e;const i=ke((...n)=>pp(e(...n)),t);return i._c=!1,i},Q0=(r,e,t)=>{const i=r._ctx;for(const n in r){if(J0(n))continue;const s=r[n];if(de(s))e[n]=pw(n,s,i);else if(s!=null){const o=pp(s);e[n]=()=>o}}},eb=(r,e)=>{const t=pp(e);r.slots.default=()=>t},mw=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=Ve(e),Cu(e,"_",t)):Q0(e,r.slots={})}else r.slots={},e&&eb(r,e);Cu(r.slots,hh,1)},vw=(r,e,t)=>{const{vnode:i,slots:n}=r;let s=!0,o=Qe;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(yt(n,e),!t&&a===1&&delete n._):(s=!e.$stable,Q0(e,n)),o=e}else e&&(eb(r,e),o={default:1});if(s)for(const a in n)!J0(a)&&!(a in o)&&delete n[a]};function Cf(r,e,t,i,n=!1){if(pe(r)){r.forEach((f,d)=>Cf(f,e&&(pe(e)?e[d]:e),t,i,n));return}if(ma(i)&&!n)return;const s=i.shapeFlag&4?ch(i.component)||i.component.proxy:i.el,o=n?null:s,{i:a,r:l}=r,u=e&&e.r,h=a.refs===Qe?a.refs={}:a.refs,c=a.setupState;if(u!=null&&u!==l&&(Ge(u)?(h[u]=null,Le(c,u)&&(c[u]=null)):_t(u)&&(u.value=null)),de(l))un(l,a,12,[o,h]);else{const f=Ge(l),d=_t(l);if(f||d){const p=()=>{if(r.f){const m=f?Le(c,l)?c[l]:h[l]:l.value;n?pe(m)&&Jd(m,s):pe(m)?m.includes(s)||m.push(s):f?(h[l]=[s],Le(c,l)&&(c[l]=h[l])):(l.value=[s],r.k&&(h[r.k]=l.value))}else f?(h[l]=o,Le(c,l)&&(c[l]=o)):d&&(l.value=o,r.k&&(h[r.k]=o))};o?(p.id=-1,Wt(p,t)):p()}}}const Wt=XE;function gw(r){return _w(r)}function _w(r,e){const t=mf();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:c,nextSibling:f,setScopeId:d=St,insertStaticContent:p}=r,m=(w,P,R,H=null,V=null,$=null,Z=!1,Y=null,q=!!P.dynamicChildren)=>{if(w===P)return;w&&!Kn(w,P)&&(H=ge(w),W(w,V,$,!0),w=null),P.patchFlag===-2&&(q=!1,P.dynamicChildren=null);const{type:z,ref:le,shapeFlag:ne}=P;switch(z){case wo:v(w,P,R,H);break;case lr:g(w,P,R,H);break;case ic:w==null&&_(P,R,H,Z);break;case ot:O(w,P,R,H,V,$,Z,Y,q);break;default:ne&1?T(w,P,R,H,V,$,Z,Y,q):ne&6?I(w,P,R,H,V,$,Z,Y,q):(ne&64||ne&128)&&z.process(w,P,R,H,V,$,Z,Y,q,$e)}le!=null&&V&&Cf(le,w&&w.ref,$,P||w,!P)},v=(w,P,R,H)=>{if(w==null)i(P.el=a(P.children),R,H);else{const V=P.el=w.el;P.children!==w.children&&u(V,P.children)}},g=(w,P,R,H)=>{w==null?i(P.el=l(P.children||""),R,H):P.el=w.el},_=(w,P,R,H)=>{[w.el,w.anchor]=p(w.children,P,R,H,w.el,w.anchor)},y=({el:w,anchor:P},R,H)=>{let V;for(;w&&w!==P;)V=f(w),i(w,R,H),w=V;i(P,R,H)},b=({el:w,anchor:P})=>{let R;for(;w&&w!==P;)R=f(w),n(w),w=R;n(P)},T=(w,P,R,H,V,$,Z,Y,q)=>{Z=Z||P.type==="svg",w==null?S(P,R,H,V,$,Z,Y,q):M(w,P,V,$,Z,Y,q)},S=(w,P,R,H,V,$,Z,Y)=>{let q,z;const{type:le,props:ne,shapeFlag:ae,transition:U,dirs:re}=w;if(q=w.el=o(w.type,$,ne&&ne.is,ne),ae&8?h(q,w.children):ae&16&&C(w.children,q,null,H,V,$&&le!=="foreignObject",Z,Y),re&&En(w,null,H,"created"),E(q,w,w.scopeId,Z,H),ne){for(const Re in ne)Re!=="value"&&!hu(Re)&&s(q,Re,null,ne[Re],$,w.children,H,V,te);"value"in ne&&s(q,"value",null,ne.value),(z=ne.onVnodeBeforeMount)&&ei(z,H,w)}re&&En(w,null,H,"beforeMount");const be=(!V||V&&!V.pendingBranch)&&U&&!U.persisted;be&&U.beforeEnter(q),i(q,P,R),((z=ne&&ne.onVnodeMounted)||be||re)&&Wt(()=>{z&&ei(z,H,w),be&&U.enter(q),re&&En(w,null,H,"mounted")},V)},E=(w,P,R,H,V)=>{if(R&&d(w,R),H)for(let $=0;$<H.length;$++)d(w,H[$]);if(V){let $=V.subTree;if(P===$){const Z=V.vnode;E(w,Z,Z.scopeId,Z.slotScopeIds,V.parent)}}},C=(w,P,R,H,V,$,Z,Y,q=0)=>{for(let z=q;z<w.length;z++){const le=w[z]=Y?tn(w[z]):ai(w[z]);m(null,le,P,R,H,V,$,Z,Y)}},M=(w,P,R,H,V,$,Z)=>{const Y=P.el=w.el;let{patchFlag:q,dynamicChildren:z,dirs:le}=P;q|=w.patchFlag&16;const ne=w.props||Qe,ae=P.props||Qe;let U;R&&wn(R,!1),(U=ae.onVnodeBeforeUpdate)&&ei(U,R,P,w),le&&En(P,w,R,"beforeUpdate"),R&&wn(R,!0);const re=V&&P.type!=="foreignObject";if(z?A(w.dynamicChildren,z,Y,R,H,re,$):Z||Q(w,P,Y,null,R,H,re,$,!1),q>0){if(q&16)F(Y,P,ne,ae,R,H,V);else if(q&2&&ne.class!==ae.class&&s(Y,"class",null,ae.class,V),q&4&&s(Y,"style",ne.style,ae.style,V),q&8){const be=P.dynamicProps;for(let Re=0;Re<be.length;Re++){const st=be[Re],Rr=ne[st],ws=ae[st];(ws!==Rr||st==="value")&&s(Y,st,Rr,ws,V,w.children,R,H,te)}}q&1&&w.children!==P.children&&h(Y,P.children)}else!Z&&z==null&&F(Y,P,ne,ae,R,H,V);((U=ae.onVnodeUpdated)||le)&&Wt(()=>{U&&ei(U,R,P,w),le&&En(P,w,R,"updated")},H)},A=(w,P,R,H,V,$,Z)=>{for(let Y=0;Y<P.length;Y++){const q=w[Y],z=P[Y],le=q.el&&(q.type===ot||!Kn(q,z)||q.shapeFlag&70)?c(q.el):R;m(q,z,le,null,H,V,$,Z,!0)}},F=(w,P,R,H,V,$,Z)=>{if(R!==H){if(R!==Qe)for(const Y in R)!hu(Y)&&!(Y in H)&&s(w,Y,R[Y],null,Z,P.children,V,$,te);for(const Y in H){if(hu(Y))continue;const q=H[Y],z=R[Y];q!==z&&Y!=="value"&&s(w,Y,z,q,Z,P.children,V,$,te)}"value"in H&&s(w,"value",R.value,H.value)}},O=(w,P,R,H,V,$,Z,Y,q)=>{const z=P.el=w?w.el:a(""),le=P.anchor=w?w.anchor:a("");let{patchFlag:ne,dynamicChildren:ae,slotScopeIds:U}=P;U&&(Y=Y?Y.concat(U):U),w==null?(i(z,R,H),i(le,R,H),C(P.children,R,le,V,$,Z,Y,q)):ne>0&&ne&64&&ae&&w.dynamicChildren?(A(w.dynamicChildren,ae,R,V,$,Z,Y),(P.key!=null||V&&P===V.subTree)&&mp(w,P,!0)):Q(w,P,R,le,V,$,Z,Y,q)},I=(w,P,R,H,V,$,Z,Y,q)=>{P.slotScopeIds=Y,w==null?P.shapeFlag&512?V.ctx.activate(P,R,H,Z,q):D(P,R,H,V,$,Z,q):N(w,P,q)},D=(w,P,R,H,V,$,Z)=>{const Y=w.component=Mw(w,H,V);if(lh(w)&&(Y.ctx.renderer=$e),Iw(Y),Y.asyncDep){if(V&&V.registerDep(Y,B),!w.el){const q=Y.subTree=Me(lr);g(null,q,P,R)}return}B(Y,w,P,R,V,$,Z)},N=(w,P,R)=>{const H=P.component=w.component;if(HE(w,P,R))if(H.asyncDep&&!H.asyncResolved){L(H,P,R);return}else H.next=P,BE(H.update),H.update();else P.el=w.el,H.vnode=P},B=(w,P,R,H,V,$,Z)=>{const Y=()=>{if(w.isMounted){let{next:le,bu:ne,u:ae,parent:U,vnode:re}=w,be=le,Re;wn(w,!1),le?(le.el=re.el,L(w,le,Z)):le=re,ne&&Jh(ne),(Re=le.props&&le.props.onVnodeBeforeUpdate)&&ei(Re,U,le,re),wn(w,!0);const st=Qh(w),Rr=w.subTree;w.subTree=st,m(Rr,st,c(Rr.el),ge(Rr),w,V,$),le.el=st.el,be===null&&$E(w,st.el),ae&&Wt(ae,V),(Re=le.props&&le.props.onVnodeUpdated)&&Wt(()=>ei(Re,U,le,re),V)}else{let le;const{el:ne,props:ae}=P,{bm:U,m:re,parent:be}=w,Re=ma(P);if(wn(w,!1),U&&Jh(U),!Re&&(le=ae&&ae.onVnodeBeforeMount)&&ei(le,be,P),wn(w,!0),ne&&_e){const st=()=>{w.subTree=Qh(w),_e(ne,w.subTree,w,V,null)};Re?P.type.__asyncLoader().then(()=>!w.isUnmounted&&st()):st()}else{const st=w.subTree=Qh(w);m(null,st,R,H,w,V,$),P.el=st.el}if(re&&Wt(re,V),!Re&&(le=ae&&ae.onVnodeMounted)){const st=P;Wt(()=>ei(le,be,st),V)}(P.shapeFlag&256||be&&ma(be.vnode)&&be.vnode.shapeFlag&256)&&w.a&&Wt(w.a,V),w.isMounted=!0,P=R=H=null}},q=w.effect=new rp(Y,()=>up(z),w.scope),z=w.update=()=>q.run();z.id=w.uid,wn(w,!0),z()},L=(w,P,R)=>{P.component=w;const H=w.vnode.props;w.vnode=P,w.next=null,dw(w,P.props,H,R),vw(w,P.children,R),So(),Sv(),Eo()},Q=(w,P,R,H,V,$,Z,Y,q=!1)=>{const z=w&&w.children,le=w?w.shapeFlag:0,ne=P.children,{patchFlag:ae,shapeFlag:U}=P;if(ae>0){if(ae&128){X(z,ne,R,H,V,$,Z,Y,q);return}else if(ae&256){ee(z,ne,R,H,V,$,Z,Y,q);return}}U&8?(le&16&&te(z,V,$),ne!==z&&h(R,ne)):le&16?U&16?X(z,ne,R,H,V,$,Z,Y,q):te(z,V,$,!0):(le&8&&h(R,""),U&16&&C(ne,R,H,V,$,Z,Y,q))},ee=(w,P,R,H,V,$,Z,Y,q)=>{w=w||Xs,P=P||Xs;const z=w.length,le=P.length,ne=Math.min(z,le);let ae;for(ae=0;ae<ne;ae++){const U=P[ae]=q?tn(P[ae]):ai(P[ae]);m(w[ae],U,R,null,V,$,Z,Y,q)}z>le?te(w,V,$,!0,!1,ne):C(P,R,H,V,$,Z,Y,q,ne)},X=(w,P,R,H,V,$,Z,Y,q)=>{let z=0;const le=P.length;let ne=w.length-1,ae=le-1;for(;z<=ne&&z<=ae;){const U=w[z],re=P[z]=q?tn(P[z]):ai(P[z]);if(Kn(U,re))m(U,re,R,null,V,$,Z,Y,q);else break;z++}for(;z<=ne&&z<=ae;){const U=w[ne],re=P[ae]=q?tn(P[ae]):ai(P[ae]);if(Kn(U,re))m(U,re,R,null,V,$,Z,Y,q);else break;ne--,ae--}if(z>ne){if(z<=ae){const U=ae+1,re=U<le?P[U].el:H;for(;z<=ae;)m(null,P[z]=q?tn(P[z]):ai(P[z]),R,re,V,$,Z,Y,q),z++}}else if(z>ae)for(;z<=ne;)W(w[z],V,$,!0),z++;else{const U=z,re=z,be=new Map;for(z=re;z<=ae;z++){const ir=P[z]=q?tn(P[z]):ai(P[z]);ir.key!=null&&be.set(ir.key,z)}let Re,st=0;const Rr=ae-re+1;let ws=!1,fv=0;const Do=new Array(Rr);for(z=0;z<Rr;z++)Do[z]=0;for(z=U;z<=ne;z++){const ir=w[z];if(st>=Rr){W(ir,V,$,!0);continue}let Qr;if(ir.key!=null)Qr=be.get(ir.key);else for(Re=re;Re<=ae;Re++)if(Do[Re-re]===0&&Kn(ir,P[Re])){Qr=Re;break}Qr===void 0?W(ir,V,$,!0):(Do[Qr-re]=z+1,Qr>=fv?fv=Qr:ws=!0,m(ir,P[Qr],R,null,V,$,Z,Y,q),st++)}const dv=ws?yw(Do):Xs;for(Re=dv.length-1,z=Rr-1;z>=0;z--){const ir=re+z,Qr=P[ir],pv=ir+1<le?P[ir+1].el:H;Do[z]===0?m(null,Qr,R,pv,V,$,Z,Y,q):ws&&(Re<0||z!==dv[Re]?G(Qr,R,pv,2):Re--)}}},G=(w,P,R,H,V=null)=>{const{el:$,type:Z,transition:Y,children:q,shapeFlag:z}=w;if(z&6){G(w.component.subTree,P,R,H);return}if(z&128){w.suspense.move(P,R,H);return}if(z&64){Z.move(w,P,R,$e);return}if(Z===ot){i($,P,R);for(let ne=0;ne<q.length;ne++)G(q[ne],P,R,H);i(w.anchor,P,R);return}if(Z===ic){y(w,P,R);return}if(H!==2&&z&1&&Y)if(H===0)Y.beforeEnter($),i($,P,R),Wt(()=>Y.enter($),V);else{const{leave:ne,delayLeave:ae,afterLeave:U}=Y,re=()=>i($,P,R),be=()=>{ne($,()=>{re(),U&&U()})};ae?ae($,re,be):be()}else i($,P,R)},W=(w,P,R,H=!1,V=!1)=>{const{type:$,props:Z,ref:Y,children:q,dynamicChildren:z,shapeFlag:le,patchFlag:ne,dirs:ae}=w;if(Y!=null&&Cf(Y,null,R,w,!0),le&256){P.ctx.deactivate(w);return}const U=le&1&&ae,re=!ma(w);let be;if(re&&(be=Z&&Z.onVnodeBeforeUnmount)&&ei(be,P,w),le&6)xe(w.component,R,H);else{if(le&128){w.suspense.unmount(R,H);return}U&&En(w,null,P,"beforeUnmount"),le&64?w.type.remove(w,P,R,V,$e,H):z&&($!==ot||ne>0&&ne&64)?te(z,P,R,!1,!0):($===ot&&ne&384||!V&&le&16)&&te(q,P,R),H&&se(w)}(re&&(be=Z&&Z.onVnodeUnmounted)||U)&&Wt(()=>{be&&ei(be,P,w),U&&En(w,null,P,"unmounted")},R)},se=w=>{const{type:P,el:R,anchor:H,transition:V}=w;if(P===ot){he(R,H);return}if(P===ic){b(w);return}const $=()=>{n(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(w.shapeFlag&1&&V&&!V.persisted){const{leave:Z,delayLeave:Y}=V,q=()=>Z(R,$);Y?Y(w.el,$,q):q()}else $()},he=(w,P)=>{let R;for(;w!==P;)R=f(w),n(w),w=R;n(P)},xe=(w,P,R)=>{const{bum:H,scope:V,update:$,subTree:Z,um:Y}=w;H&&Jh(H),V.stop(),$&&($.active=!1,W(Z,w,P,R)),Y&&Wt(Y,P),Wt(()=>{w.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},te=(w,P,R,H=!1,V=!1,$=0)=>{for(let Z=$;Z<w.length;Z++)W(w[Z],P,R,H,V)},ge=w=>w.shapeFlag&6?ge(w.component.subTree):w.shapeFlag&128?w.suspense.next():f(w.anchor||w.el),Ce=(w,P,R)=>{w==null?P._vnode&&W(P._vnode,null,null,!0):m(P._vnode||null,w,P,null,null,null,R),Sv(),O0(),P._vnode=w},$e={p:m,um:W,m:G,r:se,mt:D,mc:C,pc:Q,pbc:A,n:ge,o:r};let Te,_e;return e&&([Te,_e]=e($e)),{render:Ce,hydrate:Te,createApp:cw(Ce,Te)}}function wn({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function mp(r,e,t=!1){const i=r.children,n=e.children;if(pe(i)&&pe(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=tn(n[s]),a.el=o.el),t||mp(o,a)),a.type===wo&&(a.el=o.el)}}function yw(r){const e=r.slice(),t=[0];let i,n,s,o,a;const l=r.length;for(i=0;i<l;i++){const u=r[i];if(u!==0){if(n=t[t.length-1],r[n]<u){e[i]=n,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,r[t[a]]<u?s=a+1:o=a;u<r[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const bw=r=>r.__isTeleport,ga=r=>r&&(r.disabled||r.disabled===""),Dv=r=>typeof SVGElement<"u"&&r instanceof SVGElement,Mf=(r,e)=>{const t=r&&r.to;return Ge(t)?e?e(t):null:t},xw={__isTeleport:!0,process(r,e,t,i,n,s,o,a,l,u){const{mc:h,pc:c,pbc:f,o:{insert:d,querySelector:p,createText:m,createComment:v}}=u,g=ga(e.props);let{shapeFlag:_,children:y,dynamicChildren:b}=e;if(r==null){const T=e.el=m(""),S=e.anchor=m("");d(T,t,i),d(S,t,i);const E=e.target=Mf(e.props,p),C=e.targetAnchor=m("");E&&(d(C,E),o=o||Dv(E));const M=(A,F)=>{_&16&&h(y,A,F,n,s,o,a,l)};g?M(t,S):E&&M(E,C)}else{e.el=r.el;const T=e.anchor=r.anchor,S=e.target=r.target,E=e.targetAnchor=r.targetAnchor,C=ga(r.props),M=C?t:S,A=C?T:E;if(o=o||Dv(S),b?(f(r.dynamicChildren,b,M,n,s,o,a),mp(r,e,!0)):l||c(r,e,M,A,n,s,o,a,!1),g)C||El(e,t,T,u,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const F=e.target=Mf(e.props,p);F&&El(e,F,null,u,0)}else C&&El(e,S,E,u,1)}rb(e)},remove(r,e,t,i,{um:n,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:h,target:c,props:f}=r;if(c&&s(h),(o||!ga(f))&&(s(u),a&16))for(let d=0;d<l.length;d++){const p=l[d];n(p,e,t,!0,!!p.dynamicChildren)}},move:El,hydrate:Tw};function El(r,e,t,{o:{insert:i},m:n},s=2){s===0&&i(r.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=r,c=s===2;if(c&&i(o,e,t),(!c||ga(h))&&l&16)for(let f=0;f<u.length;f++)n(u[f],e,t,2);c&&i(a,e,t)}function Tw(r,e,t,i,n,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const h=e.target=Mf(e.props,l);if(h){const c=h._lpa||h.firstChild;if(e.shapeFlag&16)if(ga(e.props))e.anchor=u(o(r),e,a(r),t,i,n,s),e.targetAnchor=c;else{e.anchor=o(r);let f=c;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(c,e,h,t,i,n,s)}rb(e)}return e.anchor&&o(e.anchor)}const tb=xw;function rb(r){const e=r.ctx;if(e&&e.ut){let t=r.children[0].el;for(;t!==r.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const ot=Symbol.for("v-fgt"),wo=Symbol.for("v-txt"),lr=Symbol.for("v-cmt"),ic=Symbol.for("v-stc"),_a=[];let Vr=null;function K(r=!1){_a.push(Vr=r?null:[])}function Sw(){_a.pop(),Vr=_a[_a.length-1]||null}let Oa=1;function Bv(r){Oa+=r}function ib(r){return r.dynamicChildren=Oa>0?Vr||Xs:null,Sw(),Oa>0&&Vr&&Vr.push(r),r}function ue(r,e,t,i,n,s){return ib(ye(r,e,t,i,n,s,!0))}function Be(r,e,t,i,n){return ib(Me(r,e,t,i,n,!0))}function ro(r){return r?r.__v_isVNode===!0:!1}function Kn(r,e){return r.type===e.type&&r.key===e.key}const hh="__vInternal",nb=({key:r})=>r??null,cu=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?Ge(r)||_t(r)||de(r)?{i:Dt,r,k:e,f:!!t}:r:null);function ye(r,e=null,t=null,i=0,n=null,s=r===ot?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&nb(e),ref:e&&cu(e),scopeId:L0,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Dt};return a?(vp(l,t),s&128&&r.normalize(l)):t&&(l.shapeFlag|=Ge(t)?8:16),Oa>0&&!o&&Vr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Vr.push(l),l}const Me=Ew;function Ew(r,e=null,t=null,i=0,n=null,s=!1){if((!r||r===$0)&&(r=lr),ro(r)){const a=Ui(r,e,!0);return t&&vp(a,t),Oa>0&&!s&&Vr&&(a.shapeFlag&6?Vr[Vr.indexOf(r)]=a:Vr.push(a)),a.patchFlag|=-2,a}if(Fw(r)&&(r=r.__vccOpts),e){e=ww(e);let{class:a,style:l}=e;a&&!Ge(a)&&(e.class=me(a)),He(l)&&(x0(l)&&!pe(l)&&(l=yt({},l)),e.style=yr(l))}const o=Ge(r)?1:jE(r)?128:bw(r)?64:He(r)?4:de(r)?2:0;return ye(r,e,t,i,n,o,s,!0)}function ww(r){return r?x0(r)||hh in r?yt({},r):r:null}function Ui(r,e,t=!1){const{props:i,ref:n,patchFlag:s,children:o}=r,a=e?pi(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&nb(a),ref:e&&e.ref?t&&n?pe(n)?n.concat(cu(e)):[n,cu(e)]:cu(e):n,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==ot?s===-1?16:s|16:s,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Ui(r.ssContent),ssFallback:r.ssFallback&&Ui(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function ia(r=" ",e=0){return Me(wo,null,r,e)}function Pe(r="",e=!1){return e?(K(),Be(lr,null,r)):Me(lr,null,r)}function ai(r){return r==null||typeof r=="boolean"?Me(lr):pe(r)?Me(ot,null,r.slice()):typeof r=="object"?tn(r):Me(wo,null,String(r))}function tn(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Ui(r)}function vp(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(pe(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),vp(r,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!(hh in e)?e._ctx=Dt:n===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:Dt},t=32):(e=String(e),i&64?(t=16,e=[ia(e)]):t=8);r.children=e,r.shapeFlag|=t}function pi(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=me([e.class,i.class]));else if(n==="style")e.style=yr([e.style,i.style]);else if(eh(n)){const s=e[n],o=i[n];o&&s!==o&&!(pe(s)&&s.includes(o))&&(e[n]=s?[].concat(s,o):o)}else n!==""&&(e[n]=i[n])}return e}function ei(r,e,t,i=null){Er(r,e,7,[t,i])}const Pw=q0();let Cw=0;function Mw(r,e,t){const i=r.type,n=(e?e.appContext:r.appContext)||Pw,s={uid:Cw++,vnode:r,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new a0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Z0(i,n),emitsOptions:F0(i,n),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:i.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=UE.bind(null,s),r.ce&&r.ce(s),s}let It=null;const qr=()=>It||Dt;let gp,Ps,Nv="__VUE_INSTANCE_SETTERS__";(Ps=mf()[Nv])||(Ps=mf()[Nv]=[]),Ps.push(r=>It=r),gp=r=>{Ps.length>1?Ps.forEach(e=>e(r)):Ps[0](r)};const io=r=>{gp(r),r.scope.on()},os=()=>{It&&It.scope.off(),gp(null)};function sb(r){return r.vnode.shapeFlag&4}let Ra=!1;function Iw(r,e=!1){Ra=e;const{props:t,children:i}=r.vnode,n=sb(r);fw(r,t,n,e),mw(r,i);const s=n?Aw(r,e):void 0;return Ra=!1,s}function Aw(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=T0(new Proxy(r.ctx,iw));const{setup:i}=t;if(i){const n=r.setupContext=i.length>1?ab(r):null;io(r),So();const s=un(i,r,0,[r.props,n]);if(Eo(),os(),r0(s)){if(s.then(os,os),e)return s.then(o=>{kv(r,o,e)}).catch(o=>{oh(o,r,0)});r.asyncDep=s}else kv(r,s,e)}else ob(r,e)}function kv(r,e,t){de(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:He(e)&&(r.setupState=P0(e)),ob(r,t)}let Uv;function ob(r,e,t){const i=r.type;if(!r.render){if(!e&&Uv&&!i.render){const n=i.template||dp(r).template;if(n){const{isCustomElement:s,compilerOptions:o}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,u=yt(yt({isCustomElement:s,delimiters:a},o),l);i.render=Uv(n,u)}}r.render=i.render||St}io(r),So(),sw(r),Eo(),os()}function Ow(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(e,t){return er(r,"get","$attrs"),e[t]}}))}function ab(r){const e=t=>{r.exposed=t||{}};return{get attrs(){return Ow(r)},slots:r.slots,emit:r.emit,expose:e}}function ch(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(P0(T0(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in va)return va[t](r)},has(e,t){return t in e||t in va}}))}function Rw(r,e=!0){return de(r)?r.displayName||r.name:r.name||e&&r.__name}function Fw(r){return de(r)&&"__vccOpts"in r}const k=(r,e)=>M0(r,e,Ra);function _p(r,e,t){const i=arguments.length;return i===2?He(e)&&!pe(e)?ro(e)?Me(r,null,[e]):Me(r,e):Me(r,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&ro(t)&&(t=[t]),Me(r,e,t))}const Lw=Symbol.for("v-scx"),Dw=()=>rt(Lw),Bw="3.3.4",Nw="http://www.w3.org/2000/svg",Zn=typeof document<"u"?document:null,Gv=Zn&&Zn.createElement("template"),kw={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const n=e?Zn.createElementNS(Nw,r):Zn.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:r=>Zn.createTextNode(r),createComment:r=>Zn.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Zn.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,i,n,s){const o=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{Gv.innerHTML=i?`<svg>${r}</svg>`:r;const a=Gv.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Uw(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function Gw(r,e,t){const i=r.style,n=Ge(t);if(t&&!n){if(e&&!Ge(e))for(const s in e)t[s]==null&&If(i,s,"");for(const s in t)If(i,s,t[s])}else{const s=i.display;n?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=s)}}const Vv=/\s*!important$/;function If(r,e,t){if(pe(t))t.forEach(i=>If(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=Vw(r,e);Vv.test(t)?r.setProperty(ys(i),t.replace(Vv,""),"important"):r[i]=t}}const Hv=["Webkit","Moz","ms"],nc={};function Vw(r,e){const t=nc[e];if(t)return t;let i=Wr(e);if(i!=="filter"&&i in r)return nc[e]=i;i=ih(i);for(let n=0;n<Hv.length;n++){const s=Hv[n]+i;if(s in r)return nc[e]=s}return e}const $v="http://www.w3.org/1999/xlink";function Hw(r,e,t,i,n){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS($v,e.slice(6,e.length)):r.setAttributeNS($v,e,t);else{const s=JS(e);t==null||s&&!s0(t)?r.removeAttribute(e):r.setAttribute(e,s?"":t)}}function $w(r,e,t,i,n,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,n,s),r[e]=t??"";return}const a=r.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){r._value=t;const u=a==="OPTION"?r.getAttribute("value"):r.value,h=t??"";u!==h&&(r.value=h),t==null&&r.removeAttribute(e);return}let l=!1;if(t===""||t==null){const u=typeof r[e];u==="boolean"?t=s0(t):t==null&&u==="string"?(t="",l=!0):u==="number"&&(t=0,l=!0)}try{r[e]=t}catch{}l&&r.removeAttribute(e)}function jw(r,e,t,i){r.addEventListener(e,t,i)}function Xw(r,e,t,i){r.removeEventListener(e,t,i)}function zw(r,e,t,i,n=null){const s=r._vei||(r._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=Ww(e);if(i){const u=s[e]=Kw(i,n);jw(r,a,u,l)}else o&&(Xw(r,a,o,l),s[e]=void 0)}}const jv=/(?:Once|Passive|Capture)$/;function Ww(r){let e;if(jv.test(r)){e={};let i;for(;i=r.match(jv);)r=r.slice(0,r.length-i[0].length),e[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):ys(r.slice(2)),e]}let sc=0;const Yw=Promise.resolve(),qw=()=>sc||(Yw.then(()=>sc=0),sc=Date.now());function Kw(r,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Er(Zw(i,t.value),e,5,[i])};return t.value=r,t.attached=qw(),t}function Zw(r,e){if(pe(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Xv=/^on[a-z]/,Jw=(r,e,t,i,n=!1,s,o,a,l)=>{e==="class"?Uw(r,i,n):e==="style"?Gw(r,t,i):eh(e)?Zd(e)||zw(r,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Qw(r,e,i,n))?$w(r,e,i,s,o,a,l):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),Hw(r,e,i,n))};function Qw(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&Xv.test(e)&&de(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||Xv.test(e)&&Ge(t)?!1:e in r}const Xi="transition",Bo="animation",Po=(r,{slots:e})=>_p(qE,eP(r),e);Po.displayName="Transition";const lb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Po.props=yt({},N0,lb);const Pn=(r,e=[])=>{pe(r)?r.forEach(t=>t(...e)):r&&r(...e)},zv=r=>r?pe(r)?r.some(e=>e.length>1):r.length>1:!1;function eP(r){const e={};for(const O in r)O in lb||(e[O]=r[O]);if(r.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:c=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=r,p=tP(n),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:_,onEnterCancelled:y,onLeave:b,onLeaveCancelled:T,onBeforeAppear:S=g,onAppear:E=_,onAppearCancelled:C=y}=e,M=(O,I,D)=>{Cn(O,I?h:a),Cn(O,I?u:o),D&&D()},A=(O,I)=>{O._isLeaving=!1,Cn(O,c),Cn(O,d),Cn(O,f),I&&I()},F=O=>(I,D)=>{const N=O?E:_,B=()=>M(I,O,D);Pn(N,[I,B]),Wv(()=>{Cn(I,O?l:s),zi(I,O?h:a),zv(N)||Yv(I,i,m,B)})};return yt(e,{onBeforeEnter(O){Pn(g,[O]),zi(O,s),zi(O,o)},onBeforeAppear(O){Pn(S,[O]),zi(O,l),zi(O,u)},onEnter:F(!1),onAppear:F(!0),onLeave(O,I){O._isLeaving=!0;const D=()=>A(O,I);zi(O,c),nP(),zi(O,f),Wv(()=>{O._isLeaving&&(Cn(O,c),zi(O,d),zv(b)||Yv(O,i,v,D))}),Pn(b,[O,D])},onEnterCancelled(O){M(O,!1),Pn(y,[O])},onAppearCancelled(O){M(O,!0),Pn(C,[O])},onLeaveCancelled(O){A(O),Pn(T,[O])}})}function tP(r){if(r==null)return null;if(He(r))return[oc(r.enter),oc(r.leave)];{const e=oc(r);return[e,e]}}function oc(r){return zS(r)}function zi(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r._vtc||(r._vtc=new Set)).add(e)}function Cn(r,e){e.split(/\s+/).forEach(i=>i&&r.classList.remove(i));const{_vtc:t}=r;t&&(t.delete(e),t.size||(r._vtc=void 0))}function Wv(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let rP=0;function Yv(r,e,t,i){const n=r._endId=++rP,s=()=>{n===r._endId&&i()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=iP(r,e);if(!o)return i();const u=o+"end";let h=0;const c=()=>{r.removeEventListener(u,f),s()},f=d=>{d.target===r&&++h>=l&&c()};setTimeout(()=>{h<l&&c()},a+1),r.addEventListener(u,f)}function iP(r,e){const t=window.getComputedStyle(r),i=p=>(t[p]||"").split(", "),n=i(`${Xi}Delay`),s=i(`${Xi}Duration`),o=qv(n,s),a=i(`${Bo}Delay`),l=i(`${Bo}Duration`),u=qv(a,l);let h=null,c=0,f=0;e===Xi?o>0&&(h=Xi,c=o,f=s.length):e===Bo?u>0&&(h=Bo,c=u,f=l.length):(c=Math.max(o,u),h=c>0?o>u?Xi:Bo:null,f=h?h===Xi?s.length:l.length:0);const d=h===Xi&&/\b(transform|all)(,|$)/.test(i(`${Xi}Property`).toString());return{type:h,timeout:c,propCount:f,hasTransform:d}}function qv(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,i)=>Kv(t)+Kv(r[i])))}function Kv(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function nP(){return document.body.offsetHeight}const sP=["ctrl","shift","alt","meta"],oP={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>sP.some(t=>r[`${t}Key`]&&!e.includes(t))},rs=(r,e)=>(t,...i)=>{for(let n=0;n<e.length;n++){const s=oP[e[n]];if(s&&s(t,e))return}return r(t,...i)},aP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wl=(r,e)=>t=>{if(!("key"in t))return;const i=ys(t.key);if(e.some(n=>n===i||aP[n]===i))return r(t)},al={beforeMount(r,{value:e},{transition:t}){r._vod=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):No(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(r),No(r,!0),i.enter(r)):i.leave(r,()=>{No(r,!1)}):No(r,e))},beforeUnmount(r,{value:e}){No(r,e)}};function No(r,e){r.style.display=e?r._vod:"none"}const lP=yt({patchProp:Jw},kw);let Zv;function ub(){return Zv||(Zv=gw(lP))}const Jv=(...r)=>{ub().render(...r)},uP=(...r)=>{const e=ub().createApp(...r),{mount:t}=e;return e.mount=i=>{const n=hP(i);if(!n)return;const s=e._component;!de(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=t(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function hP(r){return Ge(r)?document.querySelector(r):r}/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gi;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(gi||(gi={}));var no;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(no||(no={}));var Fa;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Fa||(Fa={}));var fe;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(fe||(fe={}));var xr;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(xr||(xr={}));var J;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(J||(J={}));var hn;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(hn||(hn={}));var ce;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(ce||(ce={}));var La;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(La||(La={}));var Hr;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Hr||(Hr={}));var jr;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(jr||(jr={}));var Cr;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Cr||(Cr={}));var Mr;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Mr||(Mr={}));var vr;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(vr||(vr={}));var Da;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Da||(Da={}));var Zt;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Zt||(Zt={}));var mt;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR"})(mt||(mt={}));var Af;(function(r){r[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA"})(Af||(Af={}));var et;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(et||(et={}));var Xr;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Xr||(Xr={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var hb={createCanvas:function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var r;return(r=document.baseURI)!==null&&r!==void 0?r:window.location.href},fetch:function(r,e){return fetch(r,e)}},ac=/iPhone/i,Qv=/iPod/i,eg=/iPad/i,tg=/\biOS-universal(?:.+)Mac\b/i,lc=/\bAndroid(?:.+)Mobile\b/i,rg=/Android/i,Cs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pl=/Silk/i,Si=/Windows Phone/i,ig=/\bWindows(?:.+)ARM\b/i,ng=/BlackBerry/i,sg=/BB10/i,og=/Opera Mini/i,ag=/\b(CriOS|Chrome)(?:.+)Mobile/i,lg=/Mobile(?:.+)Firefox\b/i,ug=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function cP(r){return function(e){return e.test(r)}}function fP(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var n=cP(t),s={apple:{phone:n(ac)&&!n(Si),ipod:n(Qv),tablet:!n(ac)&&(n(eg)||ug(e))&&!n(Si),universal:n(tg),device:(n(ac)||n(Qv)||n(eg)||n(tg)||ug(e))&&!n(Si)},amazon:{phone:n(Cs),tablet:!n(Cs)&&n(Pl),device:n(Cs)||n(Pl)},android:{phone:!n(Si)&&n(Cs)||!n(Si)&&n(lc),tablet:!n(Si)&&!n(Cs)&&!n(lc)&&(n(Pl)||n(rg)),device:!n(Si)&&(n(Cs)||n(Pl)||n(lc)||n(rg))||n(/\bokhttp\b/i)},windows:{phone:n(Si),tablet:n(ig),device:n(Si)||n(ig)},other:{blackberry:n(ng),blackberry10:n(sg),opera:n(og),firefox:n(lg),chrome:n(ag),device:n(ng)||n(sg)||n(og)||n(lg)||n(ag)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Tr=fP(globalThis.navigator);function dP(){return!Tr.apple.device}function pP(r){var e=!0;if(Tr.tablet||Tr.phone){if(Tr.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var i=parseInt(t[1],10);i<11&&(e=!1)}}if(Tr.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var i=parseInt(t[1],10);i<7&&(e=!1)}}}return e?r:4}var ie={ADAPTER:hb,MIPMAP_TEXTURES:Cr.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:et.NONE,SPRITE_MAX_TEXTURES:pP(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Da.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:jr.CLAMP,SCALE_MODE:Hr.LINEAR,PRECISION_VERTEX:Zt.HIGH,PRECISION_FRAGMENT:Tr.apple.device?Zt.HIGH:Zt.MEDIUM,CAN_UPLOAD_SAME_BUFFER:dP(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function mP(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var cb={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new n(h,c||l,f),p=t?t+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,d=c.length,p=new Array(d);f<d;f++)p[f]=c[f].fn;return p},a.prototype.listenerCount=function(u){var h=t?t+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,f,d,p){var m=t?t+u:u;if(!this._events[m])return!1;var v=this._events[m],g=arguments.length,_,y;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,c),!0;case 4:return v.fn.call(v.context,h,c,f),!0;case 5:return v.fn.call(v.context,h,c,f,d),!0;case 6:return v.fn.call(v.context,h,c,f,d,p),!0}for(y=1,_=new Array(g-1);y<g;y++)_[y-1]=arguments[y];v.fn.apply(v.context,_)}else{var b=v.length,T;for(y=0;y<b;y++)switch(v[y].once&&this.removeListener(u,v[y].fn,void 0,!0),g){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,h);break;case 3:v[y].fn.call(v[y].context,h,c);break;case 4:v[y].fn.call(v[y].context,h,c,f);break;default:if(!_)for(T=1,_=new Array(g-1);T<g;T++)_[T-1]=arguments[T];v[y].fn.apply(v[y].context,_)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,f){var d=t?t+u:u;if(!this._events[d])return this;if(!h)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===h&&(!f||p.once)&&(!c||p.context===c)&&o(this,d);else{for(var m=0,v=[],g=p.length;m<g;m++)(p[m].fn!==h||f&&!p[m].once||c&&p[m].context!==c)&&v.push(p[m]);v.length?this._events[d]=v.length===1?v[0]:v:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(cb);var vP=cb.exports;const Or=yp(vP);var bp={exports:{}};bp.exports=fh;bp.exports.default=fh;function fh(r,e,t){t=t||2;var i=e&&e.length,n=i?e[0]*t:r.length,s=fb(r,0,n,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,f,d;if(i&&(s=xP(r,e,s,t)),r.length>80*t){a=u=r[0],l=h=r[1];for(var p=t;p<n;p+=t)c=r[p],f=r[p+1],c<a&&(a=c),f<l&&(l=f),c>u&&(u=c),f>h&&(h=f);d=Math.max(u-a,h-l),d=d!==0?32767/d:0}return Ba(s,o,t,a,l,d,0),o}function fb(r,e,t,i,n){var s,o;if(n===Ff(r,e,t,i)>0)for(s=e;s<t;s+=i)o=hg(s,r[s],r[s+1],o);else for(s=t-i;s>=e;s-=i)o=hg(s,r[s],r[s+1],o);return o&&dh(o,o.next)&&(ka(o),o=o.next),o}function ps(r,e){if(!r)return r;e||(e=r);var t=r,i;do if(i=!1,!t.steiner&&(dh(t,t.next)||ut(t.prev,t,t.next)===0)){if(ka(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Ba(r,e,t,i,n,s,o){if(r){!o&&s&&PP(r,i,n,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?_P(r,i,n,s):gP(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),ka(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=yP(ps(r),e,t),Ba(r,e,t,i,n,s,2)):o===2&&bP(r,e,t,i,n,s):Ba(ps(r),e,t,i,n,s,1);break}}}}function gP(r){var e=r.prev,t=r,i=r.next;if(ut(e,t,i)>=0)return!1;for(var n=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,f=n>s?n>o?n:o:s>o?s:o,d=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=h&&p.x<=f&&p.y>=c&&p.y<=d&&$s(n,a,s,l,o,u,p.x,p.y)&&ut(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function _P(r,e,t,i){var n=r.prev,s=r,o=r.next;if(ut(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,f=o.y,d=a<l?a<u?a:u:l<u?l:u,p=h<c?h<f?h:f:c<f?c:f,m=a>l?a>u?a:u:l>u?l:u,v=h>c?h>f?h:f:c>f?c:f,g=Of(d,p,e,t,i),_=Of(m,v,e,t,i),y=r.prevZ,b=r.nextZ;y&&y.z>=g&&b&&b.z<=_;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=v&&y!==n&&y!==o&&$s(a,h,l,c,u,f,y.x,y.y)&&ut(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=d&&b.x<=m&&b.y>=p&&b.y<=v&&b!==n&&b!==o&&$s(a,h,l,c,u,f,b.x,b.y)&&ut(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=v&&y!==n&&y!==o&&$s(a,h,l,c,u,f,y.x,y.y)&&ut(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=_;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=v&&b!==n&&b!==o&&$s(a,h,l,c,u,f,b.x,b.y)&&ut(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function yP(r,e,t){var i=r;do{var n=i.prev,s=i.next.next;!dh(n,s)&&db(n,i,i.next,s)&&Na(n,s)&&Na(s,n)&&(e.push(n.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ka(i),ka(i.next),i=r=s),i=i.next}while(i!==r);return ps(i)}function bP(r,e,t,i,n,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&IP(o,a)){var l=pb(o,a);o=ps(o,o.next),l=ps(l,l.next),Ba(o,e,t,i,n,s,0),Ba(l,e,t,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function xP(r,e,t,i){var n=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:r.length,u=fb(r,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(MP(u));for(n.sort(TP),s=0;s<n.length;s++)t=SP(n[s],t);return t}function TP(r,e){return r.x-e.x}function SP(r,e){var t=EP(r,e);if(!t)return e;var i=pb(t,r);return ps(i,i.next),ps(t,t.next)}function EP(r,e){var t=e,i=r.x,n=r.y,s=-1/0,o;do{if(n<=t.y&&n>=t.next.y&&t.next.y!==t.y){var a=t.x+(n-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,f;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&$s(n<h?i:s,n,u,h,n<h?s:i,n,t.x,t.y)&&(f=Math.abs(n-t.y)/(i-t.x),Na(t,r)&&(f<c||f===c&&(t.x>o.x||t.x===o.x&&wP(o,t)))&&(o=t,c=f)),t=t.next;while(t!==l);return o}function wP(r,e){return ut(r.prev,r,e.prev)<0&&ut(e.next,r,r.next)<0}function PP(r,e,t,i){var n=r;do n.z===0&&(n.z=Of(n.x,n.y,e,t,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,CP(n)}function CP(r){var e,t,i,n,s,o,a,l,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(n=t,t=t.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;t=i}s.nextZ=null,u*=2}while(o>1);return r}function Of(r,e,t,i,n){return r=(r-t)*n|0,e=(e-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function MP(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function $s(r,e,t,i,n,s,o,a){return(n-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(i-a)}function IP(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!AP(r,e)&&(Na(r,e)&&Na(e,r)&&OP(r,e)&&(ut(r.prev,r,e.prev)||ut(r,e.prev,e))||dh(r,e)&&ut(r.prev,r,r.next)>0&&ut(e.prev,e,e.next)>0)}function ut(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function dh(r,e){return r.x===e.x&&r.y===e.y}function db(r,e,t,i){var n=Ml(ut(r,e,t)),s=Ml(ut(r,e,i)),o=Ml(ut(t,i,r)),a=Ml(ut(t,i,e));return!!(n!==s&&o!==a||n===0&&Cl(r,t,e)||s===0&&Cl(r,i,e)||o===0&&Cl(t,r,i)||a===0&&Cl(t,e,i))}function Cl(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Ml(r){return r>0?1:r<0?-1:0}function AP(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&db(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Na(r,e){return ut(r.prev,r,r.next)<0?ut(r,e,r.next)>=0&&ut(r,r.prev,e)>=0:ut(r,e,r.prev)<0||ut(r,r.next,e)<0}function OP(r,e){var t=r,i=!1,n=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function pb(r,e){var t=new Rf(r.i,r.x,r.y),i=new Rf(e.i,e.x,e.y),n=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=n,n.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function hg(r,e,t,i){var n=new Rf(r,e,t);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function ka(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Rf(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}fh.deviation=function(r,e,t,i){var n=e&&e.length,s=n?e[0]*t:r.length,o=Math.abs(Ff(r,0,s,t));if(n)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,h=a<l-1?e[a+1]*t:r.length;o-=Math.abs(Ff(r,u,h,t))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*t,d=i[a+1]*t,p=i[a+2]*t;c+=Math.abs((r[f]-r[p])*(r[d+1]-r[f+1])-(r[f]-r[d])*(r[p+1]-r[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Ff(r,e,t,i){for(var n=0,s=e,o=t-i;s<t;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}fh.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[n][s][o]);n>0&&(i+=r[n-1].length,t.holes.push(i))}return t};var RP=bp.exports;const xp=yp(RP);var Fu={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Fu.exports;(function(r,e){(function(t){var i=e&&!e.nodeType&&e,n=r&&!r.nodeType&&r,s=typeof uc=="object"&&uc;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,h=26,c=38,f=700,d=72,p=128,m="-",v=/^xn--/,g=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-u,T=Math.floor,S=String.fromCharCode,E;function C(X){throw new RangeError(y[X])}function M(X,G){for(var W=X.length,se=[];W--;)se[W]=G(X[W]);return se}function A(X,G){var W=X.split("@"),se="";W.length>1&&(se=W[0]+"@",X=W[1]),X=X.replace(_,".");var he=X.split("."),xe=M(he,G).join(".");return se+xe}function F(X){for(var G=[],W=0,se=X.length,he,xe;W<se;)he=X.charCodeAt(W++),he>=55296&&he<=56319&&W<se?(xe=X.charCodeAt(W++),(xe&64512)==56320?G.push(((he&1023)<<10)+(xe&1023)+65536):(G.push(he),W--)):G.push(he);return G}function O(X){return M(X,function(G){var W="";return G>65535&&(G-=65536,W+=S(G>>>10&1023|55296),G=56320|G&1023),W+=S(G),W}).join("")}function I(X){return X-48<10?X-22:X-65<26?X-65:X-97<26?X-97:l}function D(X,G){return X+22+75*(X<26)-((G!=0)<<5)}function N(X,G,W){var se=0;for(X=W?T(X/f):X>>1,X+=T(X/G);X>b*h>>1;se+=l)X=T(X/b);return T(se+(b+1)*X/(X+c))}function B(X){var G=[],W=X.length,se,he=0,xe=p,te=d,ge,Ce,$e,Te,_e,w,P,R,H;for(ge=X.lastIndexOf(m),ge<0&&(ge=0),Ce=0;Ce<ge;++Ce)X.charCodeAt(Ce)>=128&&C("not-basic"),G.push(X.charCodeAt(Ce));for($e=ge>0?ge+1:0;$e<W;){for(Te=he,_e=1,w=l;$e>=W&&C("invalid-input"),P=I(X.charCodeAt($e++)),(P>=l||P>T((a-he)/_e))&&C("overflow"),he+=P*_e,R=w<=te?u:w>=te+h?h:w-te,!(P<R);w+=l)H=l-R,_e>T(a/H)&&C("overflow"),_e*=H;se=G.length+1,te=N(he-Te,se,Te==0),T(he/se)>a-xe&&C("overflow"),xe+=T(he/se),he%=se,G.splice(he++,0,xe)}return O(G)}function L(X){var G,W,se,he,xe,te,ge,Ce,$e,Te,_e,w=[],P,R,H,V;for(X=F(X),P=X.length,G=p,W=0,xe=d,te=0;te<P;++te)_e=X[te],_e<128&&w.push(S(_e));for(se=he=w.length,he&&w.push(m);se<P;){for(ge=a,te=0;te<P;++te)_e=X[te],_e>=G&&_e<ge&&(ge=_e);for(R=se+1,ge-G>T((a-W)/R)&&C("overflow"),W+=(ge-G)*R,G=ge,te=0;te<P;++te)if(_e=X[te],_e<G&&++W>a&&C("overflow"),_e==G){for(Ce=W,$e=l;Te=$e<=xe?u:$e>=xe+h?h:$e-xe,!(Ce<Te);$e+=l)V=Ce-Te,H=l-Te,w.push(S(D(Te+V%H,0))),Ce=T(V/H);w.push(S(D(Ce,0))),xe=N(W,R,se==he),W=0,++se}++W,++G}return w.join("")}function Q(X){return A(X,function(G){return v.test(G)?B(G.slice(4).toLowerCase()):G})}function ee(X){return A(X,function(G){return g.test(G)?"xn--"+L(G):G})}if(o={version:"1.4.1",ucs2:{decode:F,encode:O},decode:B,encode:L,toASCII:ee,toUnicode:Q},i&&n)if(r.exports==i)n.exports=o;else for(E in o)o.hasOwnProperty(E)&&(i[E]=o[E]);else t.punycode=o})(uc)})(Fu,Fu.exports);var FP=Fu.exports,LP=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||o.enumerable!==!0)return!1}return!0},cg=typeof Symbol<"u"&&Symbol,DP=LP,BP=function(){return typeof cg!="function"||typeof Symbol!="function"||typeof cg("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:DP()},fg={foo:{}},NP=Object,kP=function(){return{__proto__:fg}.foo===fg.foo&&!({__proto__:null}instanceof NP)},UP="Function.prototype.bind called on incompatible ",hc=Array.prototype.slice,GP=Object.prototype.toString,VP="[object Function]",HP=function(e){var t=this;if(typeof t!="function"||GP.call(t)!==VP)throw new TypeError(UP+t);for(var i=hc.call(arguments,1),n,s=function(){if(this instanceof n){var h=t.apply(this,i.concat(hc.call(arguments)));return Object(h)===h?h:this}else return t.apply(e,i.concat(hc.call(arguments)))},o=Math.max(0,t.length-i.length),a=[],l=0;l<o;l++)a.push("$"+l);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n},$P=HP,Tp=Function.prototype.bind||$P,jP=Tp,XP=jP.call(Function.call,Object.prototype.hasOwnProperty),Fe,so=SyntaxError,mb=Function,Ks=TypeError,cc=function(r){try{return mb('"use strict"; return ('+r+").constructor;")()}catch{}},as=Object.getOwnPropertyDescriptor;if(as)try{as({},"")}catch{as=null}var fc=function(){throw new Ks},zP=as?function(){try{return arguments.callee,fc}catch{try{return as(arguments,"callee").get}catch{return fc}}}():fc,Ms=BP(),WP=kP(),Pt=Object.getPrototypeOf||(WP?function(r){return r.__proto__}:null),Us={},YP=typeof Uint8Array>"u"||!Pt?Fe:Pt(Uint8Array),ls={"%AggregateError%":typeof AggregateError>"u"?Fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Fe:ArrayBuffer,"%ArrayIteratorPrototype%":Ms&&Pt?Pt([][Symbol.iterator]()):Fe,"%AsyncFromSyncIteratorPrototype%":Fe,"%AsyncFunction%":Us,"%AsyncGenerator%":Us,"%AsyncGeneratorFunction%":Us,"%AsyncIteratorPrototype%":Us,"%Atomics%":typeof Atomics>"u"?Fe:Atomics,"%BigInt%":typeof BigInt>"u"?Fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Fe:FinalizationRegistry,"%Function%":mb,"%GeneratorFunction%":Us,"%Int8Array%":typeof Int8Array>"u"?Fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ms&&Pt?Pt(Pt([][Symbol.iterator]())):Fe,"%JSON%":typeof JSON=="object"?JSON:Fe,"%Map%":typeof Map>"u"?Fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ms||!Pt?Fe:Pt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Fe:Promise,"%Proxy%":typeof Proxy>"u"?Fe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ms||!Pt?Fe:Pt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ms&&Pt?Pt(""[Symbol.iterator]()):Fe,"%Symbol%":Ms?Symbol:Fe,"%SyntaxError%":so,"%ThrowTypeError%":zP,"%TypedArray%":YP,"%TypeError%":Ks,"%Uint8Array%":typeof Uint8Array>"u"?Fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Fe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Fe:WeakSet};if(Pt)try{null.error}catch(r){var qP=Pt(Pt(r));ls["%Error.prototype%"]=qP}var KP=function r(e){var t;if(e==="%AsyncFunction%")t=cc("async function () {}");else if(e==="%GeneratorFunction%")t=cc("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=cc("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&Pt&&(t=Pt(n.prototype))}return ls[e]=t,t},dg={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ll=Tp,Lu=XP,ZP=ll.call(Function.call,Array.prototype.concat),JP=ll.call(Function.apply,Array.prototype.splice),pg=ll.call(Function.call,String.prototype.replace),Du=ll.call(Function.call,String.prototype.slice),QP=ll.call(Function.call,RegExp.prototype.exec),eC=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tC=/\\(\\)?/g,rC=function(e){var t=Du(e,0,1),i=Du(e,-1);if(t==="%"&&i!=="%")throw new so("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new so("invalid intrinsic syntax, expected opening `%`");var n=[];return pg(e,eC,function(s,o,a,l){n[n.length]=a?pg(l,tC,"$1"):o||s}),n},iC=function(e,t){var i=e,n;if(Lu(dg,i)&&(n=dg[i],i="%"+n[0]+"%"),Lu(ls,i)){var s=ls[i];if(s===Us&&(s=KP(i)),typeof s>"u"&&!t)throw new Ks("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new so("intrinsic "+e+" does not exist!")},Sp=function(e,t){if(typeof e!="string"||e.length===0)throw new Ks("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ks('"allowMissing" argument must be a boolean');if(QP(/^%?[^%]*%?$/,e)===null)throw new so("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=rC(e),n=i.length>0?i[0]:"",s=iC("%"+n+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(n=u[0],JP(i,ZP([0,1],u)));for(var h=1,c=!0;h<i.length;h+=1){var f=i[h],d=Du(f,0,1),p=Du(f,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new so("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(l=!0),n+="."+f,o="%"+n+"%",Lu(ls,o))a=ls[o];else if(a!=null){if(!(f in a)){if(!t)throw new Ks("base intrinsic for "+e+" exists, but the property is not available.");return}if(as&&h+1>=i.length){var m=as(a,f);c=!!m,c&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[f]}else c=Lu(a,f),a=a[f];c&&!l&&(ls[o]=a)}}return a},vb={exports:{}};(function(r){var e=Tp,t=Sp,i=t("%Function.prototype.apply%"),n=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(n,i),o=t("%Object.getOwnPropertyDescriptor%",!0),a=t("%Object.defineProperty%",!0),l=t("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}r.exports=function(c){var f=s(e,n,arguments);if(o&&a){var d=o(f,"length");d.configurable&&a(f,"length",{value:1+l(0,c.length-(arguments.length-1))})}return f};var u=function(){return s(e,i,arguments)};a?a(r.exports,"apply",{value:u}):r.exports.apply=u})(vb);var nC=vb.exports,gb=Sp,_b=nC,sC=_b(gb("String.prototype.indexOf")),oC=function(e,t){var i=gb(e,!!t);return typeof i=="function"&&sC(e,".prototype.")>-1?_b(i):i};const aC={},lC=Object.freeze(Object.defineProperty({__proto__:null,default:aC},Symbol.toStringTag,{value:"Module"})),uC=mP(lC);var Ep=typeof Map=="function"&&Map.prototype,dc=Object.getOwnPropertyDescriptor&&Ep?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Bu=Ep&&dc&&typeof dc.get=="function"?dc.get:null,mg=Ep&&Map.prototype.forEach,wp=typeof Set=="function"&&Set.prototype,pc=Object.getOwnPropertyDescriptor&&wp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Nu=wp&&pc&&typeof pc.get=="function"?pc.get:null,vg=wp&&Set.prototype.forEach,hC=typeof WeakMap=="function"&&WeakMap.prototype,ya=hC?WeakMap.prototype.has:null,cC=typeof WeakSet=="function"&&WeakSet.prototype,ba=cC?WeakSet.prototype.has:null,fC=typeof WeakRef=="function"&&WeakRef.prototype,gg=fC?WeakRef.prototype.deref:null,dC=Boolean.prototype.valueOf,pC=Object.prototype.toString,mC=Function.prototype.toString,vC=String.prototype.match,Pp=String.prototype.slice,sn=String.prototype.replace,gC=String.prototype.toUpperCase,_g=String.prototype.toLowerCase,yb=RegExp.prototype.test,yg=Array.prototype.concat,li=Array.prototype.join,_C=Array.prototype.slice,bg=Math.floor,Lf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,mc=Object.getOwnPropertySymbols,Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,oo=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ut=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===oo||"symbol")?Symbol.toStringTag:null,bb=Object.prototype.propertyIsEnumerable,xg=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Tg(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||yb.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-bg(-r):bg(r);if(i!==r){var n=String(i),s=Pp.call(e,n.length+1);return sn.call(n,t,"$&_")+"."+sn.call(sn.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return sn.call(e,t,"$&_")}var Bf=uC,Sg=Bf.custom,Eg=Tb(Sg)?Sg:null,yC=function r(e,t,i,n){var s=t||{};if(rn(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rn(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=rn(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rn(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rn(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Eb(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Tg(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Tg(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=h&&h>0&&typeof e=="object")return Nf(e)?"[Array]":"[Object]";var c=NC(s,i);if(typeof n>"u")n=[];else if(Sb(n,e)>=0)return"[Circular]";function f(I,D,N){if(D&&(n=_C.call(n),n.push(D)),N){var B={depth:s.depth};return rn(s,"quoteStyle")&&(B.quoteStyle=s.quoteStyle),r(I,B,i+1,n)}return r(I,s,i+1,n)}if(typeof e=="function"&&!wg(e)){var d=MC(e),p=Il(e,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+li.call(p,", ")+" }":"")}if(Tb(e)){var m=oo?sn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Df.call(e);return typeof e=="object"&&!oo?ko(m):m}if(LC(e)){for(var v="<"+_g.call(String(e.nodeName)),g=e.attributes||[],_=0;_<g.length;_++)v+=" "+g[_].name+"="+xb(bC(g[_].value),"double",s);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+_g.call(String(e.nodeName))+">",v}if(Nf(e)){if(e.length===0)return"[]";var y=Il(e,f);return c&&!BC(y)?"["+kf(y,c)+"]":"[ "+li.call(y,", ")+" ]"}if(TC(e)){var b=Il(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!bb.call(e,"cause")?"{ ["+String(e)+"] "+li.call(yg.call("[cause]: "+f(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+li.call(b,", ")+" }"}if(typeof e=="object"&&o){if(Eg&&typeof e[Eg]=="function"&&Bf)return Bf(e,{depth:h-i});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(IC(e)){var T=[];return mg&&mg.call(e,function(I,D){T.push(f(D,e,!0)+" => "+f(I,e))}),Pg("Map",Bu.call(e),T,c)}if(RC(e)){var S=[];return vg&&vg.call(e,function(I){S.push(f(I,e))}),Pg("Set",Nu.call(e),S,c)}if(AC(e))return vc("WeakMap");if(FC(e))return vc("WeakSet");if(OC(e))return vc("WeakRef");if(EC(e))return ko(f(Number(e)));if(PC(e))return ko(f(Lf.call(e)));if(wC(e))return ko(dC.call(e));if(SC(e))return ko(f(String(e)));if(!xC(e)&&!wg(e)){var E=Il(e,f),C=xg?xg(e)===Object.prototype:e instanceof Object||e.constructor===Object,M=e instanceof Object?"":"null prototype",A=!C&&Ut&&Object(e)===e&&Ut in e?Pp.call(xn(e),8,-1):M?"Object":"",F=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=F+(A||M?"["+li.call(yg.call([],A||[],M||[]),": ")+"] ":"");return E.length===0?O+"{}":c?O+"{"+kf(E,c)+"}":O+"{ "+li.call(E,", ")+" }"}return String(e)};function xb(r,e,t){var i=(t.quoteStyle||e)==="double"?'"':"'";return i+r+i}function bC(r){return sn.call(String(r),/"/g,"&quot;")}function Nf(r){return xn(r)==="[object Array]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function xC(r){return xn(r)==="[object Date]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function wg(r){return xn(r)==="[object RegExp]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function TC(r){return xn(r)==="[object Error]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function SC(r){return xn(r)==="[object String]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function EC(r){return xn(r)==="[object Number]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function wC(r){return xn(r)==="[object Boolean]"&&(!Ut||!(typeof r=="object"&&Ut in r))}function Tb(r){if(oo)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Df)return!1;try{return Df.call(r),!0}catch{}return!1}function PC(r){if(!r||typeof r!="object"||!Lf)return!1;try{return Lf.call(r),!0}catch{}return!1}var CC=Object.prototype.hasOwnProperty||function(r){return r in this};function rn(r,e){return CC.call(r,e)}function xn(r){return pC.call(r)}function MC(r){if(r.name)return r.name;var e=vC.call(mC.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Sb(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function IC(r){if(!Bu||!r||typeof r!="object")return!1;try{Bu.call(r);try{Nu.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function AC(r){if(!ya||!r||typeof r!="object")return!1;try{ya.call(r,ya);try{ba.call(r,ba)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function OC(r){if(!gg||!r||typeof r!="object")return!1;try{return gg.call(r),!0}catch{}return!1}function RC(r){if(!Nu||!r||typeof r!="object")return!1;try{Nu.call(r);try{Bu.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function FC(r){if(!ba||!r||typeof r!="object")return!1;try{ba.call(r,ba);try{ya.call(r,ya)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function LC(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Eb(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return Eb(Pp.call(r,0,e.maxStringLength),e)+i}var n=sn.call(sn.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,DC);return xb(n,"single",e)}function DC(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+gC.call(e.toString(16))}function ko(r){return"Object("+r+")"}function vc(r){return r+" { ? }"}function Pg(r,e,t,i){var n=i?kf(t,i):li.call(t,", ");return r+" ("+e+") {"+n+"}"}function BC(r){for(var e=0;e<r.length;e++)if(Sb(r[e],`
`)>=0)return!1;return!0}function NC(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=li.call(Array(r.indent+1)," ");else return null;return{base:t,prev:li.call(Array(e+1),t)}}function kf(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+li.call(r,","+t)+`
`+e.prev}function Il(r,e){var t=Nf(r),i=[];if(t){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=rn(r,n)?e(r[n],r):""}var s=typeof mc=="function"?mc(r):[],o;if(oo){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in r)rn(r,l)&&(t&&String(Number(l))===l&&l<r.length||oo&&o["$"+l]instanceof Symbol||(yb.call(/[^\w$]/,l)?i.push(e(l,r)+": "+e(r[l],r)):i.push(l+": "+e(r[l],r))));if(typeof mc=="function")for(var u=0;u<s.length;u++)bb.call(r,s[u])&&i.push("["+e(s[u])+"]: "+e(r[s[u]],r));return i}var Cp=Sp,Co=oC,kC=yC,UC=Cp("%TypeError%"),Al=Cp("%WeakMap%",!0),Ol=Cp("%Map%",!0),GC=Co("WeakMap.prototype.get",!0),VC=Co("WeakMap.prototype.set",!0),HC=Co("WeakMap.prototype.has",!0),$C=Co("Map.prototype.get",!0),jC=Co("Map.prototype.set",!0),XC=Co("Map.prototype.has",!0),Mp=function(r,e){for(var t=r,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=r.next,r.next=i,i},zC=function(r,e){var t=Mp(r,e);return t&&t.value},WC=function(r,e,t){var i=Mp(r,e);i?i.value=t:r.next={key:e,next:r.next,value:t}},YC=function(r,e){return!!Mp(r,e)},qC=function(){var e,t,i,n={assert:function(s){if(!n.has(s))throw new UC("Side channel does not contain "+kC(s))},get:function(s){if(Al&&s&&(typeof s=="object"||typeof s=="function")){if(e)return GC(e,s)}else if(Ol){if(t)return $C(t,s)}else if(i)return zC(i,s)},has:function(s){if(Al&&s&&(typeof s=="object"||typeof s=="function")){if(e)return HC(e,s)}else if(Ol){if(t)return XC(t,s)}else if(i)return YC(i,s);return!1},set:function(s,o){Al&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Al),VC(e,s,o)):Ol?(t||(t=new Ol),jC(t,s,o)):(i||(i={key:{},next:null}),WC(i,s,o))}};return n},KC=String.prototype.replace,ZC=/%20/g,gc={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ip={default:gc.RFC3986,formatters:{RFC1738:function(r){return KC.call(r,ZC,"+")},RFC3986:function(r){return String(r)}},RFC1738:gc.RFC1738,RFC3986:gc.RFC3986},JC=Ip,_c=Object.prototype.hasOwnProperty,Jn=Array.isArray,ti=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),QC=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(Jn(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);t.obj[t.prop]=n}}},wb=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(i[n]=e[n]);return i},eM=function r(e,t,i){if(!t)return e;if(typeof t!="object"){if(Jn(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!_c.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var n=e;return Jn(e)&&!Jn(t)&&(n=wb(e,i)),Jn(e)&&Jn(t)?(t.forEach(function(s,o){if(_c.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,i):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return _c.call(s,o)?s[o]=r(s[o],a,i):s[o]=a,s},n)},tM=function(e,t){return Object.keys(t).reduce(function(i,n){return i[n]=t[n],i},e)},rM=function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},iM=function(e,t,i,n,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===JC.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+ti[u];continue}if(u<2048){a=a+(ti[192|u>>6]+ti[128|u&63]);continue}if(u<55296||u>=57344){a=a+(ti[224|u>>12]+ti[128|u>>6&63]+ti[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=ti[240|u>>18]+ti[128|u>>12&63]+ti[128|u>>6&63]+ti[128|u&63]}return a},nM=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],n=0;n<t.length;++n)for(var s=t[n],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&i.indexOf(h)===-1&&(t.push({obj:o,prop:u}),i.push(h))}return QC(t),e},sM=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},oM=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},aM=function(e,t){return[].concat(e,t)},lM=function(e,t){if(Jn(e)){for(var i=[],n=0;n<e.length;n+=1)i.push(t(e[n]));return i}return t(e)},Pb={arrayToObject:wb,assign:tM,combine:aM,compact:nM,decode:rM,encode:iM,isBuffer:oM,isRegExp:sM,maybeMap:lM,merge:eM},Cb=qC,fu=Pb,xa=Ip,uM=Object.prototype.hasOwnProperty,Cg={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Ii=Array.isArray,hM=Array.prototype.push,Mb=function(r,e){hM.apply(r,Ii(e)?e:[e])},cM=Date.prototype.toISOString,Mg=xa.default,Nt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:fu.encode,encodeValuesOnly:!1,format:Mg,formatter:xa.formatters[Mg],indices:!1,serializeDate:function(e){return cM.call(e)},skipNulls:!1,strictNullHandling:!1},fM=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},yc={},dM=function r(e,t,i,n,s,o,a,l,u,h,c,f,d,p,m,v){for(var g=e,_=v,y=0,b=!1;(_=_.get(yc))!==void 0&&!b;){var T=_.get(e);if(y+=1,typeof T<"u"){if(T===y)throw new RangeError("Cyclic object value");b=!0}typeof _.get(yc)>"u"&&(y=0)}if(typeof l=="function"?g=l(t,g):g instanceof Date?g=c(g):i==="comma"&&Ii(g)&&(g=fu.maybeMap(g,function(B){return B instanceof Date?c(B):B})),g===null){if(s)return a&&!p?a(t,Nt.encoder,m,"key",f):t;g=""}if(fM(g)||fu.isBuffer(g)){if(a){var S=p?t:a(t,Nt.encoder,m,"key",f);return[d(S)+"="+d(a(g,Nt.encoder,m,"value",f))]}return[d(t)+"="+d(String(g))]}var E=[];if(typeof g>"u")return E;var C;if(i==="comma"&&Ii(g))p&&a&&(g=fu.maybeMap(g,a)),C=[{value:g.length>0?g.join(",")||null:void 0}];else if(Ii(l))C=l;else{var M=Object.keys(g);C=u?M.sort(u):M}for(var A=n&&Ii(g)&&g.length===1?t+"[]":t,F=0;F<C.length;++F){var O=C[F],I=typeof O=="object"&&typeof O.value<"u"?O.value:g[O];if(!(o&&I===null)){var D=Ii(g)?typeof i=="function"?i(A,O):A:A+(h?"."+O:"["+O+"]");v.set(e,y);var N=Cb();N.set(yc,v),Mb(E,r(I,D,i,n,s,o,i==="comma"&&p&&Ii(g)?null:a,l,u,h,c,f,d,p,m,N))}}return E},pM=function(e){if(!e)return Nt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Nt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=xa.default;if(typeof e.format<"u"){if(!uM.call(xa.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var n=xa.formatters[i],s=Nt.filter;return(typeof e.filter=="function"||Ii(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Nt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Nt.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Nt.charsetSentinel,delimiter:typeof e.delimiter>"u"?Nt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Nt.encode,encoder:typeof e.encoder=="function"?e.encoder:Nt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Nt.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Nt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Nt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Nt.strictNullHandling}},mM=function(r,e){var t=r,i=pM(e),n,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):Ii(i.filter)&&(s=i.filter,n=s);var o=[];if(typeof t!="object"||t===null)return"";var a;e&&e.arrayFormat in Cg?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=Cg[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&e&&e.commaRoundTrip;n||(n=Object.keys(t)),i.sort&&n.sort(i.sort);for(var h=Cb(),c=0;c<n.length;++c){var f=n[c];i.skipNulls&&t[f]===null||Mb(o,dM(t[f],f,l,u,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,h))}var d=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},ao=Pb,Uf=Object.prototype.hasOwnProperty,vM=Array.isArray,wt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ao.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},gM=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Ib=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},_M="utf8=%26%2310003%3B",yM="utf8=%E2%9C%93",bM=function(e,t){var i={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,s),a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===yM?u="utf-8":o[l]===_M&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),f=c===-1?h.indexOf("="):c+1,d,p;f===-1?(d=t.decoder(h,wt.decoder,u,"key"),p=t.strictNullHandling?null:""):(d=t.decoder(h.slice(0,f),wt.decoder,u,"key"),p=ao.maybeMap(Ib(h.slice(f+1),t),function(m){return t.decoder(m,wt.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=gM(p)),h.indexOf("[]=")>-1&&(p=vM(p)?[p]:p),Uf.call(i,d)?i[d]=ao.combine(i[d],p):i[d]=p}return i},xM=function(r,e,t,i){for(var n=i?e:Ib(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=[].concat(n);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(l,10);!t.parseArrays&&l===""?o={0:n}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(o=[],o[u]=n):l!=="__proto__"&&(o[l]=n)}n=o}return n},TM=function(e,t,i,n){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!i.plainObjects&&Uf.call(Object.prototype,u)&&!i.allowPrototypes)return;h.push(u)}for(var c=0;i.depth>0&&(l=a.exec(s))!==null&&c<i.depth;){if(c+=1,!i.plainObjects&&Uf.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(l[1])}return l&&h.push("["+s.slice(l.index)+"]"),xM(h,t,i,n)}},SM=function(e){if(!e)return wt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?wt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?wt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:wt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:wt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:wt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:wt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:wt.comma,decoder:typeof e.decoder=="function"?e.decoder:wt.decoder,delimiter:typeof e.delimiter=="string"||ao.isRegExp(e.delimiter)?e.delimiter:wt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:wt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:wt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:wt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:wt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:wt.strictNullHandling}},EM=function(r,e){var t=SM(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?bM(r,t):r,n=t.plainObjects?Object.create(null):{},s=Object.keys(i),o=0;o<s.length;++o){var a=s[o],l=TM(a,i[a],t,typeof r=="string");n=ao.merge(n,l,t)}return t.allowSparse===!0?n:ao.compact(n)},wM=mM,PM=EM,CM=Ip,MM={formats:CM,parse:PM,stringify:wM},IM=FP;function zr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var AM=/^([a-z0-9.+-]+:)/i,OM=/:[0-9]*$/,RM=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,FM=["<",">",'"',"`"," ","\r",`
`,"	"],LM=["{","}","|","\\","^","`"].concat(FM),Gf=["'"].concat(LM),Ig=["%","/","?",";","#"].concat(Gf),Ag=["/","?","#"],DM=255,Og=/^[+a-z0-9A-Z_-]{0,63}$/,BM=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,NM={javascript:!0,"javascript:":!0},Vf={javascript:!0,"javascript:":!0},Zs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Hf=MM;function ph(r,e,t){if(r&&typeof r=="object"&&r instanceof zr)return r;var i=new zr;return i.parse(r,e,t),i}zr.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(n);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=RM.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Hf.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=AM.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&Vf[u])&&(a=a.substr(2),this.slashes=!0)}if(!Vf[u]&&(c||u&&!Zs[u])){for(var f=-1,d=0;d<Ag.length;d++){var p=a.indexOf(Ag[d]);p!==-1&&(f===-1||p<f)&&(f=p)}var m,v;f===-1?v=a.lastIndexOf("@"):v=a.lastIndexOf("@",f),v!==-1&&(m=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(m)),f=-1;for(var d=0;d<Ig.length;d++){var p=a.indexOf(Ig[d]);p!==-1&&(f===-1||p<f)&&(f=p)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var _=this.hostname.split(/\./),d=0,y=_.length;d<y;d++){var b=_[d];if(b&&!b.match(Og)){for(var T="",S=0,E=b.length;S<E;S++)b.charCodeAt(S)>127?T+="x":T+=b[S];if(!T.match(Og)){var C=_.slice(0,d),M=_.slice(d+1),A=b.match(BM);A&&(C.push(A[1]),M.unshift(A[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=C.join(".");break}}}this.hostname.length>DM?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=IM.toASCII(this.hostname));var F=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+F,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!NM[h])for(var d=0,y=Gf.length;d<y;d++){var I=Gf[d];if(a.indexOf(I)!==-1){var D=encodeURIComponent(I);D===I&&(D=escape(I)),a=a.split(I).join(D)}}var N=a.indexOf("#");N!==-1&&(this.hash=a.substr(N),a=a.slice(0,N));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),e&&(this.query=Hf.parse(this.query)),a=a.slice(0,B)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Zs[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",L=this.search||"";this.path=F+L}return this.href=this.format(),this};function kM(r){return typeof r=="string"&&(r=ph(r)),r instanceof zr?r.format():zr.prototype.format.call(r)}zr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Hf.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Zs[e])&&n!==!1?(n="//"+(n||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+n+t+o+i};function UM(r,e){return ph(r,!1,!0).resolve(e)}zr.prototype.resolve=function(r){return this.resolveObject(ph(r,!1,!0)).format()};zr.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new zr;e.parse(r,!1,!0),r=e}for(var t=new zr,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=r[l])}return Zs[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Zs[r.protocol]){for(var u=Object.keys(r),h=0;h<u.length;h++){var c=u[h];t[c]=r[c]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Vf[r.protocol]){for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var f=t.pathname||"",d=t.search||"";t.path=f+d}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",v=m||p||t.host&&r.pathname,g=v,_=t.pathname&&t.pathname.split("/")||[],y=r.pathname&&r.pathname.split("/")||[],b=t.protocol&&!Zs[t.protocol];if(b&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),v=v&&(y[0]===""||_[0]==="")),m)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,_=y;else if(y.length)_||(_=[]),_.pop(),_=_.concat(y),t.search=r.search,t.query=r.query;else if(r.search!=null){if(b){t.host=_.shift(),t.hostname=t.host;var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.hostname=T.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=_.slice(-1)[0],E=(t.host||r.host||_.length>1)&&(S==="."||S==="..")||S==="",C=0,M=_.length;M>=0;M--)S=_[M],S==="."?_.splice(M,1):S===".."?(_.splice(M,1),C++):C&&(_.splice(M,1),C--);if(!v&&!g)for(;C--;C)_.unshift("..");v&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),E&&_.join("/").substr(-1)!=="/"&&_.push("");var A=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(b){t.hostname=A?"":_.length?_.shift():"",t.host=t.hostname;var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.hostname=T.shift(),t.host=t.hostname)}return v=v||t.host&&_.length,v&&!A&&_.unshift(""),_.length>0?t.pathname=_.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};zr.prototype.parseHost=function(){var r=this.host,e=OM.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var GM=ph,VM=UM,HM=kM;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ar={parse:GM,format:HM,resolve:VM};function Fr(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function Rg(r){var e=r.split("?")[0];return e.split("#")[0]}function $M(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function jM(r,e,t){return r.replace(new RegExp($M(e),"g"),t)}function XM(r,e){for(var t="",i=0,n=-1,s=0,o,a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),n=a,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,n=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+="/"+r.slice(n+1,a):t=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}var Ab={toPosix:function(r){return jM(r,"\\","/")},isUrl:function(r){return/^https?:/.test(this.toPosix(r))},isDataUrl:function(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},hasProtocol:function(r){return/^[^/:]+:\//.test(this.toPosix(r))},getProtocol:function(r){Fr(r),r=this.toPosix(r);var e="",t=/^file:\/\/\//.exec(r),i=/^[^/:]+:\/\//.exec(r),n=/^[^/:]+:\//.exec(r);if(t||i||n){var s=(t==null?void 0:t[0])||(i==null?void 0:i[0])||(n==null?void 0:n[0]);e=s,r=r.slice(s.length)}return e},toAbsolute:function(r,e,t){if(this.isDataUrl(r))return r;var i=Rg(this.toPosix(e??ie.ADAPTER.getBaseUrl())),n=Rg(this.toPosix(t??this.rootname(i)));if(Fr(r),r=this.toPosix(r),r.startsWith("/"))return Ab.join(n,r.slice(1));var s=this.isAbsolute(r)?r:this.join(i,r);return s},normalize:function(r){if(r=this.toPosix(r),Fr(r),r.length===0)return".";var e="",t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));var i=r.endsWith("/");return r=XM(r,!1),r.length>0&&i&&(r+="/"),t?"/"+r:e+r},isAbsolute:function(r){return Fr(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join:function(){for(var r=arguments,e,t=[],i=0;i<arguments.length;i++)t[i]=r[i];if(t.length===0)return".";for(var n,s=0;s<t.length;++s){var o=t[s];if(Fr(o),o.length>0)if(n===void 0)n=o;else{var a=(e=t[s-1])!==null&&e!==void 0?e:"";this.extname(a)?n+="/../"+o:n+="/"+o}}return n===void 0?".":this.normalize(n)},dirname:function(r){if(Fr(r),r.length===0)return".";r=this.toPosix(r);var e=r.charCodeAt(0),t=e===47,i=-1,n=!0,s=this.getProtocol(r),o=r;r=r.slice(s.length);for(var a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!n){i=a;break}}else n=!1;return i===-1?t?"/":this.isUrl(o)?s+r:s:t&&i===1?"//":s+r.slice(0,i)},rootname:function(r){Fr(r),r=this.toPosix(r);var e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){var t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename:function(r,e){Fr(r),e&&Fr(e),r=this.toPosix(r);var t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";var o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){var l=r.charCodeAt(s);if(l===47){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(t,i)},extname:function(r){Fr(r),r=this.toPosix(r);for(var e=-1,t=0,i=-1,n=!0,s=0,o=r.length-1;o>=0;--o){var a=r.charCodeAt(o);if(a===47){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":r.slice(e,i)},parse:function(r){Fr(r);var e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=this.toPosix(r);var t=r.charCodeAt(0),i=this.isAbsolute(r),n;e.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;for(var s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;u>=n;--u){if(t=r.charCodeAt(u),t===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),t===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&i?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":"};ie.RETINA_PREFIX=/@([0-9\.]+)x/;ie.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var $f=!1,Fg="6.5.10";function zM(){$f=!0}function Ob(r){var e;if(!$f){if(ie.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Fg+" -  "+r+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,t)}else globalThis.console&&globalThis.console.log("PixiJS "+Fg+" - "+r+" - http://www.pixijs.com/");$f=!0}}var bc;function Rb(){return typeof bc>"u"&&(bc=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:ie.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ie.ADAPTER.getWebGLRenderingContext())return!1;var t=ie.ADAPTER.createCanvas(),i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),bc}var WM="#f0f8ff",YM="#faebd7",qM="#00ffff",KM="#7fffd4",ZM="#f0ffff",JM="#f5f5dc",QM="#ffe4c4",eI="#000000",tI="#ffebcd",rI="#0000ff",iI="#8a2be2",nI="#a52a2a",sI="#deb887",oI="#5f9ea0",aI="#7fff00",lI="#d2691e",uI="#ff7f50",hI="#6495ed",cI="#fff8dc",fI="#dc143c",dI="#00ffff",pI="#00008b",mI="#008b8b",vI="#b8860b",gI="#a9a9a9",_I="#006400",yI="#a9a9a9",bI="#bdb76b",xI="#8b008b",TI="#556b2f",SI="#ff8c00",EI="#9932cc",wI="#8b0000",PI="#e9967a",CI="#8fbc8f",MI="#483d8b",II="#2f4f4f",AI="#2f4f4f",OI="#00ced1",RI="#9400d3",FI="#ff1493",LI="#00bfff",DI="#696969",BI="#696969",NI="#1e90ff",kI="#b22222",UI="#fffaf0",GI="#228b22",VI="#ff00ff",HI="#dcdcdc",$I="#f8f8ff",jI="#daa520",XI="#ffd700",zI="#808080",WI="#008000",YI="#adff2f",qI="#808080",KI="#f0fff0",ZI="#ff69b4",JI="#cd5c5c",QI="#4b0082",eA="#fffff0",tA="#f0e68c",rA="#fff0f5",iA="#e6e6fa",nA="#7cfc00",sA="#fffacd",oA="#add8e6",aA="#f08080",lA="#e0ffff",uA="#fafad2",hA="#d3d3d3",cA="#90ee90",fA="#d3d3d3",dA="#ffb6c1",pA="#ffa07a",mA="#20b2aa",vA="#87cefa",gA="#778899",_A="#778899",yA="#b0c4de",bA="#ffffe0",xA="#00ff00",TA="#32cd32",SA="#faf0e6",EA="#ff00ff",wA="#800000",PA="#66cdaa",CA="#0000cd",MA="#ba55d3",IA="#9370db",AA="#3cb371",OA="#7b68ee",RA="#00fa9a",FA="#48d1cc",LA="#c71585",DA="#191970",BA="#f5fffa",NA="#ffe4e1",kA="#ffe4b5",UA="#ffdead",GA="#000080",VA="#fdf5e6",HA="#808000",$A="#6b8e23",jA="#ffa500",XA="#ff4500",zA="#da70d6",WA="#eee8aa",YA="#98fb98",qA="#afeeee",KA="#db7093",ZA="#ffefd5",JA="#ffdab9",QA="#cd853f",eO="#ffc0cb",tO="#dda0dd",rO="#b0e0e6",iO="#800080",nO="#663399",sO="#ff0000",oO="#bc8f8f",aO="#4169e1",lO="#8b4513",uO="#fa8072",hO="#f4a460",cO="#2e8b57",fO="#fff5ee",dO="#a0522d",pO="#c0c0c0",mO="#87ceeb",vO="#6a5acd",gO="#708090",_O="#708090",yO="#fffafa",bO="#00ff7f",xO="#4682b4",TO="#d2b48c",SO="#008080",EO="#d8bfd8",wO="#ff6347",PO="#40e0d0",CO="#ee82ee",MO="#f5deb3",IO="#ffffff",AO="#f5f5f5",OO="#ffff00",RO="#9acd32",FO={aliceblue:WM,antiquewhite:YM,aqua:qM,aquamarine:KM,azure:ZM,beige:JM,bisque:QM,black:eI,blanchedalmond:tI,blue:rI,blueviolet:iI,brown:nI,burlywood:sI,cadetblue:oI,chartreuse:aI,chocolate:lI,coral:uI,cornflowerblue:hI,cornsilk:cI,crimson:fI,cyan:dI,darkblue:pI,darkcyan:mI,darkgoldenrod:vI,darkgray:gI,darkgreen:_I,darkgrey:yI,darkkhaki:bI,darkmagenta:xI,darkolivegreen:TI,darkorange:SI,darkorchid:EI,darkred:wI,darksalmon:PI,darkseagreen:CI,darkslateblue:MI,darkslategray:II,darkslategrey:AI,darkturquoise:OI,darkviolet:RI,deeppink:FI,deepskyblue:LI,dimgray:DI,dimgrey:BI,dodgerblue:NI,firebrick:kI,floralwhite:UI,forestgreen:GI,fuchsia:VI,gainsboro:HI,ghostwhite:$I,goldenrod:jI,gold:XI,gray:zI,green:WI,greenyellow:YI,grey:qI,honeydew:KI,hotpink:ZI,indianred:JI,indigo:QI,ivory:eA,khaki:tA,lavenderblush:rA,lavender:iA,lawngreen:nA,lemonchiffon:sA,lightblue:oA,lightcoral:aA,lightcyan:lA,lightgoldenrodyellow:uA,lightgray:hA,lightgreen:cA,lightgrey:fA,lightpink:dA,lightsalmon:pA,lightseagreen:mA,lightskyblue:vA,lightslategray:gA,lightslategrey:_A,lightsteelblue:yA,lightyellow:bA,lime:xA,limegreen:TA,linen:SA,magenta:EA,maroon:wA,mediumaquamarine:PA,mediumblue:CA,mediumorchid:MA,mediumpurple:IA,mediumseagreen:AA,mediumslateblue:OA,mediumspringgreen:RA,mediumturquoise:FA,mediumvioletred:LA,midnightblue:DA,mintcream:BA,mistyrose:NA,moccasin:kA,navajowhite:UA,navy:GA,oldlace:VA,olive:HA,olivedrab:$A,orange:jA,orangered:XA,orchid:zA,palegoldenrod:WA,palegreen:YA,paleturquoise:qA,palevioletred:KA,papayawhip:ZA,peachpuff:JA,peru:QA,pink:eO,plum:tO,powderblue:rO,purple:iO,rebeccapurple:nO,red:sO,rosybrown:oO,royalblue:aO,saddlebrown:lO,salmon:uO,sandybrown:hO,seagreen:cO,seashell:fO,sienna:dO,silver:pO,skyblue:mO,slateblue:vO,slategray:gO,slategrey:_O,snow:yO,springgreen:bO,steelblue:xO,tan:TO,teal:SO,thistle:EO,tomato:wO,turquoise:PO,violet:CO,wheat:MO,white:IO,whitesmoke:AO,yellow:OO,yellowgreen:RO};function ms(r,e){return e===void 0&&(e=[]),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,e}function Ap(r){var e=r.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function Op(r){return typeof r=="string"&&(r=FO[r.toLowerCase()]||r,r[0]==="#"&&(r=r.slice(1))),parseInt(r,16)}function LO(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function DO(){for(var r=[],e=[],t=0;t<32;t++)r[t]=t,e[t]=t;r[fe.NORMAL_NPM]=fe.NORMAL,r[fe.ADD_NPM]=fe.ADD,r[fe.SCREEN_NPM]=fe.SCREEN,e[fe.NORMAL]=fe.NORMAL_NPM,e[fe.ADD]=fe.ADD_NPM,e[fe.SCREEN]=fe.SCREEN_NPM;var i=[];return i.push(e),i.push(r),i}var Rp=DO();function Fp(r,e){return Rp[e?1:0][r]}function Fb(r,e,t,i){return t=t||new Float32Array(4),i||i===void 0?(t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e):(t[0]=r[0],t[1]=r[1],t[2]=r[2]),t[3]=e,t}function mh(r,e){if(e===1)return(e*255<<24)+r;if(e===0)return 0;var t=r>>16&255,i=r>>8&255,n=r&255;return t=t*e+.5|0,i=i*e+.5|0,n=n*e+.5|0,(e*255<<24)+(t<<16)+(i<<8)+n}function Lp(r,e,t,i){return t=t||new Float32Array(4),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,(i||i===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function Lb(r,e){e===void 0&&(e=null);var t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var i=0,n=0;i<t;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function vh(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var BO={Float32Array,Uint32Array,Int32Array,Uint8Array};function NO(r,e){for(var t=0,i=0,n={},s=0;s<r.length;s++)i+=e[s],t+=r[s].length;for(var o=new ArrayBuffer(t*4),a=null,l=0,s=0;s<r.length;s++){var u=e[s],h=r[s],c=vh(h);n[c]||(n[c]=new BO[c](o)),a=n[c];for(var f=0;f<h.length;f++){var d=(f/u|0)*i+l,p=f%u;a[d+p]=h[f]}l+=u}return new Float32Array(o)}function Ua(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function jf(r){return!(r&r-1)&&!!r}function Xf(r){var e=(r>65535?1:0)<<4;r>>>=e;var t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function us(r,e,t){var i=r.length,n;if(!(e>=i||t===0)){t=e+t>i?i-e:t;var s=i-t;for(n=e;n<s;++n)r[n]=r[n+t];r.length=s}}function is(r){return r===0?0:r<0?-1:1}var kO=0;function vn(){return++kO}var Lg={};function Xt(r,e,t){if(t===void 0&&(t=3),!Lg[e]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+r),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+r),console.warn(i))),Lg[e]=!0}}var zf={},Kt=Object.create(null),mr=Object.create(null);function UO(){var r;for(r in Kt)Kt[r].destroy();for(r in mr)mr[r].destroy()}function GO(){var r;for(r in Kt)delete Kt[r];for(r in mr)delete mr[r]}var Wf=function(){function r(e,t,i){this.canvas=ie.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||ie.RESOLUTION,this.resize(e,t)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),r}();function Db(r){var e=r.width,t=r.height,i=r.getContext("2d",{willReadFrequently:!0}),n=i.getImageData(0,0,e,t),s=n.data,o=s.length,a={top:null,left:null,right:null,bottom:null},l=null,u,h,c;for(u=0;u<o;u+=4)s[u+3]!==0&&(h=u/4%e,c=~~(u/4/e),a.top===null&&(a.top=c),(a.left===null||h<a.left)&&(a.left=h),(a.right===null||a.right<h)&&(a.right=h+1),(a.bottom===null||a.bottom<c)&&(a.bottom=c));return a.top!==null&&(e=a.right-a.left,t=a.bottom-a.top+1,l=i.getImageData(a.left,a.top,e,t)),{height:t,width:e,data:l}}var Bb=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function VO(r){var e=Bb.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var Rl;function Nb(r,e){if(e===void 0&&(e=globalThis.location),r.indexOf("data:")===0)return"";e=e||globalThis.location,Rl||(Rl=document.createElement("a")),Rl.href=r;var t=ar.parse(Rl.href),i=!t.port&&e.port===""||t.port===e.port;return t.hostname!==e.hostname||!i||t.protocol!==e.protocol?"anonymous":""}function Ga(r,e){var t=ie.RETINA_PREFIX.exec(r);return t?parseFloat(t[1]):e!==void 0?e:1}const HO=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:mr,CanvasRenderTarget:Wf,DATA_URI:Bb,EventEmitter:Or,ProgramCache:zf,TextureCache:Kt,clearTextureCache:GO,correctBlendMode:Fp,createIndicesForQuads:Lb,decomposeDataUri:VO,deprecation:Xt,destroyTextureCache:UO,determineCrossOrigin:Nb,earcut:xp,getBufferType:vh,getResolutionOfUrl:Ga,hex2rgb:ms,hex2string:Ap,interleaveTypedArrays:NO,isMobile:Tr,isPow2:jf,isWebGLSupported:Rb,log2:Xf,nextPow2:Ua,path:Ab,premultiplyBlendMode:Rp,premultiplyRgba:Fb,premultiplyTint:mh,premultiplyTintToRgba:Lp,removeItems:us,rgb2hex:LO,sayHello:Ob,sign:is,skipHello:zM,string2hex:Op,trimCanvas:Db,uid:vn,url:ar},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Va=Math.PI*2,kb=180/Math.PI,Ub=Math.PI/180,Tt;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(Tt||(Tt={}));var ze=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},r.prototype.copyTo=function(e){return e.set(this.x,this.y),e},r.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Fl=[new ze,new ze,new ze,new ze],Ne=function(){function r(e,t,i,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(n),this.type=Tt.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},r.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},r.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},r.prototype.intersects=function(e,t){if(!t){var i=this.x<e.x?e.x:this.x,n=this.right>e.right?e.right:this.right;if(n<=i)return!1;var s=this.y<e.y?e.y:this.y,o=this.bottom>e.bottom?e.bottom:this.bottom;return o>s}var a=this.left,l=this.right,u=this.top,h=this.bottom;if(l<=a||h<=u)return!1;var c=Fl[0].set(e.left,e.top),f=Fl[1].set(e.left,e.bottom),d=Fl[2].set(e.right,e.top),p=Fl[3].set(e.right,e.bottom);if(d.x<=c.x||f.y<=c.y)return!1;var m=Math.sign(t.a*t.d-t.b*t.c);if(m===0||(t.apply(c,c),t.apply(f,f),t.apply(d,d),t.apply(p,p),Math.max(c.x,f.x,d.x,p.x)<=a||Math.min(c.x,f.x,d.x,p.x)>=l||Math.max(c.y,f.y,d.y,p.y)<=u||Math.min(c.y,f.y,d.y,p.y)>=h))return!1;var v=m*(f.y-c.y),g=m*(c.x-f.x),_=v*a+g*u,y=v*l+g*u,b=v*a+g*h,T=v*l+g*h;if(Math.max(_,y,b,T)<=v*c.x+g*c.y||Math.min(_,y,b,T)>=v*p.x+g*p.y)return!1;var S=m*(c.y-d.y),E=m*(d.x-c.x),C=S*a+E*u,M=S*l+E*u,A=S*a+E*h,F=S*l+E*h;return!(Math.max(C,M,A,F)<=S*c.x+E*c.y||Math.min(C,M,A,F)>=S*p.x+E*p.y)},r.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this},r.prototype.fit=function(e){var t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var i=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Gb=function(){function r(e,t,i){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this.x=e,this.y=t,this.radius=i,this.type=Tt.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-e,s=this.y-t;return n*=n,s*=s,n+s<=i},r.prototype.getBounds=function(){return new Ne(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},r}(),Vb=function(){function r(e,t,i,n){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=e,this.y=t,this.width=i,this.height=n,this.type=Tt.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,n=(t-this.y)/this.height;return i*=i,n*=n,i+n<=1},r.prototype.getBounds=function(){return new Ne(this.x-this.width,this.y-this.height,this.width,this.height)},r.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Ta=function(){function r(){for(var e=arguments,t=[],i=0;i<arguments.length;i++)t[i]=e[i];var n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=Tt.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var e=this.points.slice(),t=new r(e);return t.closeStroke=this.closeStroke,t},r.prototype.contains=function(e,t){for(var i=!1,n=this.points.length/2,s=0,o=n-1;s<n;o=s++){var a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1],c=l>t!=h>t&&e<(u-a)*((t-l)/(h-l))+a;c&&(i=!i)}return i},r.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]")},r}(),Hb=function(){function r(e,t,i,n,s){e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=e,this.y=t,this.width=i,this.height=n,this.radius=s,this.type=Tt.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var n=e-(this.x+i),s=t-(this.y+i),o=i*i;if(n*n+s*s<=o||(n=e-(this.x+this.width-i),n*n+s*s<=o)||(s=t-(this.y+this.height-i),n*n+s*s<=o)||(n=e-(this.x+i),n*n+s*s<=o))return!0}return!1},r.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},r}(),Fi=function(){function r(e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=e,this.scope=t}return r.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new r(e,t,this._x,this._y)},r.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(e){return e.set(this._x,this._y),e},r.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),We=function(){function r(e,t,i,n,s,o){e===void 0&&(e=1),t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o}return r.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},r.prototype.set=function(e,t,i,n,s,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=s,this.ty=o,this},r.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(e,t){t=t||new ze;var i=e.x,n=e.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t},r.prototype.applyInverse=function(e,t){t=t||new ze;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,s=e.y;return t.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},r.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},r.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},r.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,s=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},r.prototype.append=function(e){var t=this.a,i=this.b,n=this.c,s=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this},r.prototype.setTransform=function(e,t,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d),this},r.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},r.prototype.decompose=function(e){var t=this.a,i=this.b,n=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,t),u=Math.abs(a+l);return u<1e-5||Math.abs(Va-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(n*n+s*s),e.position.x=this.tx+(o.x*t+o.y*n),e.position.y=this.ty+(o.x*i+o.y*s),e},r.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,s=this.tx,o=e*n-t*i;return this.a=n/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(e*this.ty-t*s)/o,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),kn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Un=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Yf=[],$b=[],Ll=Math.sign;function $O(){for(var r=0;r<16;r++){var e=[];Yf.push(e);for(var t=0;t<16;t++)for(var i=Ll(kn[r]*kn[t]+Gn[r]*Un[t]),n=Ll(Un[r]*kn[t]+Vn[r]*Un[t]),s=Ll(kn[r]*Gn[t]+Gn[r]*Vn[t]),o=Ll(Un[r]*Gn[t]+Vn[r]*Vn[t]),a=0;a<16;a++)if(kn[a]===i&&Un[a]===n&&Gn[a]===s&&Vn[a]===o){e.push(a);break}}for(var r=0;r<16;r++){var l=new We;l.set(kn[r],Un[r],Gn[r],Vn[r],0,0),$b.push(l)}}$O();var it={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return kn[r]},uY:function(r){return Un[r]},vX:function(r){return Gn[r]},vY:function(r){return Vn[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,e){return Yf[r][e]},sub:function(r,e){return Yf[r][it.inv(e)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,e){return Math.abs(r)*2<=Math.abs(e)?e>=0?it.S:it.N:Math.abs(e)*2<=Math.abs(r)?r>0?it.E:it.W:e>0?r>0?it.SE:it.SW:r>0?it.NE:it.NW},matrixAppendRotationInv:function(r,e,t,i){t===void 0&&(t=0),i===void 0&&(i=0);var n=$b[it.inv(e)];n.tx=t,n.ty=i,r.append(n)}},ul=function(){function r(){this.worldTransform=new We,this.localTransform=new We,this.position=new Fi(this.onChange,this,0,0),this.scale=new Fi(this.onChange,this,1,1),this.pivot=new Fi(this.onChange,this,0,0),this.skew=new Fi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},r.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sa=function(){return Sa=Object.assign||function(e){for(var t=arguments,i,n=1,s=arguments.length;n<s;n++){i=t[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Sa.apply(this,arguments)},Xe;(function(r){r.Application="application",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Loader="loader",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser"})(Xe||(Xe={}));var Dg=function(r){if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");var e=typeof r.extension!="object"?{type:r.extension}:r.extension;r=Sa(Sa({},e),{ref:r})}if(typeof r=="object")r=Sa({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},xi={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var r=arguments,e=this,t=[],i=0;i<arguments.length;i++)t[i]=r[i];return t.map(Dg).forEach(function(n){n.type.forEach(function(s){var o,a;return(a=(o=e._removeHandlers)[s])===null||a===void 0?void 0:a.call(o,n)})}),this},add:function(){for(var r=arguments,e=this,t=[],i=0;i<arguments.length;i++)t[i]=r[i];return t.map(Dg).forEach(function(n){n.type.forEach(function(s){var o=e._addHandlers,a=e._queue;o[s]?o[s](n):(a[s]=a[s]||[],a[s].push(n))})}),this},handle:function(r,e,t){var i=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(i[r]||n[r])throw new Error("Extension type "+r+" already has a handler");i[r]=e,n[r]=t;var s=this._queue;return s[r]&&(s[r].forEach(function(o){return e(o)}),delete s[r]),this},handleByMap:function(r,e){return this.handle(r,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(r,e){return this.handle(r,function(t){var i,n;e.includes(t.ref)||(e.push(t.ref),r===Xe.Loader&&((n=(i=t.ref).add)===null||n===void 0||n.call(i)))},function(t){var i=e.indexOf(t.ref);i!==-1&&e.splice(i,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ct=function(){function r(e){this.items=[],this._name=e,this._aliasCount=0}return r.prototype.emit=function(e,t,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,c=u.items;this._aliasCount++;for(var f=0,d=c.length;f<d;f++)c[f][h](e,t,i,n,s,o,a,l);return c===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},r.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},r.prototype.contains=function(e){return this.items.indexOf(e)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(Ct.prototype,{dispatch:{value:Ct.prototype.emit},run:{value:Ct.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ie.TARGET_FPMS=.06;var _i;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(_i||(_i={}));var xc=function(){function r(e,t,i,n){t===void 0&&(t=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=n}return r.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},r.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},r.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},r.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},r}(),Mt=function(){function r(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xc(null,null,1/0),this.deltaMS=1/ie.TARGET_FPMS,this.elapsedMS=1/ie.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(e,t,i){return i===void 0&&(i=_i.NORMAL),this._addListener(new xc(e,t,i))},r.prototype.addOnce=function(e,t,i){return i===void 0&&(i=_i.NORMAL),this._addListener(new xc(e,t,i,!0))},r.prototype._addListener=function(e){var t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(e,t){for(var i=this._head.next;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(e){e===void 0&&(e=performance.now());var t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ie.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,ie.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var e=r._shared=new r;e.autoStart=!0,e._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var e=r._system=new r;e.autoStart=!0,e._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),jb=function(){function r(){}return r.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,_i.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Mt.shared:new Mt,e.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},r.extension=Xe.Application,r}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ie.PREFER_ENV=Tr.any?gi.WEBGL:gi.WEBGL2;ie.STRICT_TEXTURE_CACHE=!1;var Ha=[];function gh(r,e){if(!r)return null;var t="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(t=i[1].toLowerCase())}for(var n=Ha.length-1;n>=0;--n){var s=Ha[n];if(s.test&&s.test(r,t))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qf=function(r,e){return qf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},qf(r,e)};function Je(r,e){qf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Kf=function(){return Kf=Object.assign||function(e){for(var t=arguments,i,n=1,s=arguments.length;n<s;n++){i=t[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Kf.apply(this,arguments)};function jO(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}var vs=function(){function r(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Ct("setRealSize"),this.onUpdate=new Ct("update"),this.onError=new Ct("onError")}return r.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},r.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(e,t,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(e,t){return!1},r}(),bs=function(r){Je(e,r);function e(t,i){var n=this,s=i||{},o=s.width,a=s.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return n=r.call(this,o,a)||this,n.data=t,n}return e.prototype.upload=function(t,i,n){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mr.UNPACK);var o=i.realWidth,a=i.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(i.target,0,0,0,o,a,i.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,o,a,0,i.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(vs),XO={scaleMode:Hr.NEAREST,format:J.RGBA,alphaMode:Mr.NPM},De=function(r){Je(e,r);function e(t,i){t===void 0&&(t=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,o=i.mipmap,a=i.anisotropicLevel,l=i.scaleMode,u=i.width,h=i.height,c=i.wrapMode,f=i.format,d=i.type,p=i.target,m=i.resolution,v=i.resourceOptions;return t&&!(t instanceof vs)&&(t=gh(t,v),t.internal=!0),n.resolution=m||ie.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((h||0)*n.resolution)/n.resolution,n._mipmap=o!==void 0?o:ie.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:ie.ANISOTROPIC_LEVEL,n._wrapMode=c||ie.WRAP_MODE,n._scaleMode=l!==void 0?l:ie.SCALE_MODE,n.format=f||J.RGBA,n.type=d||ce.UNSIGNED_BYTE,n.target=p||hn.TEXTURE_2D,n.alphaMode=s!==void 0?s:Mr.UNPACK,n.uid=vn(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&h>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(t),n}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,i){var n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,i,n){return n=n||this.resolution,this.setRealSize(t*n,i*n,n)},e.prototype.setRealSize=function(t,i,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=jf(this.realWidth)&&jf(this.realHeight)},e.prototype.setResolution=function(t){var i=this.resolution;return i===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*i)/t,this.height=Math.round(this.height*i)/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mr[this.cacheId],delete Kt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){n===void 0&&(n=ie.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+vn()}o=t._pixiId}var l=mr[o];if(s&&n&&!l)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return l||(l=new e(t,i),l.cacheId=o,e.addToCache(l,o)),l},e.fromBuffer=function(t,i,n,s){t=t||new Float32Array(i*n*4);var o=new bs(t,{width:i,height:n}),a=t instanceof Float32Array?ce.FLOAT:ce.UNSIGNED_BYTE;return new e(o,Object.assign({},XO,s||{width:i,height:n,type:a}))},e.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),mr[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),mr[i]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var i=mr[t];if(i){var n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete mr[t],i}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete mr[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Or),_h=function(r){Je(e,r);function e(t,i){var n=this,s=i||{},o=s.width,a=s.height;n=r.call(this,o,a)||this,n.items=[],n.itemDirtyIds=[];for(var l=0;l<t;l++){var u=new De;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=t,n._load=null,n.baseTexture=null,n}return e.prototype.initFromArray=function(t,i){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof vs?this.addResourceAt(t[n],n):this.addResourceAt(gh(t[n],i),n))},e.prototype.dispose=function(){for(var t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)},e.prototype.unbind=function(t){r.prototype.unbind.call(this,t);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=t.items[0],o=s.realWidth,a=s.realHeight;return t.resize(o,a),Promise.resolve(t)}),this._load},e}(vs),Dp=function(r){Je(e,r);function e(t,i){var n=this,s=i||{},o=s.width,a=s.height,l,u;return Array.isArray(t)?(l=t,u=t.length):u=t,n=r.call(this,u,{width:o,height:a})||this,l&&n.initFromArray(l,i),n}return e.prototype.addBaseTextureAt=function(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=hn.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,i,n){var s=this,o=s.length,a=s.itemDirtyIds,l=s.items,u=t.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,o,0,i.format,n.type,null);for(var h=0;h<o;h++){var c=l[h];a[h]<c.dirtyId&&(a[h]=c.dirtyId,c.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,i.format,n.type,c.resource.source))}return!0},e}(_h),yi=function(r){Je(e,r);function e(t){var i=this,n=t,s=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,o)||this,i.source=t,i.noSubImage=!1,i}return e.crossOrigin=function(t,i,n){n===void 0&&i.indexOf("data:")!==0?t.crossOrigin=Nb(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")},e.prototype.upload=function(t,i,n,s){var o=t.gl,a=i.realWidth,l=i.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mr.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===a&&n.height===l?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=a,n.height=l,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),r.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(vs),Bp=function(r){Je(e,r);function e(t){return r.call(this,t)||this}return e.test=function(t){var i=globalThis.OffscreenCanvas;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(yi),Np=function(r){Je(e,r);function e(t,i){var n=this,s=i||{},o=s.width,a=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");n=r.call(this,6,{width:o,height:a})||this;for(var h=0;h<e.SIDES;h++)n.items[h].target=hn.TEXTURE_CUBE_MAP_POSITIVE_X+h;return n.linkBaseTexture=u!==!1,t&&n.initFromArray(t,i),l!==!1&&n.load(),n}return e.prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=hn.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,i,n){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=hn.TEXTURE_CUBE_MAP_POSITIVE_X+i,t.parentTextureArray=this.baseTexture,this.items[i]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[i]=t,this},e.prototype.upload=function(t,i,n){for(var s=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];(s[o]<a.dirtyId||n.dirtyId<i.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,n),s[o]=a.dirtyId):s[o]<-1&&(t.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(_h),yh=function(r){Je(e,r);function e(t,i){var n=this;if(i=i||{},!(t instanceof HTMLImageElement)){var s=new Image;yi.crossOrigin(s,t,i.crossorigin),s.src=t,t=s}return n=r.call(this,t)||this,!t.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=t.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:ie.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(t){var i=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(n,s){var o=i.source;i.url=o.src;var a=function(){i.destroyed||(o.onload=null,o.onerror=null,i.resize(o.width,o.height),i._load=null,i.createBitmap?n(i.process()):n(i))};o.complete&&o.src?a():(o.onload=a,o.onerror=function(l){s(l),i.onError.emit(l)})}),this._load)},e.prototype.process=function(){var t=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return n(o,0,0,i.width,i.height,{premultiplyAlpha:t.alphaMode===null||t.alphaMode===Mr.UNPACK?"premultiply":"none"})}).then(function(o){return t.destroyed?Promise.reject():(t.bitmap=o,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,t,i,n,this.bitmap),!this.preserveBitmap){var s=!0,o=i._glTextures;for(var a in o){var l=o[a];if(l!==n&&l.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e}(yi),kp=function(r){Je(e,r);function e(t,i){var n=this;return i=i||{},n=r.call(this,ie.ADAPTER.createCanvas())||this,n._width=0,n._height=0,n.svg=t,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var t=this,i=new Image;yi.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){t._resolve&&(i.onerror=null,t.onError.emit(n))},i.onload=function(){if(t._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*t.scale,a=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(o=t._overrideWidth||t._overrideHeight/s*n,a=t._overrideHeight||t._overrideWidth/n*s),o=Math.round(o),a=Math.round(a);var l=t.source;l.width=o,l.height=a,l._pixiId="canvas_"+vn(),l.getContext("2d").drawImage(i,0,0,n,s,0,0,o,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return i==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(yi),Up=function(r){Je(e,r);function e(t,i){var n=this;if(i=i||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var o=t[0].src||t[0];yi.crossOrigin(s,o,i.crossorigin);for(var a=0;a<t.length;++a){var l=document.createElement("source"),u=t[a],h=u.src,c=u.mime;h=h||t[a];var f=h.split("?").shift().toLowerCase(),d=f.slice(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[d]||"video/"+d,l.src=h,l.type=c,s.appendChild(l)}t=s}return n=r.call(this,t)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return e.prototype.update=function(t){if(!this.destroyed){var i=Mt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,i.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Mt.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(t.videoWidth,t.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),r.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Mt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(yi),Gp=function(r){Je(e,r);function e(t){return r.call(this,t)||this}return e.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},e}(yi);Ha.push(yh,Gp,Bp,Up,kp,bs,Np,Dp);var Xb={__proto__:null,Resource:vs,BaseImageResource:yi,INSTALLED:Ha,autoDetectResource:gh,AbstractMultiResource:_h,ArrayResource:Dp,BufferResource:bs,CanvasResource:Bp,CubeResource:Np,ImageResource:yh,SVGResource:kp,VideoResource:Up,ImageBitmapResource:Gp},zO=function(r){Je(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.upload=function(t,i,n){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mr.UNPACK);var o=i.realWidth,a=i.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(i.target,0,0,0,o,a,i.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,o,a,0,i.format,n.type,this.data)),!0},e}(bs),ku=function(){function r(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ct("disposeFramebuffer"),this.multisample=et.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new De(null,{scaleMode:Hr.NEAREST,resolution:1,mipmap:Cr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(e){return this.depthTexture=e||new De(new zO(null,{width:this.width,height:this.height}),{scaleMode:Hr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Cr.OFF,format:J.DEPTH_COMPONENT,type:ce.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(e/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,t/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Vp=function(r){Je(e,r);function e(t){t===void 0&&(t={});var i=this;if(typeof t=="number"){var n=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];t={width:n,height:s,scaleMode:o,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:et.NONE,i=r.call(this,null,t)||this,i.mipmap=Cr.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new ku(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=t.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(De),Hp=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(e,t,i){var n=t.width,s=t.height;if(i){var o=e.width/2/n,a=e.height/2/s,l=e.x/n+o,u=e.y/s+a;i=it.add(i,it.NW),this.x0=l+o*it.uX(i),this.y0=u+a*it.uY(i),i=it.add(i,2),this.x1=l+o*it.uX(i),this.y1=u+a*it.uY(i),i=it.add(i,2),this.x2=l+o*it.uX(i),this.y2=u+a*it.uY(i),i=it.add(i,2),this.x3=l+o*it.uX(i),this.y3=u+a*it.uY(i)}else this.x0=e.x/n,this.y0=e.y/s,this.x1=(e.x+e.width)/n,this.y1=e.y/s,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/s,this.x3=e.x/n,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),Bg=new Hp;function Dl(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var ve=function(r){Je(e,r);function e(t,i,n,s,o,a){var l=r.call(this)||this;if(l.noFrame=!1,i||(l.noFrame=!0,i=new Ne(0,0,1,1)),t instanceof e&&(t=t.baseTexture),l.baseTexture=t,l._frame=i,l.trim=s,l.valid=!1,l._uvs=Bg,l.uvMatrix=null,l.orig=n||i,l._rotate=Number(o||0),o===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new ze(a.x,a.y):new ze(0,0),l._updateID=0,l.textureCacheIds=[],t.valid?l.noFrame?t.valid&&l.onBaseTextureUpdated(t):l.frame=i:t.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&t.on("update",l.onBaseTextureUpdated,l),l}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&Kt[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===Bg&&(this._uvs=new Hp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){i===void 0&&(i={}),n===void 0&&(n=ie.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else if(t instanceof De){if(!t.cacheId){var a=i&&i.pixiIdPrefix||"pixiid";t.cacheId=a+"-"+vn(),De.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+vn()}o=t._pixiId}var l=Kt[o];if(s&&n&&!l)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!l&&!(t instanceof De)?(i.resolution||(i.resolution=Ga(t)),l=new e(new De(t,i)),l.baseTexture.cacheId=o,De.addToCache(l.baseTexture,o),e.addToCache(l,o)):!l&&t instanceof De&&(l=new e(t),e.addToCache(l,o)),l},e.fromURL=function(t,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=e.from(t,Object.assign({resourceOptions:n},i),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(t,i,n,s){return new e(De.fromBuffer(t,i,n,s))},e.fromLoader=function(t,i,n,s){var o=new De(t,Object.assign({scaleMode:ie.SCALE_MODE,resolution:Ga(i)},s)),a=o.resource;a instanceof yh&&(a.url=i);var l=new e(o);return n||(n=i),De.addToCache(l.baseTexture,n),e.addToCache(l,n),n!==i&&(De.addToCache(l.baseTexture,i),e.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},e.addToCache=function(t,i){i&&(t.textureCacheIds.indexOf(i)===-1&&t.textureCacheIds.push(i),Kt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),Kt[i]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var i=Kt[t];if(i){var n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete Kt[t],i}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)Kt[t.textureCacheIds[s]]===t&&delete Kt[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var i=t.x,n=t.y,s=t.width,o=t.height,a=i+s>this.baseTexture.width,l=n+o>this.baseTexture.height;if(a||l){var u=a&&l?"and":"or",h="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,c="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+u+" "+c))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new De),Dl(e._EMPTY),Dl(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=ie.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(De.from(t)),Dl(e._WHITE),Dl(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Or),gn=function(r){Je(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,o=Math.round(t*s)/s,a=Math.round(i*s)/s;this.valid=o>0&&a>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(o,a),this.updateUvs()},e.prototype.setResolution=function(t){var i=this.baseTexture;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))},e.create=function(t){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof t=="number"&&(Xt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new Vp(t))},e}(ve),zb=function(){function r(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(e,t,i){i===void 0&&(i=et.NONE);var n=new Vp(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new gn(n)},r.prototype.getOptimalTexture=function(e,t,i,n){i===void 0&&(i=1),n===void 0&&(n=et.NONE);var s;e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Ua(e),t=Ua(t),s=((e&65535)<<16|t&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,n)),o.filterPoolKey=s,o.setResolution(i),o},r.prototype.getFilterTexture=function(e,t,i){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||et.NONE);return n.filterFrame=e.filterFrame,n},r.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},r.prototype.returnFilterTexture=function(e){this.returnTexture(e)},r.prototype.clear=function(e){if(e=e!==!1,e)for(var t in this.texturePool){var i=this.texturePool[t];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var t in this.texturePool)if(Number(t)<0){var i=this.texturePool[t];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},r.SCREEN_KEY=-1,r}(),Zf=function(){function r(e,t,i,n,s,o,a){t===void 0&&(t=0),i===void 0&&(i=!1),n===void 0&&(n=ce.FLOAT),this.buffer=e,this.size=t,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a}return r.prototype.destroy=function(){this.buffer=null},r.from=function(e,t,i,n,s){return new r(e,t,i,n,s)},r}(),WO=0,gt=function(){function r(e,t,i){t===void 0&&(t=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=WO++,this.disposeRunner=new Ct("disposeBuffer")}return r.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Xr.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Xr.ELEMENT_ARRAY_BUFFER:Xr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new r(e)},r}(),YO={Float32Array,Uint32Array,Int32Array,Uint8Array};function qO(r,e){for(var t=0,i=0,n={},s=0;s<r.length;s++)i+=e[s],t+=r[s].length;for(var o=new ArrayBuffer(t*4),a=null,l=0,s=0;s<r.length;s++){var u=e[s],h=r[s],c=vh(h);n[c]||(n[c]=new YO[c](o)),a=n[c];for(var f=0;f<h.length;f++){var d=(f/u|0)*i+l,p=f%u;a[d+p]=h[f]}l+=u}return new Float32Array(o)}var Ng={5126:4,5123:2,5121:1},KO=0,ZO={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Mo=function(){function r(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=KO++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ct("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(e,t,i,n,s,o,a,l){if(i===void 0&&(i=0),n===void 0&&(n=!1),l===void 0&&(l=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof gt||(t instanceof Array&&(t=new Float32Array(t)),t=new gt(t));var u=e.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],t,i,n,s);return this}var c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Zf(c,i,n,s,o,a,l),this.instanced=this.instanced||l,this},r.prototype.getAttribute=function(e){return this.attributes[e]},r.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},r.prototype.addIndex=function(e){return e instanceof gt||(e instanceof Array&&(e=new Uint16Array(e)),e=new gt(e)),e.type=Xr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],t=[],i=new gt,n;for(n in this.attributes){var s=this.attributes[n],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*Ng[s.type]/4),s.buffer=0}for(i.data=qO(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e],i=this.buffers[t.buffer];return i.data.length/(t.stride/4||t.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var e=new r,t=0;t<this.buffers.length;t++)e.buffers[t]=new gt(this.buffers[t].data.slice(0));for(var t in this.attributes){var i=this.attributes[t];e.attributes[t]=new Zf(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Xr.ELEMENT_ARRAY_BUFFER),e},r.merge=function(e){for(var t=new r,i=[],n=[],s=[],o,a=0;a<e.length;a++){o=e[a];for(var l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(var a=0;a<o.buffers.length;a++)i[a]=new ZO[vh(o.buffers[a].data)](n[a]),t.buffers[a]=new gt(i[a]);for(var a=0;a<e.length;a++){o=e[a];for(var l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Xr.ELEMENT_ARRAY_BUFFER;for(var u=0,h=0,c=0,f=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){f=a;break}for(var a in o.attributes){var d=o.attributes[a];(d.buffer|0)===f&&(h+=d.size*Ng[d.type]/4)}for(var a=0;a<e.length;a++){for(var p=e[a].indexBuffer.data,l=0;l<p.length;l++)t.indexBuffer.data[l+c]+=u;u+=e[a].buffers[f].data.length/h,c+=p.length}}return t},r}(),Wb=function(r){Je(e,r);function e(){var t=r.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return e}(Mo),$p=function(r){Je(e,r);function e(){var t=r.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new gt(t.vertices),t.uvBuffer=new gt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return e.prototype.map=function(t,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/t.width,this.uvs[3]=s,this.uvs[4]=n+i.width/t.width,this.uvs[5]=s+i.height/t.height,this.uvs[6]=n,this.uvs[7]=s+i.height/t.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Mo),JO=0,cn=function(){function r(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=JO++,this.static=!!t,this.ubo=!!i,e instanceof gt?(this.buffer=e,this.buffer.type=Xr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new gt(new Float32Array(1)),this.buffer.type=Xr.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(e,t,i){if(!this.ubo)this.uniforms[e]=new r(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(e,t,i){return new r(e,t,i)},r.uboFrom=function(e,t){return new r(e,t??!0,!0)},r}(),Yb=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=et.NONE,this.sourceFrame=new Ne,this.destinationFrame=new Ne,this.bindingSourceFrame=new Ne,this.bindingDestinationFrame=new Ne,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Bl=[new ze,new ze,new ze,new ze],Tc=new We,jp=function(){function r(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new zb,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Wb,this.quadUv=new $p,this.tempRect=new Ne,this.activeState={},this.globalUniforms=new cn({outputFrame:new Ne,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(e,t){for(var i,n,s=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new Yb,l=this.renderer.renderTexture,u=t[0].resolution,h=t[0].multisample,c=t[0].padding,f=t[0].autoFit,d=(i=t[0].legacy)!==null&&i!==void 0?i:!0,p=1;p<t.length;p++){var m=t[p];u=Math.min(u,m.resolution),h=Math.min(h,m.multisample),c=this.useMaxPadding?Math.max(c,m.padding):c+m.padding,f=f&&m.autoFit,d=d||((n=m.legacy)!==null&&n!==void 0?n:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),o.push(a),a.resolution=u,a.multisample=h,a.legacy=d,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(c);var v=this.tempRect.copyFrom(l.sourceFrame);s.projection.transform&&this.transformAABB(Tc.copyFrom(s.projection.transform).invert(),v),f?(a.sourceFrame.fit(v),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(v)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,l.current?l.current.resolution:s.resolution,l.sourceFrame,l.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,h),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=a.sourceFrame.width,g.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(l.sourceFrame),a.bindingDestinationFrame.copyFrom(l.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,l.bind(a.renderTexture,a.sourceFrame,g),s.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;var n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;var s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){var l=n.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,u.renderTexture,vr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var h=t.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,t.resolution);c.filterFrame=h.filterFrame;var f=0;for(f=0;f<i.length-1;++f){f===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,t.resolution),c.filterFrame=h.filterFrame),i[f].apply(this,h,c,vr.CLEAR,t);var d=h;h=c,c=d}i[f].apply(this,h,u.renderTexture,vr.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)},r.prototype.bindAndClear=function(e,t){t===void 0&&(t=vr.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=s.stateId&1||this.forceClear;(t===vr.CLEAR||t===vr.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(e,t,i,n){var s=this.renderer;s.state.set(e.state),this.bindAndClear(i,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(xr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(xr.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(e,t){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,o=t._texture.orig,a=e.set(s.width,0,0,s.height,n.x,n.y),l=t.worldTransform.copyTo(We.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(e,t,i,n){return i===void 0&&(i=1),n===void 0&&(n=et.NONE),this.texturePool.getOptimalTexture(e,t,i,n)},r.prototype.getFilterTexture=function(e,t,i){if(typeof e=="number"){var n=e;e=t,t=n}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||et.NONE);return s.filterFrame=e.filterFrame,s},r.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(e,t){var i=Bl[0],n=Bl[1],s=Bl[2],o=Bl[3];i.set(t.left,t.top),n.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(n,n),e.apply(s,s),e.apply(o,o);var a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=h-l},r.prototype.roundFrame=function(e,t,i,n,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){var o=s.a,a=s.b,l=s.c,u=s.d;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Tc.copyFrom(s):Tc.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}},r}(),hl=function(){function r(e){this.renderer=e}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(e){},r}(),Xp=function(){function r(e){this.renderer=e,this.emptyRenderer=new hl(e),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(e,t){for(var i=this.renderer.texture.boundTextures,n=t-1;n>=0;--n)e[n]=i[n]||null,e[n]&&(e[n]._batchLocation=n)},r.prototype.boundArray=function(e,t,i,n){for(var s=e.elements,o=e.ids,a=e.count,l=0,u=0;u<a;u++){var h=s[u],c=h._batchLocation;if(c>=0&&c<n&&t[c]===h){o[u]=c;continue}for(;l<n;){var f=t[l];if(f&&f._batchEnabled===i&&f._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,t[l]=h;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),kg=0,zp=function(){function r(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=kg++},r.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=kg++,this.renderer.runners.contextChange.emit(e)},r.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},r.prototype.createContext=function(e,t){var i;if(ie.PREFER_ENV>=gi.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()},0)},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(e){var t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),qb=function(){function r(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=et.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),QO=new Ne,Wp=function(){function r(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ku(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ne,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;ie.PREFER_ENV===gi.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=function(n){return t.drawBuffersWEBGL(n)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},r.prototype.bind=function(e,t,i){i===void 0&&(i=0);var n=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var l=t.width>>i,u=t.height>>i,h=l/t.width;this.setViewport(t.x*h,t.y*h,l,u)}else{var l=e.width>>i,u=e.height>>i;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(e,t,i,n){var s=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=i,s.height=n,this.gl.viewport(e,t,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(e,t,i,n,s){s===void 0&&(s=Fa.COLOR|Fa.DEPTH);var o=this.gl;o.clearColor(e,t,i,n),o.clear(s)},r.prototype.initFramebuffer=function(e){var t=this.gl,i=new qb(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(e){var t=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.RGBA8,e.width,e.height)),i.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var n=e.colorTextures,s=n.length;t.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},r.prototype.updateFramebuffer=function(e,t){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var a=[],l=0;l<o;l++){var u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),!(l===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture){var c=this.writeDepthTexture;if(c){var f=e.depthTexture;this.renderer.texture.bind(f,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,t)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},r.prototype.detectSamples=function(e){var t=this.msaaSamples,i=et.NONE;if(e<=1||t===null)return i;for(var n=0;n<t.length;n++)if(t[n]<=e){i=t[n];break}return i===1&&(i=et.NONE),i},r.prototype.blit=function(e,t,i){var n=this,s=n.current,o=n.renderer,a=n.gl,l=n.CONTEXT_UID;if(o.context.webGLVersion===2&&s){var u=s.glFramebuffers[l];if(u){if(!e){if(!u.msaaBuffer)return;var h=s.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new ku(s.width,s.height),u.blitFramebuffer.addColorTexture(0,h)),e=u.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=QO,t.width=s.width,t.height=s.height),i||(i=t);var c=t.width===i.width&&t.height===i.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,c?a.NEAREST:a.LINEAR)}}},r.prototype.disposeFramebuffer=function(e,t){var i=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},r.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)},r.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){e.stencil=!0;var i=e.width,n=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),t.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ne},r.prototype.destroy=function(){this.renderer=null},r}(),Sc={5126:4,5123:2,5121:1},Yp=function(){function r(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;ie.PREFER_ENV===gi.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(s,o){return n.vertexAttribDivisorANGLE(s,o)},e.drawElementsInstanced=function(s,o,a,l,u){return n.drawElementsInstancedANGLE(s,o,a,l,u)},e.drawArraysInstanced=function(s,o,a,l){return n.drawArraysInstancedANGLE(s,o,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},r.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var i=this.gl,n=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var o=n[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,i=0;i<e.buffers.length;i++){var n=e.buffers[i];t.update(n)}},r.prototype.checkCompatibility=function(e,t){var i=e.attributes,n=t.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(e,t){var i=e.attributes,n=t.attributeData,s=["g",e.id];for(var o in i)n[o]&&s.push(o,n[o].location);return s.join("-")},r.prototype.initGeometryVao=function(e,t,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID],h=u[l];if(h)return u[a.id]=h,h;var c=e.buffers,f=e.attributes,d={},p={};for(var m in c)d[m]=0,p[m]=0;for(var m in f)!f[m].size&&a.attributeData[m]?f[m].size=a.attributeData[m].size:f[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[f[m].buffer]+=f[m].size*Sc[f[m].type];for(var m in f){var v=f[m],g=v.size;v.stride===void 0&&(d[v.buffer]===g*Sc[v.type]?v.stride=0:v.stride=d[v.buffer]),v.start===void 0&&(v.start=p[v.buffer],p[v.buffer]+=g*Sc[v.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(var _=0;_<c.length;_++){var y=c[_];o.bind(y),i&&y._glBuffers[s].refCount++}return this.activateVao(e,a),this._activeVao=h,u[a.id]=h,u[l]=h,h},r.prototype.disposeGeometry=function(e,t){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=e.buffers,a=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!n){if(a)for(var l=0;l<o.length;l++){var u=o[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&a.dispose(o[l],t))}if(!t){for(var h in n)if(h[0]==="g"){var c=n[h];this._activeVao===c&&this.unbind(),s.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)},r.prototype.activateVao=function(e,t){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var l=null;for(var u in a){var h=a[u],c=o[h.buffer],f=c._glBuffers[n];if(t.attributeData[u]){l!==f&&(s.bind(c),l=f);var d=t.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(e,t,i,n){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,t||o.getSize(),n||1):s.drawArrays(e,i,t||o.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),Kb=function(){function r(e){e===void 0&&(e=null),this.type=mt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ie.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(r.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=mt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},r.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function Ug(r,e,t){var i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}function Gg(r,e){var t=r.getShaderSource(e).split(`
`).map(function(u,h){return h+": "+u}),i=r.getShaderInfoLog(e),n=i.split(`
`),s={},o=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),a=[""];o.forEach(function(u){t[u-1]="%c"+t[u-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=t.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function eR(r,e,t,i){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||Gg(r,t),r.getShaderParameter(i,r.COMPILE_STATUS)||Gg(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}function Ec(r){for(var e=new Array(r),t=0;t<e.length;t++)e[t]=!1;return e}function Zb(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Ec(2*e);case"bvec3":return Ec(3*e);case"bvec4":return Ec(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Jb={},Uo=Jb;function Qb(){if(Uo===Jb||Uo&&Uo.isContextLost()){var r=ie.ADAPTER.createCanvas(),e=void 0;ie.PREFER_ENV>=gi.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Uo=e}return Uo}var Nl;function tR(){if(!Nl){Nl=Zt.MEDIUM;var r=Qb();if(r&&r.getShaderPrecisionFormat){var e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Nl=e.precision?Zt.HIGH:Zt.MEDIUM}}return Nl}function Vg(r,e,t){if(r.substring(0,9)!=="precision"){var i=e;return e===Zt.HIGH&&t!==Zt.HIGH&&(i=Zt.MEDIUM),"precision "+i+` float;
`+r}else if(t!==Zt.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var rR={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ex(r){return rR[r]}var kl=null,Hg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function tx(r,e){if(!kl){var t=Object.keys(Hg);kl={};for(var i=0;i<t.length;++i){var n=t[i];kl[r[n]]=Hg[n]}}return kl[e]}var hs=[{test:function(r){return r.type==="float"&&r.size===1&&!r.isArray},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r,e){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,e){return r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,e){return r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,e){return r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1&&!r.isArray},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],iR={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},nR={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function sR(r,e){var t,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in r.uniforms){var s=e[n];if(!s){!((t=r.uniforms[n])===null||t===void 0)&&t.group&&(r.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var o=r.uniforms[n],a=!1,l=0;l<hs.length;l++)if(hs[l].test(s,o)){i.push(hs[l].code(n,o)),a=!0;break}if(!a){var u=s.size===1&&!s.isArray?iR:nR,h=u[s.type].replace("location",'ud["'+n+'"].location');i.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var oR=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function aR(r){for(var e="",t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+="if(test == "+t+".0){}");return e}function rx(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var i=oR.replace(/%forloop%/gi,aR(r));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}var Go;function lR(){if(typeof Go=="boolean")return Go;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Go=r({a:"b"},"a","b")===!0}catch{Go=!1}return Go}var uR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,hR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,cR=0,Ul={},Io=function(){function r(e,t,i){i===void 0&&(i="pixi-shader"),this.id=cR++,this.vertexSrc=e||r.defaultVertexSrc,this.fragmentSrc=t||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Ul[i]?(Ul[i]++,i+="-"+Ul[i]):Ul[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Vg(this.vertexSrc,ie.PRECISION_VERTEX,Zt.HIGH),this.fragmentSrc=Vg(this.fragmentSrc,ie.PRECISION_FRAGMENT,tR())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return hR},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return uR},enumerable:!1,configurable:!0}),r.from=function(e,t,i){var n=e+t,s=zf[n];return s||(zf[n]=s=new r(e,t,i)),s},r}(),Di=function(){function r(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof cn?this.uniformGroup=t:this.uniformGroup=new cn(t):this.uniformGroup=new cn({}),this.disposeRunner=new Ct("disposeShader")}return r.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var i in t.uniforms){var n=t.uniforms[i];if(n.group&&this.checkUniformExists(e,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(e,t,i){var n=Io.from(e,t);return new r(n,i)},r}(),wc=0,Pc=1,Cc=2,Mc=3,Ic=4,Ac=5,Tn=function(){function r(){this.data=0,this.blendMode=fe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<wc)},set:function(e){!!(this.data&1<<wc)!==e&&(this.data^=1<<wc)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Pc)},set:function(e){!!(this.data&1<<Pc)!==e&&(this.data^=1<<Pc)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<Cc)},set:function(e){!!(this.data&1<<Cc)!==e&&(this.data^=1<<Cc)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<Mc)},set:function(e){!!(this.data&1<<Mc)!==e&&(this.data^=1<<Mc)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<Ac)},set:function(e){!!(this.data&1<<Ac)!==e&&(this.data^=1<<Ac)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Ic)},set:function(e){!!(this.data&1<<Ic)!==e&&(this.data^=1<<Ic)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==fe.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var e=new r;return e.depthTest=!1,e.blend=!0,e},r}(),fR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,dR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Hi=function(r){Je(e,r);function e(t,i,n){var s=this,o=Io.from(t||e.defaultVertexSrc,i||e.defaultFragmentSrc);return s=r.call(this,o,n)||this,s.padding=0,s.resolution=ie.FILTER_RESOLUTION,s.multisample=ie.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Tn,s}return e.prototype.apply=function(t,i,n,s,o){t.applyFilter(this,i,n,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return dR},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return fR},enumerable:!1,configurable:!0}),e}(Di),pR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,mR=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,$g=new We,bh=function(){function r(e,t){this._texture=e,this.mapCoord=new We,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var i=this.mapCoord,n=0;n<e.length;n+=2){var s=e[n],o=e[n+1];t[n]=s*i.a+o*i.c+i.tx,t[n+1]=s*i.b+o*i.d+i.ty}return t},r.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=t.orig,s=t.trim;s&&($g.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append($g));var o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0},r}(),ix=function(r){Je(e,r);function e(t,i,n){var s=this,o=null;return typeof t!="string"&&i===void 0&&n===void 0&&(o=t,t=void 0,i=void 0,n=void 0),s=r.call(this,t||pR,i||mR,n)||this,s.maskSprite=o,s.maskMatrix=new We,s}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,i,n,s){var o=this._maskSprite,a=o._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new bh(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,i,n,s))},e}(Hi),qp=function(){function r(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},r.prototype.push=function(e,t){var i=t;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Kb;n.pooled=!0,n.maskObject=t,i=n}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==mt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case mt.SCISSOR:this.renderer.scissor.push(i);break;case mt.STENCIL:this.renderer.stencil.push(i);break;case mt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case mt.COLOR:this.pushColorMask(i);break}i.type===mt.SPRITE&&this.maskStack.push(i)},r.prototype.pop=function(e){var t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case mt.SCISSOR:this.renderer.scissor.pop(t);break;case mt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case mt.SPRITE:this.popSpriteMask(t);break;case mt.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===mt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},r.prototype.detect=function(e){var t=e.maskObject;t?t.isSprite?e.type=mt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=mt.SCISSOR:e.type=mt.STENCIL:e.type=mt.COLOR},r.prototype.pushSpriteMask=function(e){var t,i,n=e.maskObject,s=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new ix]));var a=this.renderer,l=a.renderTexture,u,h;if(l.current){var c=l.current;u=e.resolution||c.resolution,h=(t=e.multisample)!==null&&t!==void 0?t:c.multisample}else u=e.resolution||a.resolution,h=(i=e.multisample)!==null&&i!==void 0?i:a.multisample;o[0].resolution=u,o[0].multisample=h,o[0].maskSprite=n;var f=s.filterArea;s.filterArea=n.getBounds(!0),a.filter.push(s,o),s.filterArea=f,e._filters||this.alphaMaskIndex++},r.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},r.prototype.pushColorMask=function(e){var t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},r.prototype.popColorMask=function(e){var t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},r.prototype.destroy=function(){this.renderer=null},r}(),nx=function(){function r(e){this.renderer=e,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(e){var t=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var n=this.getStackLength();n!==i&&(n===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),jg=new We,Xg=[],Kp=function(r){Je(e,r);function e(t){var i=r.call(this,t)||this;return i.glConst=ie.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var i;if(!t._scissorRectLocal){var n=t._scissorRect,s=t.maskObject,o=this.renderer,a=o.renderTexture,l=s.getBounds(!0,(i=Xg.pop())!==null&&i!==void 0?i:new Ne);this.roundFrameToPixels(l,a.current?a.current.resolution:o.resolution,a.sourceFrame,a.destinationFrame,o.projection.transform),n&&l.fit(n),t._scissorRectLocal=l}},e.isMatrixRotated=function(t){if(!t)return!1;var i=t.a,n=t.b,s=t.c,o=t.d;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(t,i,n,s,o){e.isMatrixRotated(o)||(o=o?jg.copyFrom(o):jg.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,t),t.fit(s),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var i=this.renderer.gl;t._scissorRect||i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var i=this.renderer.gl;t&&Xg.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=t.y:i=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,i,t.width,t.height)},e}(nx),Zp=function(r){Je(e,r);function e(t){var i=r.call(this,t)||this;return i.glConst=ie.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var i=t.maskObject,n=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;var o=t._colorMask;o!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,o!==0&&(t._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},e.prototype.pop=function(t){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(n._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(nx),Jp=function(){function r(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new We,this.transform=null}return r.prototype.update=function(e,t,i,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(e,t,i,n){var s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d},r.prototype.setTransform=function(e){},r.prototype.destroy=function(){this.renderer=null},r}(),Mn=new Ne,Vo=new Ne,Qp=function(){function r(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ne,this.destinationFrame=new Ne,this.viewportFrame=new Ne}return r.prototype.bind=function(e,t,i){e===void 0&&(e=null);var n=this.renderer;this.current=e;var s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(Mn.width=e.frame.width,Mn.height=e.frame.height,t=Mn),i||(Vo.x=e.frame.x,Vo.y=e.frame.y,Vo.width=t.width,Vo.height=t.height,i=Vo),o=s.framebuffer):(a=n.resolution,t||(Mn.width=n.screen.width,Mn.height=n.screen.height,t=Mn),i||(i=Mn,i.width=t.width,i.height=t.height));var l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(e,t){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var o=this.viewportFrame,a=o.x,l=o.y,u=o.width,h=o.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,h)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function vR(r,e,t,i,n){t.buffer.update(n)}var gR={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},sx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function ox(r){for(var e=r.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),t=0,i=0,n=0,s=0;s<e.length;s++){var o=e[s];if(t=sx[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!==0&&i<16){var a=i%t%16;i+=a,n+=a}i+t>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=t,i=t):(o.offset=n,i+=t,n+=t)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function ax(r,e){var t=[];for(var i in r)e[i]&&t.push(e[i]);return t.sort(function(n,s){return n.index-s.index}),t}function lx(r,e){if(!r.autoManage)return{size:0,syncFunc:vR};for(var t=ax(r.uniforms,e),i=ox(t),n=i.uboElements,s=i.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<n.length;a++){for(var l=n[a],u=r.uniforms[l.data.name],h=l.data.name,c=!1,f=0;f<hs.length;f++){var d=hs[f];if(d.codeUbo&&d.test(l.data,u)){o.push("offset = "+l.offset/4+";",hs[f].codeUbo(l.data.name,u)),c=!0;break}}if(!c)if(l.data.size>1){var p=ex(l.data.type),m=Math.max(sx[l.data.type]/16,1),v=p/m,g=(4-v%4)%4;o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*m+`; i++)
                {
                    for(var j = 0; j < `+v+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var _=gR[l.data.type];o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;
                `+_+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var _R=function(){function r(){}return r}(),ux=function(){function r(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function yR(r,e){for(var t={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=e.getActiveAttrib(r,n);if(s.name.indexOf("gl_")!==0){var o=tx(e,s.type),a={type:o,name:s.name,size:ex(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}}return t}function bR(r,e){for(var t={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=e.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=tx(e,s.type);t[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:Zb(l,s.size)}}return t}function hx(r,e){var t=Ug(r,r.VERTEX_SHADER,e.vertexSrc),i=Ug(r,r.FRAGMENT_SHADER,e.fragmentSrc),n=r.createProgram();if(r.attachShader(n,t),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||eR(r,n,t,i),e.attributeData=yR(n,r),e.uniformData=bR(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort(function(h,c){return h>c?1:-1});for(var o=0;o<s.length;o++)e.attributeData[s[o]].location=o,r.bindAttribLocation(n,o,s[o]);r.linkProgram(n)}r.deleteShader(t),r.deleteShader(i);var a={};for(var o in e.uniformData){var l=e.uniformData[o];a[o]={location:r.getUniformLocation(n,o),value:Zb(l.type,l.size)}}var u=new ux(n,a);return u}var xR=0,Gl={textureCount:0,uboCount:0},em=function(){function r(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xR++}return r.prototype.systemCheck=function(){if(!lR())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(e){this.gl=e,this.reset()},r.prototype.bind=function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),t||(Gl.textureCount=0,Gl.uboCount=0,this.syncUniformGroup(e.uniformGroup,Gl)),n},r.prototype.setUniforms=function(e){var t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)},r.prototype.syncUniformGroup=function(e,t){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))},r.prototype.syncUniforms=function(e,t,i){var n=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);n(t.uniformData,e.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=sR(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(e,t){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var n=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),n(i.uniformData,e.uniforms,this.renderer,Gl,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])},r.prototype.createSyncBufferGroup=function(e,t,i){var n=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=lx(e,this.shader.program.uniformData)),e.autoManage){var l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]},r.prototype.getSignature=function(e,t,i){var n=e.uniforms,s=[i+"-"];for(var o in n)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(e){var t=this.gl,i=e.program,n=hx(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function TR(r,e){return e===void 0&&(e=[]),e[fe.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.ADD]=[r.ONE,r.ONE],e[fe.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.NONE]=[0,0],e[fe.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[fe.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[fe.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[fe.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[fe.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[fe.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[fe.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[fe.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[fe.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[fe.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[fe.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}var SR=0,ER=1,wR=2,PR=3,CR=4,MR=5,tm=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=fe.NONE,this._blendEq=!1,this.map=[],this.map[SR]=this.setBlend,this.map[ER]=this.setOffset,this.map[wR]=this.setCullFace,this.map[PR]=this.setDepthTest,this.map[CR]=this.setFrontFace,this.map[MR]=this.setDepthMask,this.checks=[],this.defaultState=new Tn,this.defaultState.blend=!0}return r.prototype.contextChange=function(e){this.gl=e,this.blendModes=TR(e),this.set(this.defaultState),this.reset()},r.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,i=0;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},r.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},r.prototype.setBlend=function(e){this.updateCheck(r.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(e){this.updateCheck(r.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(e){this.gl.depthMask(e)},r.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},r.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(e,t){var i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},r.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),rm=function(){function r(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ie.GC_MAX_IDLE,this.checkCountMax=ie.GC_MAX_CHECK_COUNT,this.mode=ie.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Da.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,i=!1,n=0;n<t.length;n++){var s=t[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[n]=null,i=!0)}if(i){for(var o=0,n=0;n<t.length;n++)t[n]!==null&&(t[o++]=t[n]);t.length=o}},r.prototype.unload=function(e){var t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function IR(r){var e,t,i,n,s,o,a,l,u,h,c,f,d,p,m,v,g,_,y,b,T,S,E;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?E=(e={},e[ce.UNSIGNED_BYTE]=(t={},t[J.RGBA]=r.RGBA8,t[J.RGB]=r.RGB8,t[J.RG]=r.RG8,t[J.RED]=r.R8,t[J.RGBA_INTEGER]=r.RGBA8UI,t[J.RGB_INTEGER]=r.RGB8UI,t[J.RG_INTEGER]=r.RG8UI,t[J.RED_INTEGER]=r.R8UI,t[J.ALPHA]=r.ALPHA,t[J.LUMINANCE]=r.LUMINANCE,t[J.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,t),e[ce.BYTE]=(i={},i[J.RGBA]=r.RGBA8_SNORM,i[J.RGB]=r.RGB8_SNORM,i[J.RG]=r.RG8_SNORM,i[J.RED]=r.R8_SNORM,i[J.RGBA_INTEGER]=r.RGBA8I,i[J.RGB_INTEGER]=r.RGB8I,i[J.RG_INTEGER]=r.RG8I,i[J.RED_INTEGER]=r.R8I,i),e[ce.UNSIGNED_SHORT]=(n={},n[J.RGBA_INTEGER]=r.RGBA16UI,n[J.RGB_INTEGER]=r.RGB16UI,n[J.RG_INTEGER]=r.RG16UI,n[J.RED_INTEGER]=r.R16UI,n[J.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),e[ce.SHORT]=(s={},s[J.RGBA_INTEGER]=r.RGBA16I,s[J.RGB_INTEGER]=r.RGB16I,s[J.RG_INTEGER]=r.RG16I,s[J.RED_INTEGER]=r.R16I,s),e[ce.UNSIGNED_INT]=(o={},o[J.RGBA_INTEGER]=r.RGBA32UI,o[J.RGB_INTEGER]=r.RGB32UI,o[J.RG_INTEGER]=r.RG32UI,o[J.RED_INTEGER]=r.R32UI,o[J.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,o),e[ce.INT]=(a={},a[J.RGBA_INTEGER]=r.RGBA32I,a[J.RGB_INTEGER]=r.RGB32I,a[J.RG_INTEGER]=r.RG32I,a[J.RED_INTEGER]=r.R32I,a),e[ce.FLOAT]=(l={},l[J.RGBA]=r.RGBA32F,l[J.RGB]=r.RGB32F,l[J.RG]=r.RG32F,l[J.RED]=r.R32F,l[J.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,l),e[ce.HALF_FLOAT]=(u={},u[J.RGBA]=r.RGBA16F,u[J.RGB]=r.RGB16F,u[J.RG]=r.RG16F,u[J.RED]=r.R16F,u),e[ce.UNSIGNED_SHORT_5_6_5]=(h={},h[J.RGB]=r.RGB565,h),e[ce.UNSIGNED_SHORT_4_4_4_4]=(c={},c[J.RGBA]=r.RGBA4,c),e[ce.UNSIGNED_SHORT_5_5_5_1]=(f={},f[J.RGBA]=r.RGB5_A1,f),e[ce.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[J.RGBA]=r.RGB10_A2,d[J.RGBA_INTEGER]=r.RGB10_A2UI,d),e[ce.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[J.RGB]=r.R11F_G11F_B10F,p),e[ce.UNSIGNED_INT_5_9_9_9_REV]=(m={},m[J.RGB]=r.RGB9_E5,m),e[ce.UNSIGNED_INT_24_8]=(v={},v[J.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,v),e[ce.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[J.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),e):E=(_={},_[ce.UNSIGNED_BYTE]=(y={},y[J.RGBA]=r.RGBA,y[J.RGB]=r.RGB,y[J.ALPHA]=r.ALPHA,y[J.LUMINANCE]=r.LUMINANCE,y[J.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,y),_[ce.UNSIGNED_SHORT_5_6_5]=(b={},b[J.RGB]=r.RGB,b),_[ce.UNSIGNED_SHORT_4_4_4_4]=(T={},T[J.RGBA]=r.RGBA,T),_[ce.UNSIGNED_SHORT_5_5_5_1]=(S={},S[J.RGBA]=r.RGBA,S),_),E}var du=function(){function r(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ce.UNSIGNED_BYTE,this.internalFormat=J.RGBA,this.samplerType=0}return r}(),im=function(){function r(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=IR(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new du(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new du(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(e,t){t===void 0&&(t=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},r.prototype.unbind=function(e){var t=this,i=t.gl,n=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(e){var t=this,i=t.boundTextures,n=t.hasIntegerTextures,s=t.CONTEXT_UID;if(n)for(var o=e-1;o>=0;--o){var a=i[o];if(a){var l=a._glTextures[s];l.samplerType!==La.FLOAT&&this.renderer.texture.unbind(a)}}},r.prototype.initTexture=function(e){var t=new du(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},r.prototype.initTextureType=function(e,t){var i,n;t.internalFormat=(n=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&n!==void 0?n:e.format,this.webGLVersion===2&&e.type===ce.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},r.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var i=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(i,e,t))t.samplerType!==La.FLOAT&&(this.hasIntegerTextures=!0);else{var n=e.realWidth,s=e.realHeight,o=i.gl;(t.width!==n||t.height!==s||t.dirtyId<0)&&(t.width=n,t.height=s,o.texImage2D(e.target,0,t.internalFormat,n,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},r.prototype.destroyTexture=function(e,t){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var n=this.managedTextures.indexOf(e);n!==-1&&us(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Cr.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=jr.CLAMP:t.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},r.prototype.setStyle=function(e,t){var i=this.gl;if(t.mipmap&&e.mipmap!==Cr.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Hr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===Hr.LINEAR){var s=Math.min(e.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Hr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Hr.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),cx={__proto__:null,FilterSystem:jp,BatchSystem:Xp,ContextSystem:zp,FramebufferSystem:Wp,GeometrySystem:Yp,MaskSystem:qp,ScissorSystem:Kp,StencilSystem:Zp,ProjectionSystem:Jp,RenderTextureSystem:Qp,ShaderSystem:em,StateSystem:tm,TextureGCSystem:rm,TextureSystem:im},Oc=new We,fx=function(r){Je(e,r);function e(t,i){t===void 0&&(t=no.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},ie.RENDER_OPTIONS,i),n.options=i,n.type=t,n.screen=new Ne(0,0,i.width,i.height),n.view=i.view||ie.ADAPTER.createCanvas(),n.resolution=i.resolution||ie.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(Xt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return e.prototype.initPlugins=function(t){for(var i in t)this.plugins[i]=new t[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,i){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},e.prototype.generateTexture=function(t,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(Xt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var o=i.region,a=jO(i,["region"]);s=o||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var l=gn.create(Kf({width:s.width,height:s.height},a));return Oc.tx=-s.x,Oc.ty=-s.y,this.render(t,{renderTexture:l,clear:!1,transform:Oc,skipUpdateTransform:!!t.parent}),l},e.prototype.destroy=function(t){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=no.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Ap(t),ms(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(Or),AR=function(){function r(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),OR=function(){function r(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(e){var t=this,i=t.gl,n=t.CONTEXT_UID,s=e._glBuffers[n]||this.createGLBuffer(e);i.bindBuffer(e.type,s.buffer)},r.prototype.bindBufferBase=function(e,t){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var o=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,o.buffer)}},r.prototype.bindBufferRange=function(e,t,i){var n=this,s=n.gl,o=n.CONTEXT_UID;i=i||0;var a=e._glBuffers[o]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,a.buffer,i*256,256)},r.prototype.update=function(e){var t=this,i=t.gl,n=t.CONTEXT_UID,s=e._glBuffers[n];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,i.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var o=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,o)}},r.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),i&&(t||n.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)},r.prototype.createGLBuffer=function(e){var t=this,i=t.CONTEXT_UID,n=t.gl;return e._glBuffers[i]=new AR(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},r}(),nm=function(r){Je(e,r);function e(t){var i=r.call(this,no.WEBGL,t)||this;return t=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Ct("destroy"),contextChange:new Ct("contextChange"),reset:new Ct("reset"),update:new Ct("update"),postrender:new Ct("postrender"),prerender:new Ct("prerender"),resize:new Ct("resize")},i.runners.contextChange.add(i),i.globalUniforms=new cn({projectionMatrix:new We},!0),i.addSystem(qp,"mask").addSystem(zp,"context").addSystem(tm,"state").addSystem(em,"shader").addSystem(im,"texture").addSystem(OR,"buffer").addSystem(Yp,"geometry").addSystem(Wp,"framebuffer").addSystem(Kp,"scissor").addSystem(Zp,"stencil").addSystem(Jp,"projection").addSystem(rm,"textureGC").addSystem(jp,"filter").addSystem(Qp,"renderTexture").addSystem(Xp,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,t.context?i.context.initFromContext(t.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:t.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Ob(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(t){if(Rb())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t=this.gl,i;if(this.context.webGLVersion===1){var n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{var n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}i>=et.HIGH?this.multisample=et.HIGH:i>=et.MEDIUM?this.multisample=et.MEDIUM:i>=et.LOW?this.multisample=et.LOW:this.multisample=et.NONE},e.prototype.addSystem=function(t,i){var n=new t(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},e.prototype.render=function(t,i){var n,s,o,a;if(i&&(i instanceof gn?(Xt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],o=arguments[3],a=arguments[4]):(n=i.renderTexture,s=i.clear,o=i.transform,a=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,i,n,s){i===void 0&&(i={});var o=r.prototype.generateTexture.call(this,t,i,n,s);return this.framebuffer.blit(),o},e.prototype.resize=function(t,i){r.prototype.resize.call(this,t,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Xt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){Xt("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),xi.add({name:t,type:Xe.RendererPlugin,ref:i})},e.__plugins={},e}(fx);xi.handleByMap(Xe.RendererPlugin,nm.__plugins);function dx(r){return nm.create(r)}var RR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,FR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,px=RR,sm=FR,LR=function(){function r(e){Xt("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return r.prototype.destroy=function(){this.renderer=null},r}(),Uu=function(){function r(){this.texArray=null,this.blend=0,this.type=xr.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Gu=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},r}(),Vu=function(){function r(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(e){return this[e+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},r}(),mx=function(r){Je(e,r);function e(t){var i=r.call(this,t)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Tn.for2d(),i.size=ie.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),t.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var t=this.renderer.gl;ie.PREFER_ENV===gi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ie.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=rx(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Uu);for(;i.length<s;)i.push(new Gu);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this,i=t._bufferedTextures,n=t.MAX_TEXTURES,s=e._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++De._globalBatch,h=0,c=s[0],f=0;o.copyBoundTextures(a,n);for(var d=0;d<this._bufferSize;++d){var p=i[d];i[d]=null,p._batchEnabled!==u&&(c.count>=n&&(o.boundArray(c,a,u,n),this.buildDrawCalls(c,f,d),f=d,c=s[++h],++u),p._batchEnabled=u,p.touched=l,c.elements[c.count++]=p)}c.count>0&&(o.boundArray(c,a,u,n),this.buildDrawCalls(c,f,this._bufferSize),++h,++u);for(var d=0;d<a.length;d++)a[d]=null;De._globalBatch=u},e.prototype.buildDrawCalls=function(t,i,n){var s=this,o=s._bufferedElements,a=s._attributeBuffer,l=s._indexBuffer,u=s.vertexSize,h=e._drawCallPool,c=this._dcIndex,f=this._aIndex,d=this._iIndex,p=h[c];p.start=this._iIndex,p.texArray=t;for(var m=i;m<n;++m){var v=o[m],g=v._texture.baseTexture,_=Rp[g.alphaMode?1:0][v.blendMode];o[m]=null,i<m&&p.blend!==_&&(p.size=d-p.start,i=m,p=h[++c],p.texArray=t,p.start=d),this.packInterleavedGeometry(v,a,l,f,d),f+=v.vertexData.length/2*u,d+=v.indices.length,p.blend=_}i<n&&(p.size=d-p.start,++c),this._dcIndex=c,this._aIndex=f,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var i=this.renderer.texture,n=0;n<t.count;n++)i.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,i=t._packedGeometries,n=t._attributeBuffer,s=t._indexBuffer;ie.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,o=e._drawCallPool,a=null,l=0;l<t;l++){var u=o[l],h=u.texArray,c=u.type,f=u.size,d=u.start,p=u.blend;a!==h&&(a=h,this.bindAndClearTexArray(h)),this.state.blendMode=p,s.set(this.state),n.drawElements(c,f,n.UNSIGNED_SHORT,d*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),ie.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var i=Ua(Math.ceil(t/8)),n=Xf(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new Vu(s*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(t){var i=Ua(Math.ceil(t/12)),n=Xf(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o},e.prototype.packInterleavedGeometry=function(t,i,n,s,o){for(var a=i.uint32View,l=i.float32View,u=s/this.vertexSize,h=t.uvs,c=t.indices,f=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),m=p<1&&t._texture.baseTexture.alphaMode?mh(t._tintRGB,p):t._tintRGB+(p*255<<24),v=0;v<f.length;v+=2)l[s++]=f[v],l[s++]=f[v+1],l[s++]=h[v],l[s++]=h[v+1],a[s++]=m,l[s++]=d;for(var v=0;v<c.length;v++)n[o++]=u+c[v]},e._drawCallPool=[],e._textureArrayPool=[],e}(hl),vx=function(){function r(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),i=0;i<e;i++)t[i]=i;this.defaultGroupCache[e]=cn.from({uSamplers:t},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+e),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Io(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new We,default:this.defaultGroupCache[e]};return new Di(this.programCache[e],s)},r.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+="if(vTextureId < "+i+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},r}(),om=function(r){Je(e,r);function e(t){t===void 0&&(t=!1);var i=r.call(this)||this;return i._buffer=new gt(null,t,!1),i._indexBuffer=new gt(null,t,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ce.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ce.FLOAT).addAttribute("aColor",i._buffer,4,!0,ce.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ce.FLOAT).addIndex(i._indexBuffer),i}return e}(Mo),zg=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Wg=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,gx=function(){function r(){}return r.create=function(e){var t=Object.assign({vertex:zg,fragment:Wg,geometryClass:om,vertexSize:6},e),i=t.vertex,n=t.fragment,s=t.vertexSize,o=t.geometryClass;return function(a){Je(l,a);function l(u){var h=a.call(this,u)||this;return h.shaderGenerator=new vx(i,n),h.geometryClass=o,h.vertexSize=s,h}return l}(mx)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return zg},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return Wg},enumerable:!1,configurable:!0}),r}(),am=gx.create();Object.assign(am,{extension:{name:"batch",type:Xe.RendererPlugin}});var _x={},DR=function(r){Object.defineProperty(_x,r,{get:function(){return Xt("6.0.0","PIXI.systems."+r+" has moved to PIXI."+r),Xb[r]}})};for(var lm in Xb)DR(lm);var yx={},BR=function(r){Object.defineProperty(yx,r,{get:function(){return Xt("6.0.0","PIXI.resources."+r+" has moved to PIXI."+r),cx[r]}})};for(var lm in cx)BR(lm);var NR="6.5.10";/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ie.SORTABLE_CHILDREN=!1;var $a=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Ne.EMPTY:(e=e||new Ne(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},r.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},r.prototype.addPointMatrix=function(e,t){var i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,u=i*t.x+s*t.y+a,h=n*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},r.prototype.addQuad=function(e){var t=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=t,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(e,t,i,n,s){this.addFrameMatrix(e.worldTransform,t,i,n,s)},r.prototype.addFrameMatrix=function(e,t,i,n,s){var o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty,f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,v=o*t+l*i+h,g=a*t+u*i+c;f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*n+l*i+h,g=a*n+u*i+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*t+l*s+h,g=a*t+u*s+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*n+l*s+h,g=a*n+u*s+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,this.minX=f,this.minY=d,this.maxX=p,this.maxY=m},r.prototype.addVertexData=function(e,t,i){for(var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY,l=t;l<i;l+=2){var u=e[l],h=e[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a},r.prototype.addVertices=function(e,t,i,n){this.addVerticesMatrix(e.worldTransform,t,i,n)},r.prototype.addVerticesMatrix=function(e,t,i,n,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,f=e.ty,d=this.minX,p=this.minY,m=this.maxX,v=this.maxY,g=i;g<n;g+=2){var _=t[g],y=t[g+1],b=a*_+u*y+c,T=h*y+l*_+f;d=Math.min(d,b-s),m=Math.max(m,b+s),p=Math.min(p,T-o),v=Math.max(v,T+o)}this.minX=d,this.minY=p,this.maxX=m,this.maxY=v},r.prototype.addBounds=function(e){var t=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>s?e.maxY:s},r.prototype.addBoundsMask=function(e,t){var i=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=s&&n<=o){var a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}},r.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},r.prototype.addBoundsArea=function(e,t){var i=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=s&&n<=o){var a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}},r.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},r.prototype.addFramePad=function(e,t,i,n,s,o){e-=s,t-=o,i+=s,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jf=function(r,e){return Jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Jf(r,e)};function um(r,e){Jf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dt=function(r){um(e,r);function e(){var t=r.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new ul,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new $a,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ne),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ne),t=this._localBoundsRect),this._localBounds||(this._localBounds=new $a);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a},e.prototype.toGlobal=function(t,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)},e.prototype.toLocal=function(t,i,n,s){return i&&(t=i.toGlobal(t,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,i,n,s,o,a,l,u,h){return t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=0),this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=o,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new hm),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*kb},set:function(t){this.transform.rotation=t*Ub},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){if(this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(Or),hm=function(r){um(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.sortDirty=null,t}return e}(dt);dt.prototype.displayObjectUpdateTransform=dt.prototype.updateTransform;function kR(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}var ur=function(r){um(e,r);function e(){var t=r.call(this)||this;return t.children=[],t.sortableChildren=ie.SORTABLE_CHILDREN,t.sortDirty=!1,t}return e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var o=i[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return i[0]},e.prototype.addChildAt=function(t,i){if(i<0||i>this.children.length)throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t},e.prototype.swapChildren=function(t,i){if(t!==i){var n=this.getChildIndex(t),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=t,this.onChildrenChange(n<s?n:s)}},e.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);us(this.children,n,1),this.children.splice(i,0,t),this.onChildrenChange(i)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var o=i[0],a=this.children.indexOf(o);if(a===-1)return null;o.parent=null,o.transform._parentID=-1,us(this.children,a,1),this._boundsID++,this.onChildrenChange(a),o.emit("removed",this),this.emit("childRemoved",o,this,a)}return i[0]},e.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,us(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i},e.prototype.removeChildren=function(t,i){t===void 0&&(t=0),i===void 0&&(i=this.children.length);var n=t,s=i,o=s-n,a;if(o>0&&o<=s){a=this.children.splice(n,o);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(kR),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,i=this.children.length;t<i;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var i=this.children[t];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.isMaskData?i._mask.maskObject:i._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,t);if(!i)for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s];a.visible&&a.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var i=t.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,s;if(this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,s))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}},e.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}},e.prototype.renderAdvanced=function(t){var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s])}var o=i&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==mt.NONE));if(o&&t.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var s=0,a=this.children.length;s<a;++s)this.children[s].render(t)}o&&t.batch.flush(),n&&t.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof t=="boolean"?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;i!==0?this.scale.x=t/i:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;i!==0?this.scale.y=t/i:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),e}(dt);ur.prototype.containerUpdateTransform=ur.prototype.updateTransform;var In=Math.pow,at=(r,e,t)=>new Promise((i,n)=>{var s=l=>{try{a(t.next(l))}catch(u){n(u)}},o=l=>{try{a(t.throw(l))}catch(u){n(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(r,e)).next())});const Yg=2,qg=2;var ja;(r=>{r.supportMoreMaskDivisions=!0,r.setOpacityFromMotion=!1})(ja||(ja={}));var xt;(r=>{r.LOG_LEVEL_VERBOSE=0,r.LOG_LEVEL_WARNING=1,r.LOG_LEVEL_ERROR=2,r.LOG_LEVEL_NONE=999,r.logLevel=r.LOG_LEVEL_WARNING,r.sound=!0,r.motionSync=!0,r.motionFadingDuration=500,r.idleMotionFadingDuration=2e3,r.expressionFadingDuration=500,r.preserveExpressionOnMotion=!0,r.cubism4=ja})(xt||(xt={}));const Ye={log(r,...e){xt.logLevel<=xt.LOG_LEVEL_VERBOSE&&console.log(`[${r}]`,...e)},warn(r,...e){xt.logLevel<=xt.LOG_LEVEL_WARNING&&console.warn(`[${r}]`,...e)},error(r,...e){xt.logLevel<=xt.LOG_LEVEL_ERROR&&console.error(`[${r}]`,...e)}};function Hu(r,e,t){return r<e?e:r>t?t:r}function UR(r,e){return Math.random()*(e-r)+r}function Ho(r,e,t,i,n){const s=e[i];s!==null&&typeof s===r&&(t[n]=s)}function $o(r,e,t,i,n){const s=e[i];Array.isArray(s)&&(t[n]=s.filter(o=>o!==null&&typeof o===r))}function bx(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i))})})}function GR(r){let e=r.lastIndexOf("/");return e!=-1&&(r=r.slice(0,e)),e=r.lastIndexOf("/"),e!==-1&&(r=r.slice(e+1)),r}function VR(r,e){const t=r.indexOf(e);t!==-1&&r.splice(t,1)}let cm=class extends Or{constructor(e,t){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return at(this,null,function*(){if(!this.definitions[e]){Ye.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){Ye.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const t=yield this._loadExpression(e);return this.expressions[e]=t,t})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return at(this,null,function*(){if(this.definitions.length){const e=[];for(let t=0;t<this.definitions.length;t++)this.expressions[t]!==null&&this.expressions[t]!==this.currentExpression&&t!==this.reserveExpressionIndex&&e.push(t);if(e.length){const t=Math.floor(Math.random()*e.length);return this.setExpression(t)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return at(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const t=yield this.loadExpression(e);return!t||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=t,this._setExpression(t),!0)})}update(e,t){return this.isFinished()?!1:this.updateParameters(e,t)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}};const Kg=.01,HR=40/7.5,$R=1/(.15*1e3);let jR=class{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,t,i=!1){this.targetX=Hu(e,-1,1),this.targetY=Hu(t,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const t=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(t)<Kg&&Math.abs(i)<Kg)return;const n=Math.sqrt(In(t,2)+In(i,2)),s=HR/(1e3/e);let o=s*(t/n)-this.vx,a=s*(i/n)-this.vy;const l=Math.sqrt(In(o,2)+In(a,2)),u=s*$R*e;l>u&&(o*=u/l,a*=u/l),this.vx+=o,this.vy+=a;const h=Math.sqrt(In(this.vx,2)+In(this.vy,2)),c=.5*(Math.sqrt(In(u,2)+8*u*n)-u);h>c&&(this.vx*=c/h,this.vy*=c/h),this.x+=this.vx,this.y+=this.vy}},xh=class{constructor(e){this.json=e;let t=e.url;if(typeof t!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=t,this.name=GR(this.url)}resolveURL(e){return ar.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let t=0;t<this.textures.length;t++)this.textures[t]=e(this.textures[t],`textures[${t}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(t=>(e.push(t),t)),e}validateFiles(e){const t=(s,o)=>{const a=this.resolveURL(s);if(!e.includes(a)){if(o)throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(s=>t(s,!0)),this.getDefinedFiles().filter(s=>t(s,!1))}};var Qf=(r=>(r[r.NONE=0]="NONE",r[r.IDLE=1]="IDLE",r[r.NORMAL=2]="NORMAL",r[r.FORCE=3]="FORCE",r))(Qf||{});let XR=class{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,t,i){if(i<=0)return Ye.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&t===this.currentIndex)return Ye.log(this.tag,"Motion is already playing.",this.dump(e,t)),!1;if(e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex)return Ye.log(this.tag,"Motion is already reserved.",this.dump(e,t)),!1;if(i===1){if(this.currentPriority!==0)return Ye.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,t)),!1;if(this.reservedIdleGroup!==void 0)return Ye.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,t)),!1;this.setReservedIdle(e,t)}else{if(i<3){if(i<=this.currentPriority)return Ye.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,t)),!1;if(i<=this.reservePriority)return Ye.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,t)),!1}this.setReserved(e,t,i)}return!0}start(e,t,i,n){if(n===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return Ye.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,i)),!1}else{if(t!==this.reservedGroup||i!==this.reservedIndex)return Ye.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(t,i)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(t,i,n),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,t,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=t}setReserved(e,t,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=t}setReservedIdle(e,t){this.reservedIdleGroup=e,this.reservedIdleIndex=t}isActive(e,t){return e===this.currentGroup&&t===this.currentIndex||e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!xt.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,t){if(this.debug){const i=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${t}
`+i.map(n=>"["+n+"] "+this[n]).join(`
`)}return""}};const zR="SoundManager",WR=.5;let Qn=class{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(t=>t.volume=this._volume)}static add(e,t,i){const n=new Audio(e);return n.volume=this._volume,n.preload="auto",n.addEventListener("ended",()=>{this.dispose(n),t==null||t()}),n.addEventListener("error",s=>{this.dispose(n),Ye.warn(zR,`Error occurred on "${e}"`,s.error),i==null||i(s.error)}),this.audios.push(n),n}static play(e){return new Promise((t,i)=>{var n;(n=e.play())==null||n.catch(s=>{e.dispatchEvent(new ErrorEvent("error",{error:s})),i(s)}),e.readyState===e.HAVE_ENOUGH_DATA?t():e.addEventListener("canplaythrough",t)})}static dispose(e){e.pause(),e.removeAttribute("src"),VR(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}};Qn.audios=[];Qn._volume=WR;let Th=class extends Or{constructor(e,t){super(),this.motionGroups={},this.state=new XR,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let t;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":t=Object.keys(this.definitions);break;case"IDLE":default:t=[this.groups.idle];break}for(const i of t)if(this.definitions[i])for(let n=0;n<this.definitions[i].length;n++)this.loadMotion(i,n).then()}loadMotion(e,t){return at(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[t])){Ye.warn(this.tag,`Undefined motion at "${e}"[${t}]`);return}if(this.motionGroups[e][t]===null){Ye.warn(this.tag,`Cannot start motion at "${e}"[${t}] because it's already failed in loading.`);return}if(this.motionGroups[e][t])return this.motionGroups[e][t];const n=yield this._loadMotion(e,t);if(!this.destroyed)return this.motionGroups[e][t]=n??null,n})}_loadMotion(e,t){throw new Error("Not implemented.")}startMotion(e,t){return at(this,arguments,function*(i,n,s=Qf.NORMAL){var o;if(!this.state.reserve(i,n,s))return!1;const a=(o=this.definitions[i])==null?void 0:o[n];if(!a)return!1;this.currentAudio&&Qn.dispose(this.currentAudio);let l;if(xt.sound){const h=this.getSoundFile(a);if(h)try{l=Qn.add(this.settings.resolveURL(h),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=l}catch(c){Ye.warn(this.tag,"Failed to create audio",h,c)}}const u=yield this.loadMotion(i,n);if(l){const h=Qn.play(l).catch(c=>Ye.warn(this.tag,"Failed to play audio",l.src,c));xt.motionSync&&(yield h)}return this.state.start(u,i,n,s)?(Ye.log(this.tag,"Start motion:",this.getMotionName(a)),this.emit("motionStart",i,n,l),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(u),!0):(l&&(Qn.dispose(l),this.currentAudio=void 0),!1)})}startRandomMotion(e,t){return at(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const n=[];for(let s=0;s<i.length;s++)this.motionGroups[e][s]!==null&&!this.state.isActive(e,s)&&n.push(s);if(n.length){const s=Math.floor(Math.random()*n.length);return this.startMotion(e,n[s],t)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(Qn.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,t){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,Qf.IDLE)),this.updateParameters(e,t)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const t=this;t.definitions=void 0,t.motionGroups=void 0}};const YR={x:0,y:0,width:0,height:0};let xx=class extends Or{constructor(){super(...arguments),this.focusController=new jR,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new We,this.drawingMatrix=new We,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,t=this.getSize();e.originalWidth=t[0],e.originalHeight=t[1];const i=Object.assign({width:Yg,height:qg},this.getLayout());this.localTransform.scale(i.width/Yg,i.height/qg),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const n=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,s=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*n,-this.height*s)}setupHitAreas(){const e=this.getHitAreaDefs().filter(t=>t.index>=0);for(const t of e)this.hitAreas[t.name]=t}hitTest(e,t){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,t))}isHit(e,t,i){if(!this.hitAreas[e])return!1;const n=this.hitAreas[e].index,s=this.getDrawableBounds(n,YR);return s.x<=t&&t<=s.x+s.width&&s.y<=i&&i<=s.y+s.height}getDrawableBounds(e,t){const i=this.getDrawableVertices(e);let n=i[0],s=i[0],o=i[1],a=i[1];for(let l=0;l<i.length;l+=2){const u=i[l],h=i[l+1];n=Math.min(u,n),s=Math.max(u,s),o=Math.min(h,o),a=Math.max(h,a)}return t??(t={}),t.x=n,t.y=o,t.width=s-n,t.height=a-o,t}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,t){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}};const qR="XHRLoader";let Zg=class extends Error{constructor(e,t,i,n=!1){super(e),this.url=t,this.status=i,this.aborted=n}};const Vt=class{static createXHR(e,t,i,n,s){const o=new XMLHttpRequest;if(Vt.allXhrSet.add(o),e){let a=Vt.xhrMap.get(e);a?a.add(o):(a=new Set([o]),Vt.xhrMap.set(e,a)),e.listeners("destroy").includes(Vt.cancelXHRs)||e.once("destroy",Vt.cancelXHRs)}return o.open("GET",t),o.responseType=i,o.onload=()=>{(o.status===200||o.status===0)&&o.response?n(o.response):o.onerror()},o.onerror=()=>{Ye.warn(qR,`Failed to load resource as ${o.responseType} (Status ${o.status}): ${t}`),s(new Zg("Network error.",t,o.status))},o.onabort=()=>s(new Zg("Aborted.",t,o.status,!0)),o.onloadend=()=>{var a;Vt.allXhrSet.delete(o),e&&((a=Vt.xhrMap.get(e))==null||a.delete(o))},o}static cancelXHRs(){var e;(e=Vt.xhrMap.get(this))==null||e.forEach(t=>{t.abort(),Vt.allXhrSet.delete(t)}),Vt.xhrMap.delete(this)}static release(){Vt.allXhrSet.forEach(e=>e.abort()),Vt.allXhrSet.clear(),Vt.xhrMap=new WeakMap}};let Sh=Vt;Sh.xhrMap=new WeakMap;Sh.allXhrSet=new Set;Sh.loader=(r,e)=>new Promise((t,i)=>{Vt.createXHR(r.target,r.settings?r.settings.resolveURL(r.url):r.url,r.type,s=>{r.result=s,t()},i).send()});function Tx(r,e){let t=-1;return i(0);function i(n,s){if(s)return Promise.reject(s);if(n<=t)return Promise.reject(new Error("next() called multiple times"));t=n;const o=r[n];if(!o)return Promise.resolve();try{return Promise.resolve(o(e,i.bind(null,n+1)))}catch(a){return Promise.reject(a)}}}let _n=class{static load(e){return Tx(this.middlewares,e).then(()=>e.result)}};_n.middlewares=[Sh.loader];function KR(r,e={}){var t;const i={resourceOptions:{crossorigin:e.crossOrigin}};if(ve.fromURL)return ve.fromURL(r,i).catch(o=>{if(o instanceof Error)throw o;const a=new Error("Texture loading error");throw a.event=o,a});i.resourceOptions.autoLoad=!1;const n=ve.from(r,i);if(n.baseTexture.valid)return Promise.resolve(n);const s=n.baseTexture.resource;return(t=s._live2d_load)!=null||(s._live2d_load=new Promise((o,a)=>{const l=u=>{s.source.removeEventListener("error",l);const h=new Error("Texture loading error");h.event=u,a(h)};s.source.addEventListener("error",l),s.load().then(()=>o(n)).catch(l)})),s._live2d_load}const Jg="Live2DFactory",Sx=(r,e)=>at(void 0,null,function*(){if(typeof r.source=="string"){const t=yield _n.load({url:r.source,type:"json",target:r.live2dModel});t.url=r.source,r.source=t,r.live2dModel.emit("settingsJSONLoaded",t)}return e()}),Ex=(r,e)=>at(void 0,null,function*(){if(r.source instanceof xh)return r.settings=r.source,e();if(typeof r.source=="object"){const t=nt.findRuntime(r.source);if(t){const i=t.createModelSettings(r.source);return r.settings=i,r.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),wx=(r,e)=>{if(r.settings){const t=nt.findRuntime(r.settings);if(t)return t.ready().then(e)}return e()},Px=(r,e)=>at(void 0,null,function*(){yield e();const t=r.internalModel;if(t){const i=r.settings,n=nt.findRuntime(i);if(n){const s=[];i.pose&&s.push(_n.load({settings:i,url:i.pose,type:"json",target:t}).then(o=>{t.pose=n.createPose(t.coreModel,o),r.live2dModel.emit("poseLoaded",t.pose)}).catch(o=>{r.live2dModel.emit("poseLoadError",o),Ye.warn(Jg,"Failed to load pose.",o)})),i.physics&&s.push(_n.load({settings:i,url:i.physics,type:"json",target:t}).then(o=>{t.physics=n.createPhysics(t.coreModel,o),r.live2dModel.emit("physicsLoaded",t.physics)}).catch(o=>{r.live2dModel.emit("physicsLoadError",o),Ye.warn(Jg,"Failed to load physics.",o)})),s.length&&(yield Promise.all(s))}}}),Cx=(r,e)=>at(void 0,null,function*(){if(r.settings){const t=r.live2dModel,i=r.settings.textures.map(n=>{const s=r.settings.resolveURL(n);return KR(s,{crossOrigin:r.options.crossOrigin})});if(yield e(),r.internalModel)t.internalModel=r.internalModel,t.emit("modelLoaded",r.internalModel);else throw new TypeError("Missing internal model.");t.textures=yield Promise.all(i),t.emit("textureLoaded",t.textures)}else throw new TypeError("Missing settings.")}),Mx=(r,e)=>at(void 0,null,function*(){const t=r.settings;if(t instanceof xh){const i=nt.findRuntime(t);if(!i)throw new TypeError("Unknown model settings.");const n=yield _n.load({settings:t,url:t.moc,type:"arraybuffer",target:r.live2dModel});if(!i.isValidMoc(n))throw new Error("Invalid moc data");const s=i.createCoreModel(n);return r.internalModel=i.createInternalModel(s,t,r.options),e()}throw new TypeError("Missing settings.")}),Ft=class{static registerRuntime(e){Ft.runtimes.push(e),Ft.runtimes.sort((t,i)=>i.version-t.version)}static findRuntime(e){for(const t of Ft.runtimes)if(t.test(e))return t}static setupLive2DModel(e,t,i){return at(this,null,function*(){const n=new Promise(a=>e.once("textureLoaded",a)),s=new Promise(a=>e.once("modelLoaded",a)),o=Promise.all([n,s]).then(()=>e.emit("ready"));yield Tx(Ft.live2DModelMiddlewares,{live2dModel:e,source:t,options:i||{}}),yield o,e.emit("load")})}static loadMotion(e,t,i){var n,s;const o=a=>e.emit("motionLoadError",t,i,a);try{const a=(n=e.definitions[t])==null?void 0:n[i];if(!a)return Promise.resolve(void 0);e.listeners("destroy").includes(Ft.releaseTasks)||e.once("destroy",Ft.releaseTasks);let l=Ft.motionTasksMap.get(e);l||(l={},Ft.motionTasksMap.set(e,l));let u=l[t];u||(u=[],l[t]=u);const h=e.getMotionFile(a);return(s=u[i])!=null||(u[i]=_n.load({url:h,settings:e.settings,type:e.motionDataType,target:e}).then(c=>{var f;const d=(f=Ft.motionTasksMap.get(e))==null?void 0:f[t];d&&delete d[i];const p=e.createMotion(c,t,a);return e.emit("motionLoaded",t,i,p),p}).catch(c=>{Ye.warn(e.tag,`Failed to load motion: ${h}
`,c),o(c)})),u[i]}catch(a){Ye.warn(e.tag,`Failed to load motion at "${t}"[${i}]
`,a),o(a)}return Promise.resolve(void 0)}static loadExpression(e,t){var i;const n=s=>e.emit("expressionLoadError",t,s);try{const s=e.definitions[t];if(!s)return Promise.resolve(void 0);e.listeners("destroy").includes(Ft.releaseTasks)||e.once("destroy",Ft.releaseTasks);let o=Ft.expressionTasksMap.get(e);o||(o=[],Ft.expressionTasksMap.set(e,o));const a=e.getExpressionFile(s);return(i=o[t])!=null||(o[t]=_n.load({url:a,settings:e.settings,type:"json",target:e}).then(l=>{const u=Ft.expressionTasksMap.get(e);u&&delete u[t];const h=e.createExpression(l,s);return e.emit("expressionLoaded",t,h),h}).catch(l=>{Ye.warn(e.tag,`Failed to load expression: ${a}
`,l),n(l)})),o[t]}catch(s){Ye.warn(e.tag,`Failed to load expression at [${t}]
`,s),n(s)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof Th?Ft.motionTasksMap.delete(this):Ft.expressionTasksMap.delete(this)}};let nt=Ft;nt.runtimes=[];nt.urlToJSON=Sx;nt.jsonToSettings=Ex;nt.waitUntilReady=wx;nt.setupOptionals=Px;nt.setupEssentials=Cx;nt.createInternalModel=Mx;nt.live2DModelMiddlewares=[Sx,Ex,wx,Px,Cx,Mx];nt.motionTasksMap=new WeakMap;nt.expressionTasksMap=new WeakMap;Th.prototype._loadMotion=function(r,e){return nt.loadMotion(this,r,e)};cm.prototype._loadExpression=function(r){return nt.loadExpression(this,r)};let ZR=class{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",Qg,this):this.off("pointertap",Qg,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",e_,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",e_,this),this.interactionManager=void 0)}};function Qg(r){this.tap(r.data.global.x,r.data.global.y)}function e_(r){this.focus(r.data.global.x,r.data.global.y)}let JR=class extends ul{};const cr=new ze,QR=new We;let Wi,e2=class extends ur{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new JR,this.anchor=new Fi(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,t){const i=new this(t);return nt.setupLive2DModel(i,e,t).then(()=>i)}static fromSync(e,t){const i=new this(t);return nt.setupLive2DModel(i,e,t).then(t==null?void 0:t.onLoad).catch(t==null?void 0:t.onError),i}static registerTicker(e){Wi=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var t;Wi||(Wi=(t=window.PIXI)==null?void 0:t.Ticker),e?this._destroyed||(Wi?(Wi.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):Ye.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(Wi==null||Wi.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const t=Object.assign({autoUpdate:!0,autoInteract:!0},e);t.autoInteract&&(this.interactive=!0),this.autoInteract=t.autoInteract,this.autoUpdate=t.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,t,i){return t===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,t,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,t,i=!1){cr.x=e,cr.y=t,this.toModelPosition(cr,cr,!0);let n=cr.x/this.internalModel.originalWidth*2-1,s=cr.y/this.internalModel.originalHeight*2-1,o=Math.atan2(s,n);this.internalModel.focusController.focus(Math.cos(o),-Math.sin(o),i)}tap(e,t){const i=this.hitTest(e,t);i.length&&(Ye.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,t){return cr.x=e,cr.y=t,this.toModelPosition(cr,cr),this.internalModel.hitTest(cr.x,cr.y)}toModelPosition(e,t=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,t),this.internalModel.localTransform.applyInverse(t,t),t}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(Wi.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let t=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),t=!0);for(let s=0;s<this.textures.length;s++){const o=this.textures[s];o.valid&&((t||!o.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(o.baseTexture,0)),this.internalModel.bindTexture(s,o.baseTexture._glTextures[this.glContextID].texture),o.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const n=QR.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(n),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(t=>t.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}};bx(e2,[ZR]);const ui=class{static resolveURL(e,t){var i;const n=(i=ui.filesMap[e])==null?void 0:i[t];if(n===void 0)throw new Error("Cannot find this file from uploaded files: "+t);return n}static upload(e,t){return at(this,null,function*(){const i={};for(const n of t.getDefinedFiles()){const s=decodeURI(ar.resolve(t.url,n)),o=e.find(a=>a.webkitRelativePath===s);o&&(i[n]=URL.createObjectURL(o))}ui.filesMap[t._objectURL]=i})}static createSettings(e){return at(this,null,function*(){const t=e.find(a=>a.name.endsWith("model.json")||a.name.endsWith("model3.json"));if(!t)throw new TypeError("Settings file not found");const i=yield ui.readText(t),n=JSON.parse(i);n.url=t.webkitRelativePath;const s=nt.findRuntime(n);if(!s)throw new Error("Unknown settings JSON");const o=s.createModelSettings(n);return o._objectURL=URL.createObjectURL(t),o})}static readText(e){return at(this,null,function*(){return new Promise((t,i)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=i,n.readAsText(e,"utf8")})})}};let fm=ui;fm.filesMap={};fm.factory=(r,e)=>at(void 0,null,function*(){if(Array.isArray(r.source)&&r.source[0]instanceof File){const t=r.source;let i=t.settings;if(!i)i=yield ui.createSettings(t);else if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');i.validateFiles(t.map(n=>encodeURI(n.webkitRelativePath))),yield ui.upload(t,i),i.resolveURL=function(n){return ui.resolveURL(this._objectURL,n)},r.source=i,r.live2dModel.once("modelLoaded",n=>{n.once("destroy",function(){const s=this.settings._objectURL;if(URL.revokeObjectURL(s),ui.filesMap[s])for(const o of Object.values(ui.filesMap[s]))URL.revokeObjectURL(o);delete ui.filesMap[s]})})}return e()});nt.live2DModelMiddlewares.unshift(fm.factory);const Yt=class{static unzip(e,t){return at(this,null,function*(){const i=yield Yt.getFilePaths(e),n=[];for(const o of t.getDefinedFiles()){const a=decodeURI(ar.resolve(t.url,o));i.includes(a)&&n.push(a)}const s=yield Yt.getFiles(e,n);for(let o=0;o<s.length;o++){const a=n[o],l=s[o];Object.defineProperty(l,"webkitRelativePath",{value:a})}return s})}static createSettings(e){return at(this,null,function*(){const i=(yield Yt.getFilePaths(e)).find(a=>a.endsWith("model.json")||a.endsWith("model3.json"));if(!i)throw new Error("Settings file not found");const n=yield Yt.readText(e,i);if(!n)throw new Error("Empty settings file: "+i);const s=JSON.parse(n);s.url=i;const o=nt.findRuntime(s);if(!o)throw new Error("Unknown settings JSON");return o.createModelSettings(s)})}static zipReader(e,t){return at(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(e){return at(this,null,function*(){throw new Error("Not implemented")})}static getFiles(e,t){return at(this,null,function*(){throw new Error("Not implemented")})}static readText(e,t){return at(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(e){}};let Eh=Yt;Eh.ZIP_PROTOCOL="zip://";Eh.uid=0;Eh.factory=(r,e)=>at(void 0,null,function*(){const t=r.source;let i,n,s;if(typeof t=="string"&&(t.endsWith(".zip")||t.startsWith(Yt.ZIP_PROTOCOL))?(t.startsWith(Yt.ZIP_PROTOCOL)?i=t.slice(Yt.ZIP_PROTOCOL.length):i=t,n=yield _n.load({url:i,type:"blob",target:r.live2dModel})):Array.isArray(t)&&t.length===1&&t[0]instanceof File&&t[0].name.endsWith(".zip")&&(n=t[0],i=URL.createObjectURL(n),s=t.settings),n){if(!n.size)throw new Error("Empty zip file");const o=yield Yt.zipReader(n,i);s||(s=yield Yt.createSettings(o)),s._objectURL=Yt.ZIP_PROTOCOL+Yt.uid+"/"+s.url;const a=yield Yt.unzip(o,s);a.settings=s,r.source=a,i.startsWith("blob:")&&r.live2dModel.once("modelLoaded",l=>{l.once("destroy",function(){URL.revokeObjectURL(i)})}),Yt.releaseReader(o)}return e()});nt.live2DModelMiddlewares.unshift(Eh.factory);if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const t2=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(r,e){t2.call(this,r,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class r2 extends AMotion{constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:xt.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:xt.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(t=>{const i=t.calc||"add";if(i==="add"){const n=t.def||0;t.val-=n}else if(i==="mult"){const n=t.def||1;t.val/=n}this.params.push({calc:i,val:t.val,id:t.id})})}updateParamExe(e,t,i,n){this.params.forEach(s=>{e.setParamFloat(s.id,s.val*i)})}}class i2 extends cm{constructor(e,t){var i;super(e,t),this.queueManager=new MotionQueueManager,this.definitions=(i=this.settings.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.name===e)}getExpressionFile(e){return e.file}createExpression(e,t){return new r2(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}}class n2 extends Th{constructor(e,t){super(e,t),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new i2(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,t,i){const n=Live2DMotion.loadMotion(e),s=t===this.groups.idle?xt.idleMotionFadingDuration:xt.motionFadingDuration;return n.setFadeIn(i.fade_in>0?i.fade_in:s),n.setFadeOut(i.fade_out>0?i.fade_out:s),n}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,t){return e.onFinishHandler=t,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class s2{constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=Hu(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+UR(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const An=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class o2 extends xx{constructor(e,t,i){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=t,this.motionManager=new n2(t,i),this.eyeBlink=new s2(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:s,value:o})=>this.coreModel.setParamFloat(s,o)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:s,value:o})=>this.coreModel.setPartsOpacity(s,o)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e!=null&&e.length&&(this.drawDataCount=e.length);let t=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:s=>t=s,get:()=>this.disableCulling?!1:t});const i=this.coreModel.getModelContext().clipManager,n=i.setupClip;i.setupClip=(s,o)=>{n.call(i,s,o),o.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout)){let i=t;t==="center_x"?i="centerX":t==="center_y"&&(i="centerY"),e[i]=this.settings.layout[t]}return e}updateWebGLContext(e,t){const i=this.coreModel.drawParamWebGL;i.firstDraw=!0,i.setGL(e),i.glno=t;for(const o in i)i.hasOwnProperty(o)&&i[o]instanceof WebGLBuffer&&(i[o]=null);const n=this.coreModel.getModelContext().clipManager;n.curFrameNo=t;const s=e.getParameter(e.FRAMEBUFFER_BINDING);n.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,s)}bindTexture(e,t){this.coreModel.setTexture(e,t)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(t=>({id:t.id,name:t.name,index:this.coreModel.getDrawDataIndex(t.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),t=[];for(let i=0;i<this.drawDataCount;i++){const n=e.getDrawData(i);n&&t.push(n.getDrawDataID().id)}return t}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,t){var i,n,s,o;super.update(e,t);const a=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),a.saveParam(),(i=this.motionManager.expressionManager)==null||i.update(a,t),l||(n=this.eyeBlink)==null||n.update(e),this.updateFocus(),this.updateNaturalMovements(e,t),(s=this.physics)==null||s.update(t),(o=this.pose)==null||o.update(e),this.emit("beforeModelUpdate"),a.update(),a.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,t){const i=t/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(i/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(i/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(i/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(i/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(i/3.2345))}draw(e){const t=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const i=this.drawingMatrix;An[0]=i.a,An[1]=i.b,An[4]=i.c,An[5]=i.d,An[12]=i.tx,An[13]=i.ty,this.coreModel.setMatrix(An),this.coreModel.draw(),this.disableCulling=t}destroy(){super.destroy(),this.coreModel=void 0}}class Ea extends xh{constructor(e){if(super(e),this.motions={},!Ea.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,$o("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var t;return!!e&&typeof e.model=="string"&&((t=e.textures)==null?void 0:t.length)>0&&e.textures.every(i=>typeof i=="string")}copy(e){Ho("string",e,this,"name","name"),Ho("string",e,this,"pose","pose"),Ho("string",e,this,"physics","physics"),Ho("object",e,this,"layout","layout"),Ho("object",e,this,"motions","motions"),$o("object",e,this,"hit_areas","hitAreas"),$o("object",e,this,"expressions","expressions"),$o("object",e,this,"init_params","initParams"),$o("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[t,i]of Object.entries(this.motions))for(let n=0;n<i.length;n++)i[n].file=e(i[n].file,`motions.${t}[${n}].file`),i[n].sound!==void 0&&(i[n].sound=e(i[n].sound,`motions.${t}[${n}].sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].file=e(this.expressions[t].file,`expressions[${t}].file`)}}const a2={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},l2={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class u2{constructor(e,t){this.coreModel=e,this.physicsHairs=[],t.physics_hair&&(this.physicsHairs=t.physics_hair.map(i=>{const n=new PhysicsHair;return n.setup(i.setup.length,i.setup.regist,i.setup.mass),i.src.forEach(({id:s,ptype:o,scale:a,weight:l})=>{const u=a2[o];u&&n.addSrcParam(u,s,a,l)}),i.targets.forEach(({id:s,ptype:o,scale:a,weight:l})=>{const u=l2[o];u&&n.addTargetParam(u,s,a,l)}),n}))}update(e){this.physicsHairs.forEach(t=>t.update(this.coreModel,e))}}class t_{constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class h2{constructor(e,t){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],t.parts_visible&&(this.partsGroups=t.parts_visible.map(({group:i})=>i.map(({id:n,link:s})=>{const o=new t_(n);return s&&(o.link=s.map(a=>new t_(a))),o})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(t=>{if(t.initIndex(this.coreModel),t.paramIndex>=0){const i=this.coreModel.getParamFloat(t.paramIndex)!==0;this.coreModel.setPartsOpacity(t.partsIndex,i?1:0),this.coreModel.setParamFloat(t.paramIndex,i?1:0),t.link.length>0&&t.link.forEach(n=>n.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,t){const i=this.coreModel,n=.5,s=.15;let o=1,a=e.findIndex(({paramIndex:l,partsIndex:u})=>u>=0&&i.getParamFloat(l)!==0);if(a>=0){const l=i.getPartsOpacity(e[a].partsIndex);o=Hu(l+t/this.opacityAnimDuration,0,1)}else a=0,o=1;e.forEach(({partsIndex:l},u)=>{if(l>=0)if(a==u)i.setPartsOpacity(l,o);else{let h=i.getPartsOpacity(l),c;o<n?c=o*(n-1)/n+1:c=(1-o)*n/(1-n),(1-c)*(1-o)>s&&(c=1-s/(1-o)),h>c&&(h=c),i.setPartsOpacity(l,h)}})}copyOpacity(e){const t=this.coreModel;e.forEach(({partsIndex:i,link:n})=>{if(i>=0&&n){const s=t.getPartsOpacity(i);n.forEach(({partsIndex:o})=>{o>=0&&t.setPartsOpacity(o,s)})}})}update(e){this.partsGroups.forEach(t=>{this.normalizePartsOpacityGroup(t,e),this.copyOpacity(t)})}}nt.registerRuntime({version:2,test(r){return r instanceof Ea||Ea.isValidJSON(r)},ready(){return Promise.resolve()},isValidMoc(r){if(r.byteLength<3)return!1;const e=new Int8Array(r,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings(r){return new Ea(r)},createCoreModel(r){const e=Live2DModelWebGL.loadModel(r),t=Live2D.getError();if(t)throw t;return e},createInternalModel(r,e,t){return new o2(r,e,t)},createPose(r,e){return new h2(r,e)},createPhysics(r,e){return new u2(r,e)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");let Ae=class Hn{constructor(e,t){this.x=e||0,this.y=t||0}add(e){const t=new Hn(0,0);return t.x=this.x+e.x,t.y=this.y+e.y,t}substract(e){const t=new Hn(0,0);return t.x=this.x-e.x,t.y=this.y-e.y,t}multiply(e){const t=new Hn(0,0);return t.x=this.x*e.x,t.y=this.y*e.y,t}multiplyByScaler(e){return this.multiply(new Hn(e,e))}division(e){const t=new Hn(0,0);return t.x=this.x/e.x,t.y=this.y/e.y,t}divisionByScalar(e){return this.division(new Hn(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}};const pu=class{static range(e,t,i){return e<t?e=t:e>i&&(e=i),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let t=e;const i=t<0;i&&(t=-t);let n;return t===1/0?n=1/0:(n=Math.exp(Math.log(t)/3),n=(t/(n*n)+2*n)/3),i?-n:n}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,t){return e>t?e:t}static min(e,t){return e>t?t:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,t){const i=Math.atan2(t.y,t.x),n=Math.atan2(e.y,e.x);let s=i-n;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}static directionToDegrees(e,t){const i=this.directionToRadian(e,t);let n=this.radianToDegrees(i);return t.x-e.x>0&&(n=-n),n}static radianToDirection(e){const t=new Ae;return t.x=this.sin(e),t.y=this.cos(e),t}static quadraticEquation(e,t,i){return this.abs(e)<pu.Epsilon?this.abs(t)<pu.Epsilon?-i:-i/t:-(t+this.sqrt(t*t-4*e*i))/(2*e)}static cardanoAlgorithmForBezier(e,t,i,n){if(this.sqrt(e)<pu.Epsilon)return this.range(this.quadraticEquation(t,i,n),0,1);const s=t/e,o=i/e,a=n/e,l=(3*o-s*s)/3,u=l/3,h=(2*s*s*s-9*s*o+27*a)/27,c=h/2,f=c*c+u*u*u,d=.5,p=d+.01;if(f<0){const y=-l/3,b=y*y*y,T=this.sqrt(b),S=-h/(2*T),E=this.range(S,-1,1),C=Math.acos(E),A=2*this.cbrt(T),F=A*this.cos(C/3)-s/3;if(this.abs(F-d)<p)return this.range(F,0,1);const O=A*this.cos((C+2*Math.PI)/3)-s/3;if(this.abs(O-d)<p)return this.range(O,0,1);const I=A*this.cos((C+4*Math.PI)/3)-s/3;return this.range(I,0,1)}if(f==0){let y;c<0?y=this.cbrt(-c):y=-this.cbrt(c);const b=2*y-s/3;if(this.abs(b-d)<p)return this.range(b,0,1);const T=-y-s/3;return this.range(T,0,1)}const m=this.sqrt(f),v=this.cbrt(m-c),g=this.cbrt(m+c),_=v-g-s/3;return this.range(_,0,1)}constructor(){}};let Ke=pu;Ke.Epsilon=1e-5;let cs=class na{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,t,i){const n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=4;for(let o=0;o<s;++o)for(let a=0;a<s;++a)for(let l=0;l<s;++l)n[a+o*4]+=e[l+o*4]*t[a+l*4];for(let o=0;o<16;++o)i[o]=n[o]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let t=0;t<16;++t)this._tr[t]=e[t]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,t){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);na.multiply(i,this._tr,this._tr)}translate(e,t){this._tr[12]=e,this._tr[13]=t}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,t){const i=new Float32Array([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]);na.multiply(i,this._tr,this._tr)}scale(e,t){this._tr[0]=e,this._tr[5]=t}multiplyByMatrix(e){na.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new na;for(let t=0;t<this._tr.length;t++)e._tr[t]=this._tr[t];return e}},dm=class{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,t,i,n){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=e,this._modelColor.G=t,this._modelColor.B=i,this._modelColor.A=n}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new sa,this._mvpMatrix4x4=new cs,this._mvpMatrix4x4.loadIdentity()}};var fn=(r=>(r[r.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",r[r.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",r[r.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",r))(fn||{});let sa=class{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}},ri=!1,Is=!1,As;const Rc={vertexOffset:0,vertexStep:2};let Xa=class{static startUp(e){if(ri)return jo("CubismFramework.startUp() is already done."),ri;if(Live2DCubismCore._isStarted)return ri=!0,!0;if(Live2DCubismCore._isStarted=!0,As=e,As&&Live2DCubismCore.Logging.csmSetLogFunction(As.logFunction),ri=!0,ri){const t=Live2DCubismCore.Version.csmGetVersion(),i=(t&4278190080)>>24,n=(t&16711680)>>16,s=t&65535,o=t;jo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+n).slice(-2),("0000"+s).slice(-4),o)}return jo("CubismFramework.startUp() is complete."),ri}static cleanUp(){ri=!1,Is=!1,As=void 0}static initialize(){if(!ri){oa("CubismFramework is not started.");return}if(Is){oa("CubismFramework.initialize() skipped, already initialized.");return}Is=!0,jo("CubismFramework.initialize() is complete.")}static dispose(){if(!ri){oa("CubismFramework is not started.");return}if(!Is){oa("CubismFramework.dispose() skipped, not initialized.");return}dm.staticRelease(),Is=!1,jo("CubismFramework.dispose() is complete.")}static isStarted(){return ri}static isInitialized(){return Is}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return As!=null?As.loggingLevel:xs.LogLevel_Off}constructor(){}};var xs=(r=>(r[r.LogLevel_Verbose=0]="LogLevel_Verbose",r[r.LogLevel_Debug=1]="LogLevel_Debug",r[r.LogLevel_Info=2]="LogLevel_Info",r[r.LogLevel_Warning=3]="LogLevel_Warning",r[r.LogLevel_Error=4]="LogLevel_Error",r[r.LogLevel_Off=5]="LogLevel_Off",r))(xs||{});const Vl=()=>{};function r_(r,...e){wh.print(xs.LogLevel_Debug,"[CSM][D]"+r+`
`,e)}function jo(r,...e){wh.print(xs.LogLevel_Info,"[CSM][I]"+r+`
`,e)}function oa(r,...e){wh.print(xs.LogLevel_Warning,"[CSM][W]"+r+`
`,e)}function Gs(r,...e){wh.print(xs.LogLevel_Error,"[CSM][E]"+r+`
`,e)}let wh=class{static print(e,t,i){if(e<Xa.getLoggingLevel())return;const n=Xa.coreLogFunction;if(!n)return;const s=t.replace(/{(\d+)}/g,(o,a)=>i[a]);n(s)}static dumpBytes(e,t,i){for(let n=0;n<i;n++)n%16==0&&n>0?this.print(e,`
`):n%8==0&&n>0&&this.print(e,"  "),this.print(e,"{0} ",[t[n]&255]);this.print(e,`
`)}constructor(){}},Ix=class{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,t,i){if(!t.isAvailable()||t.isFinished())return;if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);const a=this.getDuration();t.getEndTime()<0&&t.setEndTime(a<=0?-1:t.getStartTime()+a)}let n=this._weight;const s=this._fadeInSeconds==0?1:Ke.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds),o=this._fadeOutSeconds==0||t.getEndTime()<0?1:Ke.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds);n=n*s*o,t.setState(i,n),this.doUpdateParameters(e,i,n,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,t){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}};const i_=1;let c2=class Ax extends Ix{constructor(){super(),this._parameters=[]}static create(e){const t=new Ax,i=e.FadeInTime,n=e.FadeOutTime;t.setFadeInTime(i!==void 0?i:i_),t.setFadeOutTime(n!==void 0?n:i_);const s=e.Parameters||[];for(let o=0;o<s.length;++o){const a=s[o],l=a.Id,u=a.Value;let h;switch(a.Blend){case"Multiply":h=$n.ExpressionBlendType_Multiply;break;case"Overwrite":h=$n.ExpressionBlendType_Overwrite;break;case"Add":default:h=$n.ExpressionBlendType_Add;break}const c={parameterId:l,blendType:h,value:u};t._parameters.push(c)}return t}doUpdateParameters(e,t,i,n){for(let s=0;s<this._parameters.length;++s){const o=this._parameters[s];switch(o.blendType){case $n.ExpressionBlendType_Add:{e.addParameterValueById(o.parameterId,o.value,i);break}case $n.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(o.parameterId,o.value,i);break}case $n.ExpressionBlendType_Overwrite:{e.setParameterValueById(o.parameterId,o.value,i);break}}}}};var $n=(r=>(r[r.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",r[r.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",r[r.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",r))($n||{});let f2=class{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,t){const i=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,t){this._stateTimeSeconds=e,this._stateWeight=t}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}},Ox=class{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,t,i){if(e==null)return d2;let n;for(let s=0;s<this._motions.length;++s)n=this._motions[s],n!=null&&n.setFadeOut(n._motion.getFadeOutTime());return n=new f2,n._autoDelete=t,n._motion=e,this._motions.push(n),n._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const t=this._motions[e];if(t==null){this._motions.splice(e,1);continue}if(t._motion==null){t.release(),this._motions.splice(e,1);continue}if(!t.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let t=0;t<this._motions.length;t++){const i=this._motions[t];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const t=this._motions[e];t!=null&&t.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(t=>t!=null&&t._motionQueueEntryHandle==e)}setEventCallback(e,t=null){this._eventCallBack=e,this._eventCustomData=t}doUpdateMotion(e,t){let i=!1,n=0;for(;n<this._motions.length;){const s=this._motions[n];if(s==null){this._motions.splice(n,1);continue}const o=s._motion;if(o==null){s.release(),this._motions.splice(n,1);continue}o.updateParameters(e,s,t),i=!0;const a=o.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),t-s.getStartTime());for(let l=0;l<a.length;++l)this._eventCallBack(this,a[l],this._eventCustomData);s.setLastCheckEventSeconds(t),s.isFinished()?(s.release(),this._motions.splice(n,1)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),t),n++)}return i}};const d2=-1;let p2=class extends cm{constructor(e,t){var i;super(e,t),this.queueManager=new Ox,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.Name===e)}getExpressionFile(e){return e.File}createExpression(e,t){return c2.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}},Rx=class{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:t.Ids}getLipSyncParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:t.Ids}},mu=class Fx extends xh{constructor(e){if(super(e),!Fx.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new Rx(e))}static isValidJSON(e){var t;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((t=e.FileReferences.Textures)==null?void 0:t.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[t,i]of Object.entries(this.motions))for(let n=0;n<i.length;n++)i[n].File=e(i[n].File,`motions.${t}[${n}].File`),i[n].Sound!==void 0&&(i[n].Sound=e(i[n].Sound,`motions.${t}[${n}].Sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].File=e(this.expressions[t].File,`expressions[${t}].File`)}};bx(mu,[Rx]);var jn=(r=>(r[r.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",r[r.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",r[r.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",r))(jn||{}),ni=(r=>(r[r.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",r[r.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",r[r.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",r[r.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",r))(ni||{});let Ji=class{constructor(e=0,t=0){this.time=e,this.value=t}},m2=class{constructor(){this.basePointIndex=0,this.segmentType=0}},v2=class{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}},g2=class{constructor(){this.fireTime=0,this.value=""}},_2=class{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}},Lx=class{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return pm.EvaluationOptionFlag_AreBeziersRistricted==e?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,t){return this._json.Curves[e].Segments[t]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}};var pm=(r=>(r[r.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",r))(pm||{});const y2="EyeBlink",b2="LipSync",x2="Model",T2="Parameter",S2="PartOpacity",E2=!1;function gr(r,e,t){const i=new Ji;return i.time=r.time+(e.time-r.time)*t,i.value=r.value+(e.value-r.value)*t,i}function w2(r,e){let t=(e-r[0].time)/(r[1].time-r[0].time);return t<0&&(t=0),r[0].value+(r[1].value-r[0].value)*t}function P2(r,e){let t=(e-r[0].time)/(r[3].time-r[0].time);t<0&&(t=0);const i=gr(r[0],r[1],t),n=gr(r[1],r[2],t),s=gr(r[2],r[3],t),o=gr(i,n,t),a=gr(n,s,t);return gr(o,a,t).value}function C2(r,e){const t=e,i=r[0].time,n=r[3].time,s=r[1].time,o=r[2].time,a=n-3*o+3*s-i,l=3*o-6*s+3*i,u=3*s-3*i,h=i-t,c=Ke.cardanoAlgorithmForBezier(a,l,u,h),f=gr(r[0],r[1],c),d=gr(r[1],r[2],c),p=gr(r[2],r[3],c),m=gr(f,d,c),v=gr(d,p,c);return gr(m,v,c).value}function M2(r,e){return r[0].value}function I2(r,e){return r[1].value}function Fc(r,e,t){const i=r.curves[e];let n=-1;const s=i.baseSegmentIndex+i.segmentCount;let o=0;for(let l=i.baseSegmentIndex;l<s;++l)if(o=r.segments[l].basePointIndex+(r.segments[l].segmentType==ni.CubismMotionSegmentType_Bezier?3:1),r.points[o].time>t){n=l;break}if(n==-1)return r.points[o].value;const a=r.segments[n];return a.evaluate(r.points.slice(a.basePointIndex),t)}let A2=class Dx extends Ix{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,t){const i=new Dx;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=t,i}doUpdateParameters(e,t,i,n){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=y2),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=b2);let s=t-n.getStartTime();s<0&&(s=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE;const l=64;let u=0,h=0;this._eyeBlinkParameterIds.length>l&&r_("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>l&&r_("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const c=this._fadeInSeconds<=0?1:Ke.getEasingSine((t-n.getFadeInStartTime())/this._fadeInSeconds),f=this._fadeOutSeconds<=0||n.getEndTime()<0?1:Ke.getEasingSine((n.getEndTime()-t)/this._fadeOutSeconds);let d,p,m,v=s;if(this._isLoop)for(;v>this._motionData.duration;)v-=this._motionData.duration;const g=this._motionData.curves;for(p=0;p<this._motionData.curveCount&&g[p].type==jn.CubismMotionCurveTarget_Model;++p)d=Fc(this._motionData,p,v),g[p].id==this._modelCurveIdEyeBlink?a=d:g[p].id==this._modelCurveIdLipSync&&(o=d);for(;p<this._motionData.curveCount&&g[p].type==jn.CubismMotionCurveTarget_Parameter;++p){if(m=e.getParameterIndex(g[p].id),m==-1)continue;const _=e.getParameterValueByIndex(m);if(d=Fc(this._motionData,p,v),a!=Number.MAX_VALUE){for(let b=0;b<this._eyeBlinkParameterIds.length&&b<l;++b)if(this._eyeBlinkParameterIds[b]==g[p].id){d*=a,h|=1<<b;break}}if(o!=Number.MAX_VALUE){for(let b=0;b<this._lipSyncParameterIds.length&&b<l;++b)if(this._lipSyncParameterIds[b]==g[p].id){d+=o,u|=1<<b;break}}let y;if(g[p].fadeInTime<0&&g[p].fadeOutTime<0)y=_+(d-_)*i;else{let b,T;g[p].fadeInTime<0?b=c:b=g[p].fadeInTime==0?1:Ke.getEasingSine((t-n.getFadeInStartTime())/g[p].fadeInTime),g[p].fadeOutTime<0?T=f:T=g[p].fadeOutTime==0||n.getEndTime()<0?1:Ke.getEasingSine((n.getEndTime()-t)/g[p].fadeOutTime);const S=this._weight*b*T;y=_+(d-_)*S}e.setParameterValueByIndex(m,y,1)}{if(a!=Number.MAX_VALUE)for(let _=0;_<this._eyeBlinkParameterIds.length&&_<l;++_){const y=e.getParameterValueById(this._eyeBlinkParameterIds[_]);if(h>>_&1)continue;const b=y+(a-y)*i;e.setParameterValueById(this._eyeBlinkParameterIds[_],b)}if(o!=Number.MAX_VALUE)for(let _=0;_<this._lipSyncParameterIds.length&&_<l;++_){const y=e.getParameterValueById(this._lipSyncParameterIds[_]);if(u>>_&1)continue;const b=y+(o-y)*i;e.setParameterValueById(this._lipSyncParameterIds[_],b)}}for(;p<this._motionData.curveCount&&g[p].type==jn.CubismMotionCurveTarget_PartOpacity;++p)if(d=Fc(this._motionData,p,v),ja.setOpacityFromMotion)e.setPartOpacityById(g[p].id,d);else{if(m=e.getParameterIndex(g[p].id),m==-1)continue;e.setParameterValueByIndex(m,d)}s>=this._motionData.duration&&(this._isLoop?(n.setStartTime(t),this._isLoopFadeIn&&n.setFadeInStartTime(t)):(this._onFinishedMotion&&this._onFinishedMotion(this),n.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,t){const i=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==i[n].id){i[n].fadeInTime=t;return}}setParameterFadeOutTime(e,t){const i=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==i[n].id){i[n].fadeOutTime=t;return}}getParameterFadeInTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeInTime;return-1}getParameterFadeOutTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeOutTime;return-1}setEffectIds(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}release(){this._motionData=void 0}parse(e){this._motionData=new _2;let t=new Lx(e);this._motionData.duration=t.getMotionDuration(),this._motionData.loop=t.isMotionLoop(),this._motionData.curveCount=t.getMotionCurveCount(),this._motionData.fps=t.getMotionFps(),this._motionData.eventCount=t.getEventCount();const i=t.getEvaluationOptionFlag(pm.EvaluationOptionFlag_AreBeziersRistricted),n=t.getMotionFadeInTime(),s=t.getMotionFadeOutTime();n!==void 0?this._fadeInSeconds=n<0?1:n:this._fadeInSeconds=1,s!==void 0?this._fadeOutSeconds=s<0?1:s:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new v2),this._motionData.segments=Array.from({length:t.getMotionTotalSegmentCount()}).map(()=>new m2),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new g2),this._motionData.points=[];let o=0,a=0;for(let l=0;l<this._motionData.curveCount;++l){const u=this._motionData.curves[l];switch(t.getMotionCurveTarget(l)){case x2:u.type=jn.CubismMotionCurveTarget_Model;break;case T2:u.type=jn.CubismMotionCurveTarget_Parameter;break;case S2:u.type=jn.CubismMotionCurveTarget_PartOpacity;break;default:oa('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}u.id=t.getMotionCurveId(l),u.baseSegmentIndex=a;const h=t.getMotionCurveFadeInTime(l),c=t.getMotionCurveFadeOutTime(l);u.fadeInTime=h!==void 0?h:-1,u.fadeOutTime=c!==void 0?c:-1;for(let f=0;f<t.getMotionCurveSegmentCount(l);){switch(f==0?(this._motionData.segments[a].basePointIndex=o,this._motionData.points[o]=new Ji(t.getMotionCurveSegment(l,f),t.getMotionCurveSegment(l,f+1)),o+=1,f+=2):this._motionData.segments[a].basePointIndex=o-1,t.getMotionCurveSegment(l,f)){case ni.CubismMotionSegmentType_Linear:{this._motionData.segments[a].segmentType=ni.CubismMotionSegmentType_Linear,this._motionData.segments[a].evaluate=w2,this._motionData.points[o]=new Ji(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}case ni.CubismMotionSegmentType_Bezier:{this._motionData.segments[a].segmentType=ni.CubismMotionSegmentType_Bezier,i||E2?this._motionData.segments[a].evaluate=P2:this._motionData.segments[a].evaluate=C2,this._motionData.points[o]=new Ji(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),this._motionData.points[o+1]=new Ji(t.getMotionCurveSegment(l,f+3),t.getMotionCurveSegment(l,f+4)),this._motionData.points[o+2]=new Ji(t.getMotionCurveSegment(l,f+5),t.getMotionCurveSegment(l,f+6)),o+=3,f+=7;break}case ni.CubismMotionSegmentType_Stepped:{this._motionData.segments[a].segmentType=ni.CubismMotionSegmentType_Stepped,this._motionData.segments[a].evaluate=M2,this._motionData.points[o]=new Ji(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}case ni.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[a].segmentType=ni.CubismMotionSegmentType_InverseStepped,this._motionData.segments[a].evaluate=I2,this._motionData.points[o]=new Ji(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}}++u.segmentCount,++a}this._motionData.curves.push(u)}for(let l=0;l<t.getEventCount();++l)this._motionData.events[l].fireTime=t.getEventTime(l),this._motionData.events[l].value=t.getEventValue(l);t.release()}getFiredEvent(e,t){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=t&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}},O2=class extends Th{constructor(e,t){var i;super(e,t),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new Ox,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new p2(this.settings,e)),this.queueManager.setEventCallback((t,i,n)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,t){return e.setFinishedMotionHandler(t),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,t,i){const n=A2.create(e),s=new Lx(e),o=(t===this.groups.idle?xt.idleMotionFadingDuration:xt.motionFadingDuration)/1e3;return s.getMotionFadeInTime()===void 0&&n.setFadeInTime(i.FadeInTime>0?i.FadeInTime:o),s.getMotionFadeOutTime()===void 0&&n.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:o),n.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),n}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}};const R2="ParamAngleX",F2="ParamAngleY",L2="ParamAngleZ",D2="ParamEyeBallX",B2="ParamEyeBallY",N2="ParamBodyAngleX",k2="ParamBreath";let U2=class Bx{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new Bx}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,t){this._currentTime+=t;const i=this._currentTime*2*3.14159;for(let n=0;n<this._breathParameters.length;++n){const s=this._breathParameters[n];e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(i/s.cycle),s.weight)}}},Xo=class{constructor(e,t,i,n,s){this.parameterId=e??void 0,this.offset=t??0,this.peak=i??0,this.cycle=n??0,this.weight=s??0}};const ed=class{static create(e){return new ed(e)}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,t){this._userTimeSeconds+=t;let i,n=0;switch(this._blinkingState){case dr.EyeState_Closing:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,n>=1&&(n=1,this._blinkingState=dr.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),i=1-n;break;case dr.EyeState_Closed:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,n>=1&&(this._blinkingState=dr.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),i=0;break;case dr.EyeState_Opening:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,n>=1&&(n=1,this._blinkingState=dr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),i=n;break;case dr.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=dr.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),i=1;break;case dr.EyeState_First:default:this._blinkingState=dr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),i=1;break}ed.CloseIfZero||(i=-i);for(let s=0;s<this._parameterIds.length;++s)e.setParameterValueById(this._parameterIds[s],i)}constructor(e){var t,i;this._blinkingState=dr.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],e!=null&&(this._parameterIds=(i=(t=e.getEyeBlinkParameters())==null?void 0:t.slice())!=null?i:this._parameterIds)}determinNextBlinkingTiming(){const e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}};let Nx=ed;Nx.CloseIfZero=!0;var dr=(r=>(r[r.EyeState_First=0]="EyeState_First",r[r.EyeState_Interval=1]="EyeState_Interval",r[r.EyeState_Closing=2]="EyeState_Closing",r[r.EyeState_Closed=3]="EyeState_Closed",r[r.EyeState_Opening=4]="EyeState_Opening",r))(dr||{});let td=class{constructor(e=0,t=0,i=0,n=0){this.x=e,this.y=t,this.width=i,this.height=n}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,t){this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2}};const Lc=4,G2=10;let On,aa,rd,Dc=class{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const t=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,rd),this._maskTexture=new V2(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,t){let i=Number.MAX_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE;const a=t._clippedDrawableIndexList.length;for(let l=0;l<a;l++){const u=t._clippedDrawableIndexList[l],h=e.getDrawableVertexCount(u),c=e.getDrawableVertices(u);let f=Number.MAX_VALUE,d=Number.MAX_VALUE,p=Number.MIN_VALUE,m=Number.MIN_VALUE;const v=h*Rc.vertexStep;for(let g=Rc.vertexOffset;g<v;g+=Rc.vertexStep){const _=c[g],y=c[g+1];_<f&&(f=_),_>p&&(p=_),y<d&&(d=y),y>m&&(m=y)}if(f!=Number.MAX_VALUE)if(f<i&&(i=f),d<n&&(n=d),p>s&&(s=p),m>o&&(o=m),i==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;const g=s-i,_=o-n;t._allClippedDrawRect.x=i,t._allClippedDrawRect.y=n,t._allClippedDrawRect.width=g,t._allClippedDrawRect.height=_}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new td,this._tmpMatrix=new cs,this._tmpMatrixForMask=new cs,this._tmpMatrixForDraw=new cs;let e=new sa;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new sa,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new sa,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new sa,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,t,i;const n=this;for(let s=0;s<this._clippingContextListForMask.length;s++)this._clippingContextListForMask[s]&&((e=this._clippingContextListForMask[s])==null||e.release());n._clippingContextListForMask=void 0,n._clippingContextListForDraw=void 0,this._maskTexture&&((t=this.gl)==null||t.deleteFramebuffer(this._maskTexture.texture),n._maskTexture=void 0),n._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,t,i,n){for(let s=0;s<t;s++){if(n[s]<=0){this._clippingContextListForDraw.push(null);continue}let o=this.findSameClip(i[s],n[s]);o==null&&(o=new H2(this,i[s],n[s]),this._clippingContextListForMask.push(o)),o.addClippedDrawable(s),this._clippingContextListForDraw.push(o)}}setupClippingContext(e,t){this._currentFrameNo++;let i=0;for(let n=0;n<this._clippingContextListForMask.length;n++){const s=this._clippingContextListForMask[n];this.calcClippedDrawTotalBounds(e,s),s._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),t.getMvpMatrix(),t.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let n=0;n<this._clippingContextListForMask.length;n++){const s=this._clippingContextListForMask[n],o=s._allClippedDrawRect,a=s._layoutBounds,l=.05;this._tmpBoundsOnModel.setRect(o),this._tmpBoundsOnModel.expand(o.width*l,o.height*l);const u=a.width/this._tmpBoundsOnModel.width,h=a.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const c=s._clippingIdCount;for(let f=0;f<c;f++){const d=s._clippingIdList[f];e.getDrawableDynamicFlagVertexPositionsDidChange(d)&&(t.setIsCulling(e.getDrawableCulling(d)!=!1),t.setClippingContextBufferForMask(s),t.drawMesh(e.getDrawableTextureIndices(d),e.getDrawableVertexIndexCount(d),e.getDrawableVertexCount(d),e.getDrawableVertexIndices(d),e.getDrawableVertices(d),e.getDrawableVertexUvs(d),e.getDrawableOpacity(d),fn.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,rd),t.setClippingContextBufferForMask(null),this.gl.viewport(aa[0],aa[1],aa[2],aa[3])}}findSameClip(e,t){for(let i=0;i<this._clippingContextListForMask.length;i++){const n=this._clippingContextListForMask[i],s=n._clippingIdCount;if(s!=t)continue;let o=0;for(let a=0;a<s;a++){const l=n._clippingIdList[a];for(let u=0;u<s;u++)if(e[u]==l){o++;break}}if(o==s)return n}return null}setupLayoutBounds(e){let t=e/Lc,i=e%Lc;t=~~t,i=~~i;let n=0;for(let s=0;s<Lc;s++){const o=t+(s<i?1:0);if(o!=0)if(o==1){const a=this._clippingContextListForMask[n++];a._layoutChannelNo=s,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(o==2)for(let a=0;a<o;a++){let l=a%2;l=~~l;const u=this._clippingContextListForMask[n++];u._layoutChannelNo=s,u._layoutBounds.x=l*.5,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(o<=4)for(let a=0;a<o;a++){let l=a%2,u=a/2;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l*.5,h._layoutBounds.y=u*.5,h._layoutBounds.width=.5,h._layoutBounds.height=.5}else if(o<=9)for(let a=0;a<o;a++){let l=a%3,u=a/3;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l/3,h._layoutBounds.y=u/3,h._layoutBounds.width=1/3,h._layoutBounds.height=1/3}else if(ja.supportMoreMaskDivisions&&o<=16)for(let a=0;a<o;a++){let l=a%4,u=a/4;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l/4,h._layoutBounds.y=u/4,h._layoutBounds.width=1/4,h._layoutBounds.height=1/4}else Gs("not supported mask count : {0}",o)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}},V2=class{constructor(e,t){this.frameNo=e,this.texture=t}},H2=class{constructor(e,t,i){this._isUsing=!1,this._owner=e,this._clippingIdList=t,this._clippingIdCount=i,this._allClippedDrawRect=new td,this._layoutBounds=new td,this._clippedDrawableIndexList=[],this._matrixForMask=new cs,this._matrixForDraw=new cs}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}},vu=class kx{static getInstance(){return On==null&&(On=new kx),On}static deleteInstance(){On&&(On.release(),On=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,t,i,n,s,o,a,l,u,h,c,f,d){c||Gs("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let p,m,v,g;const _=e.getClippingContextBufferForMask();if(_!=null){const y=this._shaderSets[la.ShaderNames_SetupMask];this.gl.useProgram(y.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(y.samplerTexture0Location,0),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributePositionLocation),this.gl.vertexAttribPointer(y.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributeTexCoordLocation),this.gl.vertexAttribPointer(y.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const b=_._layoutChannelNo,T=_.getClippingManager().getChannelFlagAsColor(b);this.gl.uniform4f(y.uniformChannelFlagLocation,T.R,T.G,T.B,T.A),this.gl.uniformMatrix4fv(y.uniformClipMatrixLocation,!1,_._matrixForMask.getArray());const S=_._layoutBounds;this.gl.uniform4f(y.uniformBaseColorLocation,S.x*2-1,S.y*2-1,S.getRight()*2-1,S.getBottom()*2-1),p=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_COLOR,v=this.gl.ZERO,g=this.gl.ONE_MINUS_SRC_ALPHA}else{const y=e.getClippingContextBufferForDraw(),T=y!=null?d?2:1:0;let S;switch(u){case fn.CubismBlendMode_Normal:default:S=this._shaderSets[la.ShaderNames_NormalPremultipliedAlpha+T],p=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA,v=this.gl.ONE,g=this.gl.ONE_MINUS_SRC_ALPHA;break;case fn.CubismBlendMode_Additive:S=this._shaderSets[la.ShaderNames_AddPremultipliedAlpha+T],p=this.gl.ONE,m=this.gl.ONE,v=this.gl.ZERO,g=this.gl.ONE;break;case fn.CubismBlendMode_Multiplicative:S=this._shaderSets[la.ShaderNames_MultPremultipliedAlpha+T],p=this.gl.DST_COLOR,m=this.gl.ONE_MINUS_SRC_ALPHA,v=this.gl.ZERO,g=this.gl.ONE;break}if(this.gl.useProgram(S.shaderProgram),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),y!=null){this.gl.activeTexture(this.gl.TEXTURE1);const E=y.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,E),this.gl.uniform1i(S.samplerTexture1Location,1),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,y._matrixForDraw.getArray());const C=y._layoutChannelNo,M=y.getClippingManager().getChannelFlagAsColor(C);this.gl.uniform4f(S.uniformChannelFlagLocation,M.R,M.G,M.B,M.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(S.samplerTexture0Location,0),this.gl.uniformMatrix4fv(S.uniformMatrixLocation,!1,f.getArray()),this.gl.uniform4f(S.uniformBaseColorLocation,h.R,h.G,h.B,h.A)}a.index==null&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(p,m,v,g)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<G2;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram($2,j2),this._shaderSets[1].shaderProgram=this.loadShaderProgram(X2,z2),this._shaderSets[2].shaderProgram=this.loadShaderProgram(n_,W2),this._shaderSets[3].shaderProgram=this.loadShaderProgram(n_,Y2),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,t){let i=this.gl.createProgram(),n=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!n)return Gs("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return s?(this.gl.attachShader(i,n),this.gl.attachShader(i,s),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(n),this.gl.deleteShader(s),i):(Gs("Failed to link program: {0}",i),this.gl.deleteShader(n),this.gl.deleteShader(s),i&&this.gl.deleteProgram(i),0)):(Gs("Vertex shader compile error!"),0)}compileShaderSource(e,t){const i=t,n=this.gl.createShader(e);if(this.gl.shaderSource(n,i),this.gl.compileShader(n),!n){const o=this.gl.getShaderInfoLog(n);Gs("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(this.gl.deleteShader(n),null)}setGl(e){this.gl=e}};var la=(r=>(r[r.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",r[r.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",r[r.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",r[r.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",r[r.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",r[r.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",r[r.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",r[r.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",r[r.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",r[r.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",r))(la||{});const $2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",j2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",X2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",n_="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",z2="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",W2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",Y2="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";let Ux=class extends dm{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Dc,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new Dc,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let t=e.getDrawableCount()-1;t>=0;t--)this._sortedDrawableIndexList[t]=0;super.initialize(e)}bindTexture(e,t){this._textures[e]=t}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new Dc,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,t,i;const n=this;this._clippingManager.release(),n._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(t=this.gl)==null||t.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,n._bufferData=void 0,n._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const n=t[i];this._sortedDrawableIndexList[n]=i}for(let i=0;i<e;++i){const n=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(n)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[n]:null),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndices(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n)))}}drawMesh(e,t,i,n,s,o,a,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const h=this.getModelColor();this.getClippingContextBufferForMask()==null&&(h.A*=a,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A));let c=null;this._textures[e]!=null&&(c=this._textures[e]),vu.getInstance().setupShaderProgram(this,c,i,s,n,o,this._bufferData,a,l,h,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){vu.deleteInstance()}setRenderState(e,t){rd=e,aa=t}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),vu.getInstance().setGl(e)}};dm.staticRelease=()=>{Ux.doStaticRelease()};const s_=new cs;let q2=class extends xx{constructor(e,t,i){super(),this.lipSync=!0,this.breath=U2.create(),this.renderer=new Ux,this.idParamAngleX=R2,this.idParamAngleY=F2,this.idParamAngleZ=L2,this.idParamEyeBallX=D2,this.idParamEyeBallY=B2,this.idParamBodyAngleX=N2,this.idParamBreath=k2,this.pixelsPerUnit=1,this.centeringTransform=new We,this.coreModel=e,this.settings=t,this.motionManager=new O2(t,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=Nx.create(this.settings)),this.breath.setParameters([new Xo(this.idParamAngleX,0,15,6.5345,.5),new Xo(this.idParamAngleY,0,8,3.5345,.5),new Xo(this.idParamAngleZ,0,10,5.5345,.5),new Xo(this.idParamBodyAngleX,0,4,15.5345,.5),new Xo(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout)){const i=t.charAt(0).toLowerCase()+t.slice(1);e[i]=this.settings.layout[t]}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,t){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=t,this.renderer._clippingManager._maskTexture=void 0,vu.getInstance()._shaderSets=[]}bindTexture(e,t){this.renderer.bindTexture(e,t)}getHitAreaDefs(){var e,t;return(t=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?t:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const t=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<t.length;i+=2)t[i]=t[i]*this.pixelsPerUnit+this.originalWidth/2,t[i+1]=-t[i+1]*this.pixelsPerUnit+this.originalHeight/2;return t}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,t){var i,n,s,o;super.update(e,t),e/=1e3,t/=1e3;const a=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),a.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(a,t),l||(n=this.eyeBlink)==null||n.updateParameters(a,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,t*1e3),(s=this.physics)==null||s.evaluate(a,e),(o=this.pose)==null||o.updateParameters(a,e),this.emit("beforeModelUpdate"),a.update(),a.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(e,t){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const t=this.drawingMatrix,i=s_.getArray();i[0]=t.a,i[1]=t.b,i[4]=-t.c,i[5]=-t.d,i[12]=t.tx,i[13]=t.ty,this.renderer.setMvpMatrix(s_),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}},Hl,o_=20;function K2(){return Xa.isStarted()?Promise.resolve():(Hl??(Hl=new Promise((r,e)=>{function t(){try{Z2(),r()}catch(i){if(o_--,o_<0){const n=new Error("Failed to start up Cubism 4 framework.");n.cause=i,e(n);return}Ye.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(t,10)}}t()})),Hl)}function Z2(r){r=Object.assign({logFunction:console.log,loggingLevel:xs.LogLevel_Verbose},r),Xa.startUp(r),Xa.initialize()}const J2=.001,a_=.5;let Q2=class Gx{static create(e){const t=new Gx;typeof e.FadeInTime=="number"&&(t._fadeTimeSeconds=e.FadeInTime,t._fadeTimeSeconds<=0&&(t._fadeTimeSeconds=a_));const i=e.Groups,n=i.length;for(let s=0;s<n;++s){const o=i[s],a=o.length;let l=0;for(let u=0;u<a;++u){const h=o[u],c=new l_;c.partId=h.Id;const f=h.Link;if(f){const d=f.length;for(let p=0;p<d;++p){const m=new l_;m.partId=f[p],c.link.push(m)}}t._partGroups.push(c),++l}t._partGroupCounts.push(l)}return t}updateParameters(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);let i=0;for(let n=0;n<this._partGroupCounts.length;n++){const s=this._partGroupCounts[n];this.doFade(e,t,i,s),i+=s}this.copyPartOpacities(e)}reset(e){let t=0;for(let i=0;i<this._partGroupCounts.length;++i){const n=this._partGroupCounts[i];for(let s=t;s<t+n;++s){this._partGroups[s].initialize(e);const o=this._partGroups[s].partIndex,a=this._partGroups[s].parameterIndex;if(!(o<0)){e.setPartOpacityByIndex(o,s==t?1:0),e.setParameterValueByIndex(a,s==t?1:0);for(let l=0;l<this._partGroups[s].link.length;++l)this._partGroups[s].link[l].initialize(e)}}t+=n}}copyPartOpacities(e){for(let t=0;t<this._partGroups.length;++t){const i=this._partGroups[t];if(i.link.length==0)continue;const n=this._partGroups[t].partIndex,s=e.getPartOpacityByIndex(n);for(let o=0;o<i.link.length;++o){const l=i.link[o].partIndex;l<0||e.setPartOpacityByIndex(l,s)}}}doFade(e,t,i,n){let s=-1,o=1;const a=.5,l=.15;for(let u=i;u<i+n;++u){const h=this._partGroups[u].partIndex,c=this._partGroups[u].parameterIndex;if(e.getParameterValueByIndex(c)>J2){if(s>=0)break;s=u,o=e.getPartOpacityByIndex(h),o+=t/this._fadeTimeSeconds,o>1&&(o=1)}}s<0&&(s=0,o=1);for(let u=i;u<i+n;++u){const h=this._partGroups[u].partIndex;if(s==u)e.setPartOpacityByIndex(h,o);else{let c=e.getPartOpacityByIndex(h),f;o<a?f=o*(a-1)/a+1:f=(1-o)*a/(1-a),(1-f)*(1-o)>l&&(f=1-l/(1-o)),c>f&&(c=f),e.setPartOpacityByIndex(h,c)}}}constructor(){this._fadeTimeSeconds=a_,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}},l_=class Vx{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(t=>t.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Vx;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(t=>t.clone()),e}},eF=class{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,t=this._savedParameters.length;for(let i=0;i<e;++i)i<t?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let t;const i=this._model.parts.count;for(t=0;t<i;++t)if(e==this._partIds[t])return t;return e in this._notExistPartId?this._notExistPartId[e]:(t=i+this._notExistPartId.length,this._notExistPartId[e]=t,this._notExistPartOpacities[t]=0,t)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,t){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=t;return}Vl(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t}setPartOpacityById(e,t){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,t)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(Vl(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}getParameterIndex(e){let t;const i=this._model.parameters.count;for(t=0;t<i;++t)if(e==this._parameterIds[t])return t;return e in this._notExistParameterId?this._notExistParameterId[e]:(t=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=t,this._notExistParameterValues[t]=0,t)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(Vl(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}setParameterValueByIndex(e,t,i=1){if(e in this._notExistParameterValues){this._notExistParameterValues[e]=i==1?t:this._notExistParameterValues[e]*(1-i)+t*i;return}Vl(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?t:this._parameterValues[e]=this._parameterValues[e]*(1-i)+t*i}setParameterValueById(e,t,i=1){const n=this.getParameterIndex(e);this.setParameterValueByIndex(n,t,i)}addParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*i)}addParameterValueById(e,t,i=1){const n=this.getParameterIndex(e);this.addParameterValueByIndex(n,t,i)}multiplyParameterValueById(e,t,i=1){const n=this.getParameterIndex(e);this.multiplyParameterValueByIndex(n,t,i)}multiplyParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const t=this._model.drawables.count;for(let i=0;i<t;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}getDrawableBlendMode(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?fn.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?fn.CubismBlendMode_Multiplicative:fn.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}getDrawableDynamicFlagVisibilityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}getDrawableDynamicFlagOpacityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}loadParameters(){let e=this._model.parameters.count;const t=this._savedParameters.length;e>t&&(e=t);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,t=this._model.parameters.count;for(let i=0;i<t;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,t=this._model.parts.count;for(let i=0;i<t;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,t=this._model.drawables.count;for(let i=0;i<t;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}},tF=class Hx{static create(e){const t=Live2DCubismCore.Moc.fromArrayBuffer(e);if(t)return new Hx(t);throw new Error("Unknown error")}createModel(){let e;const t=Live2DCubismCore.Model.fromMoc(this._moc);if(t)return e=new eF(t),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}};var id=(r=>(r[r.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",r))(id||{}),Xn=(r=>(r[r.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",r[r.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",r[r.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",r))(Xn||{});let rF=class{constructor(){this.initialPosition=new Ae(0,0),this.position=new Ae(0,0),this.lastPosition=new Ae(0,0),this.lastGravity=new Ae(0,0),this.force=new Ae(0,0),this.velocity=new Ae(0,0)}},iF=class{constructor(){this.normalizationPosition={},this.normalizationAngle={}}},nF=class{constructor(){this.source={}}},sF=class{constructor(){this.destination={},this.translationScale=new Ae(0,0)}},oF=class{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new Ae(0,0),this.wind=new Ae(0,0)}},aF=class{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new Ae(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new Ae(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,t){return this._json.PhysicsSettings[e].Input[t].Weight}getInputReflect(e,t){return this._json.PhysicsSettings[e].Input[t].Reflect}getInputType(e,t){return this._json.PhysicsSettings[e].Input[t].Type}getInputSourceId(e,t){return this._json.PhysicsSettings[e].Input[t].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,t){return this._json.PhysicsSettings[e].Output[t].VertexIndex}getOutputAngleScale(e,t){return this._json.PhysicsSettings[e].Output[t].Scale}getOutputWeight(e,t){return this._json.PhysicsSettings[e].Output[t].Weight}getOutputDestinationId(e,t){return this._json.PhysicsSettings[e].Output[t].Destination.Id}getOutputType(e,t){return this._json.PhysicsSettings[e].Output[t].Type}getOutputReflect(e,t){return this._json.PhysicsSettings[e].Output[t].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,t){return this._json.PhysicsSettings[e].Vertices[t].Mobility}getParticleDelay(e,t){return this._json.PhysicsSettings[e].Vertices[t].Delay}getParticleAcceleration(e,t){return this._json.PhysicsSettings[e].Vertices[t].Acceleration}getParticleRadius(e,t){return this._json.PhysicsSettings[e].Vertices[t].Radius}getParticlePosition(e,t){const i=new Ae(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[t].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[t].Position.Y,i}};const u_="X",h_="Y",c_="Angle",lF=5,$x=100,uF=.001;let hF=class jx{static create(e){const t=new jx;return t.parse(e),t._physicsRig.gravity.y=0,t}evaluate(e,t){let i,n,s,o;const a=new Ae;let l,u,h,c,f,d,p,m;f=e.getModel().parameters.values,d=e.getModel().parameters.maximumValues,p=e.getModel().parameters.minimumValues,m=e.getModel().parameters.defaultValues;for(let v=0;v<this._physicsRig.subRigCount;++v){i={angle:0},a.x=0,a.y=0,l=this._physicsRig.settings[v],u=this._physicsRig.inputs.slice(l.baseInputIndex),h=this._physicsRig.outputs.slice(l.baseOutputIndex),c=this._physicsRig.particles.slice(l.baseParticleIndex);for(let g=0;g<l.inputCount;++g)n=u[g].weight/$x,u[g].sourceParameterIndex==-1&&(u[g].sourceParameterIndex=e.getParameterIndex(u[g].source.id)),u[g].getNormalizedParameterValue(a,i,f[u[g].sourceParameterIndex],p[u[g].sourceParameterIndex],d[u[g].sourceParameterIndex],m[u[g].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[g].reflect,n);s=Ke.degreesToRadian(-i.angle),a.x=a.x*Ke.cos(s)-a.y*Ke.sin(s),a.y=a.x*Ke.sin(s)+a.y*Ke.cos(s),SF(c,l.particleCount,a,i.angle,this._options.wind,uF*l.normalizationPosition.maximum,t,lF);for(let g=0;g<l.outputCount;++g){const _=h[g].vertexIndex;if(_<1||_>=l.particleCount)break;h[g].destinationParameterIndex==-1&&(h[g].destinationParameterIndex=e.getParameterIndex(h[g].destination.id));const y=new Ae;y.x=c[_].position.x-c[_-1].position.x,y.y=c[_].position.y-c[_-1].position.y,o=h[g].getValue(y,c,_,h[g].reflect,this._options.gravity);const b=h[g].destinationParameterIndex,T=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(f.subarray(b))):f.slice(b);EF(T,p[b],d[b],o,h[g]);for(let S=b,E=0;S<f.length;S++,E++)f[S]=T[E]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new cF,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new oF;let t=new aF(e);this._physicsRig.gravity=t.getGravity(),this._physicsRig.wind=t.getWind(),this._physicsRig.subRigCount=t.getSubRigCount();let i=0,n=0,s=0;for(let o=0;o<this._physicsRig.subRigCount;++o){const a=new iF;a.normalizationPosition.minimum=t.getNormalizationPositionMinimumValue(o),a.normalizationPosition.maximum=t.getNormalizationPositionMaximumValue(o),a.normalizationPosition.defalut=t.getNormalizationPositionDefaultValue(o),a.normalizationAngle.minimum=t.getNormalizationAngleMinimumValue(o),a.normalizationAngle.maximum=t.getNormalizationAngleMaximumValue(o),a.normalizationAngle.defalut=t.getNormalizationAngleDefaultValue(o),a.inputCount=t.getInputCount(o),a.baseInputIndex=i,i+=a.inputCount;for(let l=0;l<a.inputCount;++l){const u=new nF;switch(u.sourceParameterIndex=-1,u.weight=t.getInputWeight(o,l),u.reflect=t.getInputReflect(o,l),t.getInputType(o,l)){case u_:u.type=Xn.CubismPhysicsSource_X,u.getNormalizedParameterValue=fF;break;case h_:u.type=Xn.CubismPhysicsSource_Y,u.getNormalizedParameterValue=dF;break;case c_:u.type=Xn.CubismPhysicsSource_Angle,u.getNormalizedParameterValue=pF;break}u.source.targetType=id.CubismPhysicsTargetType_Parameter,u.source.id=t.getInputSourceId(o,l),this._physicsRig.inputs.push(u)}a.outputCount=t.getOutputCount(o),a.baseOutputIndex=n,n+=a.outputCount;for(let l=0;l<a.outputCount;++l){const u=new sF;switch(u.destinationParameterIndex=-1,u.vertexIndex=t.getOutputVertexIndex(o,l),u.angleScale=t.getOutputAngleScale(o,l),u.weight=t.getOutputWeight(o,l),u.destination.targetType=id.CubismPhysicsTargetType_Parameter,u.destination.id=t.getOutputDestinationId(o,l),t.getOutputType(o,l)){case u_:u.type=Xn.CubismPhysicsSource_X,u.getValue=mF,u.getScale=bF;break;case h_:u.type=Xn.CubismPhysicsSource_Y,u.getValue=vF,u.getScale=xF;break;case c_:u.type=Xn.CubismPhysicsSource_Angle,u.getValue=gF,u.getScale=TF;break}u.reflect=t.getOutputReflect(o,l),this._physicsRig.outputs.push(u)}a.particleCount=t.getParticleCount(o),a.baseParticleIndex=s,s+=a.particleCount;for(let l=0;l<a.particleCount;++l){const u=new rF;u.mobility=t.getParticleMobility(o,l),u.delay=t.getParticleDelay(o,l),u.acceleration=t.getParticleAcceleration(o,l),u.radius=t.getParticleRadius(o,l),u.position=t.getParticlePosition(o,l),this._physicsRig.particles.push(u)}this._physicsRig.settings.push(a)}this.initialize(),t.release()}initialize(){let e,t,i;for(let n=0;n<this._physicsRig.subRigCount;++n){t=this._physicsRig.settings[n],e=this._physicsRig.particles.slice(t.baseParticleIndex),e[0].initialPosition=new Ae(0,0),e[0].lastPosition=new Ae(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Ae(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Ae(0,0),e[0].force=new Ae(0,0);for(let s=1;s<t.particleCount;++s)i=new Ae(0,0),i.y=e[s].radius,e[s].initialPosition=new Ae(e[s-1].initialPosition.x+i.x,e[s-1].initialPosition.y+i.y),e[s].position=new Ae(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new Ae(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new Ae(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new Ae(0,0),e[s].force=new Ae(0,0)}}},cF=class{constructor(){this.gravity=new Ae(0,0),this.wind=new Ae(0,0)}};function fF(r,e,t,i,n,s,o,a,l,u){r.x+=mm(t,i,n,s,o.minimum,o.maximum,o.defalut,l)*u}function dF(r,e,t,i,n,s,o,a,l,u){r.y+=mm(t,i,n,s,o.minimum,o.maximum,o.defalut,l)*u}function pF(r,e,t,i,n,s,o,a,l,u){e.angle+=mm(t,i,n,s,a.minimum,a.maximum,a.defalut,l)*u}function mF(r,e,t,i,n){let s=r.x;return i&&(s*=-1),s}function vF(r,e,t,i,n){let s=r.y;return i&&(s*=-1),s}function gF(r,e,t,i,n){let s;return t>=2?n=e[t-1].position.substract(e[t-2].position):n=n.multiplyByScaler(-1),s=Ke.directionToRadian(n,r),i&&(s*=-1),s}function _F(r,e){return Math.abs(Math.max(r,e)-Math.min(r,e))}function yF(r,e){return Math.min(r,e)+_F(r,e)/2}function bF(r,e){return r.x}function xF(r,e){return r.y}function TF(r,e){return e}function SF(r,e,t,i,n,s,o,a){let l,u,h,c,f=new Ae(0,0),d=new Ae(0,0),p=new Ae(0,0),m=new Ae(0,0);r[0].position=new Ae(t.x,t.y),l=Ke.degreesToRadian(i),c=Ke.radianToDirection(l),c.normalize();for(let v=1;v<e;++v)r[v].force=c.multiplyByScaler(r[v].acceleration).add(n),r[v].lastPosition=new Ae(r[v].position.x,r[v].position.y),u=r[v].delay*o*30,f=r[v].position.substract(r[v-1].position),h=Ke.directionToRadian(r[v].lastGravity,c)/a,f.x=Ke.cos(h)*f.x-f.y*Ke.sin(h),f.y=Ke.sin(h)*f.x+f.y*Ke.cos(h),r[v].position=r[v-1].position.add(f),d=r[v].velocity.multiplyByScaler(u),p=r[v].force.multiplyByScaler(u).multiplyByScaler(u),r[v].position=r[v].position.add(d).add(p),m=r[v].position.substract(r[v-1].position),m.normalize(),r[v].position=r[v-1].position.add(m.multiplyByScaler(r[v].radius)),Ke.abs(r[v].position.x)<s&&(r[v].position.x=0),u!=0&&(r[v].velocity=r[v].position.substract(r[v].lastPosition),r[v].velocity=r[v].velocity.divisionByScalar(u),r[v].velocity=r[v].velocity.multiplyByScaler(r[v].mobility)),r[v].force=new Ae(0,0),r[v].lastGravity=new Ae(c.x,c.y)}function EF(r,e,t,i,n){let s,o,a;s=n.getScale(n.translationScale,n.angleScale),o=i*s,o<e?(o<n.valueBelowMinimum&&(n.valueBelowMinimum=o),o=e):o>t&&(o>n.valueExceededMaximum&&(n.valueExceededMaximum=o),o=t),a=n.weight/$x,a>=1||(o=r[0]*(1-a)+o*a),r[0]=o}function mm(r,e,t,i,n,s,o,a){let l=0;const u=Ke.max(t,e);u<r&&(r=u);const h=Ke.min(t,e);h>r&&(r=h);const c=Ke.min(n,s),f=Ke.max(n,s),d=o,p=yF(h,u),m=r-p;switch(Math.sign(m)){case 1:{const v=f-d,g=u-p;g!=0&&(l=m*(v/g),l+=d);break}case-1:{const v=c-d,g=h-p;g!=0&&(l=m*(v/g),l+=d);break}case 0:{l=d;break}}return a?l:l*-1}nt.registerRuntime({version:4,ready:K2,test(r){return r instanceof mu||mu.isValidJSON(r)},isValidMoc(r){if(r.byteLength<4)return!1;const e=new Int8Array(r,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(r){return new mu(r)},createCoreModel(r){const e=tF.create(r);try{const t=e.createModel();return t.__moc=e,t}catch(t){try{e.release()}catch{}throw t}},createInternalModel(r,e,t){const i=new q2(r,e,t),n=r;return n.__moc&&(i.__moc=n.__moc,delete n.__moc,i.once("destroy",wF)),i},createPhysics(r,e){return hF.create(e)},createPose(r,e){return Q2.create(e)}});function wF(){var r;(r=this.__moc)==null||r.release()}const Ci=(r,e,{checkForDefaultPrevented:t=!0}={})=>n=>{const s=r==null?void 0:r(n);if(t===!1||!s)return e==null?void 0:e(n)};var f_;const At=typeof window<"u",PF=r=>typeof r=="string",Xx=()=>{},CF=At&&((f_=window==null?void 0:window.navigator)==null?void 0:f_.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function vm(r){return typeof r=="function"?r():x(r)}function MF(r){return r}function Ph(r){return l0()?(u0(r),!0):!1}function IF(r,e=!0){qr()?Ot(r):e?r():$t(r)}function nd(r,e,t={}){const{immediate:i=!0}=t,n=oe(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function a(){n.value=!1,o()}function l(...u){o(),n.value=!0,s=setTimeout(()=>{n.value=!1,s=null,r(...u)},vm(e))}return i&&(n.value=!0,At&&l()),Ph(a),{isPending:sh(n),start:l,stop:a}}function on(r){var e;const t=vm(r);return(e=t==null?void 0:t.$el)!=null?e:t}const gm=At?window:void 0;function Js(...r){let e,t,i,n;if(PF(r[0])||Array.isArray(r[0])?([t,i,n]=r,e=gm):[e,t,i,n]=r,!e)return Xx;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(h=>h()),s.length=0},a=(h,c,f,d)=>(h.addEventListener(c,f,d),()=>h.removeEventListener(c,f,d)),l=Ee(()=>[on(e),vm(n)],([h,c])=>{o(),h&&s.push(...t.flatMap(f=>i.map(d=>a(h,f,d,c))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Ph(u),u}let d_=!1;function AF(r,e,t={}){const{window:i=gm,ignore:n=[],capture:s=!0,detectIframe:o=!1}=t;if(!i)return;CF&&!d_&&(d_=!0,Array.from(i.document.body.children).forEach(f=>f.addEventListener("click",Xx)));let a=!0;const l=f=>n.some(d=>{if(typeof d=="string")return Array.from(i.document.querySelectorAll(d)).some(p=>p===f.target||f.composedPath().includes(p));{const p=on(d);return p&&(f.target===p||f.composedPath().includes(p))}}),h=[Js(i,"click",f=>{const d=on(r);if(!(!d||d===f.target||f.composedPath().includes(d))){if(f.detail===0&&(a=!l(f)),!a){a=!0;return}e(f)}},{passive:!0,capture:s}),Js(i,"pointerdown",f=>{const d=on(r);d&&(a=!f.composedPath().includes(d)&&!l(f))},{passive:!0}),o&&Js(i,"blur",f=>{var d;const p=on(r);((d=i.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(p!=null&&p.contains(i.document.activeElement))&&e(f)})].filter(Boolean);return()=>h.forEach(f=>f())}function OF(r,e=!1){const t=oe(),i=()=>t.value=!!r();return i(),IF(i,e),t}const p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m_="__vueuse_ssr_handlers__";p_[m_]=p_[m_]||{};var v_=Object.getOwnPropertySymbols,RF=Object.prototype.hasOwnProperty,FF=Object.prototype.propertyIsEnumerable,LF=(r,e)=>{var t={};for(var i in r)RF.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&v_)for(var i of v_(r))e.indexOf(i)<0&&FF.call(r,i)&&(t[i]=r[i]);return t};function zx(r,e,t={}){const i=t,{window:n=gm}=i,s=LF(i,["window"]);let o;const a=OF(()=>n&&"ResizeObserver"in n),l=()=>{o&&(o.disconnect(),o=void 0)},u=Ee(()=>on(r),c=>{l(),a.value&&n&&c&&(o=new ResizeObserver(e),o.observe(c,s))},{immediate:!0,flush:"post"}),h=()=>{l(),u()};return Ph(h),{isSupported:a,stop:h}}var g_;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(g_||(g_={}));var DF=Object.defineProperty,__=Object.getOwnPropertySymbols,BF=Object.prototype.hasOwnProperty,NF=Object.prototype.propertyIsEnumerable,y_=(r,e,t)=>e in r?DF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kF=(r,e)=>{for(var t in e||(e={}))BF.call(e,t)&&y_(r,t,e[t]);if(__)for(var t of __(e))NF.call(e,t)&&y_(r,t,e[t]);return r};const UF={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};kF({linear:MF},UF);const GF=()=>At&&/firefox/i.test(window.navigator.userAgent);var VF=typeof global=="object"&&global&&global.Object===Object&&global;const HF=VF;var $F=typeof self=="object"&&self&&self.Object===Object&&self,jF=HF||$F||Function("return this")();const Ch=jF;var XF=Ch.Symbol;const lo=XF;var Wx=Object.prototype,zF=Wx.hasOwnProperty,WF=Wx.toString,zo=lo?lo.toStringTag:void 0;function YF(r){var e=zF.call(r,zo),t=r[zo];try{r[zo]=void 0;var i=!0}catch{}var n=WF.call(r);return i&&(e?r[zo]=t:delete r[zo]),n}var qF=Object.prototype,KF=qF.toString;function ZF(r){return KF.call(r)}var JF="[object Null]",QF="[object Undefined]",b_=lo?lo.toStringTag:void 0;function Yx(r){return r==null?r===void 0?QF:JF:b_&&b_ in Object(r)?YF(r):ZF(r)}function eL(r){return r!=null&&typeof r=="object"}var tL="[object Symbol]";function Mh(r){return typeof r=="symbol"||eL(r)&&Yx(r)==tL}function rL(r,e){for(var t=-1,i=r==null?0:r.length,n=Array(i);++t<i;)n[t]=e(r[t],t,r);return n}var iL=Array.isArray;const _m=iL;var nL=1/0,x_=lo?lo.prototype:void 0,T_=x_?x_.toString:void 0;function qx(r){if(typeof r=="string")return r;if(_m(r))return rL(r,qx)+"";if(Mh(r))return T_?T_.call(r):"";var e=r+"";return e=="0"&&1/r==-nL?"-0":e}var sL=/\s/;function oL(r){for(var e=r.length;e--&&sL.test(r.charAt(e)););return e}var aL=/^\s+/;function lL(r){return r&&r.slice(0,oL(r)+1).replace(aL,"")}function za(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var S_=0/0,uL=/^[-+]0x[0-9a-f]+$/i,hL=/^0b[01]+$/i,cL=/^0o[0-7]+$/i,fL=parseInt;function E_(r){if(typeof r=="number")return r;if(Mh(r))return S_;if(za(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=za(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=lL(r);var t=hL.test(r);return t||cL.test(r)?fL(r.slice(2),t?2:8):uL.test(r)?S_:+r}var dL="[object AsyncFunction]",pL="[object Function]",mL="[object GeneratorFunction]",vL="[object Proxy]";function gL(r){if(!za(r))return!1;var e=Yx(r);return e==pL||e==mL||e==dL||e==vL}var _L=Ch["__core-js_shared__"];const Bc=_L;var w_=function(){var r=/[^.]+$/.exec(Bc&&Bc.keys&&Bc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function yL(r){return!!w_&&w_ in r}var bL=Function.prototype,xL=bL.toString;function TL(r){if(r!=null){try{return xL.call(r)}catch{}try{return r+""}catch{}}return""}var SL=/[\\^$.*+?()[\]{}|]/g,EL=/^\[object .+?Constructor\]$/,wL=Function.prototype,PL=Object.prototype,CL=wL.toString,ML=PL.hasOwnProperty,IL=RegExp("^"+CL.call(ML).replace(SL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function AL(r){if(!za(r)||yL(r))return!1;var e=gL(r)?IL:EL;return e.test(TL(r))}function OL(r,e){return r==null?void 0:r[e]}function Kx(r,e){var t=OL(r,e);return AL(t)?t:void 0}function RL(r,e){return r===e||r!==r&&e!==e}var FL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LL=/^\w*$/;function DL(r,e){if(_m(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Mh(r)?!0:LL.test(r)||!FL.test(r)||e!=null&&r in Object(e)}var BL=Kx(Object,"create");const Wa=BL;function NL(){this.__data__=Wa?Wa(null):{},this.size=0}function kL(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var UL="__lodash_hash_undefined__",GL=Object.prototype,VL=GL.hasOwnProperty;function HL(r){var e=this.__data__;if(Wa){var t=e[r];return t===UL?void 0:t}return VL.call(e,r)?e[r]:void 0}var $L=Object.prototype,jL=$L.hasOwnProperty;function XL(r){var e=this.__data__;return Wa?e[r]!==void 0:jL.call(e,r)}var zL="__lodash_hash_undefined__";function WL(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Wa&&e===void 0?zL:e,this}function gs(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}gs.prototype.clear=NL;gs.prototype.delete=kL;gs.prototype.get=HL;gs.prototype.has=XL;gs.prototype.set=WL;function YL(){this.__data__=[],this.size=0}function Ih(r,e){for(var t=r.length;t--;)if(RL(r[t][0],e))return t;return-1}var qL=Array.prototype,KL=qL.splice;function ZL(r){var e=this.__data__,t=Ih(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():KL.call(e,t,1),--this.size,!0}function JL(r){var e=this.__data__,t=Ih(e,r);return t<0?void 0:e[t][1]}function QL(r){return Ih(this.__data__,r)>-1}function eD(r,e){var t=this.__data__,i=Ih(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}function Ao(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}Ao.prototype.clear=YL;Ao.prototype.delete=ZL;Ao.prototype.get=JL;Ao.prototype.has=QL;Ao.prototype.set=eD;var tD=Kx(Ch,"Map");const rD=tD;function iD(){this.size=0,this.__data__={hash:new gs,map:new(rD||Ao),string:new gs}}function nD(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ah(r,e){var t=r.__data__;return nD(e)?t[typeof e=="string"?"string":"hash"]:t.map}function sD(r){var e=Ah(this,r).delete(r);return this.size-=e?1:0,e}function oD(r){return Ah(this,r).get(r)}function aD(r){return Ah(this,r).has(r)}function lD(r,e){var t=Ah(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}function Ts(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}Ts.prototype.clear=iD;Ts.prototype.delete=sD;Ts.prototype.get=oD;Ts.prototype.has=aD;Ts.prototype.set=lD;var uD="Expected a function";function ym(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(uD);var t=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=t.cache;if(s.has(n))return s.get(n);var o=r.apply(this,i);return t.cache=s.set(n,o)||s,o};return t.cache=new(ym.Cache||Ts),t}ym.Cache=Ts;var hD=500;function cD(r){var e=ym(r,function(i){return t.size===hD&&t.clear(),i}),t=e.cache;return e}var fD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dD=/\\(\\)?/g,pD=cD(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(fD,function(t,i,n,s){e.push(n?s.replace(dD,"$1"):i||t)}),e});const mD=pD;function vD(r){return r==null?"":qx(r)}function gD(r,e){return _m(r)?r:DL(r,e)?[r]:mD(vD(r))}var _D=1/0;function yD(r){if(typeof r=="string"||Mh(r))return r;var e=r+"";return e=="0"&&1/r==-_D?"-0":e}function bD(r,e){e=gD(e,r);for(var t=0,i=e.length;r!=null&&t<i;)r=r[yD(e[t++])];return t&&t==i?r:void 0}function xD(r,e,t){var i=r==null?void 0:bD(r,e);return i===void 0?t:i}var TD=function(){return Ch.Date.now()};const Nc=TD;var SD="Expected a function",ED=Math.max,wD=Math.min;function P_(r,e,t){var i,n,s,o,a,l,u=0,h=!1,c=!1,f=!0;if(typeof r!="function")throw new TypeError(SD);e=E_(e)||0,za(t)&&(h=!!t.leading,c="maxWait"in t,s=c?ED(E_(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(S){var E=i,C=n;return i=n=void 0,u=S,o=r.apply(C,E),o}function p(S){return u=S,a=setTimeout(g,e),h?d(S):o}function m(S){var E=S-l,C=S-u,M=e-E;return c?wD(M,s-C):M}function v(S){var E=S-l,C=S-u;return l===void 0||E>=e||E<0||c&&C>=s}function g(){var S=Nc();if(v(S))return _(S);a=setTimeout(g,m(S))}function _(S){return a=void 0,f&&i?d(S):(i=n=void 0,o)}function y(){a!==void 0&&clearTimeout(a),u=0,i=l=n=a=void 0}function b(){return a===void 0?o:_(Nc())}function T(){var S=Nc(),E=v(S);if(i=arguments,n=this,l=S,E){if(a===void 0)return p(l);if(c)return clearTimeout(a),a=setTimeout(g,e),d(l)}return a===void 0&&(a=setTimeout(g,e)),o}return T.cancel=y,T.flush=b,T}function $u(r){for(var e=-1,t=r==null?0:r.length,i={};++e<t;){var n=r[e];i[n[0]]=n[1]}return i}function Bi(r){return r==null}function PD(r){return r===void 0}const ua=r=>r===void 0,bm=r=>typeof r=="boolean",vt=r=>typeof r=="number",Ya=r=>typeof Element>"u"?!1:r instanceof Element,CD=r=>Ge(r)?!Number.isNaN(Number(r)):!1,C_=r=>Object.keys(r);class MD extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function xm(r,e){throw new MD(`[${r}] ${e}`)}const Zx=(r="")=>r.split(" ").filter(e=>!!e.trim()),M_=(r,e)=>{if(!r||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return r.classList.contains(e)},ID=(r,e)=>{!r||!e.trim()||r.classList.add(...Zx(e))},AD=(r,e)=>{!r||!e.trim()||r.classList.remove(...Zx(e))},OD=(r,e)=>{var t;if(!At||!r||!e)return"";let i=Wr(e);i==="float"&&(i="cssFloat");try{const n=r.style[i];if(n)return n;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(r,"");return s?s[i]:""}catch{return r.style[i]}};function Tm(r,e="px"){if(!r)return"";if(vt(r)||CD(r))return`${r}${e}`;if(Ge(r))return r}let $l;const RD=r=>{var e;if(!At)return 0;if($l!==void 0)return $l;const t=document.createElement("div");t.className=`${r}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const s=n.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),$l=i-s,$l};/*! Element Plus Icons Vue v2.1.0 */var tr=(r,e)=>{let t=r.__vccOpts||r;for(let[i,n]of e)t[i]=n;return t},FD={name:"ArrowDown"},LD={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},DD=ye("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),BD=[DD];function ND(r,e,t,i,n,s){return K(),ue("svg",LD,BD)}var kD=tr(FD,[["render",ND],["__file","arrow-down.vue"]]),UD={name:"ArrowUp"},GD={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},VD=ye("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),HD=[VD];function $D(r,e,t,i,n,s){return K(),ue("svg",GD,HD)}var jD=tr(UD,[["render",$D],["__file","arrow-up.vue"]]),XD={name:"CircleCheck"},zD={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},WD=ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),YD=ye("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),qD=[WD,YD];function KD(r,e,t,i,n,s){return K(),ue("svg",zD,qD)}var ZD=tr(XD,[["render",KD],["__file","circle-check.vue"]]),JD={name:"CircleCloseFilled"},QD={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},eB=ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),tB=[eB];function rB(r,e,t,i,n,s){return K(),ue("svg",QD,tB)}var Jx=tr(JD,[["render",rB],["__file","circle-close-filled.vue"]]),iB={name:"CircleClose"},nB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},sB=ye("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),oB=ye("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),aB=[sB,oB];function lB(r,e,t,i,n,s){return K(),ue("svg",nB,aB)}var Qx=tr(iB,[["render",lB],["__file","circle-close.vue"]]),uB={name:"Close"},hB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},cB=ye("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),fB=[cB];function dB(r,e,t,i,n,s){return K(),ue("svg",hB,fB)}var e1=tr(uB,[["render",dB],["__file","close.vue"]]),pB={name:"Hide"},mB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},vB=ye("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),gB=ye("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),_B=[vB,gB];function yB(r,e,t,i,n,s){return K(),ue("svg",mB,_B)}var bB=tr(pB,[["render",yB],["__file","hide.vue"]]),xB={name:"InfoFilled"},TB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},SB=ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),EB=[SB];function wB(r,e,t,i,n,s){return K(),ue("svg",TB,EB)}var t1=tr(xB,[["render",wB],["__file","info-filled.vue"]]),PB={name:"Loading"},CB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},MB=ye("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),IB=[MB];function AB(r,e,t,i,n,s){return K(),ue("svg",CB,IB)}var r1=tr(PB,[["render",AB],["__file","loading.vue"]]),OB={name:"Minus"},RB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},FB=ye("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),LB=[FB];function DB(r,e,t,i,n,s){return K(),ue("svg",RB,LB)}var BB=tr(OB,[["render",DB],["__file","minus.vue"]]),NB={name:"Plus"},kB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},UB=ye("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),GB=[UB];function VB(r,e,t,i,n,s){return K(),ue("svg",kB,GB)}var HB=tr(NB,[["render",VB],["__file","plus.vue"]]),$B={name:"SuccessFilled"},jB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},XB=ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),zB=[XB];function WB(r,e,t,i,n,s){return K(),ue("svg",jB,zB)}var i1=tr($B,[["render",WB],["__file","success-filled.vue"]]),YB={name:"View"},qB={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},KB=ye("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),ZB=[KB];function JB(r,e,t,i,n,s){return K(),ue("svg",qB,ZB)}var QB=tr(YB,[["render",JB],["__file","view.vue"]]),eN={name:"WarningFilled"},tN={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},rN=ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),iN=[rN];function nN(r,e,t,i,n,s){return K(),ue("svg",tN,iN)}var n1=tr(eN,[["render",nN],["__file","warning-filled.vue"]]);const s1="__epPropKey",Ie=r=>r,sN=r=>He(r)&&!!r[s1],Oh=(r,e)=>{if(!He(r)||sN(r))return r;const{values:t,required:i,default:n,type:s,validator:o}=r,l={type:s,required:!!i,validator:t||o?u=>{let h=!1,c=[];if(t&&(c=Array.from(t),Le(r,"default")&&c.push(n),h||(h=c.includes(u))),o&&(h||(h=o(u))),!h&&c.length>0){const f=[...new Set(c)].map(d=>JSON.stringify(d)).join(", ");FE(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`)}return h}:void 0,[s1]:!0};return Le(r,"default")&&(l.default=n),l},pt=r=>$u(Object.entries(r).map(([e,t])=>[e,Oh(t,e)])),uo=Ie([String,Object,Function]),oN={Close:e1,SuccessFilled:i1,InfoFilled:t1,WarningFilled:n1,CircleCloseFilled:Jx},I_={success:i1,warning:n1,error:Jx,info:t1},aN={validating:r1,success:ZD,error:Qx},$i=(r,e)=>{if(r.install=t=>{for(const i of[r,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))r[t]=i;return r},lN=(r,e)=>(r.install=t=>{r._context=t._context,t.config.globalProperties[e]=r},r),uN=r=>(r.install=St,r),ho={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},jt="update:modelValue",Rh="change",fs="input",hN=["","default","small","large"];var gu=(r=>(r[r.TEXT=1]="TEXT",r[r.CLASS=2]="CLASS",r[r.STYLE=4]="STYLE",r[r.PROPS=8]="PROPS",r[r.FULL_PROPS=16]="FULL_PROPS",r[r.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",r[r.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",r[r.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",r[r.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",r[r.NEED_PATCH=512]="NEED_PATCH",r[r.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",r[r.HOISTED=-1]="HOISTED",r[r.BAIL=-2]="BAIL",r))(gu||{});const cN=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),o1=r=>r,fN=["class","style"],dN=/^on[A-Z]/,pN=(r={})=>{const{excludeListeners:e=!1,excludeKeys:t}=r,i=k(()=>((t==null?void 0:t.value)||[]).concat(fN)),n=qr();return k(n?()=>{var s;return $u(Object.entries((s=n.proxy)==null?void 0:s.$attrs).filter(([o])=>!i.value.includes(o)&&!(e&&dN.test(o))))}:()=>({}))},sd=({from:r,replacement:e,scope:t,version:i,ref:n,type:s="API"},o)=>{Ee(()=>x(o),a=>{},{immediate:!0})};var mN={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const vN=r=>(e,t)=>gN(e,t,x(r)),gN=(r,e,t)=>xD(t,r,r).replace(/\{(\w+)\}/g,(i,n)=>{var s;return`${(s=e==null?void 0:e[n])!=null?s:`{${n}}`}`}),_N=r=>{const e=k(()=>x(r).name),t=_t(r)?r:oe(r);return{lang:e,locale:t,t:vN(r)}},a1=Symbol("localeContextKey"),Fh=r=>{const e=r||rt(a1,oe());return _N(k(()=>e.value||mN))},ju="el",yN="is-",Rn=(r,e,t,i,n)=>{let s=`${r}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),n&&(s+=`--${n}`),s},l1=Symbol("namespaceContextKey"),Sm=r=>{const e=r||rt(l1,oe(ju));return k(()=>x(e)||ju)},bt=(r,e)=>{const t=Sm(e);return{namespace:t,b:(m="")=>Rn(t.value,r,m,"",""),e:m=>m?Rn(t.value,r,"",m,""):"",m:m=>m?Rn(t.value,r,"","",m):"",be:(m,v)=>m&&v?Rn(t.value,r,m,v,""):"",em:(m,v)=>m&&v?Rn(t.value,r,"",m,v):"",bm:(m,v)=>m&&v?Rn(t.value,r,m,"",v):"",bem:(m,v,g)=>m&&v&&g?Rn(t.value,r,m,v,g):"",is:(m,...v)=>{const g=v.length>=1?v[0]:!0;return m&&g?`${yN}${m}`:""},cssVar:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${g}`]=m[g]);return v},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${r}-${g}`]=m[g]);return v},cssVarBlockName:m=>`--${t.value}-${r}-${m}`}},bN=(r,e={})=>{_t(r)||xm("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||bt("popup"),i=M0(()=>t.bm("parent","hidden"));if(!At||M_(document.body,i.value))return;let n=0,s=!1,o="0";const a=()=>{setTimeout(()=>{AD(document==null?void 0:document.body,i.value),s&&document&&(document.body.style.width=o)},200)};Ee(r,l=>{if(!l){a();return}s=!M_(document.body,i.value),s&&(o=document.body.style.width),n=RD(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,h=OD(document.body,"overflowY");n>0&&(u||h==="scroll")&&s&&(document.body.style.width=`calc(100% - ${n}px)`),ID(document.body,i.value)}),u0(()=>a())},xN=Oh({type:Ie(Boolean),default:null}),TN=Oh({type:Ie(Function)}),u1=r=>{const e=`update:${r}`,t=`onUpdate:${r}`,i=[e],n={[r]:xN,[t]:TN};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:h,onHide:c})=>{const f=qr(),{emit:d}=f,p=f.props,m=k(()=>de(p[t])),v=k(()=>p[r]===null),g=E=>{o.value!==!0&&(o.value=!0,a&&(a.value=E),de(h)&&h(E))},_=E=>{o.value!==!1&&(o.value=!1,a&&(a.value=E),de(c)&&c(E))},y=E=>{if(p.disabled===!0||de(u)&&!u())return;const C=m.value&&At;C&&d(e,!0),(v.value||!C)&&g(E)},b=E=>{if(p.disabled===!0||!At)return;const C=m.value&&At;C&&d(e,!1),(v.value||!C)&&_(E)},T=E=>{bm(E)&&(p.disabled&&E?m.value&&d(e,!1):o.value!==E&&(E?g():_()))},S=()=>{o.value?b():y()};return Ee(()=>p[r],T),l&&f.appContext.config.globalProperties.$route!==void 0&&Ee(()=>({...f.proxy.$route}),()=>{l.value&&o.value&&b()}),Ot(()=>{T(p[r])}),{hide:b,show:y,toggle:S,hasUpdateHandler:m}},useModelToggleProps:n,useModelToggleEmits:i}};u1("modelValue");const h1=r=>{const e=qr();return k(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[r]})};var Jt="top",Ir="bottom",Ar="right",Qt="left",Em="auto",cl=[Jt,Ir,Ar,Qt],co="start",qa="end",SN="clippingParents",c1="viewport",Wo="popper",EN="reference",A_=cl.reduce(function(r,e){return r.concat([e+"-"+co,e+"-"+qa])},[]),fl=[].concat(cl,[Em]).reduce(function(r,e){return r.concat([e,e+"-"+co,e+"-"+qa])},[]),wN="beforeRead",PN="read",CN="afterRead",MN="beforeMain",IN="main",AN="afterMain",ON="beforeWrite",RN="write",FN="afterWrite",LN=[wN,PN,CN,MN,IN,AN,ON,RN,FN];function bi(r){return r?(r.nodeName||"").toLowerCase():null}function Kr(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function fo(r){var e=Kr(r).Element;return r instanceof e||r instanceof Element}function wr(r){var e=Kr(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function wm(r){if(typeof ShadowRoot>"u")return!1;var e=Kr(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function DN(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];!wr(s)||!bi(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function BN(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!wr(n)||!bi(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var f1={name:"applyStyles",enabled:!0,phase:"write",fn:DN,effect:BN,requires:["computeStyles"]};function mi(r){return r.split("-")[0]}var ds=Math.max,Xu=Math.min,po=Math.round;function mo(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),i=1,n=1;if(wr(r)&&e){var s=r.offsetHeight,o=r.offsetWidth;o>0&&(i=po(t.width)/o||1),s>0&&(n=po(t.height)/s||1)}return{width:t.width/i,height:t.height/n,top:t.top/n,right:t.right/i,bottom:t.bottom/n,left:t.left/i,x:t.left/i,y:t.top/n}}function Pm(r){var e=mo(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function d1(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&wm(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Gi(r){return Kr(r).getComputedStyle(r)}function NN(r){return["table","td","th"].indexOf(bi(r))>=0}function Sn(r){return((fo(r)?r.ownerDocument:r.document)||window.document).documentElement}function Lh(r){return bi(r)==="html"?r:r.assignedSlot||r.parentNode||(wm(r)?r.host:null)||Sn(r)}function O_(r){return!wr(r)||Gi(r).position==="fixed"?null:r.offsetParent}function kN(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&wr(r)){var i=Gi(r);if(i.position==="fixed")return null}var n=Lh(r);for(wm(n)&&(n=n.host);wr(n)&&["html","body"].indexOf(bi(n))<0;){var s=Gi(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function dl(r){for(var e=Kr(r),t=O_(r);t&&NN(t)&&Gi(t).position==="static";)t=O_(t);return t&&(bi(t)==="html"||bi(t)==="body"&&Gi(t).position==="static")?e:t||kN(r)||e}function Cm(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function wa(r,e,t){return ds(r,Xu(e,t))}function UN(r,e,t){var i=wa(r,e,t);return i>t?t:i}function p1(){return{top:0,right:0,bottom:0,left:0}}function m1(r){return Object.assign({},p1(),r)}function v1(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var GN=function(r,e){return r=typeof r=="function"?r(Object.assign({},e.rects,{placement:e.placement})):r,m1(typeof r!="number"?r:v1(r,cl))};function VN(r){var e,t=r.state,i=r.name,n=r.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=mi(t.placement),l=Cm(a),u=[Qt,Ar].indexOf(a)>=0,h=u?"height":"width";if(!(!s||!o)){var c=GN(n.padding,t),f=Pm(s),d=l==="y"?Jt:Qt,p=l==="y"?Ir:Ar,m=t.rects.reference[h]+t.rects.reference[l]-o[l]-t.rects.popper[h],v=o[l]-t.rects.reference[l],g=dl(s),_=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,y=m/2-v/2,b=c[d],T=_-f[h]-c[p],S=_/2-f[h]/2+y,E=wa(b,S,T),C=l;t.modifiersData[i]=(e={},e[C]=E,e.centerOffset=E-S,e)}}function HN(r){var e=r.state,t=r.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||!d1(e.elements.popper,n)||(e.elements.arrow=n))}var $N={name:"arrow",enabled:!0,phase:"main",fn:VN,effect:HN,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vo(r){return r.split("-")[1]}var jN={top:"auto",right:"auto",bottom:"auto",left:"auto"};function XN(r){var e=r.x,t=r.y,i=window,n=i.devicePixelRatio||1;return{x:po(e*n)/n||0,y:po(t*n)/n||0}}function R_(r){var e,t=r.popper,i=r.popperRect,n=r.placement,s=r.variation,o=r.offsets,a=r.position,l=r.gpuAcceleration,u=r.adaptive,h=r.roundOffsets,c=r.isFixed,f=o.x,d=f===void 0?0:f,p=o.y,m=p===void 0?0:p,v=typeof h=="function"?h({x:d,y:m}):{x:d,y:m};d=v.x,m=v.y;var g=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),y=Qt,b=Jt,T=window;if(u){var S=dl(t),E="clientHeight",C="clientWidth";if(S===Kr(t)&&(S=Sn(t),Gi(S).position!=="static"&&a==="absolute"&&(E="scrollHeight",C="scrollWidth")),S=S,n===Jt||(n===Qt||n===Ar)&&s===qa){b=Ir;var M=c&&S===T&&T.visualViewport?T.visualViewport.height:S[E];m-=M-i.height,m*=l?1:-1}if(n===Qt||(n===Jt||n===Ir)&&s===qa){y=Ar;var A=c&&S===T&&T.visualViewport?T.visualViewport.width:S[C];d-=A-i.width,d*=l?1:-1}}var F=Object.assign({position:a},u&&jN),O=h===!0?XN({x:d,y:m}):{x:d,y:m};if(d=O.x,m=O.y,l){var I;return Object.assign({},F,(I={},I[b]=_?"0":"",I[y]=g?"0":"",I.transform=(T.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",I))}return Object.assign({},F,(e={},e[b]=_?m+"px":"",e[y]=g?d+"px":"",e.transform="",e))}function zN(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,u={placement:mi(e.placement),variation:vo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,R_(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,R_(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var g1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zN,data:{}},jl={passive:!0};function WN(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=Kr(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(h){h.addEventListener("scroll",t.update,jl)}),a&&l.addEventListener("resize",t.update,jl),function(){s&&u.forEach(function(h){h.removeEventListener("scroll",t.update,jl)}),a&&l.removeEventListener("resize",t.update,jl)}}var _1={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WN,data:{}},YN={left:"right",right:"left",bottom:"top",top:"bottom"};function _u(r){return r.replace(/left|right|bottom|top/g,function(e){return YN[e]})}var qN={start:"end",end:"start"};function F_(r){return r.replace(/start|end/g,function(e){return qN[e]})}function Mm(r){var e=Kr(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function Im(r){return mo(Sn(r)).left+Mm(r).scrollLeft}function KN(r){var e=Kr(r),t=Sn(r),i=e.visualViewport,n=t.clientWidth,s=t.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+Im(r),y:a}}function ZN(r){var e,t=Sn(r),i=Mm(r),n=(e=r.ownerDocument)==null?void 0:e.body,s=ds(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=ds(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+Im(r),l=-i.scrollTop;return Gi(n||t).direction==="rtl"&&(a+=ds(t.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Am(r){var e=Gi(r),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function y1(r){return["html","body","#document"].indexOf(bi(r))>=0?r.ownerDocument.body:wr(r)&&Am(r)?r:y1(Lh(r))}function Pa(r,e){var t;e===void 0&&(e=[]);var i=y1(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=Kr(i),o=n?[s].concat(s.visualViewport||[],Am(i)?i:[]):i,a=e.concat(o);return n?a:a.concat(Pa(Lh(o)))}function od(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function JN(r){var e=mo(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function L_(r,e){return e===c1?od(KN(r)):fo(e)?JN(e):od(ZN(Sn(r)))}function QN(r){var e=Pa(Lh(r)),t=["absolute","fixed"].indexOf(Gi(r).position)>=0,i=t&&wr(r)?dl(r):r;return fo(i)?e.filter(function(n){return fo(n)&&d1(n,i)&&bi(n)!=="body"}):[]}function e3(r,e,t){var i=e==="clippingParents"?QN(r):[].concat(e),n=[].concat(i,[t]),s=n[0],o=n.reduce(function(a,l){var u=L_(r,l);return a.top=ds(u.top,a.top),a.right=Xu(u.right,a.right),a.bottom=Xu(u.bottom,a.bottom),a.left=ds(u.left,a.left),a},L_(r,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function b1(r){var e=r.reference,t=r.element,i=r.placement,n=i?mi(i):null,s=i?vo(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(n){case Jt:l={x:o,y:e.y-t.height};break;case Ir:l={x:o,y:e.y+e.height};break;case Ar:l={x:e.x+e.width,y:a};break;case Qt:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=n?Cm(n):null;if(u!=null){var h=u==="y"?"height":"width";switch(s){case co:l[u]=l[u]-(e[h]/2-t[h]/2);break;case qa:l[u]=l[u]+(e[h]/2-t[h]/2);break}}return l}function Ka(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?r.placement:i,s=t.boundary,o=s===void 0?SN:s,a=t.rootBoundary,l=a===void 0?c1:a,u=t.elementContext,h=u===void 0?Wo:u,c=t.altBoundary,f=c===void 0?!1:c,d=t.padding,p=d===void 0?0:d,m=m1(typeof p!="number"?p:v1(p,cl)),v=h===Wo?EN:Wo,g=r.rects.popper,_=r.elements[f?v:h],y=e3(fo(_)?_:_.contextElement||Sn(r.elements.popper),o,l),b=mo(r.elements.reference),T=b1({reference:b,element:g,strategy:"absolute",placement:n}),S=od(Object.assign({},g,T)),E=h===Wo?S:b,C={top:y.top-E.top+m.top,bottom:E.bottom-y.bottom+m.bottom,left:y.left-E.left+m.left,right:E.right-y.right+m.right},M=r.modifiersData.offset;if(h===Wo&&M){var A=M[n];Object.keys(C).forEach(function(F){var O=[Ar,Ir].indexOf(F)>=0?1:-1,I=[Jt,Ir].indexOf(F)>=0?"y":"x";C[F]+=A[I]*O})}return C}function t3(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?fl:l,h=vo(i),c=h?a?A_:A_.filter(function(p){return vo(p)===h}):cl,f=c.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=c);var d=f.reduce(function(p,m){return p[m]=Ka(r,{placement:m,boundary:n,rootBoundary:s,padding:o})[mi(m)],p},{});return Object.keys(d).sort(function(p,m){return d[p]-d[m]})}function r3(r){if(mi(r)===Em)return[];var e=_u(r);return[F_(r),e,F_(e)]}function i3(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,h=t.boundary,c=t.rootBoundary,f=t.altBoundary,d=t.flipVariations,p=d===void 0?!0:d,m=t.allowedAutoPlacements,v=e.options.placement,g=mi(v),_=g===v,y=l||(_||!p?[_u(v)]:r3(v)),b=[v].concat(y).reduce(function(he,xe){return he.concat(mi(xe)===Em?t3(e,{placement:xe,boundary:h,rootBoundary:c,padding:u,flipVariations:p,allowedAutoPlacements:m}):xe)},[]),T=e.rects.reference,S=e.rects.popper,E=new Map,C=!0,M=b[0],A=0;A<b.length;A++){var F=b[A],O=mi(F),I=vo(F)===co,D=[Jt,Ir].indexOf(O)>=0,N=D?"width":"height",B=Ka(e,{placement:F,boundary:h,rootBoundary:c,altBoundary:f,padding:u}),L=D?I?Ar:Qt:I?Ir:Jt;T[N]>S[N]&&(L=_u(L));var Q=_u(L),ee=[];if(s&&ee.push(B[O]<=0),a&&ee.push(B[L]<=0,B[Q]<=0),ee.every(function(he){return he})){M=F,C=!1;break}E.set(F,ee)}if(C)for(var X=p?3:1,G=function(he){var xe=b.find(function(te){var ge=E.get(te);if(ge)return ge.slice(0,he).every(function(Ce){return Ce})});if(xe)return M=xe,"break"},W=X;W>0;W--){var se=G(W);if(se==="break")break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}}var n3={name:"flip",enabled:!0,phase:"main",fn:i3,requiresIfExists:["offset"],data:{_skip:!1}};function D_(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function B_(r){return[Jt,Ar,Ir,Qt].some(function(e){return r[e]>=0})}function s3(r){var e=r.state,t=r.name,i=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,o=Ka(e,{elementContext:"reference"}),a=Ka(e,{altBoundary:!0}),l=D_(o,i),u=D_(a,n,s),h=B_(l),c=B_(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}var o3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:s3};function a3(r,e,t){var i=mi(r),n=[Qt,Jt].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Qt,Ar].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function l3(r){var e=r.state,t=r.options,i=r.name,n=t.offset,s=n===void 0?[0,0]:n,o=fl.reduce(function(h,c){return h[c]=a3(c,e.rects,s),h},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}var u3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:l3};function h3(r){var e=r.state,t=r.name;e.modifiersData[t]=b1({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var x1={name:"popperOffsets",enabled:!0,phase:"read",fn:h3,data:{}};function c3(r){return r==="x"?"y":"x"}function f3(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,h=t.altBoundary,c=t.padding,f=t.tether,d=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,v=Ka(e,{boundary:l,rootBoundary:u,padding:c,altBoundary:h}),g=mi(e.placement),_=vo(e.placement),y=!_,b=Cm(g),T=c3(b),S=e.modifiersData.popperOffsets,E=e.rects.reference,C=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,A=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(S){if(s){var I,D=b==="y"?Jt:Qt,N=b==="y"?Ir:Ar,B=b==="y"?"height":"width",L=S[b],Q=L+v[D],ee=L-v[N],X=d?-C[B]/2:0,G=_===co?E[B]:C[B],W=_===co?-C[B]:-E[B],se=e.elements.arrow,he=d&&se?Pm(se):{width:0,height:0},xe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:p1(),te=xe[D],ge=xe[N],Ce=wa(0,E[B],he[B]),$e=y?E[B]/2-X-Ce-te-A.mainAxis:G-Ce-te-A.mainAxis,Te=y?-E[B]/2+X+Ce+ge+A.mainAxis:W+Ce+ge+A.mainAxis,_e=e.elements.arrow&&dl(e.elements.arrow),w=_e?b==="y"?_e.clientTop||0:_e.clientLeft||0:0,P=(I=F==null?void 0:F[b])!=null?I:0,R=L+$e-P-w,H=L+Te-P,V=wa(d?Xu(Q,R):Q,L,d?ds(ee,H):ee);S[b]=V,O[b]=V-L}if(a){var $,Z=b==="x"?Jt:Qt,Y=b==="x"?Ir:Ar,q=S[T],z=T==="y"?"height":"width",le=q+v[Z],ne=q-v[Y],ae=[Jt,Qt].indexOf(g)!==-1,U=($=F==null?void 0:F[T])!=null?$:0,re=ae?le:q-E[z]-C[z]-U+A.altAxis,be=ae?q+E[z]+C[z]-U-A.altAxis:ne,Re=d&&ae?UN(re,q,be):wa(d?re:le,q,d?be:ne);S[T]=Re,O[T]=Re-q}e.modifiersData[i]=O}}var d3={name:"preventOverflow",enabled:!0,phase:"main",fn:f3,requiresIfExists:["offset"]};function p3(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function m3(r){return r===Kr(r)||!wr(r)?Mm(r):p3(r)}function v3(r){var e=r.getBoundingClientRect(),t=po(e.width)/r.offsetWidth||1,i=po(e.height)/r.offsetHeight||1;return t!==1||i!==1}function g3(r,e,t){t===void 0&&(t=!1);var i=wr(e),n=wr(e)&&v3(e),s=Sn(e),o=mo(r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((bi(e)!=="body"||Am(s))&&(a=m3(e)),wr(e)?(l=mo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Im(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function _3(r){var e=new Map,t=new Set,i=[];r.forEach(function(s){e.set(s.name,s)});function n(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&n(l)}}),i.push(s)}return r.forEach(function(s){t.has(s.name)||n(s)}),i}function y3(r){var e=_3(r);return LN.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function b3(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function x3(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var N_={placement:"bottom",modifiers:[],strategy:"absolute"};function k_(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Om(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,s=n===void 0?N_:n;return function(o,a,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},N_,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},h=[],c=!1,f={state:u,setOptions:function(m){var v=typeof m=="function"?m(u.options):m;p(),u.options=Object.assign({},s,u.options,v),u.scrollParents={reference:fo(o)?Pa(o):o.contextElement?Pa(o.contextElement):[],popper:Pa(a)};var g=y3(x3([].concat(i,u.options.modifiers)));return u.orderedModifiers=g.filter(function(_){return _.enabled}),d(),f.update()},forceUpdate:function(){if(!c){var m=u.elements,v=m.reference,g=m.popper;if(k_(v,g)){u.rects={reference:g3(v,dl(g),u.options.strategy==="fixed"),popper:Pm(g)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var y=u.orderedModifiers[_],b=y.fn,T=y.options,S=T===void 0?{}:T,E=y.name;typeof b=="function"&&(u=b({state:u,options:S,name:E,instance:f})||u)}}}},update:b3(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){p(),c=!0}};if(!k_(o,a))return f;f.setOptions(l).then(function(m){!c&&l.onFirstUpdate&&l.onFirstUpdate(m)});function d(){u.orderedModifiers.forEach(function(m){var v=m.name,g=m.options,_=g===void 0?{}:g,y=m.effect;if(typeof y=="function"){var b=y({state:u,name:v,instance:f,options:_}),T=function(){};h.push(b||T)}})}function p(){h.forEach(function(m){return m()}),h=[]}return f}}Om();var T3=[_1,x1,g1,f1];Om({defaultModifiers:T3});var S3=[_1,x1,g1,f1,u3,n3,d3,$N,o3],E3=Om({defaultModifiers:S3});const w3=(r,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=P3(l);Object.assign(o.value,u)},requires:["computeStyles"]},n=k(()=>{const{onFirstUpdate:l,placement:u,strategy:h,modifiers:c}=x(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:h||"absolute",modifiers:[...c||[],i,{name:"applyStyles",enabled:!1}]}}),s=Ys(),o=oe({styles:{popper:{position:x(n).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Ee(n,l=>{const u=x(s);u&&u.setOptions(l)},{deep:!0}),Ee([r,e],([l,u])=>{a(),!(!l||!u)&&(s.value=E3(l,u,x(n)))}),Yr(()=>{a()}),{state:k(()=>{var l;return{...((l=x(s))==null?void 0:l.state)||{}}}),styles:k(()=>x(o).styles),attributes:k(()=>x(o).attributes),update:()=>{var l;return(l=x(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=x(s))==null?void 0:l.forceUpdate()},instanceRef:k(()=>x(s))}};function P3(r){const e=Object.keys(r.elements),t=$u(e.map(n=>[n,r.styles[n]||{}])),i=$u(e.map(n=>[n,r.attributes[n]]));return{styles:t,attributes:i}}const C3=r=>{if(!r)return{onClick:St,onMousedown:St,onMouseup:St};let e=!1,t=!1;return{onClick:o=>{e&&t&&r(o),e=t=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{t=o.target===o.currentTarget}}};function U_(){let r;const e=(i,n)=>{t(),r=window.setTimeout(i,n)},t=()=>window.clearTimeout(r);return Ph(()=>t()),{registerTimeout:e,cancelTimeout:t}}const G_={prefix:Math.floor(Math.random()*1e4),current:0},M3=Symbol("elIdInjection"),T1=()=>qr()?rt(M3,G_):G_,zu=r=>{const e=T1(),t=Sm();return k(()=>x(r)||`${t.value}-id-${e.prefix}-${e.current++}`)};let Vs=[];const V_=r=>{const e=r;e.key===ho.esc&&Vs.forEach(t=>t(e))},I3=r=>{Ot(()=>{Vs.length===0&&document.addEventListener("keydown",V_),At&&Vs.push(r)}),Yr(()=>{Vs=Vs.filter(e=>e!==r),Vs.length===0&&At&&document.removeEventListener("keydown",V_)})};let H_;const S1=()=>{const r=Sm(),e=T1(),t=k(()=>`${r.value}-popper-container-${e.prefix}`),i=k(()=>`#${t.value}`);return{id:t,selector:i}},A3=r=>{const e=document.createElement("div");return e.id=r,document.body.appendChild(e),e},O3=()=>{const{id:r,selector:e}=S1();return hp(()=>{At&&!H_&&!document.body.querySelector(e.value)&&(H_=A3(r.value))}),{id:r,selector:e}},R3=pt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),F3=({showAfter:r,hideAfter:e,autoClose:t,open:i,close:n})=>{const{registerTimeout:s}=U_(),{registerTimeout:o,cancelTimeout:a}=U_();return{onOpen:h=>{s(()=>{i(h);const c=x(t);vt(c)&&c>0&&o(()=>{n(h)},c)},x(r))},onClose:h=>{a(),s(()=>{n(h)},x(e))}}},E1=Symbol("elForwardRef"),L3=r=>{vi(E1,{setForwardRef:t=>{r.value=t}})},D3=r=>({mounted(e){r(e)},updated(e){r(e)},unmounted(){r(null)}}),$_=oe(0),w1=2e3,P1=Symbol("zIndexContextKey"),Rm=r=>{const e=r||rt(P1,void 0),t=k(()=>{const s=x(e);return vt(s)?s:w1}),i=k(()=>t.value+$_.value);return{initialZIndex:t,currentZIndex:i,nextZIndex:()=>($_.value++,i.value)}};function B3(r){const e=oe();function t(){if(r.value==null)return;const{selectionStart:n,selectionEnd:s,value:o}=r.value;if(n==null||s==null)return;const a=o.slice(0,Math.max(0,n)),l=o.slice(Math.max(0,s));e.value={selectionStart:n,selectionEnd:s,value:o,beforeTxt:a,afterTxt:l}}function i(){if(r.value==null||e.value==null)return;const{value:n}=r.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e.value;if(s==null||o==null||a==null)return;let l=n.length;if(n.endsWith(o))l=n.length-o.length;else if(n.startsWith(s))l=s.length;else{const u=s[a-1],h=n.indexOf(u,a-1);h!==-1&&(l=h+1)}r.value.setSelectionRange(l,l)}return[t,i]}const Za=Oh({type:String,values:hN,required:!1}),C1=Symbol("size"),N3=()=>{const r=rt(C1,{});return k(()=>x(r.size)||"")};function k3(r,{afterFocus:e,afterBlur:t}={}){const i=qr(),{emit:n}=i,s=Ys(),o=oe(!1),a=h=>{o.value||(o.value=!0,n("focus",h),e==null||e())},l=h=>{var c;h.relatedTarget&&((c=s.value)!=null&&c.contains(h.relatedTarget))||(o.value=!1,n("blur",h),t==null||t())},u=()=>{var h;(h=r.value)==null||h.focus()};return Ee(s,h=>{h&&(h.setAttribute("role","button"),h.setAttribute("tabindex","-1"))}),Js(s,"click",u),{wrapperRef:s,isFocused:o,handleFocus:a,handleBlur:l}}const M1=Symbol(),Wu=oe();function Dh(r,e=void 0){const t=qr()?rt(M1,Wu):Wu;return r?k(()=>{var i,n;return(n=(i=t.value)==null?void 0:i[r])!=null?n:e}):t}function U3(r,e){const t=Dh(),i=bt(r,k(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||ju})),n=Fh(k(()=>{var a;return(a=t.value)==null?void 0:a.locale})),s=Rm(k(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||w1})),o=k(()=>{var a;return x(e)||((a=t.value)==null?void 0:a.size)||""});return G3(k(()=>x(t)||{})),{ns:i,locale:n,zIndex:s,size:o}}const G3=(r,e,t=!1)=>{var i;const n=!!qr(),s=n?Dh():void 0,o=(i=e==null?void 0:e.provide)!=null?i:n?vi:void 0;if(!o)return;const a=k(()=>{const l=x(r);return s!=null&&s.value?V3(s.value,l):l});return o(M1,a),o(a1,k(()=>a.value.locale)),o(l1,k(()=>a.value.namespace)),o(P1,k(()=>a.value.zIndex)),o(C1,{size:k(()=>a.value.size||"")}),(t||!Wu.value)&&(Wu.value=a.value),a},V3=(r,e)=>{var t;const i=[...new Set([...C_(r),...C_(e)])],n={};for(const s of i)n[s]=(t=e[s])!=null?t:r[s];return n},j_={};var Rt=(r,e)=>{const t=r.__vccOpts||r;for(const[i,n]of e)t[i]=n;return t};const H3=pt({size:{type:Ie([Number,String])},color:{type:String}}),$3=Oe({name:"ElIcon",inheritAttrs:!1}),j3=Oe({...$3,props:H3,setup(r){const e=r,t=bt("icon"),i=k(()=>{const{size:n,color:s}=e;return!n&&!s?{}:{fontSize:ua(n)?void 0:Tm(n),"--color":s}});return(n,s)=>(K(),ue("i",pi({class:x(t).b(),style:x(i)},n.$attrs),[tt(n.$slots,"default")],16))}});var X3=Rt(j3,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const br=$i(X3),Fm=Symbol("formContextKey"),Yu=Symbol("formItemContextKey"),Bh=(r,e={})=>{const t=oe(void 0),i=e.prop?t:h1("size"),n=e.global?t:N3(),s=e.form?{size:void 0}:rt(Fm,void 0),o=e.formItem?{size:void 0}:rt(Yu,void 0);return k(()=>i.value||x(r)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||n.value||"")},Nh=r=>{const e=h1("disabled"),t=rt(Fm,void 0);return k(()=>e.value||x(r)||(t==null?void 0:t.disabled)||!1)},kh=()=>{const r=rt(Fm,void 0),e=rt(Yu,void 0);return{form:r,formItem:e}},I1=(r,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=oe(!1)),i||(i=oe(!1));const n=oe();let s;const o=k(()=>{var a;return!!(!r.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Ot(()=>{s=Ee([Ri(r,"id"),t],([a,l])=>{const u=a??(l?void 0:zu().value);u!==n.value&&(e!=null&&e.removeInputId&&(n.value&&e.removeInputId(n.value),!(i!=null&&i.value)&&!l&&u&&e.addInputId(u)),n.value=u)},{immediate:!0})}),cp(()=>{s&&s(),e!=null&&e.removeInputId&&n.value&&e.removeInputId(n.value)}),{isLabeledByFormItem:o,inputId:n}};let Lr;const z3=`
  height:0 !important;
  visibility:hidden !important;
  ${GF()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,W3=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Y3(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),n=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:W3.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:i,borderSize:n,boxSizing:t}}function X_(r,e=1,t){var i;Lr||(Lr=document.createElement("textarea"),document.body.appendChild(Lr));const{paddingSize:n,borderSize:s,boxSizing:o,contextStyle:a}=Y3(r);Lr.setAttribute("style",`${a};${z3}`),Lr.value=r.value||r.placeholder||"";let l=Lr.scrollHeight;const u={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-n),Lr.value="";const h=Lr.scrollHeight-n;if(vt(e)){let c=h*e;o==="border-box"&&(c=c+n+s),l=Math.max(c,l),u.minHeight=`${c}px`}if(vt(t)){let c=h*t;o==="border-box"&&(c=c+n+s),l=Math.min(c,l)}return u.height=`${l}px`,(i=Lr.parentNode)==null||i.removeChild(Lr),Lr=void 0,u}const q3=pt({id:{type:String,default:void 0},size:Za,disabled:Boolean,modelValue:{type:Ie([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ie([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:uo},prefixIcon:{type:uo},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ie([Object,Array,String]),default:()=>o1({})}}),K3={[jt]:r=>Ge(r),input:r=>Ge(r),change:r=>Ge(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},Z3=["role"],J3=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Q3=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],ek=Oe({name:"ElInput",inheritAttrs:!1}),tk=Oe({...ek,props:q3,emits:K3,setup(r,{expose:e,emit:t}){const i=r,n=nw(),s=z0(),o=k(()=>{const U={};return i.containerRole==="combobox"&&(U["aria-haspopup"]=n["aria-haspopup"],U["aria-owns"]=n["aria-owns"],U["aria-expanded"]=n["aria-expanded"]),U}),a=k(()=>[i.type==="textarea"?v.b():m.b(),m.m(d.value),m.is("disabled",p.value),m.is("exceed",he.value),{[m.b("group")]:s.prepend||s.append,[m.bm("group","append")]:s.append,[m.bm("group","prepend")]:s.prepend,[m.m("prefix")]:s.prefix||i.prefixIcon,[m.m("suffix")]:s.suffix||i.suffixIcon||i.clearable||i.showPassword,[m.bm("suffix","password-clear")]:X.value&&G.value},n.class]),l=k(()=>[m.e("wrapper"),m.is("focus",A.value)]),u=pN({excludeKeys:k(()=>Object.keys(o.value))}),{form:h,formItem:c}=kh(),{inputId:f}=I1(i,{formItemContext:c}),d=Bh(),p=Nh(),m=bt("input"),v=bt("textarea"),g=Ys(),_=Ys(),y=oe(!1),b=oe(!1),T=oe(!1),S=oe(),E=Ys(i.inputStyle),C=k(()=>g.value||_.value),{wrapperRef:M,isFocused:A,handleFocus:F,handleBlur:O}=k3(C,{afterBlur(){var U;i.validateEvent&&((U=c==null?void 0:c.validate)==null||U.call(c,"blur").catch(re=>void 0))}}),I=k(()=>{var U;return(U=h==null?void 0:h.statusIcon)!=null?U:!1}),D=k(()=>(c==null?void 0:c.validateState)||""),N=k(()=>D.value&&aN[D.value]),B=k(()=>T.value?QB:bB),L=k(()=>[n.style,i.inputStyle]),Q=k(()=>[i.inputStyle,E.value,{resize:i.resize}]),ee=k(()=>Bi(i.modelValue)?"":String(i.modelValue)),X=k(()=>i.clearable&&!p.value&&!i.readonly&&!!ee.value&&(A.value||y.value)),G=k(()=>i.showPassword&&!p.value&&!i.readonly&&!!ee.value&&(!!ee.value||A.value)),W=k(()=>i.showWordLimit&&!!u.value.maxlength&&(i.type==="text"||i.type==="textarea")&&!p.value&&!i.readonly&&!i.showPassword),se=k(()=>ee.value.length),he=k(()=>!!W.value&&se.value>Number(u.value.maxlength)),xe=k(()=>!!s.suffix||!!i.suffixIcon||X.value||i.showPassword||W.value||!!D.value&&I.value),[te,ge]=B3(g);zx(_,U=>{if(Te(),!W.value||i.resize!=="both")return;const re=U[0],{width:be}=re.contentRect;S.value={right:`calc(100% - ${be+15+6}px)`}});const Ce=()=>{const{type:U,autosize:re}=i;if(!(!At||U!=="textarea"||!_.value))if(re){const be=He(re)?re.minRows:void 0,Re=He(re)?re.maxRows:void 0,st=X_(_.value,be,Re);E.value={overflowY:"hidden",...st},$t(()=>{_.value.offsetHeight,E.value=st})}else E.value={minHeight:X_(_.value).minHeight}},Te=(U=>{let re=!1;return()=>{var be;if(re||!i.autosize)return;((be=_.value)==null?void 0:be.offsetParent)===null||(U(),re=!0)}})(Ce),_e=()=>{const U=C.value,re=i.formatter?i.formatter(ee.value):ee.value;!U||U.value===re||(U.value=re)},w=async U=>{te();let{value:re}=U.target;if(i.formatter&&(re=i.parser?i.parser(re):re),!b.value){if(re===ee.value){_e();return}t(jt,re),t("input",re),await $t(),_e(),ge()}},P=U=>{t("change",U.target.value)},R=U=>{t("compositionstart",U),b.value=!0},H=U=>{var re;t("compositionupdate",U);const be=(re=U.target)==null?void 0:re.value,Re=be[be.length-1]||"";b.value=!cN(Re)},V=U=>{t("compositionend",U),b.value&&(b.value=!1,w(U))},$=()=>{T.value=!T.value,Z()},Z=async()=>{var U;await $t(),(U=C.value)==null||U.focus()},Y=()=>{var U;return(U=C.value)==null?void 0:U.blur()},q=U=>{y.value=!1,t("mouseleave",U)},z=U=>{y.value=!0,t("mouseenter",U)},le=U=>{t("keydown",U)},ne=()=>{var U;(U=C.value)==null||U.select()},ae=()=>{t(jt,""),t("change",""),t("clear"),t("input","")};return Ee(()=>i.modelValue,()=>{var U;$t(()=>Ce()),i.validateEvent&&((U=c==null?void 0:c.validate)==null||U.call(c,"change").catch(re=>void 0))}),Ee(ee,()=>_e()),Ee(()=>i.type,async()=>{await $t(),_e(),Ce()}),Ot(()=>{!i.formatter&&i.parser,_e(),$t(Ce)}),e({input:g,textarea:_,ref:C,textareaStyle:Q,autosize:Ri(i,"autosize"),focus:Z,blur:Y,select:ne,clear:ae,resizeTextarea:Ce}),(U,re)=>mn((K(),ue("div",pi(x(o),{class:x(a),style:x(L),role:U.containerRole,onMouseenter:z,onMouseleave:q}),[Pe(" input "),U.type!=="textarea"?(K(),ue(ot,{key:0},[Pe(" prepend slot "),U.$slots.prepend?(K(),ue("div",{key:0,class:me(x(m).be("group","prepend"))},[tt(U.$slots,"prepend")],2)):Pe("v-if",!0),ye("div",{ref_key:"wrapperRef",ref:M,class:me(x(l))},[Pe(" prefix slot "),U.$slots.prefix||U.prefixIcon?(K(),ue("span",{key:0,class:me(x(m).e("prefix"))},[ye("span",{class:me(x(m).e("prefix-inner"))},[tt(U.$slots,"prefix"),U.prefixIcon?(K(),Be(x(br),{key:0,class:me(x(m).e("icon"))},{default:ke(()=>[(K(),Be(nn(U.prefixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0),ye("input",pi({id:x(f),ref_key:"input",ref:g,class:x(m).e("inner")},x(u),{type:U.showPassword?T.value?"text":"password":U.type,disabled:x(p),formatter:U.formatter,parser:U.parser,readonly:U.readonly,autocomplete:U.autocomplete,tabindex:U.tabindex,"aria-label":U.label,placeholder:U.placeholder,style:U.inputStyle,form:i.form,onCompositionstart:R,onCompositionupdate:H,onCompositionend:V,onInput:w,onFocus:re[0]||(re[0]=(...be)=>x(F)&&x(F)(...be)),onBlur:re[1]||(re[1]=(...be)=>x(O)&&x(O)(...be)),onChange:P,onKeydown:le}),null,16,J3),Pe(" suffix slot "),x(xe)?(K(),ue("span",{key:1,class:me(x(m).e("suffix"))},[ye("span",{class:me(x(m).e("suffix-inner"))},[!x(X)||!x(G)||!x(W)?(K(),ue(ot,{key:0},[tt(U.$slots,"suffix"),U.suffixIcon?(K(),Be(x(br),{key:0,class:me(x(m).e("icon"))},{default:ke(()=>[(K(),Be(nn(U.suffixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],64)):Pe("v-if",!0),x(X)?(K(),Be(x(br),{key:1,class:me([x(m).e("icon"),x(m).e("clear")]),onMousedown:rs(x(St),["prevent"]),onClick:ae},{default:ke(()=>[Me(x(Qx))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0),x(G)?(K(),Be(x(br),{key:2,class:me([x(m).e("icon"),x(m).e("password")]),onClick:$},{default:ke(()=>[(K(),Be(nn(x(B))))]),_:1},8,["class"])):Pe("v-if",!0),x(W)?(K(),ue("span",{key:3,class:me(x(m).e("count"))},[ye("span",{class:me(x(m).e("count-inner"))},Oi(x(se))+" / "+Oi(x(u).maxlength),3)],2)):Pe("v-if",!0),x(D)&&x(N)&&x(I)?(K(),Be(x(br),{key:4,class:me([x(m).e("icon"),x(m).e("validateIcon"),x(m).is("loading",x(D)==="validating")])},{default:ke(()=>[(K(),Be(nn(x(N))))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0)],2),Pe(" append slot "),U.$slots.append?(K(),ue("div",{key:1,class:me(x(m).be("group","append"))},[tt(U.$slots,"append")],2)):Pe("v-if",!0)],64)):(K(),ue(ot,{key:1},[Pe(" textarea "),ye("textarea",pi({id:x(f),ref_key:"textarea",ref:_,class:x(v).e("inner")},x(u),{tabindex:U.tabindex,disabled:x(p),readonly:U.readonly,autocomplete:U.autocomplete,style:x(Q),"aria-label":U.label,placeholder:U.placeholder,form:i.form,onCompositionstart:R,onCompositionupdate:H,onCompositionend:V,onInput:w,onFocus:re[2]||(re[2]=(...be)=>x(F)&&x(F)(...be)),onBlur:re[3]||(re[3]=(...be)=>x(O)&&x(O)(...be)),onChange:P,onKeydown:le}),null,16,Q3),x(W)?(K(),ue("span",{key:0,style:yr(S.value),class:me(x(m).e("count"))},Oi(x(se))+" / "+Oi(x(u).maxlength),7)):Pe("v-if",!0)],64))],16,Z3)),[[al,U.type!=="hidden"]])}});var rk=Rt(tk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ik=$i(rk),Lm=Symbol("popper"),A1=Symbol("popperContent"),nk=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],O1=pt({role:{type:String,values:nk,default:"tooltip"}}),sk=Oe({name:"ElPopper",inheritAttrs:!1}),ok=Oe({...sk,props:O1,setup(r,{expose:e}){const t=r,i=oe(),n=oe(),s=oe(),o=oe(),a=k(()=>t.role),l={triggerRef:i,popperInstanceRef:n,contentRef:s,referenceRef:o,role:a};return e(l),vi(Lm,l),(u,h)=>tt(u.$slots,"default")}});var ak=Rt(ok,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const R1=pt({arrowOffset:{type:Number,default:5}}),lk=Oe({name:"ElPopperArrow",inheritAttrs:!1}),uk=Oe({...lk,props:R1,setup(r,{expose:e}){const t=r,i=bt("popper"),{arrowOffset:n,arrowRef:s,arrowStyle:o}=rt(A1,void 0);return Ee(()=>t.arrowOffset,a=>{n.value=a}),Yr(()=>{s.value=void 0}),e({arrowRef:s}),(a,l)=>(K(),ue("span",{ref_key:"arrowRef",ref:s,class:me(x(i).e("arrow")),style:yr(x(o)),"data-popper-arrow":""},null,6))}});var hk=Rt(uk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const ck="ElOnlyChild",fk=Oe({name:ck,setup(r,{slots:e,attrs:t}){var i;const n=rt(E1),s=D3((i=n==null?void 0:n.setForwardRef)!=null?i:St);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const l=F1(a);return l?mn(Ui(l,t),[[s]]):null}}});function F1(r){if(!r)return null;const e=r;for(const t of e){if(He(t))switch(t.type){case lr:continue;case wo:case"svg":return z_(t);case ot:return F1(t.children);default:return t}return z_(t)}return null}function z_(r){const e=bt("only-child");return Me("span",{class:e.e("content")},[r])}const L1=pt({virtualRef:{type:Ie(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ie(Function)},onMouseleave:{type:Ie(Function)},onClick:{type:Ie(Function)},onKeydown:{type:Ie(Function)},onFocus:{type:Ie(Function)},onBlur:{type:Ie(Function)},onContextmenu:{type:Ie(Function)},id:String,open:Boolean}),dk=Oe({name:"ElPopperTrigger",inheritAttrs:!1}),pk=Oe({...dk,props:L1,setup(r,{expose:e}){const t=r,{role:i,triggerRef:n}=rt(Lm,void 0);L3(n);const s=k(()=>a.value?t.id:void 0),o=k(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=k(()=>{if(i&&i.value!=="tooltip")return i.value}),l=k(()=>a.value?`${t.open}`:void 0);let u;return Ot(()=>{Ee(()=>t.virtualRef,h=>{h&&(n.value=on(h))},{immediate:!0}),Ee(n,(h,c)=>{u==null||u(),u=void 0,Ya(h)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(f=>{var d;const p=t[f];p&&(h.addEventListener(f.slice(2).toLowerCase(),p),(d=c==null?void 0:c.removeEventListener)==null||d.call(c,f.slice(2).toLowerCase(),p))}),u=Ee([s,o,a,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((d,p)=>{Bi(f[p])?h.removeAttribute(d):h.setAttribute(d,f[p])})},{immediate:!0})),Ya(c)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>c.removeAttribute(f))},{immediate:!0})}),Yr(()=>{u==null||u(),u=void 0}),e({triggerRef:n}),(h,c)=>h.virtualTriggering?Pe("v-if",!0):(K(),Be(x(fk),pi({key:0},h.$attrs,{"aria-controls":x(s),"aria-describedby":x(o),"aria-expanded":x(l),"aria-haspopup":x(a)}),{default:ke(()=>[tt(h.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var mk=Rt(pk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const kc="focus-trap.focus-after-trapped",Uc="focus-trap.focus-after-released",vk="focus-trap.focusout-prevented",W_={cancelable:!0,bubbles:!1},gk={cancelable:!0,bubbles:!1},Y_="focusAfterTrapped",q_="focusAfterReleased",_k=Symbol("elFocusTrap"),Dm=oe(),Uh=oe(0),Bm=oe(0);let Xl=0;const D1=r=>{const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const n=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||n?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},K_=(r,e)=>{for(const t of r)if(!yk(t,e))return t},yk=(r,e)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},bk=r=>{const e=D1(r),t=K_(e,r),i=K_(e.reverse(),r);return[t,i]},xk=r=>r instanceof HTMLInputElement&&"select"in r,Qi=(r,e)=>{if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),Bm.value=window.performance.now(),r!==t&&xk(r)&&e&&r.select()}};function Z_(r,e){const t=[...r],i=r.indexOf(e);return i!==-1&&t.splice(i,1),t}const Tk=()=>{let r=[];return{push:i=>{const n=r[0];n&&i!==n&&n.pause(),r=Z_(r,i),r.unshift(i)},remove:i=>{var n,s;r=Z_(r,i),(s=(n=r[0])==null?void 0:n.resume)==null||s.call(n)}}},Sk=(r,e=!1)=>{const t=document.activeElement;for(const i of r)if(Qi(i,e),document.activeElement!==t)return},J_=Tk(),Ek=()=>Uh.value>Bm.value,zl=()=>{Dm.value="pointer",Uh.value=window.performance.now()},Q_=()=>{Dm.value="keyboard",Uh.value=window.performance.now()},wk=()=>(Ot(()=>{Xl===0&&(document.addEventListener("mousedown",zl),document.addEventListener("touchstart",zl),document.addEventListener("keydown",Q_)),Xl++}),Yr(()=>{Xl--,Xl<=0&&(document.removeEventListener("mousedown",zl),document.removeEventListener("touchstart",zl),document.removeEventListener("keydown",Q_))}),{focusReason:Dm,lastUserFocusTimestamp:Uh,lastAutomatedFocusTimestamp:Bm}),Wl=r=>new CustomEvent(vk,{...gk,detail:r}),Pk=Oe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Y_,q_,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:e}){const t=oe();let i,n;const{focusReason:s}=wk();I3(p=>{r.trapped&&!o.paused&&e("release-requested",p)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=p=>{if(!r.loop&&!r.trapped||o.paused)return;const{key:m,altKey:v,ctrlKey:g,metaKey:_,currentTarget:y,shiftKey:b}=p,{loop:T}=r,S=m===ho.tab&&!v&&!g&&!_,E=document.activeElement;if(S&&E){const C=y,[M,A]=bk(C);if(M&&A){if(!b&&E===A){const O=Wl({focusReason:s.value});e("focusout-prevented",O),O.defaultPrevented||(p.preventDefault(),T&&Qi(M,!0))}else if(b&&[M,C].includes(E)){const O=Wl({focusReason:s.value});e("focusout-prevented",O),O.defaultPrevented||(p.preventDefault(),T&&Qi(A,!0))}}else if(E===C){const O=Wl({focusReason:s.value});e("focusout-prevented",O),O.defaultPrevented||p.preventDefault()}}};vi(_k,{focusTrapRef:t,onKeydown:a}),Ee(()=>r.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),Ee([t],([p],[m])=>{p&&(p.addEventListener("keydown",a),p.addEventListener("focusin",h),p.addEventListener("focusout",c)),m&&(m.removeEventListener("keydown",a),m.removeEventListener("focusin",h),m.removeEventListener("focusout",c))});const l=p=>{e(Y_,p)},u=p=>e(q_,p),h=p=>{const m=x(t);if(!m)return;const v=p.target,g=p.relatedTarget,_=v&&m.contains(v);r.trapped||g&&m.contains(g)||(i=g),_&&e("focusin",p),!o.paused&&r.trapped&&(_?n=v:Qi(n,!0))},c=p=>{const m=x(t);if(!(o.paused||!m))if(r.trapped){const v=p.relatedTarget;!Bi(v)&&!m.contains(v)&&setTimeout(()=>{if(!o.paused&&r.trapped){const g=Wl({focusReason:s.value});e("focusout-prevented",g),g.defaultPrevented||Qi(n,!0)}},0)}else{const v=p.target;v&&m.contains(v)||e("focusout",p)}};async function f(){await $t();const p=x(t);if(p){J_.push(o);const m=p.contains(document.activeElement)?i:document.activeElement;if(i=m,!p.contains(m)){const g=new Event(kc,W_);p.addEventListener(kc,l),p.dispatchEvent(g),g.defaultPrevented||$t(()=>{let _=r.focusStartEl;Ge(_)||(Qi(_),document.activeElement!==_&&(_="first")),_==="first"&&Sk(D1(p),!0),(document.activeElement===m||_==="container")&&Qi(p)})}}}function d(){const p=x(t);if(p){p.removeEventListener(kc,l);const m=new CustomEvent(Uc,{...W_,detail:{focusReason:s.value}});p.addEventListener(Uc,u),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!Ek()||p.contains(document.activeElement))&&Qi(i??document.body),p.removeEventListener(Uc,l),J_.remove(o)}}return Ot(()=>{r.trapped&&f(),Ee(()=>r.trapped,p=>{p?f():d()})}),Yr(()=>{r.trapped&&d()}),{onKeydown:a}}});function Ck(r,e,t,i,n,s){return tt(r.$slots,"default",{handleKeydown:r.onKeydown})}var B1=Rt(Pk,[["render",Ck],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const Mk=["fixed","absolute"],Ik=pt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ie(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:fl,default:"bottom"},popperOptions:{type:Ie(Object),default:()=>({})},strategy:{type:String,values:Mk,default:"absolute"}}),N1=pt({...Ik,id:String,style:{type:Ie([String,Array,Object])},className:{type:Ie([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ie([String,Array,Object])},popperStyle:{type:Ie([String,Array,Object])},referenceEl:{type:Ie(Object)},triggerTargetEl:{type:Ie(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),Ak={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},Ok=(r,e=[])=>{const{placement:t,strategy:i,popperOptions:n}=r,s={placement:t,strategy:i,...n,modifiers:[...Fk(r),...e]};return Lk(s,n==null?void 0:n.modifiers),s},Rk=r=>{if(At)return on(r)};function Fk(r){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=r;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function Lk(r,e){e&&(r.modifiers=[...r.modifiers,...e??[]])}const Dk=0,Bk=r=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:n}=rt(Lm,void 0),s=oe(),o=oe(),a=k(()=>({name:"eventListeners",enabled:!!r.visible})),l=k(()=>{var g;const _=x(s),y=(g=x(o))!=null?g:Dk;return{name:"arrow",enabled:!PD(_),options:{element:_,padding:y}}}),u=k(()=>({onFirstUpdate:()=>{p()},...Ok(r,[x(l),x(a)])})),h=k(()=>Rk(r.referenceEl)||x(i)),{attributes:c,state:f,styles:d,update:p,forceUpdate:m,instanceRef:v}=w3(h,t,u);return Ee(v,g=>e.value=g),Ot(()=>{Ee(()=>{var g;return(g=x(h))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:c,arrowRef:s,contentRef:t,instanceRef:v,state:f,styles:d,role:n,forceUpdate:m,update:p}},Nk=(r,{attributes:e,styles:t,role:i})=>{const{nextZIndex:n}=Rm(),s=bt("popper"),o=k(()=>x(e).popper),a=oe(r.zIndex||n()),l=k(()=>[s.b(),s.is("pure",r.pure),s.is(r.effect),r.popperClass]),u=k(()=>[{zIndex:x(a)},x(t).popper,r.popperStyle||{}]),h=k(()=>i.value==="dialog"?"false":void 0),c=k(()=>x(t).arrow||{});return{ariaModal:h,arrowStyle:c,contentAttrs:o,contentClass:l,contentStyle:u,contentZIndex:a,updateZIndex:()=>{a.value=r.zIndex||n()}}},kk=(r,e)=>{const t=oe(!1),i=oe();return{focusStartRef:i,trapped:t,onFocusAfterReleased:u=>{var h;((h=u.detail)==null?void 0:h.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{r.visible&&!t.value&&(u.target&&(i.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{r.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},Uk=Oe({name:"ElPopperContent"}),Gk=Oe({...Uk,props:N1,emits:Ak,setup(r,{expose:e,emit:t}){const i=r,{focusStartRef:n,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:h}=kk(i,t),{attributes:c,arrowRef:f,contentRef:d,styles:p,instanceRef:m,role:v,update:g}=Bk(i),{ariaModal:_,arrowStyle:y,contentAttrs:b,contentClass:T,contentStyle:S,updateZIndex:E}=Nk(i,{styles:p,attributes:c,role:v}),C=rt(Yu,void 0),M=oe();vi(A1,{arrowStyle:y,arrowRef:f,arrowOffset:M}),C&&(C.addInputId||C.removeInputId)&&vi(Yu,{...C,addInputId:St,removeInputId:St});let A;const F=(I=!0)=>{g(),I&&E()},O=()=>{F(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Ot(()=>{Ee(()=>i.triggerTargetEl,(I,D)=>{A==null||A(),A=void 0;const N=x(I||d.value),B=x(D||d.value);Ya(N)&&(A=Ee([v,()=>i.ariaLabel,_,()=>i.id],L=>{["role","aria-label","aria-modal","id"].forEach((Q,ee)=>{Bi(L[ee])?N.removeAttribute(Q):N.setAttribute(Q,L[ee])})},{immediate:!0})),B!==N&&Ya(B)&&["role","aria-label","aria-modal","id"].forEach(L=>{B.removeAttribute(L)})},{immediate:!0}),Ee(()=>i.visible,O,{immediate:!0})}),Yr(()=>{A==null||A(),A=void 0}),e({popperContentRef:d,popperInstanceRef:m,updatePopper:F,contentStyle:S}),(I,D)=>(K(),ue("div",pi({ref_key:"contentRef",ref:d},x(b),{style:x(S),class:x(T),tabindex:"-1",onMouseenter:D[0]||(D[0]=N=>I.$emit("mouseenter",N)),onMouseleave:D[1]||(D[1]=N=>I.$emit("mouseleave",N))}),[Me(x(B1),{trapped:x(s),"trap-on-focus-in":!0,"focus-trap-el":x(d),"focus-start-el":x(n),onFocusAfterTrapped:x(a),onFocusAfterReleased:x(o),onFocusin:x(l),onFocusoutPrevented:x(u),onReleaseRequested:x(h)},{default:ke(()=>[tt(I.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var Vk=Rt(Gk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const Hk=$i(ak),Nm=Symbol("elTooltip"),k1=pt({...R3,...N1,appendTo:{type:Ie([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Ie(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),U1=pt({...L1,disabled:Boolean,trigger:{type:Ie([String,Array]),default:"hover"},triggerKeys:{type:Ie(Array),default:()=>[ho.enter,ho.space]}}),{useModelToggleProps:$k,useModelToggleEmits:jk,useModelToggle:Xk}=u1("visible"),zk=pt({...O1,...$k,...k1,...U1,...R1,showArrow:{type:Boolean,default:!0}}),Wk=[...jk,"before-show","before-hide","show","hide","open","close"],Yk=(r,e)=>pe(r)?r.includes(e):r===e,Os=(r,e,t)=>i=>{Yk(x(r),e)&&t(i)},qk=Oe({name:"ElTooltipTrigger"}),Kk=Oe({...qk,props:U1,setup(r,{expose:e}){const t=r,i=bt("tooltip"),{controlled:n,id:s,open:o,onOpen:a,onClose:l,onToggle:u}=rt(Nm,void 0),h=oe(null),c=()=>{if(x(n)||t.disabled)return!0},f=Ri(t,"trigger"),d=Ci(c,Os(f,"hover",a)),p=Ci(c,Os(f,"hover",l)),m=Ci(c,Os(f,"click",b=>{b.button===0&&u(b)})),v=Ci(c,Os(f,"focus",a)),g=Ci(c,Os(f,"focus",l)),_=Ci(c,Os(f,"contextmenu",b=>{b.preventDefault(),u(b)})),y=Ci(c,b=>{const{code:T}=b;t.triggerKeys.includes(T)&&(b.preventDefault(),u(b))});return e({triggerRef:h}),(b,T)=>(K(),Be(x(mk),{id:x(s),"virtual-ref":b.virtualRef,open:x(o),"virtual-triggering":b.virtualTriggering,class:me(x(i).e("trigger")),onBlur:x(g),onClick:x(m),onContextmenu:x(_),onFocus:x(v),onMouseenter:x(d),onMouseleave:x(p),onKeydown:x(y)},{default:ke(()=>[tt(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Zk=Rt(Kk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const Jk=Oe({name:"ElTooltipContent",inheritAttrs:!1}),Qk=Oe({...Jk,props:k1,setup(r,{expose:e}){const t=r,{selector:i}=S1(),n=bt("tooltip"),s=oe(null),o=oe(!1),{controlled:a,id:l,open:u,trigger:h,onClose:c,onOpen:f,onShow:d,onHide:p,onBeforeShow:m,onBeforeHide:v}=rt(Nm,void 0),g=k(()=>t.transition||`${n.namespace.value}-fade-in-linear`),_=k(()=>t.persistent);Yr(()=>{o.value=!0});const y=k(()=>x(_)?!0:x(u)),b=k(()=>t.disabled?!1:x(u)),T=k(()=>t.appendTo||i.value),S=k(()=>{var L;return(L=t.style)!=null?L:{}}),E=k(()=>!x(u)),C=()=>{p()},M=()=>{if(x(a))return!0},A=Ci(M,()=>{t.enterable&&x(h)==="hover"&&f()}),F=Ci(M,()=>{x(h)==="hover"&&c()}),O=()=>{var L,Q;(Q=(L=s.value)==null?void 0:L.updatePopper)==null||Q.call(L),m==null||m()},I=()=>{v==null||v()},D=()=>{d(),B=AF(k(()=>{var L;return(L=s.value)==null?void 0:L.popperContentRef}),()=>{if(x(a))return;x(h)!=="hover"&&c()})},N=()=>{t.virtualTriggering||c()};let B;return Ee(()=>x(u),L=>{L||B==null||B()},{flush:"post"}),Ee(()=>t.content,()=>{var L,Q;(Q=(L=s.value)==null?void 0:L.updatePopper)==null||Q.call(L)}),e({contentRef:s}),(L,Q)=>(K(),Be(tb,{disabled:!L.teleported,to:x(T)},[Me(Po,{name:x(g),onAfterLeave:C,onBeforeEnter:O,onAfterEnter:D,onBeforeLeave:I},{default:ke(()=>[x(y)?mn((K(),Be(x(Vk),pi({key:0,id:x(l),ref_key:"contentRef",ref:s},L.$attrs,{"aria-label":L.ariaLabel,"aria-hidden":x(E),"boundaries-padding":L.boundariesPadding,"fallback-placements":L.fallbackPlacements,"gpu-acceleration":L.gpuAcceleration,offset:L.offset,placement:L.placement,"popper-options":L.popperOptions,strategy:L.strategy,effect:L.effect,enterable:L.enterable,pure:L.pure,"popper-class":L.popperClass,"popper-style":[L.popperStyle,x(S)],"reference-el":L.referenceEl,"trigger-target-el":L.triggerTargetEl,visible:x(b),"z-index":L.zIndex,onMouseenter:x(A),onMouseleave:x(F),onBlur:N,onClose:x(c)}),{default:ke(()=>[o.value?Pe("v-if",!0):tt(L.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[al,x(b)]]):Pe("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var eU=Rt(Qk,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const tU=["innerHTML"],rU={key:1},iU=Oe({name:"ElTooltip"}),nU=Oe({...iU,props:zk,emits:Wk,setup(r,{expose:e,emit:t}){const i=r;O3();const n=zu(),s=oe(),o=oe(),a=()=>{var g;const _=x(s);_&&((g=_.popperInstanceRef)==null||g.update())},l=oe(!1),u=oe(),{show:h,hide:c,hasUpdateHandler:f}=Xk({indicator:l,toggleReason:u}),{onOpen:d,onClose:p}=F3({showAfter:Ri(i,"showAfter"),hideAfter:Ri(i,"hideAfter"),autoClose:Ri(i,"autoClose"),open:h,close:c}),m=k(()=>bm(i.visible)&&!f.value);vi(Nm,{controlled:m,id:n,open:sh(l),trigger:Ri(i,"trigger"),onOpen:g=>{d(g)},onClose:g=>{p(g)},onToggle:g=>{x(l)?p(g):d(g)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:a}),Ee(()=>i.disabled,g=>{g&&l.value&&(l.value=!1)});const v=()=>{var g,_;const y=(_=(g=o.value)==null?void 0:g.contentRef)==null?void 0:_.popperContentRef;return y&&y.contains(document.activeElement)};return G0(()=>l.value&&c()),e({popperRef:s,contentRef:o,isFocusInsideContent:v,updatePopper:a,onOpen:d,onClose:p,hide:c}),(g,_)=>(K(),Be(x(Hk),{ref_key:"popperRef",ref:s,role:g.role},{default:ke(()=>[Me(Zk,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:ke(()=>[g.$slots.default?tt(g.$slots,"default",{key:0}):Pe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Me(eU,{ref_key:"contentRef",ref:o,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:ke(()=>[tt(g.$slots,"content",{},()=>[g.rawContent?(K(),ue("span",{key:0,innerHTML:g.content},null,8,tU)):(K(),ue("span",rU,Oi(g.content),1))]),g.showArrow?(K(),Be(x(hk),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):Pe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var sU=Rt(nU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const G1=$i(sU),oU=pt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),aU=["textContent"],lU=Oe({name:"ElBadge"}),uU=Oe({...lU,props:oU,setup(r,{expose:e}){const t=r,i=bt("badge"),n=k(()=>t.isDot?"":vt(t.value)&&vt(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return e({content:n}),(s,o)=>(K(),ue("div",{class:me(x(i).b())},[tt(s.$slots,"default"),Me(Po,{name:`${x(i).namespace.value}-zoom-in-center`,persisted:""},{default:ke(()=>[mn(ye("sup",{class:me([x(i).e("content"),x(i).em("content",s.type),x(i).is("fixed",!!s.$slots.default),x(i).is("dot",s.isDot)]),textContent:Oi(x(n))},null,10,aU),[[al,!s.hidden&&(x(n)||s.isDot)]])]),_:1},8,["name"])],2))}});var hU=Rt(uU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const cU=$i(hU),V1=Symbol("buttonGroupContextKey"),fU=(r,e)=>{sd({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},k(()=>r.type==="text"));const t=rt(V1,void 0),i=Dh("button"),{form:n}=kh(),s=Bh(k(()=>t==null?void 0:t.size)),o=Nh(),a=oe(),l=z0(),u=k(()=>r.type||(t==null?void 0:t.type)||""),h=k(()=>{var p,m,v;return(v=(m=r.autoInsertSpace)!=null?m:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?v:!1}),c=k(()=>r.tag==="button"?{ariaDisabled:o.value||r.loading,disabled:o.value||r.loading,autofocus:r.autofocus,type:r.nativeType}:{}),f=k(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(h.value&&(m==null?void 0:m.length)===1){const v=m[0];if((v==null?void 0:v.type)===wo){const g=v.children;return/^\p{Unified_Ideograph}{2}$/u.test(g.trim())}}return!1});return{_disabled:o,_size:s,_type:u,_ref:a,_props:c,shouldAddSpace:f,handleClick:p=>{r.nativeType==="reset"&&(n==null||n.resetFields()),e("click",p)}}},dU=["default","primary","success","warning","info","danger","text",""],pU=["button","submit","reset"],ad=pt({size:Za,disabled:Boolean,type:{type:String,values:dU,default:""},icon:{type:uo},nativeType:{type:String,values:pU,default:"button"},loading:Boolean,loadingIcon:{type:uo,default:()=>r1},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ie([String,Object]),default:"button"}}),mU={click:r=>r instanceof MouseEvent};function Bt(r,e){vU(r)&&(r="100%");var t=gU(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function Yl(r){return Math.min(1,Math.max(0,r))}function vU(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function gU(r){return typeof r=="string"&&r.indexOf("%")!==-1}function H1(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function ql(r){return r<=1?"".concat(Number(r)*100,"%"):r}function ns(r){return r.length===1?"0"+r:String(r)}function _U(r,e,t){return{r:Bt(r,255)*255,g:Bt(e,255)*255,b:Bt(t,255)*255}}function ey(r,e,t){r=Bt(r,255),e=Bt(e,255),t=Bt(t,255);var i=Math.max(r,e,t),n=Math.min(r,e,t),s=0,o=0,a=(i+n)/2;if(i===n)o=0,s=0;else{var l=i-n;switch(o=a>.5?l/(2-i-n):l/(i+n),i){case r:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-r)/l+2;break;case t:s=(r-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function Gc(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function yU(r,e,t){var i,n,s;if(r=Bt(r,360),e=Bt(e,100),t=Bt(t,100),e===0)n=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=Gc(a,o,r+1/3),n=Gc(a,o,r),s=Gc(a,o,r-1/3)}return{r:i*255,g:n*255,b:s*255}}function ty(r,e,t){r=Bt(r,255),e=Bt(e,255),t=Bt(t,255);var i=Math.max(r,e,t),n=Math.min(r,e,t),s=0,o=i,a=i-n,l=i===0?0:a/i;if(i===n)s=0;else{switch(i){case r:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-r)/a+2;break;case t:s=(r-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function bU(r,e,t){r=Bt(r,360)*6,e=Bt(e,100),t=Bt(t,100);var i=Math.floor(r),n=r-i,s=t*(1-e),o=t*(1-n*e),a=t*(1-(1-n)*e),l=i%6,u=[t,o,s,s,a,t][l],h=[a,t,t,o,s,s][l],c=[s,s,a,t,t,o][l];return{r:u*255,g:h*255,b:c*255}}function ry(r,e,t,i){var n=[ns(Math.round(r).toString(16)),ns(Math.round(e).toString(16)),ns(Math.round(t).toString(16))];return i&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function xU(r,e,t,i,n){var s=[ns(Math.round(r).toString(16)),ns(Math.round(e).toString(16)),ns(Math.round(t).toString(16)),ns(TU(i))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function TU(r){return Math.round(parseFloat(r)*255).toString(16)}function iy(r){return nr(r)/255}function nr(r){return parseInt(r,16)}function SU(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var ld={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function EU(r){var e={r:0,g:0,b:0},t=1,i=null,n=null,s=null,o=!1,a=!1;return typeof r=="string"&&(r=CU(r)),typeof r=="object"&&(Ei(r.r)&&Ei(r.g)&&Ei(r.b)?(e=_U(r.r,r.g,r.b),o=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Ei(r.h)&&Ei(r.s)&&Ei(r.v)?(i=ql(r.s),n=ql(r.v),e=bU(r.h,i,n),o=!0,a="hsv"):Ei(r.h)&&Ei(r.s)&&Ei(r.l)&&(i=ql(r.s),s=ql(r.l),e=yU(r.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=H1(t),{ok:o,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var wU="[-\\+]?\\d+%?",PU="[-\\+]?\\d*\\.\\d+%?",an="(?:".concat(PU,")|(?:").concat(wU,")"),Vc="[\\s|\\(]+(".concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")\\s*\\)?"),Hc="[\\s|\\(]+(".concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")[,|\\s]+(").concat(an,")\\s*\\)?"),Nr={CSS_UNIT:new RegExp(an),rgb:new RegExp("rgb"+Vc),rgba:new RegExp("rgba"+Hc),hsl:new RegExp("hsl"+Vc),hsla:new RegExp("hsla"+Hc),hsv:new RegExp("hsv"+Vc),hsva:new RegExp("hsva"+Hc),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function CU(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var e=!1;if(ld[r])r=ld[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Nr.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=Nr.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Nr.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=Nr.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Nr.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=Nr.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Nr.hex8.exec(r),t?{r:nr(t[1]),g:nr(t[2]),b:nr(t[3]),a:iy(t[4]),format:e?"name":"hex8"}:(t=Nr.hex6.exec(r),t?{r:nr(t[1]),g:nr(t[2]),b:nr(t[3]),format:e?"name":"hex"}:(t=Nr.hex4.exec(r),t?{r:nr(t[1]+t[1]),g:nr(t[2]+t[2]),b:nr(t[3]+t[3]),a:iy(t[4]+t[4]),format:e?"name":"hex8"}:(t=Nr.hex3.exec(r),t?{r:nr(t[1]+t[1]),g:nr(t[2]+t[2]),b:nr(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Ei(r){return!!Nr.CSS_UNIT.exec(String(r))}var MU=function(){function r(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof r)return e;typeof e=="number"&&(e=SU(e)),this.originalInput=e;var n=EU(e);this.originalInput=e,this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:n.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=n.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},r.prototype.getLuminance=function(){var e=this.toRgb(),t,i,n,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*n},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(e){return this.a=H1(e),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},r.prototype.toHsv=function(){var e=ty(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},r.prototype.toHsvString=function(){var e=ty(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var e=ey(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},r.prototype.toHslString=function(){var e=ey(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(e){return e===void 0&&(e=!1),ry(this.r,this.g,this.b,e)},r.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},r.prototype.toHex8=function(e){return e===void 0&&(e=!1),xU(this.r,this.g,this.b,this.a,e)},r.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},r.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Bt(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Bt(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+ry(this.r,this.g,this.b,!1),t=0,i=Object.entries(ld);t<i.length;t++){var n=i[t],s=n[0],o=n[1];if(e===o)return s}return!1},r.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,n=this.a<1&&this.a>=0,s=!t&&n&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Yl(t.l),new r(t)},r.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new r(t)},r.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Yl(t.l),new r(t)},r.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},r.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},r.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Yl(t.s),new r(t)},r.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Yl(t.s),new r(t)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new r(t)},r.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),n=new r(e).toRgb(),s=t/100,o={r:(n.r-i.r)*s+i.r,g:(n.g-i.g)*s+i.g,b:(n.b-i.b)*s+i.b,a:(n.a-i.a)*s+i.a};return new r(o)},r.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),n=360/t,s=[this];for(i.h=(i.h-(n*e>>1)+720)%360;--e;)i.h=(i.h+n)%360,s.push(new r(i));return s},r.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new r(e)},r.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,n=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new r({h:i,s:n,v:s})),s=(s+a)%1;return o},r.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new r({h:(t+72)%360,s:e.s,l:e.l}),new r({h:(t+216)%360,s:e.s,l:e.l})]},r.prototype.onBackground=function(e){var t=this.toRgb(),i=new r(e).toRgb(),n=t.a+i.a*(1-t.a);return new r({r:(t.r*t.a+i.r*i.a*(1-t.a))/n,g:(t.g*t.a+i.g*i.a*(1-t.a))/n,b:(t.b*t.a+i.b*i.a*(1-t.a))/n,a:n})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,n=[this],s=360/e,o=1;o<e;o++)n.push(new r({h:(i+o*s)%360,s:t.s,l:t.l}));return n},r.prototype.equals=function(e){return this.toRgbString()===new r(e).toRgbString()},r}();function Yi(r,e=20){return r.mix("#141414",e).toString()}function IU(r){const e=Nh(),t=bt("button");return k(()=>{let i={};const n=r.color;if(n){const s=new MU(n),o=r.dark?s.tint(20).toString():Yi(s,20);if(r.plain)i=t.cssVarBlock({"bg-color":r.dark?Yi(s,90):s.tint(90).toString(),"text-color":n,"border-color":r.dark?Yi(s,50):s.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":n,"hover-border-color":n,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=r.dark?Yi(s,90):s.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=r.dark?Yi(s,50):s.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=r.dark?Yi(s,80):s.tint(80).toString());else{const a=r.dark?Yi(s,30):s.tint(30).toString(),l=s.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":n,"text-color":l,"border-color":n,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":o,"active-border-color":o}),e.value){const u=r.dark?Yi(s,50):s.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=u,i[t.cssVarBlockName("disabled-text-color")]=r.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=u}}}return i})}const AU=Oe({name:"ElButton"}),OU=Oe({...AU,props:ad,emits:mU,setup(r,{expose:e,emit:t}){const i=r,n=IU(i),s=bt("button"),{_ref:o,_size:a,_type:l,_disabled:u,_props:h,shouldAddSpace:c,handleClick:f}=fU(i,t);return e({ref:o,size:a,type:l,disabled:u,shouldAddSpace:c}),(d,p)=>(K(),Be(nn(d.tag),pi({ref_key:"_ref",ref:o},x(h),{class:[x(s).b(),x(s).m(x(l)),x(s).m(x(a)),x(s).is("disabled",x(u)),x(s).is("loading",d.loading),x(s).is("plain",d.plain),x(s).is("round",d.round),x(s).is("circle",d.circle),x(s).is("text",d.text),x(s).is("link",d.link),x(s).is("has-bg",d.bg)],style:x(n),onClick:x(f)}),{default:ke(()=>[d.loading?(K(),ue(ot,{key:0},[d.$slots.loading?tt(d.$slots,"loading",{key:0}):(K(),Be(x(br),{key:1,class:me(x(s).is("loading"))},{default:ke(()=>[(K(),Be(nn(d.loadingIcon)))]),_:1},8,["class"]))],64)):d.icon||d.$slots.icon?(K(),Be(x(br),{key:1},{default:ke(()=>[d.icon?(K(),Be(nn(d.icon),{key:0})):tt(d.$slots,"icon",{key:1})]),_:3})):Pe("v-if",!0),d.$slots.default?(K(),ue("span",{key:2,class:me({[x(s).em("text","expand")]:x(c)})},[tt(d.$slots,"default")],2)):Pe("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var RU=Rt(OU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const FU={size:ad.size,type:ad.type},LU=Oe({name:"ElButtonGroup"}),DU=Oe({...LU,props:FU,setup(r){const e=r;vi(V1,bn({size:Ri(e,"size"),type:Ri(e,"type")}));const t=bt("button");return(i,n)=>(K(),ue("div",{class:me(`${x(t).b("group")}`)},[tt(i.$slots,"default")],2))}});var $1=Rt(DU,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const BU=$i(RU,{ButtonGroup:$1});uN($1);const NU=100,kU=600,ny={beforeMount(r,e){const t=e.value,{interval:i=NU,delay:n=kU}=de(t)?{}:t;let s,o;const a=()=>de(t)?t():t.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};r.addEventListener("mousedown",u=>{u.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{a()},i)},n))})}},UU=pt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Ie([String,Array,Object])},zIndex:{type:Ie([String,Number])}}),GU={click:r=>r instanceof MouseEvent},VU="overlay";var HU=Oe({name:"ElOverlay",props:UU,emits:GU,setup(r,{slots:e,emit:t}){const i=bt(VU),n=l=>{t("click",l)},{onClick:s,onMousedown:o,onMouseup:a}=C3(r.customMaskEvent?void 0:n);return()=>r.mask?Me("div",{class:[i.b(),r.overlayClass],style:{zIndex:r.zIndex},onClick:s,onMousedown:o,onMouseup:a},[tt(e,"default")],gu.STYLE|gu.CLASS|gu.PROPS,["onClick","onMouseup","onMousedown"]):_p("div",{class:r.overlayClass,style:{zIndex:r.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[tt(e,"default")])}});const $U=HU,jU=pt({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:uo},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),XU=pt({...jU,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Ie(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),zU={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[jt]:r=>bm(r),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},WU=(r,e)=>{const i=qr().emit,{nextZIndex:n}=Rm();let s="";const o=zu(),a=zu(),l=oe(!1),u=oe(!1),h=oe(!1),c=oe(r.zIndex||n());let f,d;const p=Dh("namespace",ju),m=k(()=>{const D={},N=`--${p.value}-dialog`;return r.fullscreen||(r.top&&(D[`${N}-margin-top`]=r.top),r.width&&(D[`${N}-width`]=Tm(r.width))),D}),v=k(()=>r.alignCenter?{display:"flex"}:{});function g(){i("opened")}function _(){i("closed"),i(jt,!1),r.destroyOnClose&&(h.value=!1)}function y(){i("close")}function b(){d==null||d(),f==null||f(),r.openDelay&&r.openDelay>0?{stop:f}=nd(()=>C(),r.openDelay):C()}function T(){f==null||f(),d==null||d(),r.closeDelay&&r.closeDelay>0?{stop:d}=nd(()=>M(),r.closeDelay):M()}function S(){function D(N){N||(u.value=!0,l.value=!1)}r.beforeClose?r.beforeClose(D):T()}function E(){r.closeOnClickModal&&S()}function C(){At&&(l.value=!0)}function M(){l.value=!1}function A(){i("openAutoFocus")}function F(){i("closeAutoFocus")}function O(D){var N;((N=D.detail)==null?void 0:N.focusReason)==="pointer"&&D.preventDefault()}r.lockScroll&&bN(l);function I(){r.closeOnPressEscape&&S()}return Ee(()=>r.modelValue,D=>{D?(u.value=!1,b(),h.value=!0,c.value=r.zIndex?c.value++:n(),$t(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):l.value&&T()}),Ee(()=>r.fullscreen,D=>{e.value&&(D?(s=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=s)}),Ot(()=>{r.modelValue&&(l.value=!0,h.value=!0,b())}),{afterEnter:g,afterLeave:_,beforeLeave:y,handleClose:S,onModalClick:E,close:T,doClose:M,onOpenAutoFocus:A,onCloseAutoFocus:F,onCloseRequested:I,onFocusoutPrevented:O,titleId:o,bodyId:a,closed:u,style:m,overlayDialogStyle:v,rendered:h,visible:l,zIndex:c}},YU=pt({...XU,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),qU=zU,KU=Oe({name:"ElDrawer",components:{ElOverlay:$U,ElFocusTrap:B1,ElIcon:br,Close:e1},inheritAttrs:!1,props:YU,emits:qU,setup(r,{slots:e}){sd({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},k(()=>!!e.title)),sd({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},k(()=>!!r.customClass));const t=oe(),i=oe(),n=bt("drawer"),{t:s}=Fh(),o=k(()=>r.direction==="rtl"||r.direction==="ltr"),a=k(()=>Tm(r.size));return{...WU(r,t),drawerRef:t,focusStartRef:i,isHorizontal:o,drawerSize:a,ns:n,t:s}}}),ZU=["aria-label","aria-labelledby","aria-describedby"],JU=["id"],QU=["aria-label"],e4=["id"];function t4(r,e,t,i,n,s){const o=Sl("close"),a=Sl("el-icon"),l=Sl("el-focus-trap"),u=Sl("el-overlay");return K(),Be(tb,{to:"body",disabled:!r.appendToBody},[Me(Po,{name:r.ns.b("fade"),onAfterEnter:r.afterEnter,onAfterLeave:r.afterLeave,onBeforeLeave:r.beforeLeave,persisted:""},{default:ke(()=>[mn(Me(u,{mask:r.modal,"overlay-class":r.modalClass,"z-index":r.zIndex,onClick:r.onModalClick},{default:ke(()=>[Me(l,{loop:"",trapped:r.visible,"focus-trap-el":r.drawerRef,"focus-start-el":r.focusStartRef,onReleaseRequested:r.onCloseRequested},{default:ke(()=>[ye("div",pi({ref:"drawerRef","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:r.titleId,"aria-describedby":r.bodyId},r.$attrs,{class:[r.ns.b(),r.direction,r.visible&&"open",r.customClass],style:r.isHorizontal?"width: "+r.drawerSize:"height: "+r.drawerSize,role:"dialog",onClick:e[1]||(e[1]=rs(()=>{},["stop"]))}),[ye("span",{ref:"focusStartRef",class:me(r.ns.e("sr-focus")),tabindex:"-1"},null,2),r.withHeader?(K(),ue("header",{key:0,class:me(r.ns.e("header"))},[r.$slots.title?tt(r.$slots,"title",{key:1},()=>[Pe(" DEPRECATED SLOT ")]):tt(r.$slots,"header",{key:0,close:r.handleClose,titleId:r.titleId,titleClass:r.ns.e("title")},()=>[r.$slots.title?Pe("v-if",!0):(K(),ue("span",{key:0,id:r.titleId,role:"heading",class:me(r.ns.e("title"))},Oi(r.title),11,JU))]),r.showClose?(K(),ue("button",{key:2,"aria-label":r.t("el.drawer.close"),class:me(r.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...h)=>r.handleClose&&r.handleClose(...h))},[Me(a,{class:me(r.ns.e("close"))},{default:ke(()=>[Me(o)]),_:1},8,["class"])],10,QU)):Pe("v-if",!0)],2)):Pe("v-if",!0),r.rendered?(K(),ue("div",{key:1,id:r.bodyId,class:me(r.ns.e("body"))},[tt(r.$slots,"default")],10,e4)):Pe("v-if",!0),r.$slots.footer?(K(),ue("div",{key:2,class:me(r.ns.e("footer"))},[tt(r.$slots,"footer")],2)):Pe("v-if",!0)],16,ZU)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[al,r.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var r4=Rt(KU,[["render",t4],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const i4=$i(r4),n4=pt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Za,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||vt(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),s4={[Rh]:(r,e)=>e!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[fs]:r=>vt(r)||Bi(r),[jt]:r=>vt(r)||Bi(r)},o4=["aria-label","onKeydown"],a4=["aria-label","onKeydown"],l4=Oe({name:"ElInputNumber"}),u4=Oe({...l4,props:n4,emits:s4,setup(r,{expose:e,emit:t}){const i=r,{t:n}=Fh(),s=bt("input-number"),o=oe(),a=bn({currentValue:i.modelValue,userInput:null}),{formItem:l}=kh(),u=k(()=>vt(i.modelValue)&&i.modelValue<=i.min),h=k(()=>vt(i.modelValue)&&i.modelValue>=i.max),c=k(()=>{const I=g(i.step);return ua(i.precision)?Math.max(g(i.modelValue),I):(I>i.precision,i.precision)}),f=k(()=>i.controls&&i.controlsPosition==="right"),d=Bh(),p=Nh(),m=k(()=>{if(a.userInput!==null)return a.userInput;let I=a.currentValue;if(Bi(I))return"";if(vt(I)){if(Number.isNaN(I))return"";ua(i.precision)||(I=I.toFixed(i.precision))}return I}),v=(I,D)=>{if(ua(D)&&(D=c.value),D===0)return Math.round(I);let N=String(I);const B=N.indexOf(".");if(B===-1||!N.replace(".","").split("")[B+D])return I;const ee=N.length;return N.charAt(ee-1)==="5"&&(N=`${N.slice(0,Math.max(0,ee-1))}6`),Number.parseFloat(Number(N).toFixed(D))},g=I=>{if(Bi(I))return 0;const D=I.toString(),N=D.indexOf(".");let B=0;return N!==-1&&(B=D.length-N-1),B},_=(I,D=1)=>vt(I)?v(I+i.step*D):a.currentValue,y=()=>{if(i.readonly||p.value||h.value)return;const I=Number(m.value)||0,D=_(I);S(D),t(fs,a.currentValue)},b=()=>{if(i.readonly||p.value||u.value)return;const I=Number(m.value)||0,D=_(I,-1);S(D),t(fs,a.currentValue)},T=(I,D)=>{const{max:N,min:B,step:L,precision:Q,stepStrictly:ee,valueOnClear:X}=i;N<B&&xm("InputNumber","min should not be greater than max.");let G=Number(I);if(Bi(I)||Number.isNaN(G))return null;if(I===""){if(X===null)return null;G=Ge(X)?{min:B,max:N}[X]:X}return ee&&(G=v(Math.round(G/L)*L,Q)),ua(Q)||(G=v(G,Q)),(G>N||G<B)&&(G=G>N?N:B,D&&t(jt,G)),G},S=(I,D=!0)=>{var N;const B=a.currentValue,L=T(I);if(!D){t(jt,L);return}B!==L&&(a.userInput=null,t(jt,L),t(Rh,L,B),i.validateEvent&&((N=l==null?void 0:l.validate)==null||N.call(l,"change").catch(Q=>void 0)),a.currentValue=L)},E=I=>{a.userInput=I;const D=I===""?null:Number(I);t(fs,D),S(D,!1)},C=I=>{const D=I!==""?Number(I):"";(vt(D)&&!Number.isNaN(D)||I==="")&&S(D),a.userInput=null},M=()=>{var I,D;(D=(I=o.value)==null?void 0:I.focus)==null||D.call(I)},A=()=>{var I,D;(D=(I=o.value)==null?void 0:I.blur)==null||D.call(I)},F=I=>{t("focus",I)},O=I=>{var D;t("blur",I),i.validateEvent&&((D=l==null?void 0:l.validate)==null||D.call(l,"blur").catch(N=>void 0))};return Ee(()=>i.modelValue,I=>{const D=T(a.userInput),N=T(I,!0);!vt(D)&&(!D||D!==N)&&(a.currentValue=N,a.userInput=null)},{immediate:!0}),Ot(()=>{var I;const{min:D,max:N,modelValue:B}=i,L=(I=o.value)==null?void 0:I.input;if(L.setAttribute("role","spinbutton"),Number.isFinite(N)?L.setAttribute("aria-valuemax",String(N)):L.removeAttribute("aria-valuemax"),Number.isFinite(D)?L.setAttribute("aria-valuemin",String(D)):L.removeAttribute("aria-valuemin"),L.setAttribute("aria-valuenow",String(a.currentValue)),L.setAttribute("aria-disabled",String(p.value)),!vt(B)&&B!=null){let Q=Number(B);Number.isNaN(Q)&&(Q=null),t(jt,Q)}}),H0(()=>{var I;const D=(I=o.value)==null?void 0:I.input;D==null||D.setAttribute("aria-valuenow",`${a.currentValue}`)}),e({focus:M,blur:A}),(I,D)=>(K(),ue("div",{class:me([x(s).b(),x(s).m(x(d)),x(s).is("disabled",x(p)),x(s).is("without-controls",!I.controls),x(s).is("controls-right",x(f))]),onDragstart:D[1]||(D[1]=rs(()=>{},["prevent"]))},[I.controls?mn((K(),ue("span",{key:0,role:"button","aria-label":x(n)("el.inputNumber.decrease"),class:me([x(s).e("decrease"),x(s).is("disabled",x(u))]),onKeydown:wl(b,["enter"])},[Me(x(br),null,{default:ke(()=>[x(f)?(K(),Be(x(kD),{key:0})):(K(),Be(x(BB),{key:1}))]),_:1})],42,o4)),[[x(ny),b]]):Pe("v-if",!0),I.controls?mn((K(),ue("span",{key:1,role:"button","aria-label":x(n)("el.inputNumber.increase"),class:me([x(s).e("increase"),x(s).is("disabled",x(h))]),onKeydown:wl(y,["enter"])},[Me(x(br),null,{default:ke(()=>[x(f)?(K(),Be(x(jD),{key:0})):(K(),Be(x(HB),{key:1}))]),_:1})],42,a4)),[[x(ny),y]]):Pe("v-if",!0),Me(x(ik),{id:I.id,ref_key:"input",ref:o,type:"number",step:I.step,"model-value":x(m),placeholder:I.placeholder,readonly:I.readonly,disabled:x(p),size:x(d),max:I.max,min:I.min,name:I.name,label:I.label,"validate-event":!1,onWheel:D[0]||(D[0]=rs(()=>{},["prevent"])),onKeydown:[wl(rs(y,["prevent"]),["up"]),wl(rs(b,["prevent"]),["down"])],onBlur:O,onFocus:F,onInput:E,onChange:C},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var h4=Rt(u4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const c4=$i(h4),j1=Symbol("sliderContextKey"),f4=pt({modelValue:{type:Ie([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Za,inputSize:Za,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ie(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ie(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:fl,default:"top"},marks:{type:Ie(Object)},validateEvent:{type:Boolean,default:!0}}),$c=r=>vt(r)||pe(r)&&r.every(vt),d4={[jt]:$c,[fs]:$c,[Rh]:$c},p4=(r,e,t)=>{const i=oe();return Ot(async()=>{r.range?(Array.isArray(r.modelValue)?(e.firstValue=Math.max(r.min,r.modelValue[0]),e.secondValue=Math.min(r.max,r.modelValue[1])):(e.firstValue=r.min,e.secondValue=r.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof r.modelValue!="number"||Number.isNaN(r.modelValue)?e.firstValue=r.min:e.firstValue=Math.min(r.max,Math.max(r.min,r.modelValue)),e.oldValue=e.firstValue),Js(window,"resize",t),await $t(),t()}),{sliderWrapper:i}},m4=r=>k(()=>r.marks?Object.keys(r.marks).map(Number.parseFloat).sort((t,i)=>t-i).filter(t=>t<=r.max&&t>=r.min).map(t=>({point:t,position:(t-r.min)*100/(r.max-r.min),mark:r.marks[t]})):[]),v4=(r,e,t)=>{const{form:i,formItem:n}=kh(),s=Ys(),o=oe(),a=oe(),l={firstButton:o,secondButton:a},u=k(()=>r.disabled||(i==null?void 0:i.disabled)||!1),h=k(()=>Math.min(e.firstValue,e.secondValue)),c=k(()=>Math.max(e.firstValue,e.secondValue)),f=k(()=>r.range?`${100*(c.value-h.value)/(r.max-r.min)}%`:`${100*(e.firstValue-r.min)/(r.max-r.min)}%`),d=k(()=>r.range?`${100*(h.value-r.min)/(r.max-r.min)}%`:"0%"),p=k(()=>r.vertical?{height:r.height}:{}),m=k(()=>r.vertical?{height:f.value,bottom:d.value}:{width:f.value,left:d.value}),v=()=>{s.value&&(e.sliderSize=s.value[`client${r.vertical?"Height":"Width"}`])},g=F=>{const O=r.min+F*(r.max-r.min)/100;if(!r.range)return o;let I;return Math.abs(h.value-O)<Math.abs(c.value-O)?I=e.firstValue<e.secondValue?"firstButton":"secondButton":I=e.firstValue>e.secondValue?"firstButton":"secondButton",l[I]},_=F=>{const O=g(F);return O.value.setPosition(F),O},y=F=>{e.firstValue=F,T(r.range?[h.value,c.value]:F)},b=F=>{e.secondValue=F,r.range&&T([h.value,c.value])},T=F=>{t(jt,F),t(fs,F)},S=async()=>{await $t(),t(Rh,r.range?[h.value,c.value]:r.modelValue)},E=F=>{var O,I,D,N,B,L;if(u.value||e.dragging)return;v();let Q=0;if(r.vertical){const ee=(D=(I=(O=F.touches)==null?void 0:O.item(0))==null?void 0:I.clientY)!=null?D:F.clientY;Q=(s.value.getBoundingClientRect().bottom-ee)/e.sliderSize*100}else{const ee=(L=(B=(N=F.touches)==null?void 0:N.item(0))==null?void 0:B.clientX)!=null?L:F.clientX,X=s.value.getBoundingClientRect().left;Q=(ee-X)/e.sliderSize*100}if(!(Q<0||Q>100))return _(Q)};return{elFormItem:n,slider:s,firstButton:o,secondButton:a,sliderDisabled:u,minValue:h,maxValue:c,runwayStyle:p,barStyle:m,resetSize:v,setPosition:_,emitChange:S,onSliderWrapperPrevent:F=>{var O,I;((O=l.firstButton.value)!=null&&O.dragging||(I=l.secondButton.value)!=null&&I.dragging)&&F.preventDefault()},onSliderClick:F=>{E(F)&&S()},onSliderDown:async F=>{const O=E(F);O&&(await $t(),O.value.onButtonDown(F))},setFirstValue:y,setSecondValue:b}},{left:g4,down:_4,right:y4,up:b4,home:x4,end:T4,pageUp:S4,pageDown:E4}=ho,w4=(r,e,t)=>{const i=oe(),n=oe(!1),s=k(()=>e.value instanceof Function),o=k(()=>s.value&&e.value(r.modelValue)||r.modelValue),a=P_(()=>{t.value&&(n.value=!0)},50),l=P_(()=>{t.value&&(n.value=!1)},50);return{tooltip:i,tooltipVisible:n,formatValue:o,displayTooltip:a,hideTooltip:l}},P4=(r,e,t)=>{const{disabled:i,min:n,max:s,step:o,showTooltip:a,precision:l,sliderSize:u,formatTooltip:h,emitChange:c,resetSize:f,updateDragging:d}=rt(j1),{tooltip:p,tooltipVisible:m,formatValue:v,displayTooltip:g,hideTooltip:_}=w4(r,h,a),y=oe(),b=k(()=>`${(r.modelValue-n.value)/(s.value-n.value)*100}%`),T=k(()=>r.vertical?{bottom:b.value}:{left:b.value}),S=()=>{e.hovering=!0,g()},E=()=>{e.hovering=!1,e.dragging||_()},C=W=>{i.value||(W.preventDefault(),Q(W),window.addEventListener("mousemove",ee),window.addEventListener("touchmove",ee),window.addEventListener("mouseup",X),window.addEventListener("touchend",X),window.addEventListener("contextmenu",X),y.value.focus())},M=W=>{i.value||(e.newPosition=Number.parseFloat(b.value)+W/(s.value-n.value)*100,G(e.newPosition),c())},A=()=>{M(-o.value)},F=()=>{M(o.value)},O=()=>{M(-o.value*4)},I=()=>{M(o.value*4)},D=()=>{i.value||(G(0),c())},N=()=>{i.value||(G(100),c())},B=W=>{let se=!0;[g4,_4].includes(W.key)?A():[y4,b4].includes(W.key)?F():W.key===x4?D():W.key===T4?N():W.key===E4?O():W.key===S4?I():se=!1,se&&W.preventDefault()},L=W=>{let se,he;return W.type.startsWith("touch")?(he=W.touches[0].clientY,se=W.touches[0].clientX):(he=W.clientY,se=W.clientX),{clientX:se,clientY:he}},Q=W=>{e.dragging=!0,e.isClick=!0;const{clientX:se,clientY:he}=L(W);r.vertical?e.startY=he:e.startX=se,e.startPosition=Number.parseFloat(b.value),e.newPosition=e.startPosition},ee=W=>{if(e.dragging){e.isClick=!1,g(),f();let se;const{clientX:he,clientY:xe}=L(W);r.vertical?(e.currentY=xe,se=(e.startY-e.currentY)/u.value*100):(e.currentX=he,se=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+se,G(e.newPosition)}},X=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||_(),e.isClick||G(e.newPosition),c()},0),window.removeEventListener("mousemove",ee),window.removeEventListener("touchmove",ee),window.removeEventListener("mouseup",X),window.removeEventListener("touchend",X),window.removeEventListener("contextmenu",X))},G=async W=>{if(W===null||Number.isNaN(+W))return;W<0?W=0:W>100&&(W=100);const se=100/((s.value-n.value)/o.value);let xe=Math.round(W/se)*se*(s.value-n.value)*.01+n.value;xe=Number.parseFloat(xe.toFixed(l.value)),xe!==r.modelValue&&t(jt,xe),!e.dragging&&r.modelValue!==e.oldValue&&(e.oldValue=r.modelValue),await $t(),e.dragging&&g(),p.value.updatePopper()};return Ee(()=>e.dragging,W=>{d(W)}),{disabled:i,button:y,tooltip:p,tooltipVisible:m,showTooltip:a,wrapperStyle:T,formatValue:v,handleMouseEnter:S,handleMouseLeave:E,onButtonDown:C,onKeyDown:B,setPosition:G}},C4=(r,e,t,i)=>({stops:k(()=>{if(!r.showStops||r.min>r.max)return[];if(r.step===0)return[];const o=(r.max-r.min)/r.step,a=100*r.step/(r.max-r.min),l=Array.from({length:o-1}).map((u,h)=>(h+1)*a);return r.range?l.filter(u=>u<100*(t.value-r.min)/(r.max-r.min)||u>100*(i.value-r.min)/(r.max-r.min)):l.filter(u=>u>100*(e.firstValue-r.min)/(r.max-r.min))}),getStopStyle:o=>r.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),M4=(r,e,t,i,n,s)=>{const o=u=>{n(jt,u),n(fs,u)},a=()=>r.range?![t.value,i.value].every((u,h)=>u===e.oldValue[h]):r.modelValue!==e.oldValue,l=()=>{var u,h;r.min>r.max&&xm("Slider","min should not be greater than max.");const c=r.modelValue;r.range&&Array.isArray(c)?c[1]<r.min?o([r.min,r.min]):c[0]>r.max?o([r.max,r.max]):c[0]<r.min?o([r.min,c[1]]):c[1]>r.max?o([c[0],r.max]):(e.firstValue=c[0],e.secondValue=c[1],a()&&(r.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(f=>void 0)),e.oldValue=c.slice())):!r.range&&typeof c=="number"&&!Number.isNaN(c)&&(c<r.min?o(r.min):c>r.max?o(r.max):(e.firstValue=c,a()&&(r.validateEvent&&((h=s==null?void 0:s.validate)==null||h.call(s,"change").catch(f=>void 0)),e.oldValue=c)))};l(),Ee(()=>e.dragging,u=>{u||l()}),Ee(()=>r.modelValue,(u,h)=>{e.dragging||Array.isArray(u)&&Array.isArray(h)&&u.every((c,f)=>c===h[f])&&e.firstValue===u[0]&&e.secondValue===u[1]||l()},{deep:!0}),Ee(()=>[r.min,r.max],()=>{l()})},I4=pt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:fl,default:"top"}}),A4={[jt]:r=>vt(r)},O4=["tabindex"],R4=Oe({name:"ElSliderButton"}),F4=Oe({...R4,props:I4,emits:A4,setup(r,{expose:e,emit:t}){const i=r,n=bt("slider"),s=bn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:o,button:a,tooltip:l,showTooltip:u,tooltipVisible:h,wrapperStyle:c,formatValue:f,handleMouseEnter:d,handleMouseLeave:p,onButtonDown:m,onKeyDown:v,setPosition:g}=P4(i,s,t),{hovering:_,dragging:y}=yf(s);return e({onButtonDown:m,onKeyDown:v,setPosition:g,hovering:_,dragging:y}),(b,T)=>(K(),ue("div",{ref_key:"button",ref:a,class:me([x(n).e("button-wrapper"),{hover:x(_),dragging:x(y)}]),style:yr(x(c)),tabindex:x(o)?-1:0,onMouseenter:T[0]||(T[0]=(...S)=>x(d)&&x(d)(...S)),onMouseleave:T[1]||(T[1]=(...S)=>x(p)&&x(p)(...S)),onMousedown:T[2]||(T[2]=(...S)=>x(m)&&x(m)(...S)),onTouchstart:T[3]||(T[3]=(...S)=>x(m)&&x(m)(...S)),onFocus:T[4]||(T[4]=(...S)=>x(d)&&x(d)(...S)),onBlur:T[5]||(T[5]=(...S)=>x(p)&&x(p)(...S)),onKeydown:T[6]||(T[6]=(...S)=>x(v)&&x(v)(...S))},[Me(x(G1),{ref_key:"tooltip",ref:l,visible:x(h),placement:b.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":b.tooltipClass,disabled:!x(u),persistent:""},{content:ke(()=>[ye("span",null,Oi(x(f)),1)]),default:ke(()=>[ye("div",{class:me([x(n).e("button"),{hover:x(_),dragging:x(y)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,O4))}});var sy=Rt(F4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const L4=pt({mark:{type:Ie([String,Object]),default:void 0}});var D4=Oe({name:"ElSliderMarker",props:L4,setup(r){const e=bt("slider"),t=k(()=>Ge(r.mark)?r.mark:r.mark.label),i=k(()=>Ge(r.mark)?void 0:r.mark.style);return()=>_p("div",{class:e.e("marks-text"),style:i.value},t.value)}});const B4=["id","role","aria-label","aria-labelledby"],N4={key:1},k4=Oe({name:"ElSlider"}),U4=Oe({...k4,props:f4,emits:d4,setup(r,{expose:e,emit:t}){const i=r,n=bt("slider"),{t:s}=Fh(),o=bn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:u,secondButton:h,sliderDisabled:c,minValue:f,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,emitChange:g,onSliderWrapperPrevent:_,onSliderClick:y,onSliderDown:b,setFirstValue:T,setSecondValue:S}=v4(i,o,t),{stops:E,getStopStyle:C}=C4(i,o,f,d),{inputId:M,isLabeledByFormItem:A}=I1(i,{formItemContext:a}),F=Bh(),O=k(()=>i.inputSize||F.value),I=k(()=>i.label||s("el.slider.defaultLabel",{min:i.min,max:i.max})),D=k(()=>i.range?i.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):I.value),N=k(()=>i.formatValueText?i.formatValueText(W.value):`${W.value}`),B=k(()=>i.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),L=k(()=>i.formatValueText?i.formatValueText(se.value):`${se.value}`),Q=k(()=>[n.b(),n.m(F.value),n.is("vertical",i.vertical),{[n.m("with-input")]:i.showInput}]),ee=m4(i);M4(i,o,f,d,t,a);const X=k(()=>{const te=[i.min,i.max,i.step].map(ge=>{const Ce=`${ge}`.split(".")[1];return Ce?Ce.length:0});return Math.max.apply(null,te)}),{sliderWrapper:G}=p4(i,o,v),{firstValue:W,secondValue:se,sliderSize:he}=yf(o),xe=te=>{o.dragging=te};return vi(j1,{...yf(i),sliderSize:he,disabled:c,precision:X,emitChange:g,resetSize:v,updateDragging:xe}),e({onSliderClick:y}),(te,ge)=>{var Ce,$e;return K(),ue("div",{id:te.range?x(M):void 0,ref_key:"sliderWrapper",ref:G,class:me(x(Q)),role:te.range?"group":void 0,"aria-label":te.range&&!x(A)?x(I):void 0,"aria-labelledby":te.range&&x(A)?(Ce=x(a))==null?void 0:Ce.labelId:void 0,onTouchstart:ge[2]||(ge[2]=(...Te)=>x(_)&&x(_)(...Te)),onTouchmove:ge[3]||(ge[3]=(...Te)=>x(_)&&x(_)(...Te))},[ye("div",{ref_key:"slider",ref:l,class:me([x(n).e("runway"),{"show-input":te.showInput&&!te.range},x(n).is("disabled",x(c))]),style:yr(x(p)),onMousedown:ge[0]||(ge[0]=(...Te)=>x(b)&&x(b)(...Te)),onTouchstart:ge[1]||(ge[1]=(...Te)=>x(b)&&x(b)(...Te))},[ye("div",{class:me(x(n).e("bar")),style:yr(x(m))},null,6),Me(sy,{id:te.range?void 0:x(M),ref_key:"firstButton",ref:u,"model-value":x(W),vertical:te.vertical,"tooltip-class":te.tooltipClass,placement:te.placement,role:"slider","aria-label":te.range||!x(A)?x(D):void 0,"aria-labelledby":!te.range&&x(A)?($e=x(a))==null?void 0:$e.labelId:void 0,"aria-valuemin":te.min,"aria-valuemax":te.range?x(se):te.max,"aria-valuenow":x(W),"aria-valuetext":x(N),"aria-orientation":te.vertical?"vertical":"horizontal","aria-disabled":x(c),"onUpdate:modelValue":x(T)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),te.range?(K(),Be(sy,{key:0,ref_key:"secondButton",ref:h,"model-value":x(se),vertical:te.vertical,"tooltip-class":te.tooltipClass,placement:te.placement,role:"slider","aria-label":x(B),"aria-valuemin":x(W),"aria-valuemax":te.max,"aria-valuenow":x(se),"aria-valuetext":x(L),"aria-orientation":te.vertical?"vertical":"horizontal","aria-disabled":x(c),"onUpdate:modelValue":x(S)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Pe("v-if",!0),te.showStops?(K(),ue("div",N4,[(K(!0),ue(ot,null,tc(x(E),(Te,_e)=>(K(),ue("div",{key:_e,class:me(x(n).e("stop")),style:yr(x(C)(Te))},null,6))),128))])):Pe("v-if",!0),x(ee).length>0?(K(),ue(ot,{key:2},[ye("div",null,[(K(!0),ue(ot,null,tc(x(ee),(Te,_e)=>(K(),ue("div",{key:_e,style:yr(x(C)(Te.position)),class:me([x(n).e("stop"),x(n).e("marks-stop")])},null,6))),128))]),ye("div",{class:me(x(n).e("marks"))},[(K(!0),ue(ot,null,tc(x(ee),(Te,_e)=>(K(),Be(x(D4),{key:_e,mark:Te.mark,style:yr(x(C)(Te.position))},null,8,["mark","style"]))),128))],2)],64)):Pe("v-if",!0)],38),te.showInput&&!te.range?(K(),Be(x(c4),{key:0,ref:"input","model-value":x(W),class:me(x(n).e("input")),step:te.step,disabled:x(c),controls:te.showInputControls,min:te.min,max:te.max,debounce:te.debounce,size:x(O),"onUpdate:modelValue":x(T),onChange:x(g)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Pe("v-if",!0)],42,B4)}}});var G4=Rt(U4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const V4=$i(G4),X1=["success","info","warning","error"],zt=o1({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:At?document.body:void 0}),H4=pt({customClass:{type:String,default:zt.customClass},center:{type:Boolean,default:zt.center},dangerouslyUseHTMLString:{type:Boolean,default:zt.dangerouslyUseHTMLString},duration:{type:Number,default:zt.duration},icon:{type:uo,default:zt.icon},id:{type:String,default:zt.id},message:{type:Ie([String,Object,Function]),default:zt.message},onClose:{type:Ie(Function),required:!1},showClose:{type:Boolean,default:zt.showClose},type:{type:String,values:X1,default:zt.type},offset:{type:Number,default:zt.offset},zIndex:{type:Number,default:zt.zIndex},grouping:{type:Boolean,default:zt.grouping},repeatNum:{type:Number,default:zt.repeatNum}}),$4={destroy:()=>!0},$r=b0([]),j4=r=>{const e=$r.findIndex(n=>n.id===r),t=$r[e];let i;return e>0&&(i=$r[e-1]),{current:t,prev:i}},X4=r=>{const{prev:e}=j4(r);return e?e.vm.exposed.bottom.value:0},z4=(r,e)=>$r.findIndex(i=>i.id===r)>0?20:e,W4=["id"],Y4=["innerHTML"],q4=Oe({name:"ElMessage"}),K4=Oe({...q4,props:H4,emits:$4,setup(r,{expose:e}){const t=r,{Close:i}=oN,{ns:n,zIndex:s}=U3("message"),{currentZIndex:o,nextZIndex:a}=s,l=oe(),u=oe(!1),h=oe(0);let c;const f=k(()=>t.type?t.type==="error"?"danger":t.type:"info"),d=k(()=>{const E=t.type;return{[n.bm("icon",E)]:E&&I_[E]}}),p=k(()=>t.icon||I_[t.type]||""),m=k(()=>X4(t.id)),v=k(()=>z4(t.id,t.offset)+m.value),g=k(()=>h.value+v.value),_=k(()=>({top:`${v.value}px`,zIndex:o.value}));function y(){t.duration!==0&&({stop:c}=nd(()=>{T()},t.duration))}function b(){c==null||c()}function T(){u.value=!1}function S({code:E}){E===ho.esc&&T()}return Ot(()=>{y(),a(),u.value=!0}),Ee(()=>t.repeatNum,()=>{b(),y()}),Js(document,"keydown",S),zx(l,()=>{h.value=l.value.getBoundingClientRect().height}),e({visible:u,bottom:g,close:T}),(E,C)=>(K(),Be(Po,{name:x(n).b("fade"),onBeforeLeave:E.onClose,onAfterLeave:C[0]||(C[0]=M=>E.$emit("destroy")),persisted:""},{default:ke(()=>[mn(ye("div",{id:E.id,ref_key:"messageRef",ref:l,class:me([x(n).b(),{[x(n).m(E.type)]:E.type&&!E.icon},x(n).is("center",E.center),x(n).is("closable",E.showClose),E.customClass]),style:yr(x(_)),role:"alert",onMouseenter:b,onMouseleave:y},[E.repeatNum>1?(K(),Be(x(cU),{key:0,value:E.repeatNum,type:x(f),class:me(x(n).e("badge"))},null,8,["value","type","class"])):Pe("v-if",!0),x(p)?(K(),Be(x(br),{key:1,class:me([x(n).e("icon"),x(d)])},{default:ke(()=>[(K(),Be(nn(x(p))))]),_:1},8,["class"])):Pe("v-if",!0),tt(E.$slots,"default",{},()=>[E.dangerouslyUseHTMLString?(K(),ue(ot,{key:1},[Pe(" Caution here, message could've been compromised, never use user's input as message "),ye("p",{class:me(x(n).e("content")),innerHTML:E.message},null,10,Y4)],2112)):(K(),ue("p",{key:0,class:me(x(n).e("content"))},Oi(E.message),3))]),E.showClose?(K(),Be(x(br),{key:2,class:me(x(n).e("closeBtn")),onClick:rs(T,["stop"])},{default:ke(()=>[Me(x(i))]),_:1},8,["class","onClick"])):Pe("v-if",!0)],46,W4),[[al,u.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Z4=Rt(K4,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let J4=1;const z1=r=>{const e=!r||Ge(r)||ro(r)||de(r)?{message:r}:r,t={...zt,...e};if(!t.appendTo)t.appendTo=document.body;else if(Ge(t.appendTo)){let i=document.querySelector(t.appendTo);Ya(i)||(i=document.body),t.appendTo=i}return t},Q4=r=>{const e=$r.indexOf(r);if(e===-1)return;$r.splice(e,1);const{handler:t}=r;t.close()},e8=({appendTo:r,...e},t)=>{const i=`message_${J4++}`,n=e.onClose,s=document.createElement("div"),o={...e,id:i,onClose:()=>{n==null||n(),Q4(h)},onDestroy:()=>{Jv(null,s)}},a=Me(Z4,o,de(o.message)||ro(o.message)?{default:de(o.message)?o.message:()=>o.message}:null);a.appContext=t||go._context,Jv(a,s),r.appendChild(s.firstElementChild);const l=a.component,h={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return h},go=(r={},e)=>{if(!At)return{close:()=>{}};if(vt(j_.max)&&$r.length>=j_.max)return{close:()=>{}};const t=z1(r);if(t.grouping&&$r.length){const n=$r.find(({vnode:s})=>{var o;return((o=s.props)==null?void 0:o.message)===t.message});if(n)return n.props.repeatNum+=1,n.props.type=t.type,n.handler}const i=e8(t,e);return $r.push(i),i.handler};X1.forEach(r=>{go[r]=(e={},t)=>{const i=z1(e);return go({...i,type:r},t)}});function t8(r){for(const e of $r)(!r||r===e.props.type)&&e.handler.close()}go.closeAll=t8;go._context=null;const km=lN(go,"$message");function r8(){return W1().__VUE_DEVTOOLS_GLOBAL_HOOK__}function W1(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const i8=typeof Proxy=="function",n8="devtools-plugin:setup",s8="plugin:settings:set";let Rs,ud;function o8(){var r;return Rs!==void 0||(typeof window<"u"&&window.performance?(Rs=!0,ud=window.performance):typeof global<"u"&&(!((r=global.perf_hooks)===null||r===void 0)&&r.performance)?(Rs=!0,ud=global.perf_hooks.performance):Rs=!1),Rs}function a8(){return o8()?ud.now():Date.now()}class l8{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const n=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(n),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}s=o},now(){return a8()}},t&&t.on(s8,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function u8(r,e){const t=r,i=W1(),n=r8(),s=i8&&t.enableEarlyProxy;if(n&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))n.emit(n8,r,e);else{const o=s?new l8(t,n):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Y1="store";function Gh(r){return r===void 0&&(r=null),rt(r!==null?r:Y1)}function Oo(r,e){Object.keys(r).forEach(function(t){return e(r[t],t)})}function h8(r){return r!==null&&typeof r=="object"}function c8(r){return r&&typeof r.then=="function"}function f8(r,e){return function(){return r(e)}}function q1(r,e,t){return e.indexOf(r)<0&&(t&&t.prepend?e.unshift(r):e.push(r)),function(){var i=e.indexOf(r);i>-1&&e.splice(i,1)}}function K1(r,e){r._actions=Object.create(null),r._mutations=Object.create(null),r._wrappedGetters=Object.create(null),r._modulesNamespaceMap=Object.create(null);var t=r.state;Vh(r,t,[],r._modules.root,!0),Um(r,t,e)}function Um(r,e,t){var i=r._state,n=r._scope;r.getters={},r._makeLocalGettersCache=Object.create(null);var s=r._wrappedGetters,o={},a={},l=QS(!0);l.run(function(){Oo(s,function(u,h){o[h]=f8(u,r),a[h]=k(function(){return o[h]()}),Object.defineProperty(r.getters,h,{get:function(){return a[h].value},enumerable:!0})})}),r._state=bn({data:e}),r._scope=l,r.strict&&g8(r),i&&t&&r._withCommit(function(){i.data=null}),n&&n.stop()}function Vh(r,e,t,i,n){var s=!t.length,o=r._modules.getNamespace(t);if(i.namespaced&&(r._modulesNamespaceMap[o],r._modulesNamespaceMap[o]=i),!s&&!n){var a=Gm(e,t.slice(0,-1)),l=t[t.length-1];r._withCommit(function(){a[l]=i.state})}var u=i.context=d8(r,o,t);i.forEachMutation(function(h,c){var f=o+c;p8(r,f,h,u)}),i.forEachAction(function(h,c){var f=h.root?c:o+c,d=h.handler||h;m8(r,f,d,u)}),i.forEachGetter(function(h,c){var f=o+c;v8(r,f,h,u)}),i.forEachChild(function(h,c){Vh(r,e,t.concat(c),h,n)})}function d8(r,e,t){var i=e==="",n={dispatch:i?r.dispatch:function(s,o,a){var l=qu(s,o,a),u=l.payload,h=l.options,c=l.type;return(!h||!h.root)&&(c=e+c),r.dispatch(c,u)},commit:i?r.commit:function(s,o,a){var l=qu(s,o,a),u=l.payload,h=l.options,c=l.type;(!h||!h.root)&&(c=e+c),r.commit(c,u,h)}};return Object.defineProperties(n,{getters:{get:i?function(){return r.getters}:function(){return Z1(r,e)}},state:{get:function(){return Gm(r.state,t)}}}),n}function Z1(r,e){if(!r._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(r.getters).forEach(function(n){if(n.slice(0,i)===e){var s=n.slice(i);Object.defineProperty(t,s,{get:function(){return r.getters[n]},enumerable:!0})}}),r._makeLocalGettersCache[e]=t}return r._makeLocalGettersCache[e]}function p8(r,e,t,i){var n=r._mutations[e]||(r._mutations[e]=[]);n.push(function(o){t.call(r,i.state,o)})}function m8(r,e,t,i){var n=r._actions[e]||(r._actions[e]=[]);n.push(function(o){var a=t.call(r,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:r.getters,rootState:r.state},o);return c8(a)||(a=Promise.resolve(a)),r._devtoolHook?a.catch(function(l){throw r._devtoolHook.emit("vuex:error",l),l}):a})}function v8(r,e,t,i){r._wrappedGetters[e]||(r._wrappedGetters[e]=function(s){return t(i.state,i.getters,s.state,s.getters)})}function g8(r){Ee(function(){return r._state.data},function(){},{deep:!0,flush:"sync"})}function Gm(r,e){return e.reduce(function(t,i){return t[i]},r)}function qu(r,e,t){return h8(r)&&r.type&&(t=e,e=r,r=r.type),{type:r,payload:e,options:t}}var _8="vuex bindings",oy="vuex:mutations",jc="vuex:actions",Fs="vuex",y8=0;function b8(r,e){u8({id:"org.vuejs.vuex",app:r,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[_8]},function(t){t.addTimelineLayer({id:oy,label:"Vuex Mutations",color:ay}),t.addTimelineLayer({id:jc,label:"Vuex Actions",color:ay}),t.addInspector({id:Fs,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===r&&i.inspectorId===Fs)if(i.filter){var n=[];tT(n,e._modules.root,i.filter,""),i.rootNodes=n}else i.rootNodes=[eT(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===r&&i.inspectorId===Fs){var n=i.nodeId;Z1(e,n),i.state=S8(w8(e._modules,n),n==="root"?e.getters:e._makeLocalGettersCache,n)}}),t.on.editInspectorState(function(i){if(i.app===r&&i.inspectorId===Fs){var n=i.nodeId,s=i.path;n!=="root"&&(s=n.split("/").filter(Boolean).concat(s)),e._withCommit(function(){i.set(e._state.data,s,i.state.value)})}}),e.subscribe(function(i,n){var s={};i.payload&&(s.payload=i.payload),s.state=n,t.notifyComponentUpdate(),t.sendInspectorTree(Fs),t.sendInspectorState(Fs),t.addTimelineEvent({layerId:oy,event:{time:Date.now(),title:i.type,data:s}})}),e.subscribeAction({before:function(i,n){var s={};i.payload&&(s.payload=i.payload),i._id=y8++,i._time=Date.now(),s.state=n,t.addTimelineEvent({layerId:jc,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,n){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=n,t.addTimelineEvent({layerId:jc,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var ay=8702998,x8=6710886,T8=16777215,J1={label:"namespaced",textColor:T8,backgroundColor:x8};function Q1(r){return r&&r!=="root"?r.split("/").slice(-2,-1)[0]:"Root"}function eT(r,e){return{id:e||"root",label:Q1(e),tags:r.namespaced?[J1]:[],children:Object.keys(r._children).map(function(t){return eT(r._children[t],e+t+"/")})}}function tT(r,e,t,i){i.includes(t)&&r.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[J1]:[]}),Object.keys(e._children).forEach(function(n){tT(r,e._children[n],t,i+n+"/")})}function S8(r,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),n={state:Object.keys(r.state).map(function(o){return{key:o,editable:!0,value:r.state[o]}})};if(i.length){var s=E8(e);n.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?Q1(o):o,editable:!1,value:hd(function(){return s[o]})}})}return n}function E8(r){var e={};return Object.keys(r).forEach(function(t){var i=t.split("/");if(i.length>1){var n=e,s=i.pop();i.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[s]=hd(function(){return r[t]})}else e[t]=hd(function(){return r[t]})}),e}function w8(r,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,n,s){var o=i[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+e+'".');return s===t.length-1?o:o._children},e==="root"?r:r.root._children)}function hd(r){try{return r()}catch(e){return e}}var Zr=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},rT={namespaced:{configurable:!0}};rT.namespaced.get=function(){return!!this._rawModule.namespaced};Zr.prototype.addChild=function(e,t){this._children[e]=t};Zr.prototype.removeChild=function(e){delete this._children[e]};Zr.prototype.getChild=function(e){return this._children[e]};Zr.prototype.hasChild=function(e){return e in this._children};Zr.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Zr.prototype.forEachChild=function(e){Oo(this._children,e)};Zr.prototype.forEachGetter=function(e){this._rawModule.getters&&Oo(this._rawModule.getters,e)};Zr.prototype.forEachAction=function(e){this._rawModule.actions&&Oo(this._rawModule.actions,e)};Zr.prototype.forEachMutation=function(e){this._rawModule.mutations&&Oo(this._rawModule.mutations,e)};Object.defineProperties(Zr.prototype,rT);var Ss=function(e){this.register([],e,!1)};Ss.prototype.get=function(e){return e.reduce(function(t,i){return t.getChild(i)},this.root)};Ss.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(i,n){return t=t.getChild(n),i+(t.namespaced?n+"/":"")},"")};Ss.prototype.update=function(e){iT([],this.root,e)};Ss.prototype.register=function(e,t,i){var n=this;i===void 0&&(i=!0);var s=new Zr(t,i);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}t.modules&&Oo(t.modules,function(a,l){n.register(e.concat(l),a,i)})};Ss.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],n=t.getChild(i);n&&n.runtime&&t.removeChild(i)};Ss.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return t?t.hasChild(i):!1};function iT(r,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;iT(r.concat(i),e.getChild(i),t.modules[i])}}function P8(r){return new rr(r)}var rr=function(e){var t=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var n=e.strict;n===void 0&&(n=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ss(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,a=this,l=a.dispatch,u=a.commit;this.dispatch=function(f,d){return l.call(o,f,d)},this.commit=function(f,d,p){return u.call(o,f,d,p)},this.strict=n;var h=this._modules.root.state;Vh(this,h,[],this._modules.root),Um(this,h),i.forEach(function(c){return c(t)})},Vm={state:{configurable:!0}};rr.prototype.install=function(e,t){e.provide(t||Y1,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&b8(e,this)};Vm.state.get=function(){return this._state.data};Vm.state.set=function(r){};rr.prototype.commit=function(e,t,i){var n=this,s=qu(e,t,i),o=s.type,a=s.payload,l={type:o,payload:a},u=this._mutations[o];u&&(this._withCommit(function(){u.forEach(function(c){c(a)})}),this._subscribers.slice().forEach(function(h){return h(l,n.state)}))};rr.prototype.dispatch=function(e,t){var i=this,n=qu(e,t),s=n.type,o=n.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,i.state)})}catch{}var u=l.length>1?Promise.all(l.map(function(h){return h(o)})):l[0](o);return new Promise(function(h,c){u.then(function(f){try{i._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,i.state)})}catch{}h(f)},function(f){try{i._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,i.state,f)})}catch{}c(f)})})}};rr.prototype.subscribe=function(e,t){return q1(e,this._subscribers,t)};rr.prototype.subscribeAction=function(e,t){var i=typeof e=="function"?{before:e}:e;return q1(i,this._actionSubscribers,t)};rr.prototype.watch=function(e,t,i){var n=this;return Ee(function(){return e(n.state,n.getters)},t,Object.assign({},i))};rr.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};rr.prototype.registerModule=function(e,t,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),Vh(this,this.state,e,this._modules.get(e),i.preserveState),Um(this,this.state)};rr.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=Gm(t.state,e.slice(0,-1));delete i[e[e.length-1]]}),K1(this)};rr.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};rr.prototype.hotUpdate=function(e){this._modules.update(e),K1(this,!0)};rr.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(rr.prototype,Vm);const C8=ye("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ea893728":""},[ye("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0z"})],-1),M8=[C8],I8=ye("h4",{style:{"margin-bottom":"-20px","margin-top":"-20px"}},"",-1),A8={class:"button"},O8=ye("div",{style:{"margin-bottom":"30px"}},null,-1),R8={style:{display:"flex","justify-content":"center","align-items":"baseline"}},F8=ye("h4",null,"",-1),L8=ye("br",null,null,-1),D8={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ea893728":"",style:{width:"1em",height:"1em"}},B8=ye("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),N8=[B8],k8={class:"slider-demo-block"},U8={__name:"Drawer",setup(r){const e=oe(!1);oe("#409eff"),oe(null);const t=Gh();function i(){e.value=!0}const n=k(()=>t.state.live2d),s=k(()=>t.state.percentage),o=k(()=>t.state.scale);return Ee(s,(a,l)=>{window.localStorage.setItem("percentage",parseFloat(a)),console.log(a)}),Ee(o,(a,l)=>{window.localStorage.setItem("scale",parseFloat(a)),console.log(a)}),Ot(()=>{document.addEventListener("keydown",a=>{a.code==="ArrowLeft"&&(e.value=!1),a.code==="ArrowRight"&&(e.value=!0),a.code==="ArrowUp"&&t.dispatch("amplify"),a.code==="ArrowDown"&&t.dispatch("reduce")})}),(a,l)=>{const u=BU,h=G1,c=V4,f=i4;return K(),ue(ot,null,[ye("div",{class:"show_setting",onClick:i},M8),Me(f,{modelValue:e.value,"onUpdate:modelValue":l[3]||(l[3]=d=>e.value=d),direction:"ltr"},{default:ke(()=>[I8,ye("div",A8,[Me(u,{onClick:l[0]||(l[0]=d=>x(t).dispatch("amplify",n.value)),type:"primary",round:"",style:{height:"7vh",width:"8vw","font-size":"2vh","line-height":"0vh","border-radius":"3.5vh"}},{default:ke(()=>[ia("")]),_:1}),Me(u,{onClick:l[1]||(l[1]=d=>x(t).dispatch("reduce",n.value)),type:"primary",round:"",style:{height:"7vh",width:"8vw","font-size":"2vh","line-height":"0vh","border-radius":"3.5vh"}},{default:ke(()=>[ia("")]),_:1})]),O8,ye("div",R8,[F8,Me(h,{placement:"top"},{content:ke(()=>[ia(""),L8,ia("")]),default:ke(()=>[(K(),ue("svg",D8,N8))]),_:1})]),ye("div",k8,[Me(c,{modelValue:x(t).state.percentage,"onUpdate:modelValue":l[2]||(l[2]=d=>x(t).state.percentage=d),"show-input":"","input-size":"small"},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}};function nT(r,e){return function(){return r.apply(e,arguments)}}const{toString:G8}=Object.prototype,{getPrototypeOf:Hm}=Object,Hh=(r=>e=>{const t=G8.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ti=r=>(r=r.toLowerCase(),e=>Hh(e)===r),$h=r=>e=>typeof e===r,{isArray:Ro}=Array,Ja=$h("undefined");function V8(r){return r!==null&&!Ja(r)&&r.constructor!==null&&!Ja(r.constructor)&&Pr(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const sT=Ti("ArrayBuffer");function H8(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&sT(r.buffer),e}const $8=$h("string"),Pr=$h("function"),oT=$h("number"),jh=r=>r!==null&&typeof r=="object",j8=r=>r===!0||r===!1,yu=r=>{if(Hh(r)!=="object")return!1;const e=Hm(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},X8=Ti("Date"),z8=Ti("File"),W8=Ti("Blob"),Y8=Ti("FileList"),q8=r=>jh(r)&&Pr(r.pipe),K8=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Pr(r.append)&&((e=Hh(r))==="formdata"||e==="object"&&Pr(r.toString)&&r.toString()==="[object FormData]"))},Z8=Ti("URLSearchParams"),J8=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pl(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let i,n;if(typeof r!="object"&&(r=[r]),Ro(r))for(i=0,n=r.length;i<n;i++)e.call(null,r[i],i,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,r[a],a,r)}}function aT(r,e){e=e.toLowerCase();const t=Object.keys(r);let i=t.length,n;for(;i-- >0;)if(n=t[i],e===n.toLowerCase())return n;return null}const lT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),uT=r=>!Ja(r)&&r!==lT;function cd(){const{caseless:r}=uT(this)&&this||{},e={},t=(i,n)=>{const s=r&&aT(e,n)||n;yu(e[s])&&yu(i)?e[s]=cd(e[s],i):yu(i)?e[s]=cd({},i):Ro(i)?e[s]=i.slice():e[s]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&pl(arguments[i],t);return e}const Q8=(r,e,t,{allOwnKeys:i}={})=>(pl(e,(n,s)=>{t&&Pr(n)?r[s]=nT(n,t):r[s]=n},{allOwnKeys:i}),r),e6=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),t6=(r,e,t,i)=>{r.prototype=Object.create(e.prototype,i),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},r6=(r,e,t,i)=>{let n,s,o;const a={};if(e=e||{},r==null)return e;do{for(n=Object.getOwnPropertyNames(r),s=n.length;s-- >0;)o=n[s],(!i||i(o,r,e))&&!a[o]&&(e[o]=r[o],a[o]=!0);r=t!==!1&&Hm(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},i6=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const i=r.indexOf(e,t);return i!==-1&&i===t},n6=r=>{if(!r)return null;if(Ro(r))return r;let e=r.length;if(!oT(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},s6=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Hm(Uint8Array)),o6=(r,e)=>{const i=(r&&r[Symbol.iterator]).call(r);let n;for(;(n=i.next())&&!n.done;){const s=n.value;e.call(r,s[0],s[1])}},a6=(r,e)=>{let t;const i=[];for(;(t=r.exec(e))!==null;)i.push(t);return i},l6=Ti("HTMLFormElement"),u6=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,n){return i.toUpperCase()+n}),ly=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),h6=Ti("RegExp"),hT=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),i={};pl(t,(n,s)=>{e(n,s,r)!==!1&&(i[s]=n)}),Object.defineProperties(r,i)},c6=r=>{hT(r,(e,t)=>{if(Pr(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=r[t];if(Pr(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},f6=(r,e)=>{const t={},i=n=>{n.forEach(s=>{t[s]=!0})};return Ro(r)?i(r):i(String(r).split(e)),t},d6=()=>{},p6=(r,e)=>(r=+r,Number.isFinite(r)?r:e),Xc="abcdefghijklmnopqrstuvwxyz",uy="0123456789",cT={DIGIT:uy,ALPHA:Xc,ALPHA_DIGIT:Xc+Xc.toUpperCase()+uy},m6=(r=16,e=cT.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;r--;)t+=e[Math.random()*i|0];return t};function v6(r){return!!(r&&Pr(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const g6=r=>{const e=new Array(10),t=(i,n)=>{if(jh(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[n]=i;const s=Ro(i)?[]:{};return pl(i,(o,a)=>{const l=t(o,n+1);!Ja(l)&&(s[a]=l)}),e[n]=void 0,s}}return i};return t(r,0)},_6=Ti("AsyncFunction"),y6=r=>r&&(jh(r)||Pr(r))&&Pr(r.then)&&Pr(r.catch),j={isArray:Ro,isArrayBuffer:sT,isBuffer:V8,isFormData:K8,isArrayBufferView:H8,isString:$8,isNumber:oT,isBoolean:j8,isObject:jh,isPlainObject:yu,isUndefined:Ja,isDate:X8,isFile:z8,isBlob:W8,isRegExp:h6,isFunction:Pr,isStream:q8,isURLSearchParams:Z8,isTypedArray:s6,isFileList:Y8,forEach:pl,merge:cd,extend:Q8,trim:J8,stripBOM:e6,inherits:t6,toFlatObject:r6,kindOf:Hh,kindOfTest:Ti,endsWith:i6,toArray:n6,forEachEntry:o6,matchAll:a6,isHTMLForm:l6,hasOwnProperty:ly,hasOwnProp:ly,reduceDescriptors:hT,freezeMethods:c6,toObjectSet:f6,toCamelCase:u6,noop:d6,toFiniteNumber:p6,findKey:aT,global:lT,isContextDefined:uT,ALPHABET:cT,generateString:m6,isSpecCompliantForm:v6,toJSONObject:g6,isAsyncFn:_6,isThenable:y6};function Ue(r,e,t,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),n&&(this.response=n)}j.inherits(Ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fT=Ue.prototype,dT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{dT[r]={value:r}});Object.defineProperties(Ue,dT);Object.defineProperty(fT,"isAxiosError",{value:!0});Ue.from=(r,e,t,i,n,s)=>{const o=Object.create(fT);return j.toFlatObject(r,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ue.call(o,r.message,e,t,i,n),o.cause=r,o.name=r.name,s&&Object.assign(o,s),o};const b6=null;function fd(r){return j.isPlainObject(r)||j.isArray(r)}function pT(r){return j.endsWith(r,"[]")?r.slice(0,-2):r}function hy(r,e,t){return r?r.concat(e).map(function(n,s){return n=pT(n),!t&&s?"["+n+"]":n}).join(t?".":""):e}function x6(r){return j.isArray(r)&&!r.some(fd)}const T6=j.toFlatObject(j,{},null,function(e){return/^is[A-Z]/.test(e)});function Xh(r,e,t){if(!j.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=j.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!j.isUndefined(v[m])});const i=t.metaTokens,n=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(n))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(j.isDate(p))return p.toISOString();if(!l&&j.isBlob(p))throw new Ue("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(p)||j.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,m,v){let g=p;if(p&&!v&&typeof p=="object"){if(j.endsWith(m,"{}"))m=i?m:m.slice(0,-2),p=JSON.stringify(p);else if(j.isArray(p)&&x6(p)||(j.isFileList(p)||j.endsWith(m,"[]"))&&(g=j.toArray(p)))return m=pT(m),g.forEach(function(y,b){!(j.isUndefined(y)||y===null)&&e.append(o===!0?hy([m],b,s):o===null?m:m+"[]",u(y))}),!1}return fd(p)?!0:(e.append(hy(v,m,s),u(p)),!1)}const c=[],f=Object.assign(T6,{defaultVisitor:h,convertValue:u,isVisitable:fd});function d(p,m){if(!j.isUndefined(p)){if(c.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));c.push(p),j.forEach(p,function(g,_){(!(j.isUndefined(g)||g===null)&&n.call(e,g,j.isString(_)?_.trim():_,m,f))===!0&&d(g,m?m.concat(_):[_])}),c.pop()}}if(!j.isObject(r))throw new TypeError("data must be an object");return d(r),e}function cy(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function $m(r,e){this._pairs=[],r&&Xh(r,this,e)}const mT=$m.prototype;mT.append=function(e,t){this._pairs.push([e,t])};mT.toString=function(e){const t=e?function(i){return e.call(this,i,cy)}:cy;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function S6(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vT(r,e,t){if(!e)return r;const i=t&&t.encode||S6,n=t&&t.serialize;let s;if(n?s=n(e,t):s=j.isURLSearchParams(e)?e.toString():new $m(e,t).toString(i),s){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class E6{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){j.forEach(this.handlers,function(i){i!==null&&e(i)})}}const fy=E6,gT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},w6=typeof URLSearchParams<"u"?URLSearchParams:$m,P6=typeof FormData<"u"?FormData:null,C6=typeof Blob<"u"?Blob:null,M6=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),I6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),di={isBrowser:!0,classes:{URLSearchParams:w6,FormData:P6,Blob:C6},isStandardBrowserEnv:M6,isStandardBrowserWebWorkerEnv:I6,protocols:["http","https","file","blob","url","data"]};function A6(r,e){return Xh(r,new di.classes.URLSearchParams,Object.assign({visitor:function(t,i,n,s){return di.isNode&&j.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function O6(r){return j.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function R6(r){const e={},t=Object.keys(r);let i;const n=t.length;let s;for(i=0;i<n;i++)s=t[i],e[s]=r[s];return e}function _T(r){function e(t,i,n,s){let o=t[s++];const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&j.isArray(n)?n.length:o,l?(j.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!a):((!n[o]||!j.isObject(n[o]))&&(n[o]=[]),e(t,i,n[o],s)&&j.isArray(n[o])&&(n[o]=R6(n[o])),!a)}if(j.isFormData(r)&&j.isFunction(r.entries)){const t={};return j.forEachEntry(r,(i,n)=>{e(O6(i),n,t,0)}),t}return null}const F6={"Content-Type":void 0};function L6(r,e,t){if(j.isString(r))try{return(e||JSON.parse)(r),j.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(r)}const zh={transitional:gT,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,s=j.isObject(e);if(s&&j.isHTMLForm(e)&&(e=new FormData(e)),j.isFormData(e))return n&&n?JSON.stringify(_T(e)):e;if(j.isArrayBuffer(e)||j.isBuffer(e)||j.isStream(e)||j.isFile(e)||j.isBlob(e))return e;if(j.isArrayBufferView(e))return e.buffer;if(j.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return A6(e,this.formSerializer).toString();if((a=j.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Xh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),L6(e)):e}],transformResponse:[function(e){const t=this.transitional||zh.transitional,i=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&j.isString(e)&&(i&&!this.responseType||n)){const o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Ue.from(a,Ue.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:di.classes.FormData,Blob:di.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};j.forEach(["delete","get","head"],function(e){zh.headers[e]={}});j.forEach(["post","put","patch"],function(e){zh.headers[e]=j.merge(F6)});const jm=zh,D6=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B6=r=>{const e={};let t,i,n;return r&&r.split(`
`).forEach(function(o){n=o.indexOf(":"),t=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!t||e[t]&&D6[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},dy=Symbol("internals");function Yo(r){return r&&String(r).trim().toLowerCase()}function bu(r){return r===!1||r==null?r:j.isArray(r)?r.map(bu):String(r)}function N6(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(r);)e[i[1]]=i[2];return e}const k6=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function zc(r,e,t,i,n){if(j.isFunction(i))return i.call(this,e,t);if(n&&(e=t),!!j.isString(e)){if(j.isString(i))return e.indexOf(i)!==-1;if(j.isRegExp(i))return i.test(e)}}function U6(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function G6(r,e){const t=j.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+t,{value:function(n,s,o){return this[i].call(this,e,n,s,o)},configurable:!0})})}class Wh{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function s(a,l,u){const h=Yo(l);if(!h)throw new Error("header name must be a non-empty string");const c=j.findKey(n,h);(!c||n[c]===void 0||u===!0||u===void 0&&n[c]!==!1)&&(n[c||l]=bu(a))}const o=(a,l)=>j.forEach(a,(u,h)=>s(u,h,l));return j.isPlainObject(e)||e instanceof this.constructor?o(e,t):j.isString(e)&&(e=e.trim())&&!k6(e)?o(B6(e),t):e!=null&&s(t,e,i),this}get(e,t){if(e=Yo(e),e){const i=j.findKey(this,e);if(i){const n=this[i];if(!t)return n;if(t===!0)return N6(n);if(j.isFunction(t))return t.call(this,n,i);if(j.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yo(e),e){const i=j.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||zc(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let n=!1;function s(o){if(o=Yo(o),o){const a=j.findKey(i,o);a&&(!t||zc(i,i[a],a,t))&&(delete i[a],n=!0)}}return j.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const s=t[i];(!e||zc(this,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){const t=this,i={};return j.forEach(this,(n,s)=>{const o=j.findKey(i,s);if(o){t[o]=bu(n),delete t[s];return}const a=e?U6(s):String(s).trim();a!==s&&delete t[s],t[a]=bu(n),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return j.forEach(this,(i,n)=>{i!=null&&i!==!1&&(t[n]=e&&j.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(n=>i.set(n)),i}static accessor(e){const i=(this[dy]=this[dy]={accessors:{}}).accessors,n=this.prototype;function s(o){const a=Yo(o);i[a]||(G6(n,o),i[a]=!0)}return j.isArray(e)?e.forEach(s):s(e),this}}Wh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.freezeMethods(Wh.prototype);j.freezeMethods(Wh);const Ni=Wh;function Wc(r,e){const t=this||jm,i=e||t,n=Ni.from(i.headers);let s=i.data;return j.forEach(r,function(a){s=a.call(t,s,n.normalize(),e?e.status:void 0)}),n.normalize(),s}function yT(r){return!!(r&&r.__CANCEL__)}function ml(r,e,t){Ue.call(this,r??"canceled",Ue.ERR_CANCELED,e,t),this.name="CanceledError"}j.inherits(ml,Ue,{__CANCEL__:!0});function V6(r,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?r(t):e(new Ue("Request failed with status code "+t.status,[Ue.ERR_BAD_REQUEST,Ue.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const H6=di.isStandardBrowserEnv?function(){return{write:function(t,i,n,s,o,a){const l=[];l.push(t+"="+encodeURIComponent(i)),j.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),j.isString(s)&&l.push("path="+s),j.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $6(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function j6(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function bT(r,e){return r&&!$6(e)?j6(r,e):e}const X6=di.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function n(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=n(window.location.href),function(o){const a=j.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function z6(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function W6(r,e){r=r||10;const t=new Array(r),i=new Array(r);let n=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),h=i[s];o||(o=u),t[n]=l,i[n]=u;let c=s,f=0;for(;c!==n;)f+=t[c++],c=c%r;if(n=(n+1)%r,n===s&&(s=(s+1)%r),u-o<e)return;const d=h&&u-h;return d?Math.round(f*1e3/d):void 0}}function py(r,e){let t=0;const i=W6(50,250);return n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-t,l=i(a),u=s<=o;t=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:n};h[e?"download":"upload"]=!0,r(h)}}const Y6=typeof XMLHttpRequest<"u",q6=Y6&&function(r){return new Promise(function(t,i){let n=r.data;const s=Ni.from(r.headers).normalize(),o=r.responseType;let a;function l(){r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}j.isFormData(n)&&(di.isStandardBrowserEnv||di.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(r.auth){const d=r.auth.username||"",p=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";s.set("Authorization","Basic "+btoa(d+":"+p))}const h=bT(r.baseURL,r.url);u.open(r.method.toUpperCase(),vT(h,r.params,r.paramsSerializer),!0),u.timeout=r.timeout;function c(){if(!u)return;const d=Ni.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:d,config:r,request:u};V6(function(g){t(g),l()},function(g){i(g),l()},m),u=null}if("onloadend"in u?u.onloadend=c:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(c)},u.onabort=function(){u&&(i(new Ue("Request aborted",Ue.ECONNABORTED,r,u)),u=null)},u.onerror=function(){i(new Ue("Network Error",Ue.ERR_NETWORK,r,u)),u=null},u.ontimeout=function(){let p=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const m=r.transitional||gT;r.timeoutErrorMessage&&(p=r.timeoutErrorMessage),i(new Ue(p,m.clarifyTimeoutError?Ue.ETIMEDOUT:Ue.ECONNABORTED,r,u)),u=null},di.isStandardBrowserEnv){const d=(r.withCredentials||X6(h))&&r.xsrfCookieName&&H6.read(r.xsrfCookieName);d&&s.set(r.xsrfHeaderName,d)}n===void 0&&s.setContentType(null),"setRequestHeader"in u&&j.forEach(s.toJSON(),function(p,m){u.setRequestHeader(m,p)}),j.isUndefined(r.withCredentials)||(u.withCredentials=!!r.withCredentials),o&&o!=="json"&&(u.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&u.addEventListener("progress",py(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",py(r.onUploadProgress)),(r.cancelToken||r.signal)&&(a=d=>{u&&(i(!d||d.type?new ml(null,r,u):d),u.abort(),u=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const f=z6(h);if(f&&di.protocols.indexOf(f)===-1){i(new Ue("Unsupported protocol "+f+":",Ue.ERR_BAD_REQUEST,r));return}u.send(n||null)})},xu={http:b6,xhr:q6};j.forEach(xu,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const K6={getAdapter:r=>{r=j.isArray(r)?r:[r];const{length:e}=r;let t,i;for(let n=0;n<e&&(t=r[n],!(i=j.isString(t)?xu[t.toLowerCase()]:t));n++);if(!i)throw i===!1?new Ue(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(j.hasOwnProp(xu,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!j.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:xu};function Yc(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ml(null,r)}function my(r){return Yc(r),r.headers=Ni.from(r.headers),r.data=Wc.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),K6.getAdapter(r.adapter||jm.adapter)(r).then(function(i){return Yc(r),i.data=Wc.call(r,r.transformResponse,i),i.headers=Ni.from(i.headers),i},function(i){return yT(i)||(Yc(r),i&&i.response&&(i.response.data=Wc.call(r,r.transformResponse,i.response),i.response.headers=Ni.from(i.response.headers))),Promise.reject(i)})}const vy=r=>r instanceof Ni?r.toJSON():r;function _o(r,e){e=e||{};const t={};function i(u,h,c){return j.isPlainObject(u)&&j.isPlainObject(h)?j.merge.call({caseless:c},u,h):j.isPlainObject(h)?j.merge({},h):j.isArray(h)?h.slice():h}function n(u,h,c){if(j.isUndefined(h)){if(!j.isUndefined(u))return i(void 0,u,c)}else return i(u,h,c)}function s(u,h){if(!j.isUndefined(h))return i(void 0,h)}function o(u,h){if(j.isUndefined(h)){if(!j.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function a(u,h,c){if(c in e)return i(u,h);if(c in r)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h)=>n(vy(u),vy(h),!0)};return j.forEach(Object.keys(Object.assign({},r,e)),function(h){const c=l[h]||n,f=c(r[h],e[h],h);j.isUndefined(f)&&c!==a||(t[h]=f)}),t}const xT="1.4.0",Xm={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Xm[r]=function(i){return typeof i===r||"a"+(e<1?"n ":" ")+r}});const gy={};Xm.transitional=function(e,t,i){function n(s,o){return"[Axios v"+xT+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new Ue(n(o," has been removed"+(t?" in "+t:"")),Ue.ERR_DEPRECATED);return t&&!gy[o]&&(gy[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Z6(r,e,t){if(typeof r!="object")throw new Ue("options must be an object",Ue.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let n=i.length;for(;n-- >0;){const s=i[n],o=e[s];if(o){const a=r[s],l=a===void 0||o(a,s,r);if(l!==!0)throw new Ue("option "+s+" must be "+l,Ue.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ue("Unknown option "+s,Ue.ERR_BAD_OPTION)}}const dd={assertOptions:Z6,validators:Xm},qi=dd.validators;class Ku{constructor(e){this.defaults=e,this.interceptors={request:new fy,response:new fy}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=_o(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:s}=t;i!==void 0&&dd.assertOptions(i,{silentJSONParsing:qi.transitional(qi.boolean),forcedJSONParsing:qi.transitional(qi.boolean),clarifyTimeoutError:qi.transitional(qi.boolean)},!1),n!=null&&(j.isFunction(n)?t.paramsSerializer={serialize:n}:dd.assertOptions(n,{encode:qi.function,serialize:qi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o;o=s&&j.merge(s.common,s[t.method]),o&&j.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=Ni.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let h,c=0,f;if(!l){const p=[my.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),f=p.length,h=Promise.resolve(t);c<f;)h=h.then(p[c++],p[c++]);return h}f=a.length;let d=t;for(c=0;c<f;){const p=a[c++],m=a[c++];try{d=p(d)}catch(v){m.call(this,v);break}}try{h=my.call(this,d)}catch(p){return Promise.reject(p)}for(c=0,f=u.length;c<f;)h=h.then(u[c++],u[c++]);return h}getUri(e){e=_o(this.defaults,e);const t=bT(e.baseURL,e.url);return vT(t,e.params,e.paramsSerializer)}}j.forEach(["delete","get","head","options"],function(e){Ku.prototype[e]=function(t,i){return this.request(_o(i||{},{method:e,url:t,data:(i||{}).data}))}});j.forEach(["post","put","patch"],function(e){function t(i){return function(s,o,a){return this.request(_o(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ku.prototype[e]=t(),Ku.prototype[e+"Form"]=t(!0)});const Tu=Ku;class zm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(n=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](n);i._listeners=null}),this.promise.then=n=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(n);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new ml(s,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new zm(function(n){e=n}),cancel:e}}}const J6=zm;function Q6(r){return function(t){return r.apply(null,t)}}function e5(r){return j.isObject(r)&&r.isAxiosError===!0}const pd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pd).forEach(([r,e])=>{pd[e]=r});const t5=pd;function TT(r){const e=new Tu(r),t=nT(Tu.prototype.request,e);return j.extend(t,Tu.prototype,e,{allOwnKeys:!0}),j.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return TT(_o(r,n))},t}const Et=TT(jm);Et.Axios=Tu;Et.CanceledError=ml;Et.CancelToken=J6;Et.isCancel=yT;Et.VERSION=xT;Et.toFormData=Xh;Et.AxiosError=Ue;Et.Cancel=Et.CanceledError;Et.all=function(e){return Promise.all(e)};Et.spread=Q6;Et.isAxiosError=e5;Et.mergeConfig=_o;Et.AxiosHeaders=Ni;Et.formToJSON=r=>_T(j.isHTMLForm(r)?new FormData(r):r);Et.HttpStatusCode=t5;Et.default=Et;const ST=Et;function _y(r){let e=window.atob(r),t=e.length,i=new Uint8Array(t);for(let n=0;n<t;n++)i[n]=e.charCodeAt(n);return i.buffer}function r5(r){return r.reduce((e,t)=>e+t,0)}let Ur,si,js,qc=!1,i5=80;async function n5(r,e){let t;switch(r.VType){case 1:t=await ST({url:r.voice,method:"get",responseType:"arraybuffer"}),t=t.data;break;case 2:t=_y(r.voice);break;case 3:t=_y(r.voice);break}(s=>{const o=s;Ur.decodeAudioData(o,a=>{const l=Ur.createBufferSource();l.buffer=a,l.connect(Ur.destination),l.connect(si),qc=!0,i(),setTimeout(()=>{l.start(0)},.5),e.state.model4.expression(r.expression),e.state.model4.motion(r.act,r.movement),l.onended=()=>{qc=!1,e.state.websocket.send(0),e.state.model4.expression(0)}}).catch(a=>{console.log(a),e.state.websocket.send(-1)})})(t);function i(){if(!qc)return;const s=o5(),o=[];for(var a=0;a<700;a+=i5)o.push(s[a]);n((r5(o)/o.length-20)/e.state.percentage),setTimeout(i,1e3/60)}function n(s){s=Math.max(0,Math.min(1,s)),console.log(s),e.state.model4.internalModel.coreModel.setParameterValueByIndex(e.state.parameterIndex,s,1,!0)}}function s5(){location.protocol==="https:"?navigator.userAgent.indexOf("Firefox")!=-1||navigator.userAgent.indexOf("Chrome")!=-1?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(r){Ur=new AudioContext,si=Ur.createAnalyser(),js=new Uint8Array(si.frequencyBinCount)}).catch(function(r){alert(""+r.name+",sound(autoplay)allow"),Ur=new AudioContext,si=Ur.createAnalyser(),js=new Uint8Array(si.frequencyBinCount)}):(Ur=new AudioContext,si=Ur.createAnalyser(),js=new Uint8Array(si.frequencyBinCount)):(Ur=new AudioContext,si=Ur.createAnalyser(),js=new Uint8Array(si.frequencyBinCount))}function o5(){return si.getByteFrequencyData(js),js}let Ls;function a5(){const r=Gh(),e="ws://localhost:9000/live2d";return Ls=new WebSocket(e),Ls.onopen=l5,Ls.onerror=u5,Ls.onclose=h5,Ls.onmessage=t=>{let i=JSON.parse(t.data);n5(i,r).catch(n=>{console.error(n)})},Ls}function l5(){km({message:" .. ",type:"success"})}function u5(){km({message:"!   ",type:"warning"})}function h5(){km({message:"!!!  ",type:"warning"})}function c5(r){var e=this.constructor;return this.then(function(t){return e.resolve(r()).then(function(){return t})},function(t){return e.resolve(r()).then(function(){return e.reject(t)})})}function f5(r){var e=this;return new e(function(t,i){if(!(r&&typeof r.length<"u"))return i(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(r);if(n.length===0)return t([]);var s=n.length;function o(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var h=u.then;if(typeof h=="function"){h.call(u,function(c){o(l,c)},function(c){n[l]={status:"rejected",reason:c},--s===0&&t(n)});return}}n[l]={status:"fulfilled",value:u},--s===0&&t(n)}for(var a=0;a<n.length;a++)o(a,n[a])})}function ET(r,e){this.name="AggregateError",this.errors=r,this.message=e||""}ET.prototype=Error.prototype;function d5(r){var e=this;return new e(function(t,i){if(!(r&&typeof r.length<"u"))return i(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(r);if(n.length===0)return i();for(var s=[],o=0;o<n.length;o++)try{e.resolve(n[o]).then(t).catch(function(a){s.push(a),s.length===n.length&&i(new ET(s,"All promises were rejected"))})}catch(a){i(a)}})}var p5=setTimeout;function wT(r){return!!(r&&typeof r.length<"u")}function m5(){}function v5(r,e){return function(){r.apply(e,arguments)}}function ct(r){if(!(this instanceof ct))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],CT(r,this)}function PT(r,e){for(;r._state===3;)r=r._value;if(r._state===0){r._deferreds.push(e);return}r._handled=!0,ct._immediateFn(function(){var t=r._state===1?e.onFulfilled:e.onRejected;if(t===null){(r._state===1?md:Qa)(e.promise,r._value);return}var i;try{i=t(r._value)}catch(n){Qa(e.promise,n);return}md(e.promise,i)})}function md(r,e){try{if(e===r)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var t=e.then;if(e instanceof ct){r._state=3,r._value=e,vd(r);return}else if(typeof t=="function"){CT(v5(t,e),r);return}}r._state=1,r._value=e,vd(r)}catch(i){Qa(r,i)}}function Qa(r,e){r._state=2,r._value=e,vd(r)}function vd(r){r._state===2&&r._deferreds.length===0&&ct._immediateFn(function(){r._handled||ct._unhandledRejectionFn(r._value)});for(var e=0,t=r._deferreds.length;e<t;e++)PT(r,r._deferreds[e]);r._deferreds=null}function g5(r,e,t){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function CT(r,e){var t=!1;try{r(function(i){t||(t=!0,md(e,i))},function(i){t||(t=!0,Qa(e,i))})}catch(i){if(t)return;t=!0,Qa(e,i)}}ct.prototype.catch=function(r){return this.then(null,r)};ct.prototype.then=function(r,e){var t=new this.constructor(m5);return PT(this,new g5(r,e,t)),t};ct.prototype.finally=c5;ct.all=function(r){return new ct(function(e,t){if(!wT(r))return t(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(r);if(i.length===0)return e([]);var n=i.length;function s(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(h){s(a,h)},t);return}}i[a]=l,--n===0&&e(i)}catch(h){t(h)}}for(var o=0;o<i.length;o++)s(o,i[o])})};ct.any=d5;ct.allSettled=f5;ct.resolve=function(r){return r&&typeof r=="object"&&r.constructor===ct?r:new ct(function(e){e(r)})};ct.reject=function(r){return new ct(function(e,t){t(r)})};ct.race=function(r){return new ct(function(e,t){if(!wT(r))return t(new TypeError("Promise.race accepts an array"));for(var i=0,n=r.length;i<n;i++)ct.resolve(r[i]).then(e,t)})};ct._immediateFn=typeof setImmediate=="function"&&function(r){setImmediate(r)}||function(r){p5(r,0)};ct._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var yy=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,y5=Object.prototype.propertyIsEnumerable;function b5(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function x5(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var i=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var T5=x5()?Object.assign:function(r,e){for(var t,i=b5(r),n,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)_5.call(t,o)&&(i[o]=t[o]);if(yy){n=yy(t);for(var a=0;a<n.length;a++)y5.call(t,n[a])&&(i[n[a]]=t[n[a]])}}return i};const S5=yp(T5);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=ct);Object.assign||(Object.assign=S5);var E5=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var w5=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-w5}}var Kc=Date.now(),by=["ms","moz","webkit","o"];for(var Zc=0;Zc<by.length&&!globalThis.requestAnimationFrame;++Zc){var Jc=by[Zc];globalThis.requestAnimationFrame=globalThis[Jc+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Jc+"CancelAnimationFrame"]||globalThis[Jc+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var e=Date.now(),t=E5+Kc-e;return t<0&&(t=0),Kc=e,globalThis.self.setTimeout(function(){Kc=Date.now(),r(performance.now())},t)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var MT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};dt.mixin(MT);var P5=9,Kl=100,C5=0,M5=0,xy=2,Ty=1,I5=-1e3,A5=-1e3,O5=2,IT=function(){function r(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Tr.tablet||Tr.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=Kl+"px",t.style.height=Kl+"px",t.style.position="absolute",t.style.top=C5+"px",t.style.left=M5+"px",t.style.zIndex=xy.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=Ty+"px",t.style.height=Ty+"px",t.style.position="absolute",t.style.top=I5+"px",t.style.left=A5+"px",t.style.zIndex=O5.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},r.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},r.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},r.prototype.update=function(){var e=performance.now();if(!(Tr.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),i=t.left,n=t.top,s=t.width,o=t.height,a=this.renderer,l=a.width,u=a.height,h=a.resolution,c=s/l*h,f=o/u*h,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=l+"px",d.style.height=u+"px";for(var p=0;p<this.children.length;p++){var m=this.children[p];if(m.renderId!==this.renderId)m._accessibleActive=!1,us(this.children,p,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,p--;else{d=m._accessibleDiv;var v=m.hitArea,g=m.worldTransform;m.hitArea?(d.style.left=(g.tx+v.x*g.a)*c+"px",d.style.top=(g.ty+v.y*g.d)*f+"px",d.style.width=v.width*g.a*c+"px",d.style.height=v.height*g.d*f+"px"):(v=m.getBounds(),this.capHitArea(v),d.style.left=v.x*c+"px",d.style.top=v.y*f+"px",d.style.width=v.width*c+"px",d.style.height=v.height*f+"px",d.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(d.title=m.accessibleTitle),d.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&d.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==d.title||m.tabIndex!==d.tabIndex)&&(d.title=m.accessibleTitle,d.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},r.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},r.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,i=t.width,n=t.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)},r.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=Kl+"px",t.style.height=Kl+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=xy.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},r.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,i=e.target.displayObject,n=t.eventData;t.dispatchEvent(i,"click",n),t.dispatchEvent(i,"pointertap",n),t.dispatchEvent(i,"tap",n)},r.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,i=e.target.displayObject,n=t.eventData;t.dispatchEvent(i,"mouseover",n)},r.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,i=e.target.displayObject,n=t.eventData;t.dispatchEvent(i,"mouseout",n)},r.prototype._onKeyDown=function(e){e.keyCode===P5&&this.activate()},r.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.extension={name:"accessibility",type:[Xe.RendererPlugin,Xe.CanvasRendererPlugin]},r}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gd=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ze,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},r.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _d=function(r,e){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},_d(r,e)};function R5(r,e){_d(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var AT=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),Su=function(){function r(e){this._pointerId=e,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!==0},set:function(e){this._doSet(r.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(r.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(r.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),r}(),F5=function(){function r(){this._tempPoint=new ze}return r.prototype.recursiveFindHit=function(e,t,i,n,s){var o;if(!t||!t.visible)return!1;var a=e.data.global;s=t.interactive||s;var l=!1,u=s,h=!0;if(t.hitArea)n&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(n=!1,h=!1)),u=!1;else if(t._mask&&n){var c=t._mask.isMaskData?t._mask.maskObject:t._mask;c&&!(!((o=c.containsPoint)===null||o===void 0)&&o.call(c,a))&&(n=!1)}if(h&&t.interactiveChildren&&t.children)for(var f=t.children,d=f.length-1;d>=0;d--){var p=f[d],m=this.recursiveFindHit(e,p,i,n,u);if(m){if(!p.parent)continue;u=!1,m&&(e.target&&(n=!1),l=!0)}}return s&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(l=!0),t.interactive&&(l&&!e.target&&(e.target=t),i&&i(e,t,!!l))),l},r.prototype.findHit=function(e,t,i,n){this.recursiveFindHit(e,t,i,n,!1)},r}(),OT={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};dt.mixin(OT);var Zl=1,Jl={target:null,data:{global:null}},RT=function(r){R5(e,r);function e(t,i){var n=r.call(this)||this;return i=i||{},n.renderer=t,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new gd,n.mouse.identifier=Zl,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Zl]=n.mouse,n.interactionDataPool=[],n.eventData=new AT,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new F5,n._tempDisplayObject=new hm,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,i){return Jl.target=null,Jl.data.global=t,i||(i=this.lastObjectRendered),this.processInteractive(Jl,i,null,!0),Jl.target},e.prototype.setTargetElement=function(t,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Mt.system.add(this.tickerUpdate,this,_i.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Mt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,i,n){(!n.stopPropagationHint||t===n.stopsPropagatingAt)&&(n.currentTarget=t,n.type=i,t.emit(i,n),t[i]&&t[i](n))},e.prototype.delayDispatchEvent=function(t,i,n){this.delayedEvents.push({displayObject:t,eventString:i,eventData:n})},e.prototype.mapPositionToPoint=function(t,i,n){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;t.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*o,t.y=(n-s.top)*(this.interactionDOMElement.height/s.height)*o},e.prototype.processInteractive=function(t,i,n,s){var o=this.search.findHit(t,i,n,s),a=this.delayedEvents;if(!a.length)return o;t.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var h=a[u],c=h.displayObject,f=h.eventString,d=h.eventData;d.stopsPropagatingAt===c&&(d.stopPropagationHint=!0),this.dispatchEvent(c,f,d)}return o},e.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);if(this.autoPreventDefault&&i[0].isNormalized){var n=t.cancelable||!("cancelable"in t);n&&t.preventDefault()}for(var s=i.length,o=0;o<s;o++){var a=i[o],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),a.pointerType==="touch")this.emit("touchstart",u);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var h=a.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,i,n){var s=t.data,o=t.data.identifier;if(n){if(i.trackedPointers[o]||(i.trackedPointers[o]=new Su(o)),this.dispatchEvent(i,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var a=s.button===2;a?i.trackedPointers[o].rightDown=!0:i.trackedPointers[o].leftDown=!0,this.dispatchEvent(i,a?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,i,n){var s=this.normalizeToPointerData(t),o=s.length,a=t.target;t.composedPath&&t.composedPath().length>0&&(a=t.composedPath()[0]);for(var l=a!==this.interactionDOMElement?"outside":"",u=0;u<o;u++){var h=s[u],c=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,c);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,n,i||!l),this.emit(i?"pointercancel":"pointerup"+l,f),h.pointerType==="mouse"||h.pointerType==="pen"){var d=h.button===2;this.emit(d?"rightup"+l:"mouseup"+l,f)}else h.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,f),this.releaseInteractionDataForPointerId(h.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,i){var n=t.data,s=t.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",t),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,i,n){var s=t.data,o=t.data.identifier,a=i.trackedPointers[o],l=s.pointerType==="touch",u=s.pointerType==="mouse"||s.pointerType==="pen",h=!1;if(u){var c=s.button===2,f=Su.FLAGS,d=c?f.RIGHT_DOWN:f.LEFT_DOWN,p=a!==void 0&&a.flags&d;n?(this.dispatchEvent(i,c?"rightup":"mouseup",t),p&&(this.dispatchEvent(i,c?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(i,c?"rightupoutside":"mouseupoutside",t),a&&(c?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",t),l&&this.dispatchEvent(i,"touchend",t),a&&((!u||h)&&this.dispatchEvent(i,"pointertap",t),l&&(this.dispatchEvent(i,"tap",t),a.over=!1))):a&&(this.dispatchEvent(i,"pointerupoutside",t),l&&this.dispatchEvent(i,"touchendoutside",t)),a&&a.none&&delete i.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,s=0;s<n;s++){var o=i[s],a=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,a);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),o.pointerType==="touch"&&this.emit("touchmove",l),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",l)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,i,n){var s=t.data,o=s.pointerType==="touch",a=s.pointerType==="mouse"||s.pointerType==="pen";a&&this.processPointerOverOut(t,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",t),o&&this.dispatchEvent(i,"touchmove",t),a&&this.dispatchEvent(i,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(t,i,n){var s=t.data,o=t.data.identifier,a=s.pointerType==="mouse"||s.pointerType==="pen",l=i.trackedPointers[o];n&&!l&&(l=i.trackedPointers[o]=new Su(o)),l!==void 0&&(n&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(i,"pointerover",t),a&&this.delayDispatchEvent(i,"mouseover",t)),a&&this.cursor===null&&(this.cursor=i.cursor)):l.over&&(l.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),a&&this.dispatchEvent(i,"mouseout",t),l.none&&delete i.trackedPointers[o]))},e.prototype.onPointerOver=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var i=this.normalizeToPointerData(t),n=i[0],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(t){var i=t.pointerId,n;return i===Zl||t.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new gd,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var i=this.activeInteractionData[t];i&&(delete this.activeInteractionData[t],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(t,i,n){return t.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,s=t.changedTouches.length;n<s;n++){var o=t.changedTouches[n];typeof o.button>"u"&&(o.button=t.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=t.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,i.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var a=t;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=Zl),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,i.push(a)}else i.push(t);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Xe.RendererPlugin,Xe.CanvasRendererPlugin]},e}(Or);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var L5=new Ne,D5=4,FT=function(){function r(e){this.renderer=e}return r.prototype.image=function(e,t,i){var n=new Image;return n.src=this.base64(e,t,i),n},r.prototype.base64=function(e,t,i){return this.canvas(e).toDataURL(t,i)},r.prototype.canvas=function(e,t){var i=this._rawPixels(e,t),n=i.pixels,s=i.width,o=i.height,a=i.flipY,l=new Wf(s,o,1),u=l.context.getImageData(0,0,s,o);if(r.arrayPostDivide(n,u.data),l.context.putImageData(u,0,0),a){var h=new Wf(l.width,l.height,1);h.context.scale(1,-1),h.context.drawImage(l.canvas,0,-o),l.destroy(),l=h}return l.canvas},r.prototype.pixels=function(e,t){var i=this._rawPixels(e,t).pixels;return r.arrayPostDivide(i,i),i},r.prototype._rawPixels=function(e,t){var i=this.renderer,n,s=!1,o,a=!1;if(e)if(e instanceof gn)o=e;else{var l=i.context.webGLVersion>=2?i.multisample:et.NONE;if(o=this.renderer.generateTexture(e,{multisample:l}),l!==et.NONE){var u=gn.create({width:o.width,height:o.height});i.framebuffer.bind(o.framebuffer),i.framebuffer.blit(u.framebuffer),i.framebuffer.bind(null),o.destroy(!0),o=u}a=!0}o?(n=o.baseTexture.resolution,t=t??o.frame,s=!1,i.renderTexture.bind(o)):(n=i.resolution,t||(t=L5,t.width=i.width,t.height=i.height),s=!0,i.renderTexture.bind(null));var h=Math.round(t.width*n),c=Math.round(t.height*n),f=new Uint8Array(D5*h*c),d=i.gl;return d.readPixels(Math.round(t.x*n),Math.round(t.y*n),h,c,d.RGBA,d.UNSIGNED_BYTE,f),a&&o.destroy(!0),{pixels:f,width:h,height:c,flipY:s}},r.prototype.destroy=function(){this.renderer=null},r.arrayPostDivide=function(e,t){for(var i=0;i<e.length;i+=4){var n=t[i+3]=e[i+3];n!==0?(t[i]=Math.round(Math.min(e[i]*255/n,255)),t[i+1]=Math.round(Math.min(e[i+1]*255/n,255)),t[i+2]=Math.round(Math.min(e[i+2]*255/n,255))):(t[i]=e[i],t[i+1]=e[i+1],t[i+2]=e[i+2])}},r.extension={name:"extract",type:Xe.RendererPlugin},r}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ql=function(){function r(e,t,i){t===void 0&&(t=!1),this._fn=e,this._once=t,this._thisArg=i,this._next=this._prev=this._owner=null}return r.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},r}();function Sy(r,e){return r._head?(r._tail._next=e,e._prev=r._tail,r._tail=e):(r._head=e,r._tail=e),e._owner=r,e}var Ai=function(){function r(){this._head=this._tail=void 0}return r.prototype.handlers=function(e){e===void 0&&(e=!1);var t=this._head;if(e)return!!t;for(var i=[];t;)i.push(t),t=t._next;return i},r.prototype.has=function(e){if(!(e instanceof Ql))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},r.prototype.dispatch=function(){for(var e=arguments,t=[],i=0;i<arguments.length;i++)t[i]=e[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,t),n=n._next;return!0},r.prototype.add=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Sy(this,new Ql(e,!1,t))},r.prototype.once=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Sy(this,new Ql(e,!0,t))},r.prototype.detach=function(e){if(!(e instanceof Ql))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},r.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},r}();function LT(r,e){e=e||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=t.parser[e.strictMode?"strict":"loose"].exec(r),n={},s=14;s--;)n[t.key[s]]=i[s]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(o,a,l){a&&(n[t.q.name][a]=l)}),n}var Qc,eu=null,B5=0,Ey=200,N5=204,k5=1223,U5=2;function wy(){}function Py(r,e,t){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(r[e]=t)}function ef(r){return r.toString().replace("object ","")}var ht=function(){function r(e,t,i){if(this._dequeue=wy,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=wy,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ai,this.onProgress=new Ai,this.onComplete=new Ai,this.onAfterMiddleware=new Ai}return r.setExtensionLoadType=function(e,t){Py(r._loadTypeMap,e,t)},r.setExtensionXhrType=function(e,t){Py(r._xhrTypeMap,e,t)},Object.defineProperty(r.prototype,"isDataUrl",{get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComplete",{get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLoading",{get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),r.prototype.complete=function(){this._clearEvents(),this._finish()},r.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(t)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:typeof Qc>"u"&&(Qc=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Qc&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r.prototype._hasFlag=function(e){return(this._flags&e)!==0},r.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(t)?t[i]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=r.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},r.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},r.prototype._createSource=function(e,t,i){i||(i=e+"/"+this._getExtension(t));var n=document.createElement("source");return n.src=t,n.type=i,n},r.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},r.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},r.prototype._onTimeout=function(){this.abort("Load timed out.")},r.prototype._xhrOnError=function(){var e=this.xhr;this.abort(ef(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},r.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(ef(e)+" Request timed out.")},r.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(ef(e)+" Request was aborted by the user.")},r.prototype._xhrOnLoad=function(){var e=this.xhr,t="",i=typeof e.status>"u"?Ey:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(t=e.responseText),i===B5&&(t.length>0||e.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?i=Ey:i===k5&&(i=N5);var n=i/100|0;if(n===U5)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=r.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t,this.data=o}this.type=r.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=e.response||t;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},r.prototype._determineCrossOrigin=function(e,t){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,eu||(eu=document.createElement("a")),eu.href=e;var i=LT(eu.href,{strictMode:!0}),n=!i.port&&t.port===""||i.port===t.port,s=i.protocol?i.protocol+":":"";return i.host!==t.hostname||!n||s!==t.protocol?"anonymous":""},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(e){e===void 0&&(e=this.url);var t="";if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?"),s=e.indexOf("#"),o=Math.min(n>-1?n:e.length,s>-1?s:e.length);e=e.substring(0,o),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},r.prototype._getMimeFromXhrType=function(e){switch(e){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r}();(function(r){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(r.STATUS_FLAGS||(r.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(r.TYPE||(r.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(r.LOAD_TYPE||(r.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(r.XHR_RESPONSE_TYPE||(r.XHR_RESPONSE_TYPE={})),r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,avif:r.LOAD_TYPE.IMAGE,svg:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE,mp3:r.LOAD_TYPE.AUDIO,ogg:r.LOAD_TYPE.AUDIO,wav:r.LOAD_TYPE.AUDIO,mp4:r.LOAD_TYPE.VIDEO,webm:r.LOAD_TYPE.VIDEO},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,avif:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT,ttf:r.XHR_RESPONSE_TYPE.BUFFER,otf:r.XHR_RESPONSE_TYPE.BUFFER},r.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(ht||(ht={}));function Fn(){}function G5(r){return function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];if(r===null)throw new Error("Callback was already called.");var s=r;r=null,s.apply(this,i)}}var V5=function(){function r(e,t){this.data=e,this.callback=t}return r}(),tf=function(){function r(e,t){var i=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=Fn,this.unsaturated=Fn,this.empty=Fn,this.drain=Fn,this.error=Fn,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var a=new V5(n,typeof o=="function"?o:Fn);s?i._tasks.unshift(a):i._tasks.push(a),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,G5(i._next(n)))}},this._worker=e,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return r.prototype._next=function(e){var t=this;return function(){for(var i=arguments,n=[],s=0;s<arguments.length;s++)n[s]=i[s];t.workers-=1,e.callback.apply(e,n),n[0]!=null&&t.error(n[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},r.prototype.push=function(e,t){this._insert(e,!1,t)},r.prototype.kill=function(){this.workers=0,this.drain=Fn,this.started=!1,this._tasks=[]},r.prototype.unshift=function(e,t){this._insert(e,!0,t)},r.prototype.length=function(){return this._tasks.length},r.prototype.running=function(){return this.workers},r.prototype.idle=function(){return this._tasks.length+this.workers===0},r.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},r.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},r.eachSeries=function(e,t,i,n){var s=0,o=e.length;function a(l){if(l||s===o){i&&i(l);return}n?setTimeout(function(){t(e[s++],a)},1):t(e[s++],a)}a()},r.queue=function(e,t){return new r(e,t)},r}(),rf=100,H5=/(#[\w-]+)?$/,el=function(){function r(e,t){var i=this;e===void 0&&(e=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return i._loadResource(l,u)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return i._loadResource(l,u)},this._queue=tf.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Ai,this.onError=new Ai,this.onLoad=new Ai,this.onStart=new Ai,this.onComplete=new Ai;for(var n=0;n<r._plugins.length;++n){var s=r._plugins[n],o=s.pre,a=s.use;o&&this.pre(o),a&&this.use(a)}this._protected=!1}return r.prototype._add=function(e,t,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new ht(e,t,i),typeof n=="function"&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var l=s.progressChunk*(o.length+1),u=l/(o.length+2);s.children.push(this.resources[e]),s.progressChunk=u;for(var a=0;a<o.length;++a)o[a].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},r.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},r.prototype.use=function(e){return this._afterMiddleware.push(e),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},r.prototype.load=function(e){if(Xt("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,i=rf/t,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(r.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),r.prototype._prepareUrl=function(e){var t=LT(e,{strictMode:!0}),i;if(t.protocol||!t.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var n=H5.exec(i)[0];i=i.slice(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},r.prototype._loadResource=function(e,t){var i=this;e._dequeue=t,tf.eachSeries(this._beforeMiddleware,function(n,s){n.call(i,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},r.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r.prototype._onComplete=function(){this.progress=rf,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),tf.eachSeries(this._afterMiddleware,function(i,n){i.call(t,e,n)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(rf,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var e=r._shared;return e||(e=new r,e._protected=!0,r._shared=e),e},enumerable:!1,configurable:!0}),r.registerPlugin=function(e){return Xt("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),xi.add({type:Xe.Loader,ref:e}),r},r._plugins=[],r}();xi.handleByList(Xe.Loader,el._plugins);el.prototype.add=function(e,t,i,n){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if(typeof e=="object"&&(i=e,n=t||i.callback||i.onComplete,t=i.url,e=i.name||i.key||i.url),typeof t!="string"&&(n=i,i=t,t=e),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(e,t,i,n)};var DT=function(){function r(){}return r.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?el.shared:new el},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r.extension=Xe.Application,r}(),BT=function(){function r(){}return r.add=function(){ht.setExtensionLoadType("svg",ht.LOAD_TYPE.XHR),ht.setExtensionXhrType("svg",ht.XHR_RESPONSE_TYPE.TEXT)},r.use=function(e,t){if(e.data&&(e.type===ht.TYPE.IMAGE||e.extension==="svg")){var i=e.data,n=e.url,s=e.name,o=e.metadata;ve.fromLoader(i,n,s,o).then(function(a){e.texture=a,t()}).catch(t)}else t()},r.extension=Xe.Loader,r}(),$5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function j5(r){for(var e="",t=0;t<r.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)t<r.length?i[s]=r.charCodeAt(t++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var o=t-(r.length-1);switch(o){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)e+=$5.charAt(n[s])}return e}function X5(r,e){if(!r.data){e();return}if(r.xhr&&r.xhrType===ht.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof r.data=="string"){var t=r.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){r.data=new Image,r.data.src="data:"+t+";base64,"+j5(r.xhr.responseText),r.type=ht.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,e()};return}}else if(r.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,n=i.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=n,r.type=ht.TYPE.IMAGE,r.data.onload=function(){i.revokeObjectURL(n),r.data.onload=null,e()};return}}e()}var z5=function(){function r(){}return r.extension=Xe.Loader,r.use=X5,r}();xi.add(BT,z5);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var je,we;(function(r){r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(we||(we={}));var tl=(je={},je[we.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,je[we.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,je[we.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,je[we.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,je[we.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,je[we.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,je[we.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,je[we.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,je[we.COMPRESSED_R11_EAC]=.5,je[we.COMPRESSED_SIGNED_R11_EAC]=.5,je[we.COMPRESSED_RG11_EAC]=1,je[we.COMPRESSED_SIGNED_RG11_EAC]=1,je[we.COMPRESSED_RGB8_ETC2]=.5,je[we.COMPRESSED_RGBA8_ETC2_EAC]=1,je[we.COMPRESSED_SRGB8_ETC2]=.5,je[we.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,je[we.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,je[we.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,je[we.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,je[we.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,je[we.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,je[we.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,je[we.COMPRESSED_RGB_ETC1_WEBGL]=.5,je[we.COMPRESSED_RGB_ATC_WEBGL]=.5,je[we.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,je[we.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,je[we.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,je);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yd=function(r,e){return yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},yd(r,e)};function NT(r,e){yd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function W5(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(i.next(h))}catch(c){o(c)}}function l(h){try{u(i.throw(h))}catch(c){o(c)}}function u(h){h.done?s(h.value):n(h.value).then(a,l)}u((i=i.apply(r,e||[])).next())})}function Y5(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=u[0]&2?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,n=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(h){u=[6,h],n=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var kT=function(r){NT(e,r);function e(t,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,s,o;return typeof t=="string"?(s=t,o=new Uint8Array):(s=null,o=t),n=r.call(this,o,i)||this,n.origin=s,n.buffer=o?new Vu(o):null,n.origin&&i.autoLoad!==!1&&n.load(),o&&o.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return W5(this,void 0,Promise,function(){var t,i,n;return Y5(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return t=s.sent(),[4,t.blob()];case 2:return i=s.sent(),[4,i.arrayBuffer()];case 3:return n=s.sent(),this.data=new Uint32Array(n),this.buffer=new Vu(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},e}(bs),Zu=function(r){NT(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=e._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return e.prototype.upload=function(t,i,n){var s=t.gl,o=t.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,l=this.levels;a<l;a++){var u=this._levelBuffers[a],h=u.levelID,c=u.levelWidth,f=u.levelHeight,d=u.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,h,this.format,c,f,0,d)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,i,n,s,o,a,l){for(var u=new Array(n),h=t.byteOffset,c=a,f=l,d=c+s-1&~(s-1),p=f+o-1&~(o-1),m=d*p*tl[i],v=0;v<n;v++)u[v]={levelID:v,levelWidth:n>1?c:d,levelHeight:n>1?f:p,levelBuffer:new Uint8Array(t.buffer,h,m)},h+=m,c=c>>1||1,f=f>>1||1,d=c+s-1&~(s-1),p=f+o-1&~(o-1),m=d*p*tl[i];return u},e}(kT),UT=function(){function r(){}return r.use=function(e,t){var i=e.data,n=this;if(e.type===ht.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var s=i.textures,o=void 0,a=void 0,l=0,u=s.length;l<u;l++){var h=s[l],c=h.src,f=h.format;if(f||(a=c),r.textureFormats[f]){o=c;break}}if(o=o||a,!o){t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(o===e.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=ar.resolve(e.url.replace(n.baseUrl,""),o),m=i.cacheID;n.add(m,p,d,function(v){if(v.error){t(v.error);return}var g=v.texture,_=g===void 0?null:g,y=v.textures,b=y===void 0?{}:y;Object.assign(e,{texture:_,textures:b}),t()})}else t()},Object.defineProperty(r,"textureExtensions",{get:function(){if(!r._textureExtensions){var e=ie.ADAPTER.createCanvas(),t=e.getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};r._textureExtensions=i}return r._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(r,"textureFormats",{get:function(){if(!r._textureFormats){var e=r.textureExtensions;r._textureFormats={};for(var t in e){var i=e[t];i&&Object.assign(r._textureFormats,Object.getPrototypeOf(i))}}return r._textureFormats},enumerable:!1,configurable:!0}),r.extension=Xe.Loader,r}();function GT(r,e,t){var i={textures:{},texture:null};if(!e)return i;var n=e.map(function(s){return new ve(new De(s,Object.assign({mipmap:Cr.OFF,alphaMode:Mr.NO_PREMULTIPLIED_ALPHA},t)))});return n.forEach(function(s,o){var a=s.baseTexture,l=r+"-"+(o+1);De.addToCache(a,l),ve.addToCache(s,l),o===0&&(De.addToCache(a,r),ve.addToCache(s,r),i.texture=s),i.textures[l]=s}),i}var qo,Dr,nf=4,tu=124,q5=32,Cy=20,K5=542327876,ru={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Z5={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},iu={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},kr;(function(r){r[r.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",r[r.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",r[r.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",r[r.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",r[r.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",r[r.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",r[r.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",r[r.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",r[r.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",r[r.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",r[r.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",r[r.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",r[r.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",r[r.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",r[r.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",r[r.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",r[r.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",r[r.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",r[r.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",r[r.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",r[r.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",r[r.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",r[r.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",r[r.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",r[r.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",r[r.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",r[r.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",r[r.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",r[r.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",r[r.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",r[r.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",r[r.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",r[r.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",r[r.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",r[r.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",r[r.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",r[r.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",r[r.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",r[r.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",r[r.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",r[r.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",r[r.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",r[r.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",r[r.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",r[r.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",r[r.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",r[r.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",r[r.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",r[r.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",r[r.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",r[r.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",r[r.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",r[r.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",r[r.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",r[r.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",r[r.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",r[r.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",r[r.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",r[r.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",r[r.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",r[r.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",r[r.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",r[r.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",r[r.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",r[r.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",r[r.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",r[r.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",r[r.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",r[r.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",r[r.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",r[r.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",r[r.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",r[r.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",r[r.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",r[r.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",r[r.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",r[r.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",r[r.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",r[r.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",r[r.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",r[r.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",r[r.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",r[r.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",r[r.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",r[r.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",r[r.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",r[r.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",r[r.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",r[r.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",r[r.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",r[r.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",r[r.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",r[r.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",r[r.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",r[r.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",r[r.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",r[r.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",r[r.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",r[r.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",r[r.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",r[r.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",r[r.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",r[r.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",r[r.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",r[r.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",r[r.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",r[r.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",r[r.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",r[r.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",r[r.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",r[r.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",r[r.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(kr||(kr={}));var bd;(function(r){r[r.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",r[r.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",r[r.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(bd||(bd={}));var J5=1,Q5=2,eG=4,tG=64,rG=512,iG=131072,nG=827611204,sG=861165636,oG=894720068,aG=808540228,lG=4,uG=(qo={},qo[nG]=we.COMPRESSED_RGBA_S3TC_DXT1_EXT,qo[sG]=we.COMPRESSED_RGBA_S3TC_DXT3_EXT,qo[oG]=we.COMPRESSED_RGBA_S3TC_DXT5_EXT,qo),hG=(Dr={},Dr[kr.DXGI_FORMAT_BC1_TYPELESS]=we.COMPRESSED_RGBA_S3TC_DXT1_EXT,Dr[kr.DXGI_FORMAT_BC1_UNORM]=we.COMPRESSED_RGBA_S3TC_DXT1_EXT,Dr[kr.DXGI_FORMAT_BC2_TYPELESS]=we.COMPRESSED_RGBA_S3TC_DXT3_EXT,Dr[kr.DXGI_FORMAT_BC2_UNORM]=we.COMPRESSED_RGBA_S3TC_DXT3_EXT,Dr[kr.DXGI_FORMAT_BC3_TYPELESS]=we.COMPRESSED_RGBA_S3TC_DXT5_EXT,Dr[kr.DXGI_FORMAT_BC3_UNORM]=we.COMPRESSED_RGBA_S3TC_DXT5_EXT,Dr[kr.DXGI_FORMAT_BC1_UNORM_SRGB]=we.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Dr[kr.DXGI_FORMAT_BC2_UNORM_SRGB]=we.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Dr[kr.DXGI_FORMAT_BC3_UNORM_SRGB]=we.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Dr);function VT(r){var e=new Uint32Array(r),t=e[0];if(t!==K5)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(r,0,tu/Uint32Array.BYTES_PER_ELEMENT),n=i[ru.HEIGHT],s=i[ru.WIDTH],o=i[ru.MIPMAP_COUNT],a=new Uint32Array(r,ru.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,q5/Uint32Array.BYTES_PER_ELEMENT),l=a[J5];if(l&eG){var u=a[Z5.FOURCC];if(u!==aG){var h=uG[u],c=nf+tu,f=new Uint8Array(r,c),d=new Zu(f,{format:h,width:s,height:n,levels:o});return[d]}var p=nf+tu,m=new Uint32Array(e.buffer,p,Cy/Uint32Array.BYTES_PER_ELEMENT),v=m[iu.DXGI_FORMAT],g=m[iu.RESOURCE_DIMENSION],_=m[iu.MISC_FLAG],y=m[iu.ARRAY_SIZE],b=hG[v];if(b===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+v);if(_===lG)throw new Error("DDSParser does not support cubemap textures");if(g===bd.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var T=new Array,S=nf+tu+Cy;if(y===1)T.push(new Uint8Array(r,S));else{for(var E=tl[b],C=0,M=s,A=n,F=0;F<o;F++){var O=Math.max(1,M+3&-4),I=Math.max(1,A+3&-4),D=O*I*E;C+=D,M=M>>>1,A=A>>>1}for(var N=S,F=0;F<y;F++)T.push(new Uint8Array(r,N,C)),N+=C}return T.map(function(B){return new Zu(B,{format:b,width:s,height:n,levels:o})})}throw l&tG?new Error("DDSParser does not support uncompressed texture data."):l&rG?new Error("DDSParser does not supported YUV uncompressed texture data."):l&iG?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&Q5?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Ki,wi,Ko,My=[171,75,84,88,32,49,49,187,13,10,26,10],cG=67305985,Br={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xd=64,Td=(Ki={},Ki[ce.UNSIGNED_BYTE]=1,Ki[ce.UNSIGNED_SHORT]=2,Ki[ce.INT]=4,Ki[ce.UNSIGNED_INT]=4,Ki[ce.FLOAT]=4,Ki[ce.HALF_FLOAT]=8,Ki),HT=(wi={},wi[J.RGBA]=4,wi[J.RGB]=3,wi[J.RG]=2,wi[J.RED]=1,wi[J.LUMINANCE]=1,wi[J.LUMINANCE_ALPHA]=2,wi[J.ALPHA]=1,wi),$T=(Ko={},Ko[ce.UNSIGNED_SHORT_4_4_4_4]=2,Ko[ce.UNSIGNED_SHORT_5_5_5_1]=2,Ko[ce.UNSIGNED_SHORT_5_6_5]=2,Ko);function jT(r,e,t){t===void 0&&(t=!1);var i=new DataView(e);if(!fG(r,i))return null;var n=i.getUint32(Br.ENDIANNESS,!0)===cG,s=i.getUint32(Br.GL_TYPE,n),o=i.getUint32(Br.GL_FORMAT,n),a=i.getUint32(Br.GL_INTERNAL_FORMAT,n),l=i.getUint32(Br.PIXEL_WIDTH,n),u=i.getUint32(Br.PIXEL_HEIGHT,n)||1,h=i.getUint32(Br.PIXEL_DEPTH,n)||1,c=i.getUint32(Br.NUMBER_OF_ARRAY_ELEMENTS,n)||1,f=i.getUint32(Br.NUMBER_OF_FACES,n),d=i.getUint32(Br.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(Br.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");var m=4,v=4,g=l+3&-4,_=u+3&-4,y=new Array(c),b=l*u;s===0&&(b=g*_);var T;if(s!==0?Td[s]?T=Td[s]*HT[o]:T=$T[s]:T=tl[a],T===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=t?pG(i,p,n):null,E=b*T,C=E,M=l,A=u,F=g,O=_,I=xd+p,D=0;D<d;D++){for(var N=i.getUint32(I,n),B=I+4,L=0;L<c;L++){var Q=y[L];Q||(Q=y[L]=new Array(d)),Q[D]={levelID:D,levelWidth:d>1||s!==0?M:F,levelHeight:d>1||s!==0?A:O,levelBuffer:new Uint8Array(e,B,C)},B+=C}I+=N+4,I=I%4!==0?I+4-I%4:I,M=M>>1||1,A=A>>1||1,F=M+m-1&~(m-1),O=A+v-1&~(v-1),C=F*O*T}return s!==0?{uncompressed:y.map(function(ee){var X=ee[0].levelBuffer,G=!1;return s===ce.FLOAT?X=new Float32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4):s===ce.UNSIGNED_INT?(G=!0,X=new Uint32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4)):s===ce.INT&&(G=!0,X=new Int32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4)),{resource:new bs(X,{width:ee[0].levelWidth,height:ee[0].levelHeight}),type:s,format:G?dG(o):o}}),kvData:S}:{compressed:y.map(function(ee){return new Zu(null,{format:a,width:l,height:u,levels:d,levelBuffers:ee})}),kvData:S}}function fG(r,e){for(var t=0;t<My.length;t++)if(e.getUint8(t)!==My[t])return console.error(r+" is not a valid *.ktx file!"),!1;return!0}function dG(r){switch(r){case J.RGBA:return J.RGBA_INTEGER;case J.RGB:return J.RGB_INTEGER;case J.RG:return J.RG_INTEGER;case J.RED:return J.RED_INTEGER;default:return r}}function pG(r,e,t){for(var i=new Map,n=0;n<e;){var s=r.getUint32(xd+n,t),o=xd+n+4,a=3-(s+3)%4;if(s===0||s>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}ht.setExtensionXhrType("dds",ht.XHR_RESPONSE_TYPE.BUFFER);var XT=function(){function r(){}return r.use=function(e,t){if(e.extension==="dds"&&e.data)try{Object.assign(e,GT(e.name||e.url,VT(e.data),e.metadata))}catch(i){t(i);return}t()},r.extension=Xe.Loader,r}();ht.setExtensionXhrType("ktx",ht.XHR_RESPONSE_TYPE.BUFFER);var zT=function(){function r(){}return r.use=function(e,t){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,n=jT(i,e.data,this.loadKeyValueData),s=n.compressed,o=n.uncompressed,a=n.kvData;if(s){var l=GT(i,s,e.metadata);if(a&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=a;Object.assign(e,l)}else if(o){var h={};o.forEach(function(c,f){var d=new ve(new De(c.resource,{mipmap:Cr.OFF,alphaMode:Mr.NO_PREMULTIPLIED_ALPHA,type:c.type,format:c.format})),p=i+"-"+(f+1);a&&(d.baseTexture.ktxKeyValueData=a),De.addToCache(d.baseTexture,p),ve.addToCache(d,p),f===0&&(h[i]=d,De.addToCache(d.baseTexture,i),ve.addToCache(d,i)),h[p]=d}),Object.assign(e,{textures:h})}}catch(c){t(c);return}t()},r.extension=Xe.Loader,r.loadKeyValueData=!1,r}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sd=function(r,e){return Sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Sd(r,e)};function WT(r,e){Sd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mG=function(r){WT(e,r);function e(t,i,n,s){t===void 0&&(t=1500),n===void 0&&(n=16384),s===void 0&&(s=!1);var o=r.call(this)||this,a=16384;return n>a&&(n=a),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=fe.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,ms(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var i=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(ur),Iy=function(){function r(e,t,i){this.geometry=new Mo,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var s=e[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ce.FLOAT,offset:s.offset},t[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new gt(Lb(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new gt(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=o,o+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new gt(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];e.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===ce.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];e.addAttribute(n.attributeName,this.staticBuffer,0,n.type===ce.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},r.prototype.uploadDynamic=function(e,t,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(e,t,i,s.type===ce.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(e,t,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(e,t,i,s.type===ce.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),vG=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,gG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,YT=function(r){WT(e,r);function e(t){var i=r.call(this,t)||this;return i.shader=null,i.properties=null,i.tempMatrix=new We,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ce.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=Di.from(gG,vG,{}),i.state=Tn.for2d(),i}return e.prototype.render=function(t){var i=t.children,n=t._maxSize,s=t._batchSize,o=this.renderer,a=i.length;if(a!==0){a>n&&!t.autoResize&&(a=n);var l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));var u=i[0]._texture.baseTexture,h=u.alphaMode>0;this.state.blendMode=Fp(t.blendMode,h),o.state.set(this.state);var c=o.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Fb(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var d=!1,p=0,m=0;p<a;p+=s,m+=1){var v=a-p;v>s&&(v=s),m>=l.length&&l.push(this._generateOneMoreBuffer(t));var g=l[m];g.uploadDynamic(i,p,v);var _=t._bufferUpdateIDs[m]||0;d=d||g._updateID<_,d&&(g._updateID=t._updateID,g.uploadStatic(i,p,v)),o.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,v*6,c.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var i=[],n=t._maxSize,s=t._batchSize,o=t._properties,a=0;a<n;a+=s)i.push(new Iy(this.properties,o,s));return i},e.prototype._generateOneMoreBuffer=function(t){var i=t._batchSize,n=t._properties;return new Iy(this.properties,n,i)},e.prototype.uploadVertices=function(t,i,n,s,o,a){for(var l=0,u=0,h=0,c=0,f=0;f<n;++f){var d=t[i+f],p=d._texture,m=d.scale.x,v=d.scale.y,g=p.trim,_=p.orig;g?(u=g.x-d.anchor.x*_.width,l=u+g.width,c=g.y-d.anchor.y*_.height,h=c+g.height):(l=_.width*(1-d.anchor.x),u=_.width*-d.anchor.x,h=_.height*(1-d.anchor.y),c=_.height*-d.anchor.y),s[a]=u*m,s[a+1]=c*v,s[a+o]=l*m,s[a+o+1]=c*v,s[a+o*2]=l*m,s[a+o*2+1]=h*v,s[a+o*3]=u*m,s[a+o*3+1]=h*v,a+=o*4}},e.prototype.uploadPosition=function(t,i,n,s,o,a){for(var l=0;l<n;l++){var u=t[i+l].position;s[a]=u.x,s[a+1]=u.y,s[a+o]=u.x,s[a+o+1]=u.y,s[a+o*2]=u.x,s[a+o*2+1]=u.y,s[a+o*3]=u.x,s[a+o*3+1]=u.y,a+=o*4}},e.prototype.uploadRotation=function(t,i,n,s,o,a){for(var l=0;l<n;l++){var u=t[i+l].rotation;s[a]=u,s[a+o]=u,s[a+o*2]=u,s[a+o*3]=u,a+=o*4}},e.prototype.uploadUvs=function(t,i,n,s,o,a){for(var l=0;l<n;++l){var u=t[i+l]._texture._uvs;u?(s[a]=u.x0,s[a+1]=u.y0,s[a+o]=u.x1,s[a+o+1]=u.y1,s[a+o*2]=u.x2,s[a+o*2+1]=u.y2,s[a+o*3]=u.x3,s[a+o*3+1]=u.y3,a+=o*4):(s[a]=0,s[a+1]=0,s[a+o]=0,s[a+o+1]=0,s[a+o*2]=0,s[a+o*2+1]=0,s[a+o*3]=0,s[a+o*3+1]=0,a+=o*4)}},e.prototype.uploadTint=function(t,i,n,s,o,a){for(var l=0;l<n;++l){var u=t[i+l],h=u._texture.baseTexture.alphaMode>0,c=u.alpha,f=c<1&&h?mh(u._tintRGB,c):u._tintRGB+(c*255<<24);s[a]=f,s[a+o]=f,s[a+o*2]=f,s[a+o*3]=f,a+=o*4}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Xe.RendererPlugin},e}(hl);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fi;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(fi||(fi={}));var Li;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(Li||(Li={}));var yo={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,e){if(e===void 0&&(e=20),!this.adaptive||!r||isNaN(r))return e;var t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Wm=function(){function r(){this.color=16777215,this.alpha=1,this.texture=ve.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ve.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ed=function(r,e){return Ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ed(r,e)};function Ym(r,e){Ed(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ay(r,e){var t,i;e===void 0&&(e=!1);var n=r.length;if(!(n<6)){for(var s=0,o=0,a=r[n-2],l=r[n-1];o<n;o+=2){var u=r[o],h=r[o+1];s+=(u-a)*(h+l),a=u,l=h}if(!e&&s>0||e&&s<=0)for(var c=n/2,o=c+c%2;o<n;o+=2){var f=n-o-2,d=n-o-1,p=o,m=o+1;t=[r[p],r[f]],r[f]=t[0],r[p]=t[1],i=[r[m],r[d]],r[d]=i[0],r[m]=i[1]}}}var qm={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,e){var t=r.points,i=r.holes,n=e.points,s=e.indices;if(t.length>=6){Ay(t,!1);for(var o=[],a=0;a<i.length;a++){var l=i[a];Ay(l.points,!0),o.push(t.length/2),t=t.concat(l.points)}var u=xp(t,o,2);if(!u)return;for(var h=n.length/2,a=0;a<u.length;a+=3)s.push(u[a]+h),s.push(u[a+1]+h),s.push(u[a+2]+h);for(var a=0;a<t.length;a++)n.push(t[a])}}},rl={build:function(r){var e=r.points,t,i,n,s,o,a;if(r.type===Tt.CIRC){var l=r.shape;t=l.x,i=l.y,o=a=l.radius,n=s=0}else if(r.type===Tt.ELIP){var u=r.shape;t=u.x,i=u.y,o=u.width,a=u.height,n=s=0}else{var h=r.shape,c=h.width/2,f=h.height/2;t=h.x+c,i=h.y+f,o=a=Math.max(0,Math.min(h.radius,Math.min(c,f))),n=c-o,s=f-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){e.length=0;return}var d=Math.ceil(2.3*Math.sqrt(o+a)),p=d*8+(n?4:0)+(s?4:0);if(e.length=p,p!==0){if(d===0){e.length=8,e[0]=e[6]=t+n,e[1]=e[3]=i+s,e[2]=e[4]=t-n,e[5]=e[7]=i-s;return}var m=0,v=d*4+(n?2:0)+2,g=v,_=p;{var y=n+o,b=s,T=t+y,S=t-y,E=i+b;if(e[m++]=T,e[m++]=E,e[--v]=E,e[--v]=S,s){var C=i-b;e[g++]=S,e[g++]=C,e[--_]=C,e[--_]=T}}for(var M=1;M<d;M++){var A=Math.PI/2*(M/d),y=n+Math.cos(A)*o,b=s+Math.sin(A)*a,T=t+y,S=t-y,E=i+b,C=i-b;e[m++]=T,e[m++]=E,e[--v]=E,e[--v]=S,e[g++]=S,e[g++]=C,e[--_]=C,e[--_]=T}{var y=n,b=s+a,T=t+y,S=t-y,E=i+b,C=i-b;e[m++]=T,e[m++]=E,e[--_]=C,e[--_]=T,n&&(e[m++]=S,e[m++]=E,e[--_]=C,e[--_]=S)}}},triangulate:function(r,e){var t=r.points,i=e.points,n=e.indices;if(t.length!==0){var s=i.length/2,o=s,a,l;if(r.type!==Tt.RREC){var u=r.shape;a=u.x,l=u.y}else{var h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}var c=r.matrix;i.push(r.matrix?c.a*a+c.c*l+c.tx:a,r.matrix?c.b*a+c.d*l+c.ty:l),s++,i.push(t[0],t[1]);for(var f=2;f<t.length;f+=2)i.push(t[f],t[f+1]),n.push(s++,o,s);n.push(o+1,o,s)}}},qT={build:function(r){var e=r.shape,t=e.x,i=e.y,n=e.width,s=e.height,o=r.points;o.length=0,o.push(t,i,t+n,i,t+n,i+s,t,i+s)},triangulate:function(r,e){var t=r.points,i=e.points,n=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Ds(r,e,t){var i=e-r;return r+i*t}function nu(r,e,t,i,n,s,o){o===void 0&&(o=[]);for(var a=20,l=o,u=0,h=0,c=0,f=0,d=0,p=0,m=0,v=0;m<=a;++m)v=m/a,u=Ds(r,t,v),h=Ds(e,i,v),c=Ds(t,n,v),f=Ds(i,s,v),d=Ds(u,c,v),p=Ds(h,f,v),!(m===0&&l[l.length-2]===d&&l[l.length-1]===p)&&l.push(d,p);return l}var KT={build:function(r){if(il.nextRoundedRectBehavior){rl.build(r);return}var e=r.shape,t=r.points,i=e.x,n=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));t.length=0,a?(nu(i,n+a,i,n,i+a,n,t),nu(i+s-a,n,i+s,n,i+s,n+a,t),nu(i+s,n+o-a,i+s,n+o,i+s-a,n+o,t),nu(i+a,n+o,i,n+o,i,n+o-a,t)):t.push(i,n,i+s,n,i+s,n+o,i,n+o)},triangulate:function(r,e){if(il.nextRoundedRectBehavior){rl.triangulate(r,e);return}for(var t=r.points,i=e.points,n=e.indices,s=i.length/2,o=xp(t,null,2),a=0,l=o.length;a<l;a+=3)n.push(o[a]+s),n.push(o[a+1]+s),n.push(o[a+2]+s);for(var a=0,l=t.length;a<l;a++)i.push(t[a],t[++a])}};function Oy(r,e,t,i,n,s,o,a){var l=r-t*n,u=e-i*n,h=r+t*s,c=e+i*s,f,d;o?(f=i,d=-t):(f=-i,d=t);var p=l+f,m=u+d,v=h+f,g=c+d;return a.push(p,m),a.push(v,g),2}function Ln(r,e,t,i,n,s,o,a){var l=t-r,u=i-e,h=Math.atan2(l,u),c=Math.atan2(n-r,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);var f=h,d=c-h,p=Math.abs(d),m=Math.sqrt(l*l+u*u),v=(15*p*Math.sqrt(m)/Math.PI>>0)+1,g=d/v;if(f+=g,a){o.push(r,e),o.push(t,i);for(var _=1,y=f;_<v;_++,y+=g)o.push(r,e),o.push(r+Math.sin(y)*m,e+Math.cos(y)*m);o.push(r,e),o.push(n,s)}else{o.push(t,i),o.push(r,e);for(var _=1,y=f;_<v;_++,y+=g)o.push(r+Math.sin(y)*m,e+Math.cos(y)*m),o.push(r,e);o.push(n,s),o.push(r,e)}return v*2}function _G(r,e){var t=r.shape,i=r.points||t.points.slice(),n=e.closePointEps;if(i.length!==0){var s=r.lineStyle,o=new ze(i[0],i[1]),a=new ze(i[i.length-2],i[i.length-1]),l=t.type!==Tt.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var h=(o.x+a.x)*.5,c=(a.y+o.y)*.5;i.unshift(h,c),i.push(h,c)}var f=e.points,d=i.length/2,p=i.length,m=f.length/2,v=s.width/2,g=v*v,_=s.miterLimit*s.miterLimit,y=i[0],b=i[1],T=i[2],S=i[3],E=0,C=0,M=-(b-S),A=y-T,F=0,O=0,I=Math.sqrt(M*M+A*A);M/=I,A/=I,M*=v,A*=v;var D=s.alignment,N=(1-D)*2,B=D*2;l||(s.cap===Li.ROUND?p+=Ln(y-M*(N-B)*.5,b-A*(N-B)*.5,y-M*N,b-A*N,y+M*B,b+A*B,f,!0)+2:s.cap===Li.SQUARE&&(p+=Oy(y,b,M,A,N,B,!0,f))),f.push(y-M*N,b-A*N),f.push(y+M*B,b+A*B);for(var L=1;L<d-1;++L){y=i[(L-1)*2],b=i[(L-1)*2+1],T=i[L*2],S=i[L*2+1],E=i[(L+1)*2],C=i[(L+1)*2+1],M=-(b-S),A=y-T,I=Math.sqrt(M*M+A*A),M/=I,A/=I,M*=v,A*=v,F=-(S-C),O=T-E,I=Math.sqrt(F*F+O*O),F/=I,O/=I,F*=v,O*=v;var Q=T-y,ee=b-S,X=T-E,G=C-S,W=Q*X+ee*G,se=ee*X-G*Q,he=se<0;if(Math.abs(se)<.001*Math.abs(W)){f.push(T-M*N,S-A*N),f.push(T+M*B,S+A*B),W>=0&&(s.join===fi.ROUND?p+=Ln(T,S,T-M*N,S-A*N,T-F*N,S-O*N,f,!1)+4:p+=2,f.push(T-F*B,S-O*B),f.push(T+F*N,S+O*N));continue}var xe=(-M+y)*(-A+S)-(-M+T)*(-A+b),te=(-F+E)*(-O+S)-(-F+T)*(-O+C),ge=(Q*te-X*xe)/se,Ce=(G*xe-ee*te)/se,$e=(ge-T)*(ge-T)+(Ce-S)*(Ce-S),Te=T+(ge-T)*N,_e=S+(Ce-S)*N,w=T-(ge-T)*B,P=S-(Ce-S)*B,R=Math.min(Q*Q+ee*ee,X*X+G*G),H=he?N:B,V=R+H*H*g,$=$e<=V;$?s.join===fi.BEVEL||$e/g>_?(he?(f.push(Te,_e),f.push(T+M*B,S+A*B),f.push(Te,_e),f.push(T+F*B,S+O*B)):(f.push(T-M*N,S-A*N),f.push(w,P),f.push(T-F*N,S-O*N),f.push(w,P)),p+=2):s.join===fi.ROUND?he?(f.push(Te,_e),f.push(T+M*B,S+A*B),p+=Ln(T,S,T+M*B,S+A*B,T+F*B,S+O*B,f,!0)+4,f.push(Te,_e),f.push(T+F*B,S+O*B)):(f.push(T-M*N,S-A*N),f.push(w,P),p+=Ln(T,S,T-M*N,S-A*N,T-F*N,S-O*N,f,!1)+4,f.push(T-F*N,S-O*N),f.push(w,P)):(f.push(Te,_e),f.push(w,P)):(f.push(T-M*N,S-A*N),f.push(T+M*B,S+A*B),s.join===fi.ROUND?he?p+=Ln(T,S,T+M*B,S+A*B,T+F*B,S+O*B,f,!0)+2:p+=Ln(T,S,T-M*N,S-A*N,T-F*N,S-O*N,f,!1)+2:s.join===fi.MITER&&$e/g<=_&&(he?(f.push(w,P),f.push(w,P)):(f.push(Te,_e),f.push(Te,_e)),p+=2),f.push(T-F*N,S-O*N),f.push(T+F*B,S+O*B),p+=2)}y=i[(d-2)*2],b=i[(d-2)*2+1],T=i[(d-1)*2],S=i[(d-1)*2+1],M=-(b-S),A=y-T,I=Math.sqrt(M*M+A*A),M/=I,A/=I,M*=v,A*=v,f.push(T-M*N,S-A*N),f.push(T+M*B,S+A*B),l||(s.cap===Li.ROUND?p+=Ln(T-M*(N-B)*.5,S-A*(N-B)*.5,T-M*N,S-A*N,T+M*B,S+A*B,f,!1)+2:s.cap===Li.SQUARE&&(p+=Oy(T,S,M,A,N,B,!1,f)));for(var Z=e.indices,Y=yo.epsilon*yo.epsilon,L=m;L<p+m-2;++L)y=f[L*2],b=f[L*2+1],T=f[(L+1)*2],S=f[(L+1)*2+1],E=f[(L+2)*2],C=f[(L+2)*2+1],!(Math.abs(y*(S-C)+T*(C-b)+E*(b-S))<Y)&&Z.push(L,L+1,L+2)}}function yG(r,e){var t=0,i=r.shape,n=r.points||i.points,s=i.type!==Tt.POLY||i.closeStroke;if(n.length!==0){var o=e.points,a=e.indices,l=n.length/2,u=o.length/2,h=u;for(o.push(n[0],n[1]),t=1;t<l;t++)o.push(n[t*2],n[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}}function wd(r,e){r.lineStyle.native?yG(r,e):_G(r,e)}var Pd=function(){function r(){}return r.curveTo=function(e,t,i,n,s,o){var a=o[o.length-2],l=o[o.length-1],u=l-t,h=a-e,c=n-t,f=i-e,d=Math.abs(u*f-h*c);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;var p=u*u+h*h,m=c*c+f*f,v=u*c+h*f,g=s*Math.sqrt(p)/d,_=s*Math.sqrt(m)/d,y=g*v/p,b=_*v/m,T=g*f+_*h,S=g*c+_*u,E=h*(_+y),C=u*(_+y),M=f*(g+b),A=c*(g+b),F=Math.atan2(C-S,E-T),O=Math.atan2(A-S,M-T);return{cx:T+e,cy:S+t,radius:s,startAngle:F,endAngle:O,anticlockwise:h*c>f*u}},r.arc=function(e,t,i,n,s,o,a,l,u){for(var h=a-o,c=yo._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/Va)*40),f=h/(c*2),d=f*2,p=Math.cos(f),m=Math.sin(f),v=c-1,g=v%1/v,_=0;_<=v;++_){var y=_+g*_,b=f+o+d*y,T=Math.cos(b),S=-Math.sin(b);u.push((p*T+m*S)*s+i,(p*-S+m*T)*s+n)}},r}(),ZT=function(){function r(){}return r.curveLength=function(e,t,i,n,s,o,a,l){for(var u=10,h=0,c=0,f=0,d=0,p=0,m=0,v=0,g=0,_=0,y=0,b=0,T=e,S=t,E=1;E<=u;++E)c=E/u,f=c*c,d=f*c,p=1-c,m=p*p,v=m*p,g=v*e+3*m*c*i+3*p*f*s+d*a,_=v*t+3*m*c*n+3*p*f*o+d*l,y=T-g,b=S-_,T=g,S=_,h+=Math.sqrt(y*y+b*b);return h},r.curveTo=function(e,t,i,n,s,o,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var h=yo._segmentsCount(r.curveLength(l,u,e,t,i,n,s,o)),c=0,f=0,d=0,p=0,m=0;a.push(l,u);for(var v=1,g=0;v<=h;++v)g=v/h,c=1-g,f=c*c,d=f*c,p=g*g,m=p*g,a.push(d*l+3*f*g*e+3*c*p*i+m*s,d*u+3*f*g*t+3*c*p*n+m*o)},r}(),JT=function(){function r(){}return r.curveLength=function(e,t,i,n,s,o){var a=e-2*i+s,l=t-2*n+o,u=2*i-2*e,h=2*n-2*t,c=4*(a*a+l*l),f=4*(a*u+l*h),d=u*u+h*h,p=2*Math.sqrt(c+f+d),m=Math.sqrt(c),v=2*c*m,g=2*Math.sqrt(d),_=f/m;return(v*p+m*f*(p-g)+(4*d*c-f*f)*Math.log((2*m+_+p)/(_+g)))/(4*v)},r.curveTo=function(e,t,i,n,s){for(var o=s[s.length-2],a=s[s.length-1],l=yo._segmentsCount(r.curveLength(o,a,e,t,i,n)),u=0,h=0,c=1;c<=l;++c){var f=c/l;u=o+(e-o)*f,h=a+(t-a)*f,s.push(u+(e+(i-e)*f-u)*f,h+(t+(n-t)*f-h)*f)}},r}(),QT=function(){function r(){this.reset()}return r.prototype.begin=function(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i},r.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),Dn,Eu=(Dn={},Dn[Tt.POLY]=qm,Dn[Tt.CIRC]=rl,Dn[Tt.ELIP]=rl,Dn[Tt.RECT]=qT,Dn[Tt.RREC]=KT,Dn),Cd=[],ha=[],Md=function(){function r(e,t,i,n){t===void 0&&(t=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=n,this.type=e.type}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),Bs=new ze,eS=function(r){Ym(e,r);function e(){var t=r.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new $a,t.boundsDirty=-1,t}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ha.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var i=this.batches[t];i.reset(),Cd.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,i,n,s){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=null);var o=new Md(t,i,n,s);return this.graphicsData.push(o),this.dirty++,this},e.prototype.drawHole=function(t,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new Md(t,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){r.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var i=this.graphicsData,n=0;n<i.length;++n){var s=i[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,Bs):Bs.copyFrom(t),s.shape.contains(Bs.x,Bs.y))){var o=!1;if(s.holes)for(var a=0;a<s.holes.length;a++){var l=s.holes[a];if(l.shape.contains(Bs.x,Bs.y)){o=!0;break}}if(!o)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,i=this.graphicsData,n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(var o=this.shapeIndex;o<i.length;o++){this.shapeIndex++;var a=i[o],l=a.fillStyle,u=a.lineStyle,h=Eu[a.type];h.build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(l.visible||u.visible)&&this.processHoles(a.holes);for(var c=0;c<2;c++){var f=c===0?l:u;if(f.visible){var d=f.texture.baseTexture,p=this.indices.length,m=this.points.length/2;d.wrapMode=jr.REPEAT,c===0?this.processFill(a):this.processLine(a);var v=this.points.length/2-m;v!==0&&(n&&!this._compareStyles(s,f)&&(n.end(p,m),n=null),n||(n=Cd.pop()||new QT,n.begin(f,p,m),this.batches.push(n),s=f),this.addUvs(this.points,t,f.texture,m,v,f.matrix))}}}var g=this.indices.length,_=this.points.length/2;if(n&&n.end(g,_),this.batches.length===0){this.batchable=!0;return}var y=_>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&y===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(t,i){return!(!t||!i||t.texture.baseTexture!==i.texture.baseTexture||t.color+t.alpha!==i.color+i.alpha||!!t.native!=!!i.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,i=this.graphicsData.length;t<i;t++){var n=this.graphicsData[t],s=n.fillStyle,o=n.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,i=0,n=t.length;i<n;i++)for(var s=t[i],o=0;o<s.size;o++){var a=s.start+o;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var t=++De._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),ha.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,o=ha.pop();o||(o=new Uu,o.texArray=new Gu),o.texArray.count=0,o.start=0,o.size=0,o.type=xr.TRIANGLES;var a=0,l=null,u=0,h=!1,c=xr.TRIANGLES,f=0;this.drawCalls.push(o);for(var i=0;i<this.batches.length;i++){var d=this.batches[i],p=8,m=d.style,v=m.texture.baseTexture;h!==!!m.native&&(h=!!m.native,c=h?xr.LINES:xr.TRIANGLES,l=null,a=p,t++),l!==v&&(l=v,v._batchEnabled!==t&&(a===p&&(t++,a=0,o.size>0&&(o=ha.pop(),o||(o=new Uu,o.texArray=new Gu),this.drawCalls.push(o)),o.start=f,o.size=0,o.texArray.count=0,o.type=c),v.touched=1,v._batchEnabled=t,v._batchLocation=a,v.wrapMode=jr.REPEAT,o.texArray.elements[o.texArray.count++]=v,a++)),o.size+=d.size,f+=d.size,u=v._batchLocation,this.addColors(n,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,u,d.attribSize,d.attribStart)}De._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,i=this.uvs,n=this.colors,s=this.textureIds,o=new ArrayBuffer(t.length*3*4),a=new Float32Array(o),l=new Uint32Array(o),u=0,h=0;h<t.length/2;h++)a[u++]=t[h*2],a[u++]=t[h*2+1],a[u++]=i[h*2],a[u++]=i[h*2+1],l[u++]=n[h],a[u++]=s[h];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){if(t.holes.length)qm.triangulate(t,this);else{var i=Eu[t.type];i.triangulate(t,this)}},e.prototype.processLine=function(t){wd(t,this);for(var i=0;i<t.holes.length;i++)wd(t.holes[i],this)},e.prototype.processHoles=function(t){for(var i=0;i<t.length;i++){var n=t[i],s=Eu[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,i){for(var n=0;n<t.length/2;n++){var s=t[n*2],o=t[n*2+1];t[n*2]=i.a*s+i.c*o+i.tx,t[n*2+1]=i.b*s+i.d*o+i.ty}},e.prototype.addColors=function(t,i,n,s,o){o===void 0&&(o=0);var a=(i>>16)+(i&65280)+((i&255)<<16),l=mh(a,n);t.length=Math.max(t.length,o+s);for(var u=0;u<s;u++)t[o+u]=l},e.prototype.addTextureIds=function(t,i,n,s){s===void 0&&(s=0),t.length=Math.max(t.length,s+n);for(var o=0;o<n;o++)t[s+o]=i},e.prototype.addUvs=function(t,i,n,s,o,a){a===void 0&&(a=null);for(var l=0,u=i.length,h=n.frame;l<o;){var c=t[(s+l)*2],f=t[(s+l)*2+1];if(a){var d=a.a*c+a.c*f+a.tx;f=a.b*c+a.d*f+a.ty,c=d}l++,i.push(c/h.width,f/h.height)}var p=n.baseTexture;(h.width<p.width||h.height<p.height)&&this.adjustUvs(i,n,u,o)},e.prototype.adjustUvs=function(t,i,n,s){for(var o=i.baseTexture,a=1e-6,l=n+s*2,u=i.frame,h=u.width/o.width,c=u.height/o.height,f=u.x/u.width,d=u.y/u.height,p=Math.floor(t[n]+a),m=Math.floor(t[n+1]+a),v=n+2;v<l;v+=2)p=Math.min(p,Math.floor(t[v]+a)),m=Math.min(m,Math.floor(t[v+1]+a));f-=p,d-=m;for(var v=n;v<l;v+=2)t[v]=(t[v]+f)*h,t[v+1]=(t[v+1]+d)*c},e.BATCHABLE_SIZE=100,e}(om),tS=function(r){Ym(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Li.BUTT,t.join=fi.MITER,t.miterLimit=10,t}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Wm),bG=new Float32Array(3),sf={},il=function(r){Ym(e,r);function e(t){t===void 0&&(t=null);var i=r.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new Wm,i._lineStyle=new tS,i._matrix=null,i._holeMode=!1,i.state=Tn.for2d(),i._geometry=t||new eS,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=fe.NORMAL,i}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,i,n,s,o){return t===void 0&&(t=null),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof t=="number"&&(t={width:t,color:i,alpha:n,alignment:s,native:o}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:ve.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Li.BUTT,join:fi.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Ta,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[i-2],t[i-1]))}else this.currentPath=new Ta,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,i){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(t,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],o=n[n.length-1];return(s!==t||o!==i)&&n.push(t,i),this},e.prototype._initCurve=function(t,i){t===void 0&&(t=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,i]):this.moveTo(t,i)},e.prototype.quadraticCurveTo=function(t,i,n,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),JT.curveTo(t,i,n,s,o),this},e.prototype.bezierCurveTo=function(t,i,n,s,o,a){return this._initCurve(),ZT.curveTo(t,i,n,s,o,a,this.currentPath.points),this},e.prototype.arcTo=function(t,i,n,s,o){this._initCurve(t,i);var a=this.currentPath.points,l=Pd.curveTo(t,i,n,s,o,a);if(l){var u=l.cx,h=l.cy,c=l.radius,f=l.startAngle,d=l.endAngle,p=l.anticlockwise;this.arc(u,h,c,f,d,p)}return this},e.prototype.arc=function(t,i,n,s,o,a){if(a===void 0&&(a=!1),s===o)return this;!a&&o<=s?o+=Va:a&&s<=o&&(s+=Va);var l=o-s;if(l===0)return this;var u=t+Math.cos(s)*n,h=i+Math.sin(s)*n,c=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var d=Math.abs(f[f.length-2]-u),p=Math.abs(f[f.length-1]-h);d<c&&p<c||f.push(u,h)}else this.moveTo(u,h),f=this.currentPath.points;return Pd.arc(u,h,t,i,n,s,o,a,f),this},e.prototype.beginFill=function(t,i){return t===void 0&&(t=0),i===void 0&&(i=1),this.beginTextureFill({texture:ve.WHITE,color:t,alpha:i})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:ve.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,i,n,s){return this.drawShape(new Ne(t,i,n,s))},e.prototype.drawRoundedRect=function(t,i,n,s,o){return this.drawShape(new Hb(t,i,n,s,o))},e.prototype.drawCircle=function(t,i,n){return this.drawShape(new Gb(t,i,n))},e.prototype.drawEllipse=function(t,i,n,s){return this.drawShape(new Vb(t,i,n,s))},e.prototype.drawPolygon=function(){for(var t=arguments,i=[],n=0;n<arguments.length;n++)i[n]=t[n];var s,o=!0,a=i[0];a.points?(o=a.closeStroke,s=a.points):Array.isArray(i[0])?s=i[0]:s=i;var l=new Ta(s);return l.closeStroke=o,this.drawShape(l),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Tt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,i=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var s=0;s<n;s++){var o=t.batches[s],a=o.style.color,l=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),u=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),c={vertexData:l,blendMode:i,indices:h,uvs:u,_batchRGB:ms(a),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=c}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},e.prototype._renderDirect=function(t){var i=this._resolveDirectShader(t),n=this._geometry,s=this.tint,o=this.worldAlpha,a=i.uniforms,l=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(s>>16&255)/255*o,a.tint[1]=(s>>8&255)/255*o,a.tint[2]=(s&255)/255*o,a.tint[3]=o,t.shader.bind(i),t.geometry.bind(n,i),t.state.set(this.state);for(var u=0,h=l.length;u<h;u++)this._renderDrawCallDirect(t,n.drawCalls[u])},e.prototype._renderDrawCallDirect=function(t,i){for(var n=i.texArray,s=i.type,o=i.size,a=i.start,l=n.count,u=0;u<l;u++)t.texture.bind(n.elements[u],u);t.geometry.draw(s,o,a)},e.prototype._resolveDirectShader=function(t){var i=this.shader,n=this.pluginName;if(!i){if(!sf[n]){for(var s=t.plugins[n].MAX_TEXTURES,o=new Int32Array(s),a=0;a<s;a++)o[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new We,default:cn.from({uSamplers:o},!0)},u=t.plugins[n]._shader.program;sf[n]=new Di(u,l)}i=sf[n]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var i=t.bounds,n=i.minX,s=i.minY,o=i.maxX,a=i.maxY;this._bounds.addFrame(this.transform,n,s,o,a)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=ms(this.tint,bG),i=0;i<this.batches.length;i++){var n=this.batches[i],s=n._batchRGB,o=t[0]*s[0]*255,a=t[1]*s[1]*255,l=t[2]*s[2]*255,u=(o<<16)+(a<<8)+(l|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,l=i.tx,u=i.ty,h=this._geometry.points,c=this.vertexData,f=0,d=0;d<h.length;d+=2){var p=h[d],m=h[d+1];c[f++]=n*p+o*m+l,c[f++]=a*m+s*p+u}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new ze,e}(ur),xG={buildPoly:qm,buildCircle:rl,buildRectangle:qT,buildRoundedRectangle:KT,buildLine:wd,ArcUtils:Pd,BezierUtils:ZT,QuadraticUtils:JT,BatchPart:QT,FILL_COMMANDS:Eu,BATCH_POOL:Cd,DRAW_CALL_POOL:ha};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Id=function(r,e){return Id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Id(r,e)};function TG(r,e){Id(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Zo=new ze,SG=new Uint16Array([0,1,2,0,2,3]),Fo=function(r){TG(e,r);function e(t){var i=r.call(this)||this;return i._anchor=new Fi(i._onAnchorUpdate,i,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=fe.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=t||ve.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=SG,i.pluginName="batch",i.isSprite=!0,i._roundPixels=ie.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=is(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=is(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,l=i.tx,u=i.ty,h=this.vertexData,c=t.trim,f=t.orig,d=this._anchor,p=0,m=0,v=0,g=0;if(c?(m=c.x-d._x*f.width,p=m+c.width,g=c.y-d._y*f.height,v=g+c.height):(m=-d._x*f.width,p=m+f.width,g=-d._y*f.height,v=g+f.height),h[0]=n*m+o*g+l,h[1]=a*g+s*m+u,h[2]=n*p+o*g+l,h[3]=a*g+s*p+u,h[4]=n*p+o*v+l,h[5]=a*v+s*p+u,h[6]=n*m+o*v+l,h[7]=a*v+s*m+u,this._roundPixels)for(var _=ie.RESOLUTION,y=0;y<h.length;++y)h[y]=Math.round((h[y]*_|0)/_)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,i=this.vertexTrimmedData,n=t.orig,s=this._anchor,o=this.transform.worldTransform,a=o.a,l=o.b,u=o.c,h=o.d,c=o.tx,f=o.ty,d=-s._x*n.width,p=d+n.width,m=-s._y*n.height,v=m+n.height;i[0]=a*d+u*m+c,i[1]=h*m+l*d+f,i[2]=a*p+u*m+c,i[3]=h*m+l*p+f,i[4]=a*p+u*v+c,i[5]=h*v+l*p+f,i[6]=a*d+u*v+c,i[7]=h*v+l*d+f},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new $a),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ne),t=this._localBoundsRect),this._localBounds.getRectangle(t)):r.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Zo);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,o=0;return Zo.x>=s&&Zo.x<s+i&&(o=-n*this.anchor.y,Zo.y>=o&&Zo.y<o+n)},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof t=="boolean"?t:t&&t.texture;if(i){var n=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,i){var n=t instanceof ve?t:ve.from(t,i);return new e(n)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var i=is(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var i=is(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ve.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(ur);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ad=function(r,e){return Ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ad(r,e)};function EG(r,e){Ad(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var bo;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(bo||(bo={}));var of={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:bo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},wG=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_s=function(){function r(e){this.styleID=0,this.reset(),lf(this,e,e)}return r.prototype.clone=function(){var e={};return lf(e,this,of),new r(e)},r.prototype.reset=function(){lf(this,of,of)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=af(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=af(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){PG(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=af(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&wG.indexOf(n)<0&&(n='"'+n+'"'),t[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},r}();function Ry(r){return typeof r=="number"?Ap(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function af(r){if(Array.isArray(r)){for(var e=0;e<r.length;++e)r[e]=Ry(r[e]);return r}else return Ry(r)}function PG(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(var t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function lf(r,e,t){for(var i in t)Array.isArray(e[i])?r[i]=e[i].slice():r[i]=e[i]}var su={willReadFrequently:!0},Jr=function(){function r(e,t,i,n,s,o,a,l,u){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return r.measureText=function(e,t,i,n){n===void 0&&(n=r._canvas),i=i??t.wordWrap;var s=t.toFontString(),o=r.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);var a=n.getContext("2d",su);a.font=s;for(var l=i?r.wordWrap(e,t,n):e,u=l.split(/(?:\r\n|\r|\n)/),h=new Array(u.length),c=0,f=0;f<u.length;f++){var d=a.measureText(u[f]).width+(u[f].length-1)*t.letterSpacing;h[f]=d,c=Math.max(c,d)}var p=c+t.strokeThickness;t.dropShadow&&(p+=t.dropShadowDistance);var m=t.lineHeight||o.fontSize+t.strokeThickness,v=Math.max(m,o.fontSize+t.strokeThickness)+(u.length-1)*(m+t.leading);return t.dropShadow&&(v+=t.dropShadowDistance),new r(e,t,p,v,u,h,m+t.leading,c,o)},r.wordWrap=function(e,t,i){i===void 0&&(i=r._canvas);for(var n=i.getContext("2d",su),s=0,o="",a="",l=Object.create(null),u=t.letterSpacing,h=t.whiteSpace,c=r.collapseSpaces(h),f=r.collapseNewlines(h),d=!c,p=t.wordWrapWidth+u,m=r.tokenize(e),v=0;v<m.length;v++){var g=m[v];if(r.isNewline(g)){if(!f){a+=r.addLine(o),d=!c,o="",s=0;continue}g=" "}if(c){var _=r.isBreakingSpace(g),y=r.isBreakingSpace(o[o.length-1]);if(_&&y)continue}var b=r.getFromCache(g,u,l,n);if(b>p)if(o!==""&&(a+=r.addLine(o),o="",s=0),r.canBreakWords(g,t.breakWords))for(var T=r.wordWrapSplit(g),S=0;S<T.length;S++){for(var E=T[S],C=1;T[S+C];){var M=T[S+C],A=E[E.length-1];if(!r.canBreakChars(A,M,g,S,t.breakWords))E+=M;else break;C++}S+=E.length-1;var F=r.getFromCache(E,u,l,n);F+s>p&&(a+=r.addLine(o),d=!1,o="",s=0),o+=E,s+=F}else{o.length>0&&(a+=r.addLine(o),o="",s=0);var O=v===m.length-1;a+=r.addLine(g,!O),d=!1,o="",s=0}else b+s>p&&(d=!1,a+=r.addLine(o),o="",s=0),(o.length>0||!r.isBreakingSpace(g)||d)&&(o+=g,s+=b)}return a+=r.addLine(o,!1),a},r.addLine=function(e,t){return t===void 0&&(t=!0),e=r.trimRight(e),e=t?e+`
`:e,e},r.getFromCache=function(e,t,i,n){var s=i[e];if(typeof s!="number"){var o=e.length*t;s=n.measureText(e).width+o,i[e]=s}return s},r.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},r.collapseNewlines=function(e){return e==="normal"},r.trimRight=function(e){if(typeof e!="string")return"";for(var t=e.length-1;t>=0;t--){var i=e[t];if(!r.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},r.isNewline=function(e){return typeof e!="string"?!1:r._newlines.indexOf(e.charCodeAt(0))>=0},r.isBreakingSpace=function(e,t){return typeof e!="string"?!1:r._breakingSpaces.indexOf(e.charCodeAt(0))>=0},r.tokenize=function(e){var t=[],i="";if(typeof e!="string")return t;for(var n=0;n<e.length;n++){var s=e[n],o=e[n+1];if(r.isBreakingSpace(s,o)||r.isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t},r.canBreakWords=function(e,t){return t},r.canBreakChars=function(e,t,i,n,s){return!0},r.wordWrapSplit=function(e){return e.split("")},r.measureFont=function(e){if(r._fonts[e])return r._fonts[e];var t={ascent:0,descent:0,fontSize:0},i=r._canvas,n=r._context;n.font=e;var s=r.METRICS_STRING+r.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(r.BASELINE_SYMBOL).width),l=Math.ceil(r.HEIGHT_MULTIPLIER*a);a=a*r.BASELINE_MULTIPLIER|0,i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var u=n.getImageData(0,0,o,l).data,h=u.length,c=o*4,f=0,d=0,p=!1;for(f=0;f<a;++f){for(var m=0;m<c;m+=4)if(u[d+m]!==255){p=!0;break}if(!p)d+=c;else break}for(t.ascent=a-f,d=h-c,p=!1,f=l;f>a;--f){for(var m=0;m<c;m+=4)if(u[d+m]!==255){p=!0;break}if(!p)d-=c;else break}return t.descent=f-a,t.fontSize=t.ascent+t.descent,r._fonts[e]=t,t},r.clearMetrics=function(e){e===void 0&&(e=""),e?delete r._fonts[e]:r._fonts={}},Object.defineProperty(r,"_canvas",{get:function(){if(!r.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),i=t.getContext("2d",su);if(i&&i.measureText)return r.__canvas=t,t;e=ie.ADAPTER.createCanvas()}catch{e=ie.ADAPTER.createCanvas()}e.width=e.height=10,r.__canvas=e}return r.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(r,"_context",{get:function(){return r.__context||(r.__context=r._canvas.getContext("2d",su)),r.__context},enumerable:!1,configurable:!0}),r}();Jr._fonts={};Jr.METRICS_STRING="|q";Jr.BASELINE_SYMBOL="M";Jr.BASELINE_MULTIPLIER=1.4;Jr.HEIGHT_MULTIPLIER=2;Jr._newlines=[10,13];Jr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var CG={texture:!0,children:!1,baseTexture:!0},Km=function(r){EG(e,r);function e(t,i,n){var s=this,o=!1;n||(n=ie.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var a=ve.from(n);return a.orig=new Ne,a.trim=new Ne,s=r.call(this,a)||this,s._ownCanvas=o,s.canvas=n,s.context=n.getContext("2d",{willReadFrequently:!0}),s._resolution=ie.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=t,s.style=i,s.localStyleID=-1,s}return e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var n=this.context,s=Jr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,l=s.lines,u=s.lineHeight,h=s.lineWidths,c=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var d,p,m=i.dropShadow?2:1,v=0;v<m;++v){var g=i.dropShadow&&v===0,_=g?Math.ceil(Math.max(1,a)+i.padding*2):0,y=_*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";var b=i.dropShadowColor,T=ms(typeof b=="number"?b:Op(b)),S=i.dropShadowBlur*this._resolution,E=i.dropShadowDistance*this._resolution;n.shadowColor="rgba("+T[0]*255+","+T[1]*255+","+T[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=S,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*E,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*E+y}else n.fillStyle=this._generateFillStyle(i,l,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var C=(u-f.fontSize)/2;(!e.nextLineHeightBehavior||u-f.fontSize<0)&&(C=0);for(var M=0;M<l.length;M++)d=i.strokeThickness/2,p=i.strokeThickness/2+M*u+f.ascent+C,i.align==="right"?d+=c-h[M]:i.align==="center"&&(d+=(c-h[M])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[M],d+i.padding,p+i.padding-_,!0),i.fill&&this.drawLetterSpacing(l[M],d+i.padding,p+i.padding-_)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,i,n,s){s===void 0&&(s=!1);var o=this._style,a=o.letterSpacing,l=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(a===0||l){l&&(this.context.letterSpacing=a,this.context.textLetterSpacing=a),s?this.context.strokeText(t,i,n):this.context.fillText(t,i,n);return}for(var u=i,h=Array.from?Array.from(t):t.split(""),c=this.context.measureText(t).width,f=0,d=0;d<h.length;++d){var p=h[d];s?this.context.strokeText(p,u,n):this.context.fillText(p,u,n);for(var m="",v=d+1;v<h.length;++v)m+=h[v];f=this.context.measureText(m).width,u+=c-f+a,c=f}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var i=Db(t);i.data&&(t.width=i.width,t.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,s=this._style,o=s.trim?0:s.padding,a=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-o,n.trim.y=-o,n.orig.width=n._frame.width-o*2,n.orig.height=n._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),r.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,i){return this.updateText(!0),this._textureID===-1&&(t=!1),r.prototype.getBounds.call(this,t,i)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),r.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,i,n){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,a=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=this.canvas.width/this._resolution-a-l*2,h=this.canvas.height/this._resolution-a-l*2,c=s.slice(),f=t.fillGradientStops.slice();if(!f.length)for(var d=c.length+1,p=1;p<d;++p)f.push(p/d);if(c.unshift(s[0]),f.unshift(0),c.push(s[s.length-1]),f.push(1),t.fillGradientType===bo.LINEAR_VERTICAL){o=this.context.createLinearGradient(u/2,l,u/2,h+l);for(var m=n.fontProperties.fontSize+t.strokeThickness,p=0;p<i.length;p++){var v=n.lineHeight*(p-1)+m,g=n.lineHeight*p,_=g;p>0&&v>g&&(_=(g+v)/2);var y=g+m,b=n.lineHeight*(p+1),T=y;p+1<i.length&&b<y&&(T=(y+b)/2);for(var S=(T-_)/h,E=0;E<c.length;E++){var C=0;typeof f[E]=="number"?C=f[E]:C=E/c.length;var M=Math.min(1,Math.max(0,_/h+C*S));M=Number(M.toFixed(5)),o.addColorStop(M,c[E])}}}else{o=this.context.createLinearGradient(l,h/2,u+l,h/2);for(var A=c.length+1,F=1,p=0;p<c.length;p++){var O=void 0;typeof f[p]=="number"?O=f[p]:O=F/A,o.addColorStop(O,c[p]),F++}}return o},e.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},CG,t),r.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var i=is(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var i=is(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof _s?this._style=t:this._style=new _s(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Fo);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ie.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Od=function(r,e){return Od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Od(r,e)};function MG(r,e){Od(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rS=function(){function r(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function IG(r,e){var t=!1;if(r&&r._textures&&r._textures.length){for(var i=0;i<r._textures.length;i++)if(r._textures[i]instanceof ve){var n=r._textures[i].baseTexture;e.indexOf(n)===-1&&(e.push(n),t=!0)}}return t}function AG(r,e){if(r.baseTexture instanceof De){var t=r.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function OG(r,e){if(r._texture&&r._texture instanceof ve){var t=r._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function RG(r,e){return e instanceof Km?(e.updateText(!0),!0):!1}function FG(r,e){if(e instanceof _s){var t=e.toFontString();return Jr.measureFont(t),!0}return!1}function LG(r,e){if(r instanceof Km){e.indexOf(r.style)===-1&&e.push(r.style),e.indexOf(r)===-1&&e.push(r);var t=r._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function DG(r,e){return r instanceof _s?(e.indexOf(r)===-1&&e.push(r),!0):!1}var iS=function(){function r(e){var t=this;this.limiter=new rS(ie.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(LG),this.registerFindHook(DG),this.registerFindHook(IG),this.registerFindHook(AG),this.registerFindHook(OG),this.registerUploadHook(RG),this.registerUploadHook(FG)}return r.prototype.upload=function(e,t){var i=this;return typeof e=="function"&&(t=e,e=null),t&&Xt("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(n){e&&i.add(e);var s=function(){t==null||t(),n()};i.queue.length?(i.completes.push(s),i.ticking||(i.ticking=!0,Mt.system.addOnce(i.tick,i,_i.UTILITY))):s()})},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Mt.system.addOnce(this.tick,this,_i.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var i=0,n=s.length;i<n;i++)s[i]()}},r.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},r.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},r.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof ur)for(var t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},r.prototype.destroy=function(){this.ticking&&Mt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function nS(r,e){return e instanceof De?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function BG(r,e){if(!(e instanceof il))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var i=t.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&nS(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function NG(r,e){return r instanceof il?(e.push(r),!0):!1}var sS=function(r){MG(e,r);function e(t){var i=r.call(this,t)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(NG),i.registerUploadHook(nS),i.registerUploadHook(BG),i}return e.extension={name:"prepare",type:Xe.RendererPlugin},e}(iS),kG=function(){function r(e){this.maxMilliseconds=e,this.frameStart=0}return r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},r}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oS=function(){function r(e,t,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=e instanceof ve?e:null,this.baseTexture=e instanceof De?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,i=Ga(e,null);return i===null&&(i=t!==void 0?parseFloat(t):1),i!==1&&this.baseTexture.setResolution(i),i},r.prototype.parse=function(e){var t=this;return e&&Xt("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){t._callback=function(n){e==null||e(n),i(n)},t._batchIndex=0,t._frameKeys.length<=r.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},r.prototype._processFrames=function(e){for(var t=e,i=r.BATCH_SIZE;t-e<i&&t<this._frameKeys.length;){var n=this._frameKeys[t],s=this._frames[n],o=s.frame;if(o){var a=null,l=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Ne(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new Ne(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ne(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Ne(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new ve(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor),ve.addToCache(this.textures[n],n)}t++}},r.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var i=0;i<e[t].length;i++){var n=e[t][i];this.animations[t].push(this.textures[n])}}},r.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},r.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*r.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},r.prototype.destroy=function(e){var t;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},r.BATCH_SIZE=1e3,r}(),aS=function(){function r(){}return r.use=function(e,t){var i,n,s=this,o=e.name+"_image";if(!e.data||e.type!==ht.TYPE.JSON||!e.data.frames||s.resources[o]){t();return}var a=(n=(i=e.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(a))for(var l=function(p){if(typeof p!="string")return"continue";var m=p.replace(".json",""),v=ar.resolve(e.url.replace(s.baseUrl,""),p);if(s.resources[m]||Object.values(s.resources).some(function(_){return ar.format(ar.parse(_.url))===v}))return"continue";var g={crossOrigin:e.crossOrigin,loadType:ht.LOAD_TYPE.XHR,xhrType:ht.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(m,v,g)},u=0,h=a;u<h.length;u++){var c=h[u];l(c)}var f={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=r.getResourcePath(e,s.baseUrl);s.add(o,d,f,function(m){if(m.error){t(m.error);return}var v=new oS(m.texture,e.data,e.url);v.parse().then(function(){e.spritesheet=v,e.textures=v.textures,t()})})},r.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:ar.resolve(e.url.replace(t,""),e.data.meta.image)},r.extension=Xe.Loader,r}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rd=function(r,e){return Rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Rd(r,e)};function lS(r,e){Rd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Jo=new ze,UG=function(r){lS(e,r);function e(t,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var s=r.call(this,t)||this;return s.tileTransform=new ul,s._width=i,s._height=n,s.uvMatrix=s.texture.uvMatrix||new bh(t),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,i,n,s)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ne),t=this._localBoundsRect),this._bounds.getRectangle(t)):r.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Jo);var i=this._width,n=this._height,s=-i*this.anchor._x;if(Jo.x>=s&&Jo.x<s+i){var o=-n*this.anchor._y;if(Jo.y>=o&&Jo.y<o+n)return!0}return!1},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){var n=t instanceof ve?t:ve.from(t,i);return new e(n,i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Fo),GG=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Fy=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,VG=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,HG=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$G=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,ou=new We,uS=function(r){lS(e,r);function e(t){var i=r.call(this,t)||this;return t.runners.contextChange.add(i),i.quad=new $p,i.state=Tn.for2d(),i}return e.prototype.contextChange=function(){var t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=Di.from(Fy,GG,i),this.shader=t.context.webGLVersion>1?Di.from(HG,$G,i):Di.from(Fy,VG,i)},e.prototype.render=function(t){var i=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);var o=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;s=n.uvs,s[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,n.invalidate();var l=t._texture,u=l.baseTexture,h=u.alphaMode>0,c=t.tileTransform.localTransform,f=t.uvMatrix,d=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;d&&(u._glTextures[i.CONTEXT_UID]?d=u.wrapMode!==jr.CLAMP:u.wrapMode===jr.CLAMP&&(u.wrapMode=jr.REPEAT));var p=d?this.simpleShader:this.shader,m=l.width,v=l.height,g=t._width,_=t._height;ou.set(c.a*m/g,c.b*m/_,c.c*v/g,c.d*v/_,c.tx/g,c.ty/_),ou.invert(),d?ou.prepend(f.mapCoord):(p.uniforms.uMapCoord=f.mapCoord.toArray(!0),p.uniforms.uClampFrame=f.uClampFrame,p.uniforms.uClampOffset=f.uClampOffset),p.uniforms.uTransform=ou.toArray(!0),p.uniforms.uColor=Lp(t.tint,t.worldAlpha,p.uniforms.uColor,h),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=l,i.shader.bind(p),i.geometry.bind(n),this.state.blendMode=Fp(t.blendMode,h),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Xe.RendererPlugin},e}(hl);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fd=function(r,e){return Fd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Fd(r,e)};function Zm(r,e){Fd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hS=function(){function r(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},r}(),uf=new ze,Ly=new Ta,xo=function(r){Zm(e,r);function e(t,i,n,s){s===void 0&&(s=xr.TRIANGLES);var o=r.call(this)||this;return o.geometry=t,o.shader=i,o.state=n||Tn.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=ie.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===xr.TRIANGLES&&i.length<e.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),t.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(i),t.state.set(this.state),t.geometry.bind(this.geometry,i),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,i=t.buffers[0],n=i.data,s=i._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,a=o.a,l=o.b,u=o.c,h=o.d,c=o.tx,f=o.ty,d=this.vertexData,p=0;p<d.length/2;p++){var m=n[p*2],v=n[p*2+1];d[p*2]=a*m+u*v+c,d[p*2+1]=l*m+h*v+f}if(this._roundPixels)for(var g=ie.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*g|0)/g);this.vertexDirty=s}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new hS(t,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,uf);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=Ly.points,s=this.geometry.getIndex().data,o=s.length,a=this.drawMode===4?3:1,l=0;l+2<o;l+=a){var u=s[l]*2,h=s[l+1]*2,c=s[l+2]*2;if(n[0]=i[u],n[1]=i[u+1],n[2]=i[h],n[3]=i[h+1],n[4]=i[c],n[5]=i[c+1],Ly.contains(uf.x,uf.y))return!0}return!1},e.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(ur),jG=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,XG=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,To=function(r){Zm(e,r);function e(t,i){var n=this,s={uSampler:t,alpha:1,uTextureMatrix:We.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),n=r.call(this,i.program||Io.from(XG,jG),s)||this,n._colorDirty=!1,n.uvMatrix=new bh(t),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Lp(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Di),vl=function(r){Zm(e,r);function e(t,i,n){var s=r.call(this)||this,o=new gt(t),a=new gt(i,!0),l=new gt(n,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,ce.FLOAT).addAttribute("aTextureCoord",a,2,!1,ce.FLOAT).addIndex(l),s._updateId=-1,s}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Mo);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ld=function(r,e){return Ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Ld(r,e)};function zG(r,e){Ld(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var nl=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return r}(),cS=function(){function r(){}return r.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},r.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in t){var s=t[n].match(/^[a-z]+/gm)[0],o=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in o){var u=o[l].split("="),h=u[0],c=u[1].replace(/"/gm,""),f=parseFloat(c),d=isNaN(f)?c:f;a[h]=d}i[s].push(a)}var p=new nl;return i.info.forEach(function(m){return p.info.push({face:m.face,size:parseInt(m.size,10)})}),i.common.forEach(function(m){return p.common.push({lineHeight:parseInt(m.lineHeight,10)})}),i.page.forEach(function(m){return p.page.push({id:parseInt(m.id,10),file:m.file})}),i.char.forEach(function(m){return p.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),i.kerning.forEach(function(m){return p.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),i.distanceField.forEach(function(m){return p.distanceField.push({distanceRange:parseInt(m.distanceRange,10),fieldType:m.fieldType})}),p},r}(),Ju=function(){function r(){}return r.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(e){for(var t=new nl,i=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField"),u=0;u<i.length;u++)t.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(var u=0;u<n.length;u++)t.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(var u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(var u=0;u<o.length;u++){var h=o[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t},r}(),fS=function(){function r(){}return r.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return Ju.test(t)}return!1},r.parse=function(e){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return Ju.parse(t)},r}(),hf=[cS,Ju,fS];function Jm(r){for(var e=0;e<hf.length;e++)if(hf[e].test(r))return hf[e];return null}function WG(r,e,t,i,n,s){var o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=r.width/i-l-u*2,c=r.height/i-l-u*2,f=o.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var p=f.length+1,m=1;m<p;++m)d.push(m/p);if(f.unshift(o[0]),d.unshift(0),f.push(o[o.length-1]),d.push(1),t.fillGradientType===bo.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);for(var v=0,g=s.fontProperties.fontSize+t.strokeThickness,_=g/c,m=0;m<n.length;m++)for(var y=s.lineHeight*m,b=0;b<f.length;b++){var T=0;typeof d[b]=="number"?T=d[b]:T=b/f.length;var S=y/c+T*_,E=Math.max(v,S);E=Math.min(E,1),a.addColorStop(E,f[b]),v=E}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);for(var C=f.length+1,M=1,m=0;m<f.length;m++){var A=void 0;typeof d[m]=="number"?A=d[m]:A=M/C,a.addColorStop(A,f[m]),M++}}return a}function YG(r,e,t,i,n,s,o){var a=t.text,l=t.fontProperties;e.translate(i,n),e.scale(s,s);var u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=WG(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){var c=o.dropShadowColor,f=ms(typeof c=="number"?c:Op(c)),d=o.dropShadowBlur*s,p=o.dropShadowDistance*s;e.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+o.dropShadowAlpha+")",e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function dS(r){return Array.from?Array.from(r):r.split("")}function qG(r){typeof r=="string"&&(r=[r]);for(var e=[],t=0,i=r.length;t<i;t++){var n=r[t];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,dS(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function wu(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}var Mi=function(){function r(e,t,i){var n,s,o=e.info[0],a=e.common[0],l=e.page[0],u=e.distanceField[0],h=Ga(l.file),c={};this._ownsTextures=i,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/h,this.chars={},this.pageTextures=c;for(var f=0;f<e.page.length;f++){var d=e.page[f],p=d.id,m=d.file;c[p]=t instanceof Array?t[f]:t[m],u!=null&&u.fieldType&&u.fieldType!=="none"&&(c[p].baseTexture.alphaMode=Mr.NO_PREMULTIPLIED_ALPHA,c[p].baseTexture.mipmap=Cr.OFF)}for(var f=0;f<e.char.length;f++){var v=e.char[f],p=v.id,g=v.page,_=e.char[f],y=_.x,b=_.y,T=_.width,S=_.height,E=_.xoffset,C=_.yoffset,M=_.xadvance;y/=h,b/=h,T/=h,S/=h,E/=h,C/=h,M/=h;var A=new Ne(y+c[g].frame.x/h,b+c[g].frame.y/h,T,S);this.chars[p]={xOffset:E,yOffset:C,xAdvance:M,kerning:{},texture:new ve(c[g].baseTexture,A),page:g}}for(var f=0;f<e.kerning.length;f++){var F=e.kerning[f],O=F.first,I=F.second,D=F.amount;O/=h,I/=h,D/=h,this.chars[I]&&(this.chars[I].kerning[O]=D)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(s=(n=u==null?void 0:u.fieldType)===null||n===void 0?void 0:n.toLowerCase())!==null&&s!==void 0?s:"none"}return r.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},r.install=function(e,t,i){var n;if(e instanceof nl)n=e;else{var s=Jm(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}t instanceof ve&&(t=[t]);var o=new r(n,t,i);return r.available[o.font]=o,o},r.uninstall=function(e){var t=r.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete r.available[e]},r.from=function(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},r.defaultOptions,i),s=n.chars,o=n.padding,a=n.resolution,l=n.textureWidth,u=n.textureHeight,h=qG(s),c=t instanceof _s?t:new _s(t),f=l,d=new nl;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var p=0,m=0,v,g,_,y=0,b=[],T=0;T<h.length;T++){v||(v=ie.ADAPTER.createCanvas(),v.width=l,v.height=u,g=v.getContext("2d"),_=new De(v,{resolution:a}),b.push(new ve(_)),d.page.push({id:b.length-1,file:""}));var S=h[T],E=Jr.measureText(S,c,!1,v),C=E.width,M=Math.ceil(E.height),A=Math.ceil((c.fontStyle==="italic"?2:1)*C);if(m>=u-M*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+u+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+S+"')"));--T,v=null,g=null,_=null,m=0,p=0,y=0;continue}if(y=Math.max(M+E.fontProperties.descent,y),A*a+p>=f){if(p===0)throw new Error("[BitmapFont] textureWidth "+l+"px is too small "+("(fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+S+"')"));--T,m+=y*a,m=Math.ceil(m),p=0,y=0;continue}YG(v,g,E,p,m,a,c);var F=wu(E.text);d.char.push({id:F,page:b.length-1,x:p/a,y:m/a,width:A,height:M,xoffset:0,yoffset:0,xadvance:Math.ceil(C-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),p+=(A+2*o)*a,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(var T=0,O=h.length;T<O;T++)for(var I=h[T],D=0;D<O;D++){var N=h[D],B=g.measureText(I).width,L=g.measureText(N).width,Q=g.measureText(I+N).width,ee=Q-(B+L);ee&&d.kerning.push({first:wu(I),second:wu(N),amount:ee})}var X=new r(d,b,!0);return r.available[e]!==void 0&&r.uninstall(e),r.available[e]=X,X},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),KG=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,ZG=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,Dy=[],By=[],Ny=[],JG=function(r){zG(e,r);function e(t,i){i===void 0&&(i={});var n=r.call(this)||this;n._tint=16777215;var s=Object.assign({},e.styleDefaults,i),o=s.align,a=s.tint,l=s.maxWidth,u=s.letterSpacing,h=s.fontName,c=s.fontSize;if(!Mi.available[h])throw new Error('Missing BitmapFont "'+h+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=a,n._font=void 0,n._fontName=h,n._fontSize=c,n.text=t,n._maxWidth=l,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new Fi(function(){n.dirty=!0},n,0,0),n._roundPixels=ie.ROUND_PIXELS,n.dirty=!0,n._resolution=ie.RESOLUTION,n._autoResolution=!0,n._textureCache={},n}return e.prototype.updateText=function(){for(var t,i=Mi.available[this._fontName],n=this.fontSize,s=n/i.size,o=new ze,a=[],l=[],u=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=dS(h),f=this._maxWidth*i.size/n,d=i.distanceFieldType==="none"?Dy:By,p=null,m=0,v=0,g=0,_=-1,y=0,b=0,T=0,S=0,E=0;E<c.length;E++){var C=c[E],M=wu(C);if(/(?:\s)/.test(C)&&(_=E,y=m,S++),C==="\r"||C===`
`){l.push(m),u.push(-1),v=Math.max(v,m),++g,++b,o.x=0,o.y+=i.lineHeight,p=null,S=0;continue}var A=i.chars[M];if(A){p&&A.kerning[p]&&(o.x+=A.kerning[p]);var F=Ny.pop()||{texture:ve.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ze};F.texture=A.texture,F.line=g,F.charCode=M,F.position.x=o.x+A.xOffset+this._letterSpacing/2,F.position.y=o.y+A.yOffset,F.prevSpaces=S,a.push(F),m=F.position.x+Math.max(A.xAdvance-A.xOffset,A.texture.orig.width),o.x+=A.xAdvance+this._letterSpacing,T=Math.max(T,A.yOffset+A.texture.height),p=M,_!==-1&&f>0&&o.x>f&&(++b,us(a,1+_-b,1+E-_),E=_,_=-1,l.push(y),u.push(a.length>0?a[a.length-1].prevSpaces:0),v=Math.max(v,y),g++,o.x=0,o.y+=i.lineHeight,p=null,S=0)}}var O=c[c.length-1];O!=="\r"&&O!==`
`&&(/(?:\s)/.test(O)&&(m=y),l.push(m),v=Math.max(v,m),u.push(-1));for(var I=[],E=0;E<=g;E++){var D=0;this._align==="right"?D=v-l[E]:this._align==="center"?D=(v-l[E])/2:this._align==="justify"&&(D=u[E]<0?0:(v-l[E])/u[E]),I.push(D)}var N=a.length,B={},L=[],Q=this._activePagesMeshData;d.push.apply(d,Q);for(var E=0;E<N;E++){var ee=a[E].texture,X=ee.baseTexture.uid;if(!B[X]){var G=d.pop();if(!G){var W=new vl,se=void 0,he=void 0;i.distanceFieldType==="none"?(se=new To(ve.EMPTY),he=fe.NORMAL):(se=new To(ve.EMPTY,{program:Io.from(ZG,KG),uniforms:{uFWidth:0}}),he=fe.NORMAL_NPM);var xe=new xo(W,se);xe.blendMode=he,G={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:xe,vertices:null,uvs:null,indices:null}}G.index=0,G.indexCount=0,G.vertexCount=0,G.uvsCount=0,G.total=0;var te=this._textureCache;te[X]=te[X]||new ve(ee.baseTexture),G.mesh.texture=te[X],G.mesh.tint=this._tint,L.push(G),B[X]=G}B[X].total++}for(var E=0;E<Q.length;E++)L.indexOf(Q[E])===-1&&this.removeChild(Q[E].mesh);for(var E=0;E<L.length;E++)L[E].mesh.parent!==this&&this.addChild(L[E].mesh);this._activePagesMeshData=L;for(var E in B){var G=B[E],ge=G.total;if(!(((t=G.indices)===null||t===void 0?void 0:t.length)>6*ge)||G.vertices.length<xo.BATCHABLE_SIZE*2)G.vertices=new Float32Array(4*2*ge),G.uvs=new Float32Array(4*2*ge),G.indices=new Uint16Array(6*ge);else for(var Ce=G.total,$e=G.vertices,Te=Ce*4*2;Te<$e.length;Te++)$e[Te]=0;G.mesh.size=6*ge}for(var E=0;E<N;E++){var C=a[E],_e=C.position.x+I[C.line]*(this._align==="justify"?C.prevSpaces:1);this._roundPixels&&(_e=Math.round(_e));var w=_e*s,P=C.position.y*s,ee=C.texture,R=B[ee.baseTexture.uid],H=ee.frame,V=ee._uvs,$=R.index++;R.indices[$*6+0]=0+$*4,R.indices[$*6+1]=1+$*4,R.indices[$*6+2]=2+$*4,R.indices[$*6+3]=0+$*4,R.indices[$*6+4]=2+$*4,R.indices[$*6+5]=3+$*4,R.vertices[$*8+0]=w,R.vertices[$*8+1]=P,R.vertices[$*8+2]=w+H.width*s,R.vertices[$*8+3]=P,R.vertices[$*8+4]=w+H.width*s,R.vertices[$*8+5]=P+H.height*s,R.vertices[$*8+6]=w,R.vertices[$*8+7]=P+H.height*s,R.uvs[$*8+0]=V.x0,R.uvs[$*8+1]=V.y0,R.uvs[$*8+2]=V.x1,R.uvs[$*8+3]=V.y1,R.uvs[$*8+4]=V.x2,R.uvs[$*8+5]=V.y2,R.uvs[$*8+6]=V.x3,R.uvs[$*8+7]=V.y3}this._textWidth=v*s,this._textHeight=(o.y+i.lineHeight)*s;for(var E in B){var G=B[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var Z=0,Y=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,z=0;z<G.total;z++)G.vertices[Z++]-=Y,G.vertices[Z++]-=q,G.vertices[Z++]-=Y,G.vertices[Z++]-=q,G.vertices[Z++]-=Y,G.vertices[Z++]-=q,G.vertices[Z++]-=Y,G.vertices[Z++]-=q;this._maxLineHeight=T*s;var le=G.mesh.geometry.getBuffer("aVertexPosition"),ne=G.mesh.geometry.getBuffer("aTextureCoord"),ae=G.mesh.geometry.getIndex();le.data=G.vertices,ne.data=G.uvs,ae.data=G.indices,le.update(),ne.update(),ae.update()}for(var E=0;E<a.length;E++)Ny.push(a[E]);this._font=i,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var i=Mi.available[this._fontName],n=i.distanceFieldRange,s=i.distanceFieldType,o=i.size;if(s!=="none")for(var a=this.worldTransform,l=a.a,u=a.b,h=a.c,c=a.d,f=Math.sqrt(l*l+u*u),d=Math.sqrt(h*h+c*c),p=(Math.abs(f)+Math.abs(d))/2,m=this.fontSize/o,v=0,g=this._activePagesMeshData;v<g.length;v++){var _=g[v];_.mesh.shader.uniforms.uFWidth=p*n*m*this._resolution}r.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=Mi.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Mi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return(t=this._fontSize)!==null&&t!==void 0?t:Mi.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var i=this._textureCache,n=Mi.available[this._fontName],s=n.distanceFieldType==="none"?Dy:By;s.push.apply(s,this._activePagesMeshData);for(var o=0,a=this._activePagesMeshData;o<a.length;o++){var l=a[o];this.removeChild(l.mesh)}this._activePagesMeshData=[],s.filter(function(c){return i[c.mesh.texture.baseTexture.uid]}).forEach(function(c){c.mesh.texture=ve.EMPTY});for(var u in i){var h=i[u];h.destroy(),delete i[u]}this._font=null,this._textureCache=null,r.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(ur),pS=function(){function r(){}return r.add=function(){ht.setExtensionXhrType("fnt",ht.XHR_RESPONSE_TYPE.TEXT)},r.use=function(e,t){var i=Jm(e.data);if(!i){t();return}for(var n=r.getBaseUrl(this,e),s=i.parse(e.data),o={},a=function(m){o[m.metadata.pageFile]=m.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=Mi.install(s,o,!0),t())},l=0;l<s.page.length;++l){var u=s.page[l].file,h=n+u,c=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===h){d.metadata.pageFile=u,d.texture?a(d):d.onAfterMiddleware.add(a),c=!0;break}}if(!c){var p={crossOrigin:e.crossOrigin,loadType:ht.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(h,p,a)}}},r.getBaseUrl=function(e,t){var i=t.isDataUrl?"":r.dirname(t.url);return t.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(e.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},r.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":t===""?"/":t},r.extension=Xe.Loader,r}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dd=function(r,e){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Dd(r,e)};function QG(r,e){Dd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var eV=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,tV=function(r){QG(e,r);function e(t){t===void 0&&(t=1);var i=r.call(this,px,eV,{uAlpha:1})||this;return i.alpha=t,i}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Hi);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bd=function(r,e){return Bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Bd(r,e)};function mS(r,e){Bd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rV=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function iV(r,e){var t=Math.ceil(r/2),i=rV,n="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<r;o++){var a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",o-(t-1)+".0"),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var nV={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},sV=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function oV(r){for(var e=nV[r],t=e.length,i=sV,n="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,a=0;a<r;a++){var l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var Nd=function(r){mS(e,r);function e(t,i,n,s,o){i===void 0&&(i=8),n===void 0&&(n=4),s===void 0&&(s=ie.FILTER_RESOLUTION),o===void 0&&(o=5);var a=this,l=iV(o,t),u=oV(o);return a=r.call(this,l,u)||this,a.horizontal=t,a.resolution=s,a._quality=0,a.quality=n,a.blur=i,a}return e.prototype.apply=function(t,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,s);else{var o=t.getFilterTexture(),a=t.renderer,l=i,u=o;this.state.blend=!1,t.applyFilter(this,l,u,vr.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(l,vr.BLIT),this.uniforms.uSampler=u;var c=u;u=l,l=c,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,n,s),t.returnFilterTexture(o)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Hi),aV=function(r){mS(e,r);function e(t,i,n,s){t===void 0&&(t=8),i===void 0&&(i=4),n===void 0&&(n=ie.FILTER_RESOLUTION),s===void 0&&(s=5);var o=r.call(this)||this;return o.blurXFilter=new Nd(!0,t,i,n,s),o.blurYFilter=new Nd(!1,t,i,n,s),o.resolution=n,o.quality=i,o.blur=t,o.repeatEdgePixels=!1,o}return e.prototype.apply=function(t,i,n,s){var o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){var l=t.getFilterTexture();this.blurXFilter.apply(t,i,l,vr.CLEAR),this.blurYFilter.apply(t,l,n,s),t.returnFilterTexture(l)}else a?this.blurYFilter.apply(t,i,n,s):this.blurXFilter.apply(t,i,n,s)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Hi);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kd=function(r,e){return kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},kd(r,e)};function lV(r,e){kd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var uV=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Ud=function(r){lV(e,r);function e(){var t=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=r.call(this,sm,uV,i)||this,t.alpha=1,t}return e.prototype._loadMatrix=function(t,i){i===void 0&&(i=!1);var n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t},e.prototype._colorMatrix=function(t){var i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(t,i){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.tint=function(t,i){var n=t>>16&255,s=t>>8&255,o=t&255,a=[n/255,0,0,0,0,0,s/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(a,i)},e.prototype.greyscale=function(t,i){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.blackAndWhite=function(t){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.hue=function(t,i){t=(t||0)/180*Math.PI;var n=Math.cos(t),s=Math.sin(t),o=Math.sqrt,a=1/3,l=o(a),u=n+(1-n)*a,h=a*(1-n)-l*s,c=a*(1-n)+l*s,f=a*(1-n)+l*s,d=n+a*(1-n),p=a*(1-n)-l*s,m=a*(1-n)-l*s,v=a*(1-n)+l*s,g=n+a*(1-n),_=[u,h,c,0,0,f,d,p,0,0,m,v,g,0,0,0,0,0,1,0];this._loadMatrix(_,i)},e.prototype.contrast=function(t,i){var n=(t||0)+1,s=-.5*(n-1),o=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.saturate=function(t,i){t===void 0&&(t=0);var n=t*2/3+1,s=(n-1)*-.5,o=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.sepia=function(t){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.technicolor=function(t){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.polaroid=function(t){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.toBGR=function(t){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.kodachrome=function(t){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.browni=function(t){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.vintage=function(t){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.colorTone=function(t,i,n,s,o){t=t||.2,i=i||.15,n=n||16770432,s=s||3375104;var a=(n>>16&255)/255,l=(n>>8&255)/255,u=(n&255)/255,h=(s>>16&255)/255,c=(s>>8&255)/255,f=(s&255)/255,d=[.3,.59,.11,0,0,a,l,u,t,0,h,c,f,i,0,a-h,l-c,u-f,0,0];this._loadMatrix(d,o)},e.prototype.night=function(t,i){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.predator=function(t,i){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)},e.prototype.lsd=function(t){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Hi);Ud.prototype.grayscale=Ud.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gd=function(r,e){return Gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Gd(r,e)};function hV(r,e){Gd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cV=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,fV=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,dV=function(r){hV(e,r);function e(t,i){var n=this,s=new We;return t.renderable=!1,n=r.call(this,fV,cV,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=t,n.maskMatrix=s,i==null&&(i=20),n.scale=new ze(i,i),n}return e.prototype.apply=function(t,i,n,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),l=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/l,this.uniforms.rotation[3]=o.d/l),t.applyFilter(this,i,n,s)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Hi);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vd=function(r,e){return Vd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Vd(r,e)};function pV(r,e){Vd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mV=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,vV=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,gV=function(r){pV(e,r);function e(){return r.call(this,mV,vV)||this}return e}(Hi);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hd=function(r,e){return Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Hd(r,e)};function _V(r,e){Hd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yV=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,bV=function(r){_V(e,r);function e(t,i){t===void 0&&(t=.5),i===void 0&&(i=Math.random());var n=r.call(this,sm,yV,{uNoise:0,uSeed:0})||this;return n.noise=t,n.seed=i,n}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Hi);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var vS=new We;dt.prototype._cacheAsBitmap=!1;dt.prototype._cacheData=null;dt.prototype._cacheAsBitmapResolution=null;dt.prototype._cacheAsBitmapMultisample=et.NONE;var xV=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(dt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var e;r?(this._cacheData||(this._cacheData=new xV),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});dt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};dt.prototype._initCachedDisplayObject=function(e){var t;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;n.pad(s)}n.ceil(ie.RESOLUTION);var o=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),l=e.renderTexture.destinationFrame.clone(),u=e.projection.transform,h=gn.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:e.multisample}),c="cacheAsBitmap_"+vn();this._cacheData.textureCacheId=c,De.addToCache(h.baseTexture,c),ve.addToCache(h,c);var f=this.transform.localTransform.copyTo(vS).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=u,e.renderTexture.bind(o,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new Fo(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};dt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};dt.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=e.context,s=e._projTransform;t.ceil(ie.RESOLUTION);var o=gn.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+vn();this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),ve.addToCache(o,a);var l=vS;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.context=n,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var u=new Fo(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};dt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};dt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};dt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),ve.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};dt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */dt.prototype.name=null;ur.prototype.getChildByName=function(e,t){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===e)return this.children[i];if(t)for(var i=0,n=this.children.length;i<n;i++){var s=this.children[i];if(s.getChildByName){var o=s.getChildByName(e,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */dt.prototype.getGlobalPosition=function(e,t){return e===void 0&&(e=new ze),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gS=function(){function r(){}return r.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){t.cancelResize();var i,n;if(t._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{var s=t._resizeTo,o=s.clientWidth,a=s.clientHeight;i=o,n=a}t.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},r.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r.extension=Xe.Application,r}(),Qm=function(){function r(e){var t=this;this.stage=new ur,e=Object.assign({forceCanvas:!1},e),this.renderer=dx(e),r._plugins.forEach(function(i){i.init.call(t,e)})}return r.registerPlugin=function(e){Xt("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),xi.add({type:Xe.Application,ref:e})},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(e,t){var i=this,n=r._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},r._plugins=[],r}();xi.handleByList(Xe.Application,Qm._plugins);xi.add(gS);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $d=function(r,e){return $d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},$d(r,e)};function Lo(r,e){$d(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _S=function(r){Lo(e,r);function e(t,i,n,s){t===void 0&&(t=100),i===void 0&&(i=100),n===void 0&&(n=10),s===void 0&&(s=10);var o=r.call(this)||this;return o.segWidth=n,o.segHeight=s,o.width=t,o.height=i,o.build(),o}return e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,i=[],n=[],s=[],o=this.segWidth-1,a=this.segHeight-1,l=this.width/o,u=this.height/a,h=0;h<t;h++){var c=h%this.segWidth,f=h/this.segWidth|0;i.push(c*l,f*u),n.push(c/o,f/a)}for(var d=o*a,h=0;h<d;h++){var p=h%o,m=h/o|0,v=m*this.segWidth+p,g=m*this.segWidth+p+1,_=(m+1)*this.segWidth+p,y=(m+1)*this.segWidth+p+1;s.push(v,g,_,g,y,_)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(vl),yS=function(r){Lo(e,r);function e(t,i,n){t===void 0&&(t=200),n===void 0&&(n=0);var s=r.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return s.points=i,s._width=t,s.textureScale=n,s.build(),s}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){i.data.length/4!==t.length&&(i.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));var o=n.data,a=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var l=0,u=t[0],h=this._width*this.textureScale,c=t.length,f=0;f<c;f++){var d=f*4;if(this.textureScale>0){var p=u.x-t[f].x,m=u.y-t[f].y,v=Math.sqrt(p*p+m*m);u=t[f],l+=v/h}else l=f/(c-1);o[d]=l,o[d+1]=0,o[d+2]=l,o[d+3]=1}for(var g=0,f=0;f<c-1;f++){var d=f*2;a[g++]=d,a[g++]=d+1,a[g++]=d+2,a[g++]=d+2,a[g++]=d+1,a[g++]=d+3}n.update(),s.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i=t[0],n,s=0,o=0,a=this.buffers[0].data,l=t.length,u=0;u<l;u++){var h=t[u],c=u*4;u<t.length-1?n=t[u+1]:n=h,o=-(n.x-i.x),s=n.y-i.y;var f=Math.sqrt(s*s+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=f,o/=f,s*=d,o*=d,a[c]=h.x+s,a[c+1]=h.y+o,a[c+2]=h.x-s,a[c+3]=h.y-o,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(vl),TV=function(r){Lo(e,r);function e(t,i,n){n===void 0&&(n=0);var s=this,o=new yS(t.height,i,n),a=new To(t);return n>0&&(t.baseTexture.wrapMode=jr.REPEAT),s=r.call(this,o,a)||this,s.autoUpdate=!0,s}return e.prototype._render=function(t){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),r.prototype._render.call(this,t)},e}(xo),bS=function(r){Lo(e,r);function e(t,i,n){var s=this,o=new _S(t.width,t.height,i,n),a=new To(ve.WHITE);return s=r.call(this,o,a)||this,s.texture=t,s.autoResize=!0,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,i=this.shader.texture,n=i.width,s=i.height;this.autoResize&&(t.width!==n||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),r.prototype.destroy.call(this,t)},e}(xo),SV=function(r){Lo(e,r);function e(t,i,n,s,o){t===void 0&&(t=ve.EMPTY);var a=this,l=new vl(i,n,s);l.getBuffer("aVertexPosition").static=!1;var u=new To(t);return a=r.call(this,l,u,null,o)||this,a.autoUpdate=!0,a}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,t)},e}(xo),au=10,EV=function(r){Lo(e,r);function e(t,i,n,s,o){i===void 0&&(i=au),n===void 0&&(n=au),s===void 0&&(s=au),o===void 0&&(o=au);var a=r.call(this,ve.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=s,a._topHeight=n,a._bottomHeight=o,a.texture=t,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,i=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,i=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,o=Math.min(i,s);return o},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,i=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(bS);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jd=function(r,e){return jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},jd(r,e)};function wV(r,e){jd(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var PV=function(r){wV(e,r);function e(t,i){i===void 0&&(i=!0);var n=r.call(this,t[0]instanceof ve?t[0]:t[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=t,n}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Mt.shared.add(this.update,this,_i.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var i=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),r.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ve.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(ve.from(t[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ve)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<t.length;i++)this._textures.push(t[i].texture),this._durations.push(t[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Mt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Mt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Fo);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */xi.add(IT,FT,RT,YT,sS,am,uS,pS,UT,XT,zT,aS,jb,DT);var CV={AlphaFilter:tV,BlurFilter:aV,BlurFilterPass:Nd,ColorMatrixFilter:Ud,DisplacementFilter:dV,FXAAFilter:gV,NoiseFilter:bV};const MV=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Mr},AbstractBatchRenderer:mx,AbstractMultiResource:_h,AbstractRenderer:fx,AccessibilityManager:IT,AnimatedSprite:PV,AppLoaderPlugin:DT,Application:Qm,ArrayResource:Dp,Attribute:Zf,get BLEND_MODES(){return fe},get BUFFER_BITS(){return Fa},get BUFFER_TYPE(){return Xr},BaseImageResource:yi,BasePrepare:iS,BaseRenderTexture:Vp,BaseTexture:De,BatchDrawCall:Uu,BatchGeometry:om,BatchPluginFactory:gx,BatchRenderer:am,BatchShaderGenerator:vx,BatchSystem:Xp,BatchTextureArray:Gu,BitmapFont:Mi,BitmapFontData:nl,BitmapFontLoader:pS,BitmapText:JG,BlobResource:kT,Bounds:$a,BrowserAdapter:hb,Buffer:gt,BufferResource:bs,get CLEAR_MODES(){return vr},get COLOR_MASK_BITS(){return Af},CanvasResource:Bp,Circle:Gb,CompressedTextureLoader:UT,CompressedTextureResource:Zu,Container:ur,ContextSystem:zp,CountLimiter:rS,CubeResource:Np,DDSLoader:XT,DEG_TO_RAD:Ub,get DRAW_MODES(){return xr},DisplayObject:dt,get ENV(){return gi},Ellipse:Vb,get ExtensionType(){return Xe},Extract:FT,get FORMATS(){return J},FORMATS_TO_COMPONENTS:HT,FillStyle:Wm,Filter:Hi,FilterState:Yb,FilterSystem:jp,Framebuffer:ku,FramebufferSystem:Wp,get GC_MODES(){return Da},GLFramebuffer:qb,GLProgram:ux,GLTexture:du,GRAPHICS_CURVES:yo,Geometry:Mo,GeometrySystem:Yp,Graphics:il,GraphicsData:Md,GraphicsGeometry:eS,IGLUniformData:_R,INSTALLED:Ha,get INTERNAL_FORMATS(){return we},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:tl,ImageBitmapResource:Gp,ImageResource:yh,InteractionData:gd,InteractionEvent:AT,InteractionManager:RT,InteractionTrackingData:Su,KTXLoader:zT,get LINE_CAP(){return Li},get LINE_JOIN(){return fi},LineStyle:tS,Loader:el,get LoaderResource(){return ht},get MASK_TYPES(){return mt},get MIPMAP_MODES(){return Cr},get MSAA_QUALITY(){return et},MaskData:Kb,MaskSystem:qp,Matrix:We,Mesh:xo,MeshBatchUvs:hS,MeshGeometry:vl,MeshMaterial:To,NineSlicePlane:EV,ObjectRenderer:hl,ObservablePoint:Fi,PI_2:Va,get PRECISION(){return Zt},ParticleContainer:mG,ParticleRenderer:YT,PlaneGeometry:_S,Point:ze,Polygon:Ta,Prepare:sS,Program:Io,ProjectionSystem:Jp,Quad:Wb,QuadUv:$p,RAD_TO_DEG:kb,get RENDERER_TYPE(){return no},Rectangle:Ne,RenderTexture:gn,RenderTexturePool:zb,RenderTextureSystem:Qp,Renderer:nm,ResizePlugin:gS,Resource:vs,RopeGeometry:yS,RoundedRectangle:Hb,Runner:Ct,get SAMPLER_TYPES(){return La},get SCALE_MODES(){return Hr},get SHAPES(){return Tt},SVGResource:kp,ScissorSystem:Kp,Shader:Di,ShaderSystem:em,SimpleMesh:SV,SimplePlane:bS,SimpleRope:TV,Sprite:Fo,SpriteMaskFilter:ix,Spritesheet:oS,SpritesheetLoader:aS,State:Tn,StateSystem:tm,StencilSystem:Zp,System:LR,get TARGETS(){return hn},get TEXT_GRADIENT(){return bo},get TYPES(){return ce},TYPES_TO_BYTES_PER_COMPONENT:Td,TYPES_TO_BYTES_PER_PIXEL:$T,TemporaryDisplayObject:hm,Text:Km,TextFormat:cS,TextMetrics:Jr,TextStyle:_s,Texture:ve,TextureGCSystem:rm,TextureLoader:BT,TextureMatrix:bh,TextureSystem:im,TextureUvs:Hp,Ticker:Mt,TickerPlugin:jb,TilingSprite:UG,TilingSpriteRenderer:uS,TimeLimiter:kG,Transform:ul,get UPDATE_PRIORITY(){return _i},UniformGroup:cn,VERSION:NR,VideoResource:Up,ViewableBuffer:Vu,get WRAP_MODES(){return jr},XMLFormat:Ju,XMLStringFormat:fS,accessibleTarget:MT,autoDetectFormat:Jm,autoDetectRenderer:dx,autoDetectResource:gh,checkMaxIfStatementsInShader:rx,createUBOElements:ox,defaultFilterVertex:sm,defaultVertex:px,extensions:xi,filters:CV,generateProgram:hx,generateUniformBufferSync:lx,getTestContext:Qb,getUBOData:ax,graphicsUtils:xG,groupD8:it,interactiveTarget:OT,isMobile:Tr,parseDDS:VT,parseKTX:jT,resources:_x,settings:ie,systems:yx,uniformParsers:hs,utils:HO},Symbol.toStringTag,{value:"Module"}));var Bn=Math.pow,lt=(r,e,t)=>new Promise((i,n)=>{var s=l=>{try{a(t.next(l))}catch(u){n(u)}},o=l=>{try{a(t.throw(l))}catch(u){n(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(r,e)).next())});class ev{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new ev}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,t){this._currentTime+=t;const i=this._currentTime*2*3.14159;for(let n=0;n<this._breathParameters.length;++n){const s=this._breathParameters[n];e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(i/s.cycle),s.weight)}}}class Qo{constructor(e,t,i,n,s){this.parameterId=e??void 0,this.offset=t??0,this.peak=i??0,this.cycle=n??0,this.weight=s??0}}const Xd=class{static create(r){return new Xd(r)}setBlinkingInterval(r){this._blinkingIntervalSeconds=r}setBlinkingSetting(r,e,t){this._closingSeconds=r,this._closedSeconds=e,this._openingSeconds=t}setParameterIds(r){this._parameterIds=r}getParameterIds(){return this._parameterIds}updateParameters(r,e){this._userTimeSeconds+=e;let t,i=0;switch(this._blinkingState){case pr.EyeState_Closing:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=pr.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),t=1-i;break;case pr.EyeState_Closed:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=pr.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),t=0;break;case pr.EyeState_Opening:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=pr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),t=i;break;case pr.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=pr.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),t=1;break;case pr.EyeState_First:default:this._blinkingState=pr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),t=1;break}Xd.CloseIfZero||(t=-t);for(let n=0;n<this._parameterIds.length;++n)r.setParameterValueById(this._parameterIds[n],t)}constructor(r){var e,t;this._blinkingState=pr.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],r!=null&&(this._parameterIds=(t=(e=r.getEyeBlinkParameters())==null?void 0:e.slice())!=null?t:this._parameterIds)}determinNextBlinkingTiming(){const r=Math.random();return this._userTimeSeconds+r*(2*this._blinkingIntervalSeconds-1)}};let xS=Xd;xS.CloseIfZero=!0;var pr=(r=>(r[r.EyeState_First=0]="EyeState_First",r[r.EyeState_Interval=1]="EyeState_Interval",r[r.EyeState_Closing=2]="EyeState_Closing",r[r.EyeState_Closed=3]="EyeState_Closed",r[r.EyeState_Opening=4]="EyeState_Opening",r))(pr||{});const IV=.001,ky=.5;class tv{static create(e){const t=new tv;typeof e.FadeInTime=="number"&&(t._fadeTimeSeconds=e.FadeInTime,t._fadeTimeSeconds<=0&&(t._fadeTimeSeconds=ky));const i=e.Groups,n=i.length;for(let s=0;s<n;++s){const o=i[s],a=o.length;let l=0;for(let u=0;u<a;++u){const h=o[u],c=new Qu;c.partId=h.Id;const f=h.Link;if(f){const d=f.length;for(let p=0;p<d;++p){const m=new Qu;m.partId=f[p],c.link.push(m)}}t._partGroups.push(c),++l}t._partGroupCounts.push(l)}return t}updateParameters(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);let i=0;for(let n=0;n<this._partGroupCounts.length;n++){const s=this._partGroupCounts[n];this.doFade(e,t,i,s),i+=s}this.copyPartOpacities(e)}reset(e){let t=0;for(let i=0;i<this._partGroupCounts.length;++i){const n=this._partGroupCounts[i];for(let s=t;s<t+n;++s){this._partGroups[s].initialize(e);const o=this._partGroups[s].partIndex,a=this._partGroups[s].parameterIndex;if(!(o<0)){e.setPartOpacityByIndex(o,s==t?1:0),e.setParameterValueByIndex(a,s==t?1:0);for(let l=0;l<this._partGroups[s].link.length;++l)this._partGroups[s].link[l].initialize(e)}}t+=n}}copyPartOpacities(e){for(let t=0;t<this._partGroups.length;++t){const i=this._partGroups[t];if(i.link.length==0)continue;const n=this._partGroups[t].partIndex,s=e.getPartOpacityByIndex(n);for(let o=0;o<i.link.length;++o){const l=i.link[o].partIndex;l<0||e.setPartOpacityByIndex(l,s)}}}doFade(e,t,i,n){let s=-1,o=1;const a=.5,l=.15;for(let u=i;u<i+n;++u){const h=this._partGroups[u].partIndex,c=this._partGroups[u].parameterIndex;if(e.getParameterValueByIndex(c)>IV){if(s>=0)break;s=u,o=e.getPartOpacityByIndex(h),o+=t/this._fadeTimeSeconds,o>1&&(o=1)}}s<0&&(s=0,o=1);for(let u=i;u<i+n;++u){const h=this._partGroups[u].partIndex;if(s==u)e.setPartOpacityByIndex(h,o);else{let c=e.getPartOpacityByIndex(h),f;o<a?f=o*(a-1)/a+1:f=(1-o)*a/(1-a),(1-f)*(1-o)>l&&(f=1-l/(1-o)),c>f&&(c=f),e.setPartOpacityByIndex(h,c)}}}constructor(){this._fadeTimeSeconds=ky,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class Qu{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(t=>t.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Qu;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(t=>t.clone()),e}}class Se{constructor(e,t){this.x=e||0,this.y=t||0}add(e){const t=new Se(0,0);return t.x=this.x+e.x,t.y=this.y+e.y,t}substract(e){const t=new Se(0,0);return t.x=this.x-e.x,t.y=this.y-e.y,t}multiply(e){const t=new Se(0,0);return t.x=this.x*e.x,t.y=this.y*e.y,t}multiplyByScaler(e){return this.multiply(new Se(e,e))}division(e){const t=new Se(0,0);return t.x=this.x/e.x,t.y=this.y/e.y,t}divisionByScalar(e){return this.division(new Se(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const Pu=class{static range(r,e,t){return r<e?r=e:r>t&&(r=t),r}static sin(r){return Math.sin(r)}static cos(r){return Math.cos(r)}static abs(r){return Math.abs(r)}static sqrt(r){return Math.sqrt(r)}static cbrt(r){if(r===0)return r;let e=r;const t=e<0;t&&(e=-e);let i;return e===1/0?i=1/0:(i=Math.exp(Math.log(e)/3),i=(e/(i*i)+2*i)/3),t?-i:i}static getEasingSine(r){return r<0?0:r>1?1:.5-.5*this.cos(r*Math.PI)}static max(r,e){return r>e?r:e}static min(r,e){return r>e?e:r}static degreesToRadian(r){return r/180*Math.PI}static radianToDegrees(r){return r*180/Math.PI}static directionToRadian(r,e){const t=Math.atan2(e.y,e.x),i=Math.atan2(r.y,r.x);let n=t-i;for(;n<-Math.PI;)n+=Math.PI*2;for(;n>Math.PI;)n-=Math.PI*2;return n}static directionToDegrees(r,e){const t=this.directionToRadian(r,e);let i=this.radianToDegrees(t);return e.x-r.x>0&&(i=-i),i}static radianToDirection(r){const e=new Se;return e.x=this.sin(r),e.y=this.cos(r),e}static quadraticEquation(r,e,t){return this.abs(r)<Pu.Epsilon?this.abs(e)<Pu.Epsilon?-t:-t/e:-(e+this.sqrt(e*e-4*r*t))/(2*r)}static cardanoAlgorithmForBezier(r,e,t,i){if(this.sqrt(r)<Pu.Epsilon)return this.range(this.quadraticEquation(e,t,i),0,1);const n=e/r,s=t/r,o=i/r,a=(3*s-n*n)/3,l=a/3,u=(2*n*n*n-9*n*s+27*o)/27,h=u/2,c=h*h+l*l*l,f=.5,d=f+.01;if(c<0){const _=-a/3,y=_*_*_,b=this.sqrt(y),T=-u/(2*b),S=this.range(T,-1,1),E=Math.acos(S),M=2*this.cbrt(b),A=M*this.cos(E/3)-n/3;if(this.abs(A-f)<d)return this.range(A,0,1);const F=M*this.cos((E+2*Math.PI)/3)-n/3;if(this.abs(F-f)<d)return this.range(F,0,1);const O=M*this.cos((E+4*Math.PI)/3)-n/3;return this.range(O,0,1)}if(c==0){let _;h<0?_=this.cbrt(-h):_=-this.cbrt(h);const y=2*_-n/3;if(this.abs(y-f)<d)return this.range(y,0,1);const b=-_-n/3;return this.range(b,0,1)}const p=this.sqrt(c),m=this.cbrt(p-h),v=this.cbrt(p+h),g=m-v-n/3;return this.range(g,0,1)}constructor(){}};let Ze=Pu;Ze.Epsilon=1e-5;class Sr{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,t,i){const n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=4;for(let o=0;o<s;++o)for(let a=0;a<s;++a)for(let l=0;l<s;++l)n[a+o*4]+=e[l+o*4]*t[a+l*4];for(let o=0;o<16;++o)i[o]=n[o]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let t=0;t<16;++t)this._tr[t]=e[t]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,t){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);Sr.multiply(i,this._tr,this._tr)}translate(e,t){this._tr[12]=e,this._tr[13]=t}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,t){const i=new Float32Array([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]);Sr.multiply(i,this._tr,this._tr)}scale(e,t){this._tr[0]=e,this._tr[5]=t}multiplyByMatrix(e){Sr.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new Sr;for(let t=0;t<this._tr.length;t++)e._tr[t]=this._tr[t];return e}}class rv{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,t,i,n){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=e,this._modelColor.G=t,this._modelColor.B=i,this._modelColor.A=n}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new ca,this._mvpMatrix4x4=new Sr,this._mvpMatrix4x4.loadIdentity()}}var dn=(r=>(r[r.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",r[r.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",r[r.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",r))(dn||{});class ca{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let ii=!1,Ns=!1,ks;const cf={vertexOffset:0,vertexStep:2};class sl{static startUp(e){if(ii)return ea("CubismFramework.startUp() is already done."),ii;if(Live2DCubismCore._isStarted)return ii=!0,!0;if(Live2DCubismCore._isStarted=!0,ks=e,ks&&Live2DCubismCore.Logging.csmSetLogFunction(ks.logFunction),ii=!0,ii){const t=Live2DCubismCore.Version.csmGetVersion(),i=(t&4278190080)>>24,n=(t&16711680)>>16,s=t&65535,o=t;ea("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+n).slice(-2),("0000"+s).slice(-4),o)}return ea("CubismFramework.startUp() is complete."),ii}static cleanUp(){ii=!1,Ns=!1,ks=void 0}static initialize(){if(!ii){fa("CubismFramework is not started.");return}if(Ns){fa("CubismFramework.initialize() skipped, already initialized.");return}Ns=!0,ea("CubismFramework.initialize() is complete.")}static dispose(){if(!ii){fa("CubismFramework is not started.");return}if(!Ns){fa("CubismFramework.dispose() skipped, not initialized.");return}rv.staticRelease(),Ns=!1,ea("CubismFramework.dispose() is complete.")}static isStarted(){return ii}static isInitialized(){return Ns}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return ks!=null?ks.loggingLevel:Es.LogLevel_Off}constructor(){}}var Es=(r=>(r[r.LogLevel_Verbose=0]="LogLevel_Verbose",r[r.LogLevel_Debug=1]="LogLevel_Debug",r[r.LogLevel_Info=2]="LogLevel_Info",r[r.LogLevel_Warning=3]="LogLevel_Warning",r[r.LogLevel_Error=4]="LogLevel_Error",r[r.LogLevel_Off=5]="LogLevel_Off",r))(Es||{});const lu=()=>{};function Uy(r,...e){Yh.print(Es.LogLevel_Debug,"[CSM][D]"+r+`
`,e)}function ea(r,...e){Yh.print(Es.LogLevel_Info,"[CSM][I]"+r+`
`,e)}function fa(r,...e){Yh.print(Es.LogLevel_Warning,"[CSM][W]"+r+`
`,e)}function Hs(r,...e){Yh.print(Es.LogLevel_Error,"[CSM][E]"+r+`
`,e)}class Yh{static print(e,t,i){if(e<sl.getLoggingLevel())return;const n=sl.coreLogFunction;if(!n)return;const s=t.replace(/{(\d+)}/g,(o,a)=>i[a]);n(s)}static dumpBytes(e,t,i){for(let n=0;n<i;n++)n%16==0&&n>0?this.print(e,`
`):n%8==0&&n>0&&this.print(e,"  "),this.print(e,"{0} ",[t[n]&255]);this.print(e,`
`)}constructor(){}}class AV{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,t=this._savedParameters.length;for(let i=0;i<e;++i)i<t?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let t;const i=this._model.parts.count;for(t=0;t<i;++t)if(e==this._partIds[t])return t;return e in this._notExistPartId?this._notExistPartId[e]:(t=i+this._notExistPartId.length,this._notExistPartId[e]=t,this._notExistPartOpacities[t]=0,t)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,t){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=t;return}lu(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t}setPartOpacityById(e,t){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,t)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(lu(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}getParameterIndex(e){let t;const i=this._model.parameters.count;for(t=0;t<i;++t)if(e==this._parameterIds[t])return t;return e in this._notExistParameterId?this._notExistParameterId[e]:(t=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=t,this._notExistParameterValues[t]=0,t)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(lu(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}setParameterValueByIndex(e,t,i=1,n=!1){let s;if(this._model.parameters.ids.includes("ParamMouthOpenY")&&(s=this.getParameterIndex("ParamMouthOpenY")),this._model.parameters.ids.includes("PARAM_MOUTH_OPEN_Y")&&(s=this.getParameterIndex("PARAM_MOUTH_OPEN_Y")),this._model.parameters.ids.includes("ParamMouthA")&&(s=this.getParameterIndex("ParamMouthA")),e in this._notExistParameterValues){this._notExistParameterValues[e]=i==1?t:this._notExistParameterValues[e]*(1-i)+t*i;return}lu(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),(e!=s||n)&&(this._parameterValues[e]=i==1?t:this._parameterValues[e]=this._parameterValues[e]*(1-i)+t*i)}setParameterValueById(e,t,i=1,n=!1){const s=this.getParameterIndex(e);this.setParameterValueByIndex(s,t,i,n)}addParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*i)}addParameterValueById(e,t,i=1){const n=this.getParameterIndex(e);this.addParameterValueByIndex(n,t,i)}multiplyParameterValueById(e,t,i=1){const n=this.getParameterIndex(e);this.multiplyParameterValueByIndex(n,t,i)}multiplyParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const t=this._model.drawables.count;for(let i=0;i<t;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}getDrawableBlendMode(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?dn.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?dn.CubismBlendMode_Multiplicative:dn.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}getDrawableDynamicFlagVisibilityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}getDrawableDynamicFlagOpacityDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}loadParameters(){let e=this._model.parameters.count;const t=this._savedParameters.length;e>t&&(e=t);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,t=this._model.parameters.count;for(let i=0;i<t;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,t=this._model.parts.count;for(let i=0;i<t;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,t=this._model.drawables.count;for(let i=0;i<t;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class iv{static create(e){const t=Live2DCubismCore.Moc.fromArrayBuffer(e);if(t)return new iv(t);throw new Error("Unknown error")}createModel(){let e;const t=Live2DCubismCore.Model.fromMoc(this._moc);if(t)return e=new AV(t),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}class TS{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,t,i){if(!t.isAvailable()||t.isFinished())return;if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);const a=this.getDuration();t.getEndTime()<0&&t.setEndTime(a<=0?-1:t.getStartTime()+a)}let n=this._weight;const s=this._fadeInSeconds==0?1:Ze.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds),o=this._fadeOutSeconds==0||t.getEndTime()<0?1:Ze.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds);n=n*s*o,t.setState(i,n),this.doUpdateParameters(e,i,n,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,t){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}}const Gy=1;class nv extends TS{constructor(){super(),this._parameters=[]}static create(e){const t=new nv,i=e.FadeInTime,n=e.FadeOutTime;t.setFadeInTime(i!==void 0?i:Gy),t.setFadeOutTime(n!==void 0?n:Gy);const s=e.Parameters||[];for(let o=0;o<s.length;++o){const a=s[o],l=a.Id,u=a.Value;let h;switch(a.Blend){case"Multiply":h=zn.ExpressionBlendType_Multiply;break;case"Overwrite":h=zn.ExpressionBlendType_Overwrite;break;case"Add":default:h=zn.ExpressionBlendType_Add;break}const c={parameterId:l,blendType:h,value:u};t._parameters.push(c)}return t}doUpdateParameters(e,t,i,n){for(let s=0;s<this._parameters.length;++s){const o=this._parameters[s];switch(o.blendType){case zn.ExpressionBlendType_Add:{e.addParameterValueById(o.parameterId,o.value,i);break}case zn.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(o.parameterId,o.value,i);break}case zn.ExpressionBlendType_Overwrite:{e.setParameterValueById(o.parameterId,o.value,i);break}}}}}var zn=(r=>(r[r.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",r[r.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",r[r.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",r))(zn||{}),ol;(r=>{r.supportMoreMaskDivisions=!0,r.setOpacityFromMotion=!1})(ol||(ol={}));var Wn=(r=>(r[r.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",r[r.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",r[r.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",r))(Wn||{}),oi=(r=>(r[r.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",r[r.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",r[r.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",r[r.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",r))(oi||{});class en{constructor(e=0,t=0){this.time=e,this.value=t}}class OV{constructor(){this.basePointIndex=0,this.segmentType=0}}class RV{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class FV{constructor(){this.fireTime=0,this.value=""}}class LV{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class SS{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return sv.EvaluationOptionFlag_AreBeziersRistricted==e?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,t){return this._json.Curves[e].Segments[t]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var sv=(r=>(r[r.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",r))(sv||{});const DV="EyeBlink",BV="LipSync",NV="Model",kV="Parameter",UV="PartOpacity",GV=!1;function _r(r,e,t){const i=new en;return i.time=r.time+(e.time-r.time)*t,i.value=r.value+(e.value-r.value)*t,i}function VV(r,e){let t=(e-r[0].time)/(r[1].time-r[0].time);return t<0&&(t=0),r[0].value+(r[1].value-r[0].value)*t}function HV(r,e){let t=(e-r[0].time)/(r[3].time-r[0].time);t<0&&(t=0);const i=_r(r[0],r[1],t),n=_r(r[1],r[2],t),s=_r(r[2],r[3],t),o=_r(i,n,t),a=_r(n,s,t);return _r(o,a,t).value}function $V(r,e){const t=e,i=r[0].time,n=r[3].time,s=r[1].time,o=r[2].time,a=n-3*o+3*s-i,l=3*o-6*s+3*i,u=3*s-3*i,h=i-t,c=Ze.cardanoAlgorithmForBezier(a,l,u,h),f=_r(r[0],r[1],c),d=_r(r[1],r[2],c),p=_r(r[2],r[3],c),m=_r(f,d,c),v=_r(d,p,c);return _r(m,v,c).value}function jV(r,e){return r[0].value}function XV(r,e){return r[1].value}function ff(r,e,t){const i=r.curves[e];let n=-1;const s=i.baseSegmentIndex+i.segmentCount;let o=0;for(let l=i.baseSegmentIndex;l<s;++l)if(o=r.segments[l].basePointIndex+(r.segments[l].segmentType==oi.CubismMotionSegmentType_Bezier?3:1),r.points[o].time>t){n=l;break}if(n==-1)return r.points[o].value;const a=r.segments[n];return a.evaluate(r.points.slice(a.basePointIndex),t)}class ov extends TS{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,t){const i=new ov;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=t,i}doUpdateParameters(e,t,i,n){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=DV),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=BV);let s=t-n.getStartTime();s<0&&(s=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE;const l=64;let u=0,h=0;this._eyeBlinkParameterIds.length>l&&Uy("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>l&&Uy("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const c=this._fadeInSeconds<=0?1:Ze.getEasingSine((t-n.getFadeInStartTime())/this._fadeInSeconds),f=this._fadeOutSeconds<=0||n.getEndTime()<0?1:Ze.getEasingSine((n.getEndTime()-t)/this._fadeOutSeconds);let d,p,m,v=s;if(this._isLoop)for(;v>this._motionData.duration;)v-=this._motionData.duration;const g=this._motionData.curves;for(p=0;p<this._motionData.curveCount&&g[p].type==Wn.CubismMotionCurveTarget_Model;++p)d=ff(this._motionData,p,v),g[p].id==this._modelCurveIdEyeBlink?a=d:g[p].id==this._modelCurveIdLipSync&&(o=d);for(;p<this._motionData.curveCount&&g[p].type==Wn.CubismMotionCurveTarget_Parameter;++p){if(m=e.getParameterIndex(g[p].id),m==-1)continue;const _=e.getParameterValueByIndex(m);if(d=ff(this._motionData,p,v),a!=Number.MAX_VALUE){for(let b=0;b<this._eyeBlinkParameterIds.length&&b<l;++b)if(this._eyeBlinkParameterIds[b]==g[p].id){d*=a,h|=1<<b;break}}if(o!=Number.MAX_VALUE){for(let b=0;b<this._lipSyncParameterIds.length&&b<l;++b)if(this._lipSyncParameterIds[b]==g[p].id){d+=o,u|=1<<b;break}}let y;if(g[p].fadeInTime<0&&g[p].fadeOutTime<0)y=_+(d-_)*i;else{let b,T;g[p].fadeInTime<0?b=c:b=g[p].fadeInTime==0?1:Ze.getEasingSine((t-n.getFadeInStartTime())/g[p].fadeInTime),g[p].fadeOutTime<0?T=f:T=g[p].fadeOutTime==0||n.getEndTime()<0?1:Ze.getEasingSine((n.getEndTime()-t)/g[p].fadeOutTime);const S=this._weight*b*T;y=_+(d-_)*S}e.setParameterValueByIndex(m,y,1)}{if(a!=Number.MAX_VALUE)for(let _=0;_<this._eyeBlinkParameterIds.length&&_<l;++_){const y=e.getParameterValueById(this._eyeBlinkParameterIds[_]);if(h>>_&1)continue;const b=y+(a-y)*i;e.setParameterValueById(this._eyeBlinkParameterIds[_],b)}if(o!=Number.MAX_VALUE)for(let _=0;_<this._lipSyncParameterIds.length&&_<l;++_){const y=e.getParameterValueById(this._lipSyncParameterIds[_]);if(u>>_&1)continue;const b=y+(o-y)*i;e.setParameterValueById(this._lipSyncParameterIds[_],b)}}for(;p<this._motionData.curveCount&&g[p].type==Wn.CubismMotionCurveTarget_PartOpacity;++p)if(d=ff(this._motionData,p,v),ol.setOpacityFromMotion)e.setPartOpacityById(g[p].id,d);else{if(m=e.getParameterIndex(g[p].id),m==-1)continue;e.setParameterValueByIndex(m,d)}s>=this._motionData.duration&&(this._isLoop?(n.setStartTime(t),this._isLoopFadeIn&&n.setFadeInStartTime(t)):(this._onFinishedMotion&&this._onFinishedMotion(this),n.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,t){const i=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==i[n].id){i[n].fadeInTime=t;return}}setParameterFadeOutTime(e,t){const i=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(e==i[n].id){i[n].fadeOutTime=t;return}}getParameterFadeInTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeInTime;return-1}getParameterFadeOutTime(e){const t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t[i].id)return t[i].fadeOutTime;return-1}setEffectIds(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}release(){this._motionData=void 0}parse(e){this._motionData=new LV;let t=new SS(e);this._motionData.duration=t.getMotionDuration(),this._motionData.loop=t.isMotionLoop(),this._motionData.curveCount=t.getMotionCurveCount(),this._motionData.fps=t.getMotionFps(),this._motionData.eventCount=t.getEventCount();const i=t.getEvaluationOptionFlag(sv.EvaluationOptionFlag_AreBeziersRistricted),n=t.getMotionFadeInTime(),s=t.getMotionFadeOutTime();n!==void 0?this._fadeInSeconds=n<0?1:n:this._fadeInSeconds=1,s!==void 0?this._fadeOutSeconds=s<0?1:s:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new RV),this._motionData.segments=Array.from({length:t.getMotionTotalSegmentCount()}).map(()=>new OV),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new FV),this._motionData.points=[];let o=0,a=0;for(let l=0;l<this._motionData.curveCount;++l){const u=this._motionData.curves[l];switch(t.getMotionCurveTarget(l)){case NV:u.type=Wn.CubismMotionCurveTarget_Model;break;case kV:u.type=Wn.CubismMotionCurveTarget_Parameter;break;case UV:u.type=Wn.CubismMotionCurveTarget_PartOpacity;break;default:fa('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}u.id=t.getMotionCurveId(l),u.baseSegmentIndex=a;const h=t.getMotionCurveFadeInTime(l),c=t.getMotionCurveFadeOutTime(l);u.fadeInTime=h!==void 0?h:-1,u.fadeOutTime=c!==void 0?c:-1;for(let f=0;f<t.getMotionCurveSegmentCount(l);){switch(f==0?(this._motionData.segments[a].basePointIndex=o,this._motionData.points[o]=new en(t.getMotionCurveSegment(l,f),t.getMotionCurveSegment(l,f+1)),o+=1,f+=2):this._motionData.segments[a].basePointIndex=o-1,t.getMotionCurveSegment(l,f)){case oi.CubismMotionSegmentType_Linear:{this._motionData.segments[a].segmentType=oi.CubismMotionSegmentType_Linear,this._motionData.segments[a].evaluate=VV,this._motionData.points[o]=new en(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}case oi.CubismMotionSegmentType_Bezier:{this._motionData.segments[a].segmentType=oi.CubismMotionSegmentType_Bezier,i||GV?this._motionData.segments[a].evaluate=HV:this._motionData.segments[a].evaluate=$V,this._motionData.points[o]=new en(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),this._motionData.points[o+1]=new en(t.getMotionCurveSegment(l,f+3),t.getMotionCurveSegment(l,f+4)),this._motionData.points[o+2]=new en(t.getMotionCurveSegment(l,f+5),t.getMotionCurveSegment(l,f+6)),o+=3,f+=7;break}case oi.CubismMotionSegmentType_Stepped:{this._motionData.segments[a].segmentType=oi.CubismMotionSegmentType_Stepped,this._motionData.segments[a].evaluate=jV,this._motionData.points[o]=new en(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}case oi.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[a].segmentType=oi.CubismMotionSegmentType_InverseStepped,this._motionData.segments[a].evaluate=XV,this._motionData.points[o]=new en(t.getMotionCurveSegment(l,f+1),t.getMotionCurveSegment(l,f+2)),o+=1,f+=3;break}}++u.segmentCount,++a}this._motionData.curves.push(u)}for(let l=0;l<t.getEventCount();++l)this._motionData.events[l].fireTime=t.getEventTime(l),this._motionData.events[l].value=t.getEventValue(l);t.release()}getFiredEvent(e,t){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=t&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}}class zV{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,t){const i=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,t){this._stateTimeSeconds=e,this._stateWeight=t}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class ES{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,t,i){if(e==null)return WV;let n;for(let s=0;s<this._motions.length;++s)n=this._motions[s],n!=null&&n.setFadeOut(n._motion.getFadeOutTime());return n=new zV,n._autoDelete=t,n._motion=e,this._motions.push(n),n._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const t=this._motions[e];if(t==null){this._motions.splice(e,1);continue}if(t._motion==null){t.release(),this._motions.splice(e,1);continue}if(!t.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let t=0;t<this._motions.length;t++){const i=this._motions[t];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const t=this._motions[e];t!=null&&t.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(t=>t!=null&&t._motionQueueEntryHandle==e)}setEventCallback(e,t=null){this._eventCallBack=e,this._eventCustomData=t}doUpdateMotion(e,t){let i=!1,n=0;for(;n<this._motions.length;){const s=this._motions[n];if(s==null){this._motions.splice(n,1);continue}const o=s._motion;if(o==null){s.release(),this._motions.splice(n,1);continue}o.updateParameters(e,s,t),i=!0;const a=o.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),t-s.getStartTime());for(let l=0;l<a.length;++l)this._eventCallBack(this,a[l],this._eventCustomData);s.setLastCheckEventSeconds(t),s.isFinished()?(s.release(),this._motions.splice(n,1)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),t),n++)}return i}}const WV=-1;var zd=(r=>(r[r.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",r))(zd||{}),Yn=(r=>(r[r.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",r[r.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",r[r.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",r))(Yn||{});class YV{constructor(){this.initialPosition=new Se(0,0),this.position=new Se(0,0),this.lastPosition=new Se(0,0),this.lastGravity=new Se(0,0),this.force=new Se(0,0),this.velocity=new Se(0,0)}}class qV{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class KV{constructor(){this.source={}}}class ZV{constructor(){this.destination={},this.translationScale=new Se(0,0)}}class JV{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new Se(0,0),this.wind=new Se(0,0)}}class QV{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new Se(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new Se(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,t){return this._json.PhysicsSettings[e].Input[t].Weight}getInputReflect(e,t){return this._json.PhysicsSettings[e].Input[t].Reflect}getInputType(e,t){return this._json.PhysicsSettings[e].Input[t].Type}getInputSourceId(e,t){return this._json.PhysicsSettings[e].Input[t].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,t){return this._json.PhysicsSettings[e].Output[t].VertexIndex}getOutputAngleScale(e,t){return this._json.PhysicsSettings[e].Output[t].Scale}getOutputWeight(e,t){return this._json.PhysicsSettings[e].Output[t].Weight}getOutputDestinationId(e,t){return this._json.PhysicsSettings[e].Output[t].Destination.Id}getOutputType(e,t){return this._json.PhysicsSettings[e].Output[t].Type}getOutputReflect(e,t){return this._json.PhysicsSettings[e].Output[t].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,t){return this._json.PhysicsSettings[e].Vertices[t].Mobility}getParticleDelay(e,t){return this._json.PhysicsSettings[e].Vertices[t].Delay}getParticleAcceleration(e,t){return this._json.PhysicsSettings[e].Vertices[t].Acceleration}getParticleRadius(e,t){return this._json.PhysicsSettings[e].Vertices[t].Radius}getParticlePosition(e,t){const i=new Se(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[t].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[t].Position.Y,i}}const Vy="X",Hy="Y",$y="Angle",eH=5,wS=100,tH=.001;class av{static create(e){const t=new av;return t.parse(e),t._physicsRig.gravity.y=0,t}evaluate(e,t){let i,n,s,o;const a=new Se;let l,u,h,c,f,d,p,m;f=e.getModel().parameters.values,d=e.getModel().parameters.maximumValues,p=e.getModel().parameters.minimumValues,m=e.getModel().parameters.defaultValues;for(let v=0;v<this._physicsRig.subRigCount;++v){i={angle:0},a.x=0,a.y=0,l=this._physicsRig.settings[v],u=this._physicsRig.inputs.slice(l.baseInputIndex),h=this._physicsRig.outputs.slice(l.baseOutputIndex),c=this._physicsRig.particles.slice(l.baseParticleIndex);for(let g=0;g<l.inputCount;++g)n=u[g].weight/wS,u[g].sourceParameterIndex==-1&&(u[g].sourceParameterIndex=e.getParameterIndex(u[g].source.id)),u[g].getNormalizedParameterValue(a,i,f[u[g].sourceParameterIndex],p[u[g].sourceParameterIndex],d[u[g].sourceParameterIndex],m[u[g].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[g].reflect,n);s=Ze.degreesToRadian(-i.angle),a.x=a.x*Ze.cos(s)-a.y*Ze.sin(s),a.y=a.x*Ze.sin(s)+a.y*Ze.cos(s),pH(c,l.particleCount,a,i.angle,this._options.wind,tH*l.normalizationPosition.maximum,t,eH);for(let g=0;g<l.outputCount;++g){const _=h[g].vertexIndex;if(_<1||_>=l.particleCount)break;h[g].destinationParameterIndex==-1&&(h[g].destinationParameterIndex=e.getParameterIndex(h[g].destination.id));const y=new Se;y.x=c[_].position.x-c[_-1].position.x,y.y=c[_].position.y-c[_-1].position.y,o=h[g].getValue(y,c,_,h[g].reflect,this._options.gravity);const b=h[g].destinationParameterIndex,T=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(f.subarray(b))):f.slice(b);mH(T,p[b],d[b],o,h[g]);for(let S=b,E=0;S<f.length;S++,E++)f[S]=T[E]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new rH,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new JV;let t=new QV(e);this._physicsRig.gravity=t.getGravity(),this._physicsRig.wind=t.getWind(),this._physicsRig.subRigCount=t.getSubRigCount();let i=0,n=0,s=0;for(let o=0;o<this._physicsRig.subRigCount;++o){const a=new qV;a.normalizationPosition.minimum=t.getNormalizationPositionMinimumValue(o),a.normalizationPosition.maximum=t.getNormalizationPositionMaximumValue(o),a.normalizationPosition.defalut=t.getNormalizationPositionDefaultValue(o),a.normalizationAngle.minimum=t.getNormalizationAngleMinimumValue(o),a.normalizationAngle.maximum=t.getNormalizationAngleMaximumValue(o),a.normalizationAngle.defalut=t.getNormalizationAngleDefaultValue(o),a.inputCount=t.getInputCount(o),a.baseInputIndex=i,i+=a.inputCount;for(let l=0;l<a.inputCount;++l){const u=new KV;switch(u.sourceParameterIndex=-1,u.weight=t.getInputWeight(o,l),u.reflect=t.getInputReflect(o,l),t.getInputType(o,l)){case Vy:u.type=Yn.CubismPhysicsSource_X,u.getNormalizedParameterValue=iH;break;case Hy:u.type=Yn.CubismPhysicsSource_Y,u.getNormalizedParameterValue=nH;break;case $y:u.type=Yn.CubismPhysicsSource_Angle,u.getNormalizedParameterValue=sH;break}u.source.targetType=zd.CubismPhysicsTargetType_Parameter,u.source.id=t.getInputSourceId(o,l),this._physicsRig.inputs.push(u)}a.outputCount=t.getOutputCount(o),a.baseOutputIndex=n,n+=a.outputCount;for(let l=0;l<a.outputCount;++l){const u=new ZV;switch(u.destinationParameterIndex=-1,u.vertexIndex=t.getOutputVertexIndex(o,l),u.angleScale=t.getOutputAngleScale(o,l),u.weight=t.getOutputWeight(o,l),u.destination.targetType=zd.CubismPhysicsTargetType_Parameter,u.destination.id=t.getOutputDestinationId(o,l),t.getOutputType(o,l)){case Vy:u.type=Yn.CubismPhysicsSource_X,u.getValue=oH,u.getScale=cH;break;case Hy:u.type=Yn.CubismPhysicsSource_Y,u.getValue=aH,u.getScale=fH;break;case $y:u.type=Yn.CubismPhysicsSource_Angle,u.getValue=lH,u.getScale=dH;break}u.reflect=t.getOutputReflect(o,l),this._physicsRig.outputs.push(u)}a.particleCount=t.getParticleCount(o),a.baseParticleIndex=s,s+=a.particleCount;for(let l=0;l<a.particleCount;++l){const u=new YV;u.mobility=t.getParticleMobility(o,l),u.delay=t.getParticleDelay(o,l),u.acceleration=t.getParticleAcceleration(o,l),u.radius=t.getParticleRadius(o,l),u.position=t.getParticlePosition(o,l),this._physicsRig.particles.push(u)}this._physicsRig.settings.push(a)}this.initialize(),t.release()}initialize(){let e,t,i;for(let n=0;n<this._physicsRig.subRigCount;++n){t=this._physicsRig.settings[n],e=this._physicsRig.particles.slice(t.baseParticleIndex),e[0].initialPosition=new Se(0,0),e[0].lastPosition=new Se(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Se(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Se(0,0),e[0].force=new Se(0,0);for(let s=1;s<t.particleCount;++s)i=new Se(0,0),i.y=e[s].radius,e[s].initialPosition=new Se(e[s-1].initialPosition.x+i.x,e[s-1].initialPosition.y+i.y),e[s].position=new Se(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new Se(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new Se(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new Se(0,0),e[s].force=new Se(0,0)}}}class rH{constructor(){this.gravity=new Se(0,0),this.wind=new Se(0,0)}}function iH(r,e,t,i,n,s,o,a,l,u){r.x+=lv(t,i,n,s,o.minimum,o.maximum,o.defalut,l)*u}function nH(r,e,t,i,n,s,o,a,l,u){r.y+=lv(t,i,n,s,o.minimum,o.maximum,o.defalut,l)*u}function sH(r,e,t,i,n,s,o,a,l,u){e.angle+=lv(t,i,n,s,a.minimum,a.maximum,a.defalut,l)*u}function oH(r,e,t,i,n){let s=r.x;return i&&(s*=-1),s}function aH(r,e,t,i,n){let s=r.y;return i&&(s*=-1),s}function lH(r,e,t,i,n){let s;return t>=2?n=e[t-1].position.substract(e[t-2].position):n=n.multiplyByScaler(-1),s=Ze.directionToRadian(n,r),i&&(s*=-1),s}function uH(r,e){return Math.abs(Math.max(r,e)-Math.min(r,e))}function hH(r,e){return Math.min(r,e)+uH(r,e)/2}function cH(r,e){return r.x}function fH(r,e){return r.y}function dH(r,e){return e}function pH(r,e,t,i,n,s,o,a){let l,u,h,c,f=new Se(0,0),d=new Se(0,0),p=new Se(0,0),m=new Se(0,0);r[0].position=new Se(t.x,t.y),l=Ze.degreesToRadian(i),c=Ze.radianToDirection(l),c.normalize();for(let v=1;v<e;++v)r[v].force=c.multiplyByScaler(r[v].acceleration).add(n),r[v].lastPosition=new Se(r[v].position.x,r[v].position.y),u=r[v].delay*o*30,f=r[v].position.substract(r[v-1].position),h=Ze.directionToRadian(r[v].lastGravity,c)/a,f.x=Ze.cos(h)*f.x-f.y*Ze.sin(h),f.y=Ze.sin(h)*f.x+f.y*Ze.cos(h),r[v].position=r[v-1].position.add(f),d=r[v].velocity.multiplyByScaler(u),p=r[v].force.multiplyByScaler(u).multiplyByScaler(u),r[v].position=r[v].position.add(d).add(p),m=r[v].position.substract(r[v-1].position),m.normalize(),r[v].position=r[v-1].position.add(m.multiplyByScaler(r[v].radius)),Ze.abs(r[v].position.x)<s&&(r[v].position.x=0),u!=0&&(r[v].velocity=r[v].position.substract(r[v].lastPosition),r[v].velocity=r[v].velocity.divisionByScalar(u),r[v].velocity=r[v].velocity.multiplyByScaler(r[v].mobility)),r[v].force=new Se(0,0),r[v].lastGravity=new Se(c.x,c.y)}function mH(r,e,t,i,n){let s,o,a;s=n.getScale(n.translationScale,n.angleScale),o=i*s,o<e?(o<n.valueBelowMinimum&&(n.valueBelowMinimum=o),o=e):o>t&&(o>n.valueExceededMaximum&&(n.valueExceededMaximum=o),o=t),a=n.weight/wS,a>=1||(o=r[0]*(1-a)+o*a),r[0]=o}function lv(r,e,t,i,n,s,o,a){let l=0;const u=Ze.max(t,e);u<r&&(r=u);const h=Ze.min(t,e);h>r&&(r=h);const c=Ze.min(n,s),f=Ze.max(n,s),d=o,p=hH(h,u),m=r-p;switch(Math.sign(m)){case 1:{const v=f-d,g=u-p;g!=0&&(l=m*(v/g),l+=d);break}case-1:{const v=c-d,g=h-p;g!=0&&(l=m*(v/g),l+=d);break}case 0:{l=d;break}}return a?l:l*-1}class Wd{constructor(e=0,t=0,i=0,n=0){this.x=e,this.y=t,this.width=i,this.height=n}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,t){this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2}}const df=4,vH=10;let Nn,da,Yd;class pf{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const t=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Yd),this._maskTexture=new gH(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,t){let i=Number.MAX_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE;const a=t._clippedDrawableIndexList.length;for(let l=0;l<a;l++){const u=t._clippedDrawableIndexList[l],h=e.getDrawableVertexCount(u),c=e.getDrawableVertices(u);let f=Number.MAX_VALUE,d=Number.MAX_VALUE,p=Number.MIN_VALUE,m=Number.MIN_VALUE;const v=h*cf.vertexStep;for(let g=cf.vertexOffset;g<v;g+=cf.vertexStep){const _=c[g],y=c[g+1];_<f&&(f=_),_>p&&(p=_),y<d&&(d=y),y>m&&(m=y)}if(f!=Number.MAX_VALUE)if(f<i&&(i=f),d<n&&(n=d),p>s&&(s=p),m>o&&(o=m),i==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;const g=s-i,_=o-n;t._allClippedDrawRect.x=i,t._allClippedDrawRect.y=n,t._allClippedDrawRect.width=g,t._allClippedDrawRect.height=_}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new Wd,this._tmpMatrix=new Sr,this._tmpMatrixForMask=new Sr,this._tmpMatrixForDraw=new Sr;let e=new ca;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new ca,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new ca,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new ca,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,t,i;const n=this;for(let s=0;s<this._clippingContextListForMask.length;s++)this._clippingContextListForMask[s]&&((e=this._clippingContextListForMask[s])==null||e.release());n._clippingContextListForMask=void 0,n._clippingContextListForDraw=void 0,this._maskTexture&&((t=this.gl)==null||t.deleteFramebuffer(this._maskTexture.texture),n._maskTexture=void 0),n._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,t,i,n){for(let s=0;s<t;s++){if(n[s]<=0){this._clippingContextListForDraw.push(null);continue}let o=this.findSameClip(i[s],n[s]);o==null&&(o=new _H(this,i[s],n[s]),this._clippingContextListForMask.push(o)),o.addClippedDrawable(s),this._clippingContextListForDraw.push(o)}}setupClippingContext(e,t){this._currentFrameNo++;let i=0;for(let n=0;n<this._clippingContextListForMask.length;n++){const s=this._clippingContextListForMask[n];this.calcClippedDrawTotalBounds(e,s),s._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),t.getMvpMatrix(),t.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let n=0;n<this._clippingContextListForMask.length;n++){const s=this._clippingContextListForMask[n],o=s._allClippedDrawRect,a=s._layoutBounds,l=.05;this._tmpBoundsOnModel.setRect(o),this._tmpBoundsOnModel.expand(o.width*l,o.height*l);const u=a.width/this._tmpBoundsOnModel.width,h=a.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(a.x,a.y),this._tmpMatrix.scaleRelative(u,h),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const c=s._clippingIdCount;for(let f=0;f<c;f++){const d=s._clippingIdList[f];e.getDrawableDynamicFlagVertexPositionsDidChange(d)&&(t.setIsCulling(e.getDrawableCulling(d)!=!1),t.setClippingContextBufferForMask(s),t.drawMesh(e.getDrawableTextureIndices(d),e.getDrawableVertexIndexCount(d),e.getDrawableVertexCount(d),e.getDrawableVertexIndices(d),e.getDrawableVertices(d),e.getDrawableVertexUvs(d),e.getDrawableOpacity(d),dn.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Yd),t.setClippingContextBufferForMask(null),this.gl.viewport(da[0],da[1],da[2],da[3])}}findSameClip(e,t){for(let i=0;i<this._clippingContextListForMask.length;i++){const n=this._clippingContextListForMask[i],s=n._clippingIdCount;if(s!=t)continue;let o=0;for(let a=0;a<s;a++){const l=n._clippingIdList[a];for(let u=0;u<s;u++)if(e[u]==l){o++;break}}if(o==s)return n}return null}setupLayoutBounds(e){let t=e/df,i=e%df;t=~~t,i=~~i;let n=0;for(let s=0;s<df;s++){const o=t+(s<i?1:0);if(o!=0)if(o==1){const a=this._clippingContextListForMask[n++];a._layoutChannelNo=s,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(o==2)for(let a=0;a<o;a++){let l=a%2;l=~~l;const u=this._clippingContextListForMask[n++];u._layoutChannelNo=s,u._layoutBounds.x=l*.5,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(o<=4)for(let a=0;a<o;a++){let l=a%2,u=a/2;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l*.5,h._layoutBounds.y=u*.5,h._layoutBounds.width=.5,h._layoutBounds.height=.5}else if(o<=9)for(let a=0;a<o;a++){let l=a%3,u=a/3;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l/3,h._layoutBounds.y=u/3,h._layoutBounds.width=1/3,h._layoutBounds.height=1/3}else if(ol.supportMoreMaskDivisions&&o<=16)for(let a=0;a<o;a++){let l=a%4,u=a/4;l=~~l,u=~~u;const h=this._clippingContextListForMask[n++];h._layoutChannelNo=s,h._layoutBounds.x=l/4,h._layoutBounds.y=u/4,h._layoutBounds.width=1/4,h._layoutBounds.height=1/4}else Hs("not supported mask count : {0}",o)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class gH{constructor(e,t){this.frameNo=e,this.texture=t}}class _H{constructor(e,t,i){this._isUsing=!1,this._owner=e,this._clippingIdList=t,this._clippingIdCount=i,this._allClippedDrawRect=new Wd,this._layoutBounds=new Wd,this._clippedDrawableIndexList=[],this._matrixForMask=new Sr,this._matrixForDraw=new Sr}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class Qs{static getInstance(){return Nn==null&&(Nn=new Qs),Nn}static deleteInstance(){Nn&&(Nn.release(),Nn=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,t,i,n,s,o,a,l,u,h,c,f,d){c||Hs("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let p,m,v,g;const _=e.getClippingContextBufferForMask();if(_!=null){const y=this._shaderSets[pa.ShaderNames_SetupMask];this.gl.useProgram(y.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(y.samplerTexture0Location,0),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributePositionLocation),this.gl.vertexAttribPointer(y.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributeTexCoordLocation),this.gl.vertexAttribPointer(y.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const b=_._layoutChannelNo,T=_.getClippingManager().getChannelFlagAsColor(b);this.gl.uniform4f(y.uniformChannelFlagLocation,T.R,T.G,T.B,T.A),this.gl.uniformMatrix4fv(y.uniformClipMatrixLocation,!1,_._matrixForMask.getArray());const S=_._layoutBounds;this.gl.uniform4f(y.uniformBaseColorLocation,S.x*2-1,S.y*2-1,S.getRight()*2-1,S.getBottom()*2-1),p=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_COLOR,v=this.gl.ZERO,g=this.gl.ONE_MINUS_SRC_ALPHA}else{const y=e.getClippingContextBufferForDraw(),T=y!=null?d?2:1:0;let S;switch(u){case dn.CubismBlendMode_Normal:default:S=this._shaderSets[pa.ShaderNames_NormalPremultipliedAlpha+T],p=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA,v=this.gl.ONE,g=this.gl.ONE_MINUS_SRC_ALPHA;break;case dn.CubismBlendMode_Additive:S=this._shaderSets[pa.ShaderNames_AddPremultipliedAlpha+T],p=this.gl.ONE,m=this.gl.ONE,v=this.gl.ZERO,g=this.gl.ONE;break;case dn.CubismBlendMode_Multiplicative:S=this._shaderSets[pa.ShaderNames_MultPremultipliedAlpha+T],p=this.gl.DST_COLOR,m=this.gl.ONE_MINUS_SRC_ALPHA,v=this.gl.ZERO,g=this.gl.ONE;break}if(this.gl.useProgram(S.shaderProgram),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),y!=null){this.gl.activeTexture(this.gl.TEXTURE1);const E=y.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,E),this.gl.uniform1i(S.samplerTexture1Location,1),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,y._matrixForDraw.getArray());const C=y._layoutChannelNo,M=y.getClippingManager().getChannelFlagAsColor(C);this.gl.uniform4f(S.uniformChannelFlagLocation,M.R,M.G,M.B,M.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(S.samplerTexture0Location,0),this.gl.uniformMatrix4fv(S.uniformMatrixLocation,!1,f.getArray()),this.gl.uniform4f(S.uniformBaseColorLocation,h.R,h.G,h.B,h.A)}a.index==null&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(p,m,v,g)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<vH;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(yH,bH),this._shaderSets[1].shaderProgram=this.loadShaderProgram(xH,TH),this._shaderSets[2].shaderProgram=this.loadShaderProgram(jy,SH),this._shaderSets[3].shaderProgram=this.loadShaderProgram(jy,EH),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,t){let i=this.gl.createProgram(),n=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!n)return Hs("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return s?(this.gl.attachShader(i,n),this.gl.attachShader(i,s),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(n),this.gl.deleteShader(s),i):(Hs("Failed to link program: {0}",i),this.gl.deleteShader(n),this.gl.deleteShader(s),i&&this.gl.deleteProgram(i),0)):(Hs("Vertex shader compile error!"),0)}compileShaderSource(e,t){const i=t,n=this.gl.createShader(e);if(this.gl.shaderSource(n,i),this.gl.compileShader(n),!n){const o=this.gl.getShaderInfoLog(n);Hs("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(this.gl.deleteShader(n),null)}setGl(e){this.gl=e}}var pa=(r=>(r[r.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",r[r.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",r[r.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",r[r.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",r[r.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",r[r.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",r[r.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",r[r.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",r[r.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",r[r.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",r))(pa||{});const yH="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",bH="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",xH="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",jy="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",TH="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",SH="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",EH="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class PS extends rv{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new pf,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new pf,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let t=e.getDrawableCount()-1;t>=0;t--)this._sortedDrawableIndexList[t]=0;super.initialize(e)}bindTexture(e,t){this._textures[e]=t}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new pf,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,t,i;const n=this;this._clippingManager.release(),n._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(t=this.gl)==null||t.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,n._bufferData=void 0,n._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const n=t[i];this._sortedDrawableIndexList[n]=i}for(let i=0;i<e;++i){const n=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(n)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[n]:null),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndices(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n)))}}drawMesh(e,t,i,n,s,o,a,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const h=this.getModelColor();this.getClippingContextBufferForMask()==null&&(h.A*=a,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A));let c=null;this._textures[e]!=null&&(c=this._textures[e]),Qs.getInstance().setupShaderProgram(this,c,i,s,n,o,this._bufferData,a,l,h,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Qs.deleteInstance()}setRenderState(e,t){Yd=e,da=t}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),Qs.getInstance().setGl(e)}}rv.staticRelease=()=>{PS.doStaticRelease()};class CS{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:t.Ids}getLipSyncParameters(){var e,t;return(t=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:t.Ids}}const wH="ParamAngleX",PH="ParamAngleY",CH="ParamAngleZ",MH="ParamEyeBallX",IH="ParamEyeBallY",AH="ParamBodyAngleX",OH="ParamBreath",Xy=2,zy=2;var or;(r=>{r.LOG_LEVEL_VERBOSE=0,r.LOG_LEVEL_WARNING=1,r.LOG_LEVEL_ERROR=2,r.LOG_LEVEL_NONE=999,r.logLevel=r.LOG_LEVEL_WARNING,r.sound=!0,r.motionSync=!0,r.motionFadingDuration=500,r.idleMotionFadingDuration=2e3,r.expressionFadingDuration=500,r.preserveExpressionOnMotion=!0,r.cubism4=ol})(or||(or={}));const qe={log(r,...e){or.logLevel<=or.LOG_LEVEL_VERBOSE&&console.log(`[${r}]`,...e)},warn(r,...e){or.logLevel<=or.LOG_LEVEL_WARNING&&console.warn(`[${r}]`,...e)},error(r,...e){or.logLevel<=or.LOG_LEVEL_ERROR&&console.error(`[${r}]`,...e)}};function Wy(r,e,t){return r<e?e:r>t?t:r}function MS(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i))})})}function RH(r){let e=r.lastIndexOf("/");return e!=-1&&(r=r.slice(0,e)),e=r.lastIndexOf("/"),e!==-1&&(r=r.slice(e+1)),r}function FH(r,e){const t=r.indexOf(e);t!==-1&&r.splice(t,1)}class IS extends Or{constructor(e,t){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return lt(this,null,function*(){if(!this.definitions[e]){qe.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){qe.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const t=yield this._loadExpression(e);return this.expressions[e]=t,t})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return lt(this,null,function*(){if(this.definitions.length){const e=[];for(let t=0;t<this.definitions.length;t++)this.expressions[t]!==null&&this.expressions[t]!==this.currentExpression&&t!==this.reserveExpressionIndex&&e.push(t);if(e.length){const t=Math.floor(Math.random()*e.length);return this.setExpression(t)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return lt(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const t=yield this.loadExpression(e);return!t||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=t,this._setExpression(t),!0)})}update(e,t){return this.isFinished()?!1:this.updateParameters(e,t)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const Yy=.01,LH=40/7.5,DH=1/(.15*1e3);class BH{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,t,i=!1){this.targetX=Wy(e,-1,1),this.targetY=Wy(t,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const t=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(t)<Yy&&Math.abs(i)<Yy)return;const n=Math.sqrt(Bn(t,2)+Bn(i,2)),s=LH/(1e3/e);let o=s*(t/n)-this.vx,a=s*(i/n)-this.vy;const l=Math.sqrt(Bn(o,2)+Bn(a,2)),u=s*DH*e;l>u&&(o*=u/l,a*=u/l),this.vx+=o,this.vy+=a;const h=Math.sqrt(Bn(this.vx,2)+Bn(this.vy,2)),c=.5*(Math.sqrt(Bn(u,2)+8*u*n)-u);h>c&&(this.vx*=c/h,this.vy*=c/h),this.x+=this.vx,this.y+=this.vy}}class uv{constructor(e){this.json=e;let t=e.url;if(typeof t!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=t,this.name=RH(this.url)}resolveURL(e){return ar.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let t=0;t<this.textures.length;t++)this.textures[t]=e(this.textures[t],`textures[${t}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(t=>(e.push(t),t)),e}validateFiles(e){const t=(s,o)=>{const a=this.resolveURL(s);if(!e.includes(a)){if(o)throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(s=>t(s,!0)),this.getDefinedFiles().filter(s=>t(s,!1))}}var qd=(r=>(r[r.NONE=0]="NONE",r[r.IDLE=1]="IDLE",r[r.NORMAL=2]="NORMAL",r[r.FORCE=3]="FORCE",r))(qd||{});class NH{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,t,i){if(i<=0)return qe.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&t===this.currentIndex)return qe.log(this.tag,"Motion is already playing.",this.dump(e,t)),!1;if(e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex)return qe.log(this.tag,"Motion is already reserved.",this.dump(e,t)),!1;if(i===1){if(this.currentPriority!==0)return qe.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,t)),!1;if(this.reservedIdleGroup!==void 0)return qe.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,t)),!1;this.setReservedIdle(e,t)}else{if(i<3){if(i<=this.currentPriority)return qe.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,t)),!1;if(i<=this.reservePriority)return qe.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,t)),!1}this.setReserved(e,t,i)}return!0}start(e,t,i,n){if(n===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return qe.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,i)),!1}else{if(t!==this.reservedGroup||i!==this.reservedIndex)return qe.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(t,i)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(t,i,n),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,t,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=t}setReserved(e,t,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=t}setReservedIdle(e,t){this.reservedIdleGroup=e,this.reservedIdleIndex=t}isActive(e,t){return e===this.currentGroup&&t===this.currentIndex||e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!or.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,t){if(this.debug){const i=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${t}
`+i.map(n=>"["+n+"] "+this[n]).join(`
`)}return""}}const kH="SoundManager",UH=.5;class es{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(t=>t.volume=this._volume)}static add(e,t,i){const n=new Audio(e);return n.volume=this._volume,n.preload="auto",n.addEventListener("ended",()=>{this.dispose(n),t==null||t()}),n.addEventListener("error",s=>{this.dispose(n),qe.warn(kH,`Error occurred on "${e}"`,s.error),i==null||i(s.error)}),this.audios.push(n),n}static play(e){return new Promise((t,i)=>{var n;(n=e.play())==null||n.catch(s=>{e.dispatchEvent(new ErrorEvent("error",{error:s})),i(s)}),e.readyState===e.HAVE_ENOUGH_DATA?t():e.addEventListener("canplaythrough",t)})}static dispose(e){e.pause(),e.removeAttribute("src"),FH(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}es.audios=[];es._volume=UH;class hv extends Or{constructor(e,t){super(),this.motionGroups={},this.state=new NH,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let t;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":t=Object.keys(this.definitions);break;case"IDLE":default:t=[this.groups.idle];break}for(const i of t)if(this.definitions[i])for(let n=0;n<this.definitions[i].length;n++)this.loadMotion(i,n).then()}loadMotion(e,t){return lt(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[t])){qe.warn(this.tag,`Undefined motion at "${e}"[${t}]`);return}if(this.motionGroups[e][t]===null){qe.warn(this.tag,`Cannot start motion at "${e}"[${t}] because it's already failed in loading.`);return}if(this.motionGroups[e][t])return this.motionGroups[e][t];const n=yield this._loadMotion(e,t);if(!this.destroyed)return this.motionGroups[e][t]=n??null,n})}_loadMotion(e,t){throw new Error("Not implemented.")}startMotion(e,t){return lt(this,arguments,function*(i,n,s=qd.NORMAL){var o;if(!this.state.reserve(i,n,s))return!1;const a=(o=this.definitions[i])==null?void 0:o[n];if(!a)return!1;this.currentAudio&&es.dispose(this.currentAudio);let l;if(or.sound){const h=this.getSoundFile(a);if(h)try{l=es.add(this.settings.resolveURL(h),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=l}catch(c){qe.warn(this.tag,"Failed to create audio",h,c)}}const u=yield this.loadMotion(i,n);if(l){const h=es.play(l).catch(c=>qe.warn(this.tag,"Failed to play audio",l.src,c));or.motionSync&&(yield h)}return this.state.start(u,i,n,s)?(qe.log(this.tag,"Start motion:",this.getMotionName(a)),this.emit("motionStart",i,n,l),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(u),!0):(l&&(es.dispose(l),this.currentAudio=void 0),!1)})}startRandomMotion(e,t){return lt(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const n=[];for(let s=0;s<i.length;s++)this.motionGroups[e][s]!==null&&!this.state.isActive(e,s)&&n.push(s);if(n.length){const s=Math.floor(Math.random()*n.length);return this.startMotion(e,n[s],t)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(es.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,t){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,qd.IDLE)),this.updateParameters(e,t)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const t=this;t.definitions=void 0,t.motionGroups=void 0}}const GH={x:0,y:0,width:0,height:0};class VH extends Or{constructor(){super(...arguments),this.focusController=new BH,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new We,this.drawingMatrix=new We,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,t=this.getSize();e.originalWidth=t[0],e.originalHeight=t[1];const i=Object.assign({width:Xy,height:zy},this.getLayout());this.localTransform.scale(i.width/Xy,i.height/zy),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const n=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,s=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*n,-this.height*s)}setupHitAreas(){const e=this.getHitAreaDefs().filter(t=>t.index>=0);for(const t of e)this.hitAreas[t.name]=t}hitTest(e,t){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,t))}isHit(e,t,i){if(!this.hitAreas[e])return!1;const n=this.hitAreas[e].index,s=this.getDrawableBounds(n,GH);return s.x<=t&&t<=s.x+s.width&&s.y<=i&&i<=s.y+s.height}getDrawableBounds(e,t){const i=this.getDrawableVertices(e);let n=i[0],s=i[0],o=i[1],a=i[1];for(let l=0;l<i.length;l+=2){const u=i[l],h=i[l+1];n=Math.min(u,n),s=Math.max(u,s),o=Math.min(h,o),a=Math.max(h,a)}return t??(t={}),t.x=n,t.y=o,t.width=s-n,t.height=a-o,t}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,t){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const HH="XHRLoader";class qy extends Error{constructor(e,t,i,n=!1){super(e),this.url=t,this.status=i,this.aborted=n}}const Ht=class{static createXHR(r,e,t,i,n){const s=new XMLHttpRequest;if(Ht.allXhrSet.add(s),r){let o=Ht.xhrMap.get(r);o?o.add(s):(o=new Set([s]),Ht.xhrMap.set(r,o)),r.listeners("destroy").includes(Ht.cancelXHRs)||r.once("destroy",Ht.cancelXHRs)}return s.open("GET",e),s.responseType=t,s.onload=()=>{(s.status===200||s.status===0)&&s.response?i(s.response):s.onerror()},s.onerror=()=>{qe.warn(HH,`Failed to load resource as ${s.responseType} (Status ${s.status}): ${e}`),n(new qy("Network error.",e,s.status))},s.onabort=()=>n(new qy("Aborted.",e,s.status,!0)),s.onloadend=()=>{var o;Ht.allXhrSet.delete(s),r&&((o=Ht.xhrMap.get(r))==null||o.delete(s))},s}static cancelXHRs(){var r;(r=Ht.xhrMap.get(this))==null||r.forEach(e=>{e.abort(),Ht.allXhrSet.delete(e)}),Ht.xhrMap.delete(this)}static release(){Ht.allXhrSet.forEach(r=>r.abort()),Ht.allXhrSet.clear(),Ht.xhrMap=new WeakMap}};let qh=Ht;qh.xhrMap=new WeakMap;qh.allXhrSet=new Set;qh.loader=(r,e)=>new Promise((t,i)=>{Ht.createXHR(r.target,r.settings?r.settings.resolveURL(r.url):r.url,r.type,s=>{r.result=s,t()},i).send()});function AS(r,e){let t=-1;return i(0);function i(n,s){if(s)return Promise.reject(s);if(n<=t)return Promise.reject(new Error("next() called multiple times"));t=n;const o=r[n];if(!o)return Promise.resolve();try{return Promise.resolve(o(e,i.bind(null,n+1)))}catch(a){return Promise.reject(a)}}}class yn{static load(e){return AS(this.middlewares,e).then(()=>e.result)}}yn.middlewares=[qh.loader];function $H(r,e={}){var t;const i={resourceOptions:{crossorigin:e.crossOrigin}};if(ve.fromURL)return ve.fromURL(r,i).catch(o=>{if(o instanceof Error)throw o;const a=new Error("Texture loading error");throw a.event=o,a});i.resourceOptions.autoLoad=!1;const n=ve.from(r,i);if(n.baseTexture.valid)return Promise.resolve(n);const s=n.baseTexture.resource;return(t=s._live2d_load)!=null||(s._live2d_load=new Promise((o,a)=>{const l=u=>{s.source.removeEventListener("error",l);const h=new Error("Texture loading error");h.event=u,a(h)};s.source.addEventListener("error",l),s.load().then(()=>o(n)).catch(l)})),s._live2d_load}const Ky="Live2DFactory",OS=(r,e)=>lt(void 0,null,function*(){if(typeof r.source=="string"){const t=yield yn.load({url:r.source,type:"json",target:r.live2dModel});t.url=r.source,r.source=t,r.live2dModel.emit("settingsJSONLoaded",t)}return e()}),RS=(r,e)=>lt(void 0,null,function*(){if(r.source instanceof uv)return r.settings=r.source,e();if(typeof r.source=="object"){const t=ft.findRuntime(r.source);if(t){const i=t.createModelSettings(r.source);return r.settings=i,r.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),FS=(r,e)=>{if(r.settings){const t=ft.findRuntime(r.settings);if(t)return t.ready().then(e)}return e()},LS=(r,e)=>lt(void 0,null,function*(){yield e();const t=r.internalModel;if(t){const i=r.settings,n=ft.findRuntime(i);if(n){const s=[];i.pose&&s.push(yn.load({settings:i,url:i.pose,type:"json",target:t}).then(o=>{t.pose=n.createPose(t.coreModel,o),r.live2dModel.emit("poseLoaded",t.pose)}).catch(o=>{r.live2dModel.emit("poseLoadError",o),qe.warn(Ky,"Failed to load pose.",o)})),i.physics&&s.push(yn.load({settings:i,url:i.physics,type:"json",target:t}).then(o=>{t.physics=n.createPhysics(t.coreModel,o),r.live2dModel.emit("physicsLoaded",t.physics)}).catch(o=>{r.live2dModel.emit("physicsLoadError",o),qe.warn(Ky,"Failed to load physics.",o)})),s.length&&(yield Promise.all(s))}}}),DS=(r,e)=>lt(void 0,null,function*(){if(r.settings){const t=r.live2dModel,i=r.settings.textures.map(n=>{const s=r.settings.resolveURL(n);return $H(s,{crossOrigin:r.options.crossOrigin})});if(yield e(),r.internalModel)t.internalModel=r.internalModel,t.emit("modelLoaded",r.internalModel);else throw new TypeError("Missing internal model.");t.textures=yield Promise.all(i),t.emit("textureLoaded",t.textures)}else throw new TypeError("Missing settings.")}),BS=(r,e)=>lt(void 0,null,function*(){const t=r.settings;if(t instanceof uv){const i=ft.findRuntime(t);if(!i)throw new TypeError("Unknown model settings.");const n=yield yn.load({settings:t,url:t.moc,type:"arraybuffer",target:r.live2dModel});if(!i.isValidMoc(n))throw new Error("Invalid moc data");const s=i.createCoreModel(n);return r.internalModel=i.createInternalModel(s,t,r.options),e()}throw new TypeError("Missing settings.")}),Lt=class{static registerRuntime(r){Lt.runtimes.push(r),Lt.runtimes.sort((e,t)=>t.version-e.version)}static findRuntime(r){for(const e of Lt.runtimes)if(e.test(r))return e}static setupLive2DModel(r,e,t){return lt(this,null,function*(){const i=new Promise(o=>r.once("textureLoaded",o)),n=new Promise(o=>r.once("modelLoaded",o)),s=Promise.all([i,n]).then(()=>r.emit("ready"));yield AS(Lt.live2DModelMiddlewares,{live2dModel:r,source:e,options:t||{}}),yield s,r.emit("load")})}static loadMotion(r,e,t){var i,n;const s=o=>r.emit("motionLoadError",e,t,o);try{const o=(i=r.definitions[e])==null?void 0:i[t];if(!o)return Promise.resolve(void 0);r.listeners("destroy").includes(Lt.releaseTasks)||r.once("destroy",Lt.releaseTasks);let a=Lt.motionTasksMap.get(r);a||(a={},Lt.motionTasksMap.set(r,a));let l=a[e];l||(l=[],a[e]=l);const u=r.getMotionFile(o);return(n=l[t])!=null||(l[t]=yn.load({url:u,settings:r.settings,type:r.motionDataType,target:r}).then(h=>{var c;const f=(c=Lt.motionTasksMap.get(r))==null?void 0:c[e];f&&delete f[t];const d=r.createMotion(h,e,o);return r.emit("motionLoaded",e,t,d),d}).catch(h=>{qe.warn(r.tag,`Failed to load motion: ${u}
`,h),s(h)})),l[t]}catch(o){qe.warn(r.tag,`Failed to load motion at "${e}"[${t}]
`,o),s(o)}return Promise.resolve(void 0)}static loadExpression(r,e){var t;const i=n=>r.emit("expressionLoadError",e,n);try{const n=r.definitions[e];if(!n)return Promise.resolve(void 0);r.listeners("destroy").includes(Lt.releaseTasks)||r.once("destroy",Lt.releaseTasks);let s=Lt.expressionTasksMap.get(r);s||(s=[],Lt.expressionTasksMap.set(r,s));const o=r.getExpressionFile(n);return(t=s[e])!=null||(s[e]=yn.load({url:o,settings:r.settings,type:"json",target:r}).then(a=>{const l=Lt.expressionTasksMap.get(r);l&&delete l[e];const u=r.createExpression(a,n);return r.emit("expressionLoaded",e,u),u}).catch(a=>{qe.warn(r.tag,`Failed to load expression: ${o}
`,a),i(a)})),s[e]}catch(n){qe.warn(r.tag,`Failed to load expression at [${e}]
`,n),i(n)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof hv?Lt.motionTasksMap.delete(this):Lt.expressionTasksMap.delete(this)}};let ft=Lt;ft.runtimes=[];ft.urlToJSON=OS;ft.jsonToSettings=RS;ft.waitUntilReady=FS;ft.setupOptionals=LS;ft.setupEssentials=DS;ft.createInternalModel=BS;ft.live2DModelMiddlewares=[OS,RS,FS,LS,DS,BS];ft.motionTasksMap=new WeakMap;ft.expressionTasksMap=new WeakMap;hv.prototype._loadMotion=function(r,e){return ft.loadMotion(this,r,e)};IS.prototype._loadExpression=function(r){return ft.loadExpression(this,r)};class jH{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",Zy,this):this.off("pointertap",Zy,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",Jy,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",Jy,this),this.interactionManager=void 0)}}function Zy(r){this.tap(r.data.global.x,r.data.global.y)}function Jy(r){this.focus(r.data.global.x,r.data.global.y)}class XH extends ul{}const fr=new ze,zH=new We;let Zi;class NS extends ur{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new XH,this.anchor=new Fi(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,t){const i=new this(t);return ft.setupLive2DModel(i,e,t).then(()=>i)}static fromSync(e,t){const i=new this(t);return ft.setupLive2DModel(i,e,t).then(t==null?void 0:t.onLoad).catch(t==null?void 0:t.onError),i}static registerTicker(e){Zi=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var t;Zi||(Zi=(t=window.PIXI)==null?void 0:t.Ticker),e?this._destroyed||(Zi?(Zi.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):qe.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(Zi==null||Zi.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const t=Object.assign({autoUpdate:!0,autoInteract:!0},e);t.autoInteract&&(this.interactive=!0),this.autoInteract=t.autoInteract,this.autoUpdate=t.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,t,i){return t===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,t,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,t,i=!1){fr.x=e,fr.y=t,this.toModelPosition(fr,fr,!0);let n=fr.x/this.internalModel.originalWidth*2-1,s=fr.y/this.internalModel.originalHeight*2-1,o=Math.atan2(s,n);this.internalModel.focusController.focus(Math.cos(o),-Math.sin(o),i)}tap(e,t){const i=this.hitTest(e,t);i.length&&(qe.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,t){return fr.x=e,fr.y=t,this.toModelPosition(fr,fr),this.internalModel.hitTest(fr.x,fr.y)}toModelPosition(e,t=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,t),this.internalModel.localTransform.applyInverse(t,t),t}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(Zi.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let t=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),t=!0);for(let s=0;s<this.textures.length;s++){const o=this.textures[s];o.valid&&((t||!o.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(o.baseTexture,0)),this.internalModel.bindTexture(s,o.baseTexture._glTextures[this.glContextID].texture),o.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const n=zH.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(n),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(t=>t.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}MS(NS,[jH]);const hi=class{static resolveURL(r,e){var t;const i=(t=hi.filesMap[r])==null?void 0:t[e];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return i}static upload(r,e){return lt(this,null,function*(){const t={};for(const i of e.getDefinedFiles()){const n=decodeURI(ar.resolve(e.url,i)),s=r.find(o=>o.webkitRelativePath===n);s&&(t[i]=URL.createObjectURL(s))}hi.filesMap[e._objectURL]=t})}static createSettings(r){return lt(this,null,function*(){const e=r.find(o=>o.name.endsWith("model.json")||o.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const t=yield hi.readText(e),i=JSON.parse(t);i.url=e.webkitRelativePath;const n=ft.findRuntime(i);if(!n)throw new Error("Unknown settings JSON");const s=n.createModelSettings(i);return s._objectURL=URL.createObjectURL(e),s})}static readText(r){return lt(this,null,function*(){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsText(r,"utf8")})})}};let cv=hi;cv.filesMap={};cv.factory=(r,e)=>lt(void 0,null,function*(){if(Array.isArray(r.source)&&r.source[0]instanceof File){const t=r.source;let i=t.settings;if(!i)i=yield hi.createSettings(t);else if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');i.validateFiles(t.map(n=>encodeURI(n.webkitRelativePath))),yield hi.upload(t,i),i.resolveURL=function(n){return hi.resolveURL(this._objectURL,n)},r.source=i,r.live2dModel.once("modelLoaded",n=>{n.once("destroy",function(){const s=this.settings._objectURL;if(URL.revokeObjectURL(s),hi.filesMap[s])for(const o of Object.values(hi.filesMap[s]))URL.revokeObjectURL(o);delete hi.filesMap[s]})})}return e()});ft.live2DModelMiddlewares.unshift(cv.factory);const qt=class{static unzip(r,e){return lt(this,null,function*(){const t=yield qt.getFilePaths(r),i=[];for(const s of e.getDefinedFiles()){const o=decodeURI(ar.resolve(e.url,s));t.includes(o)&&i.push(o)}const n=yield qt.getFiles(r,i);for(let s=0;s<n.length;s++){const o=i[s],a=n[s];Object.defineProperty(a,"webkitRelativePath",{value:o})}return n})}static createSettings(r){return lt(this,null,function*(){const t=(yield qt.getFilePaths(r)).find(o=>o.endsWith("model.json")||o.endsWith("model3.json"));if(!t)throw new Error("Settings file not found");const i=yield qt.readText(r,t);if(!i)throw new Error("Empty settings file: "+t);const n=JSON.parse(i);n.url=t;const s=ft.findRuntime(n);if(!s)throw new Error("Unknown settings JSON");return s.createModelSettings(n)})}static zipReader(r,e){return lt(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(r){return lt(this,null,function*(){throw new Error("Not implemented")})}static getFiles(r,e){return lt(this,null,function*(){throw new Error("Not implemented")})}static readText(r,e){return lt(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(r){}};let Kh=qt;Kh.ZIP_PROTOCOL="zip://";Kh.uid=0;Kh.factory=(r,e)=>lt(void 0,null,function*(){const t=r.source;let i,n,s;if(typeof t=="string"&&(t.endsWith(".zip")||t.startsWith(qt.ZIP_PROTOCOL))?(t.startsWith(qt.ZIP_PROTOCOL)?i=t.slice(qt.ZIP_PROTOCOL.length):i=t,n=yield yn.load({url:i,type:"blob",target:r.live2dModel})):Array.isArray(t)&&t.length===1&&t[0]instanceof File&&t[0].name.endsWith(".zip")&&(n=t[0],i=URL.createObjectURL(n),s=t.settings),n){if(!n.size)throw new Error("Empty zip file");const o=yield qt.zipReader(n,i);s||(s=yield qt.createSettings(o)),s._objectURL=qt.ZIP_PROTOCOL+qt.uid+"/"+s.url;const a=yield qt.unzip(o,s);a.settings=s,r.source=a,i.startsWith("blob:")&&r.live2dModel.once("modelLoaded",l=>{l.once("destroy",function(){URL.revokeObjectURL(i)})}),qt.releaseReader(o)}return e()});ft.live2DModelMiddlewares.unshift(Kh.factory);if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class WH extends IS{constructor(e,t){var i;super(e,t),this.queueManager=new ES,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.Name===e)}getExpressionFile(e){return e.File}createExpression(e,t){return nv.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}}class eo extends uv{constructor(e){if(super(e),!eo.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new CS(e))}static isValidJSON(e){var t;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((t=e.FileReferences.Textures)==null?void 0:t.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[t,i]of Object.entries(this.motions))for(let n=0;n<i.length;n++)i[n].File=e(i[n].File,`motions.${t}[${n}].File`),i[n].Sound!==void 0&&(i[n].Sound=e(i[n].Sound,`motions.${t}[${n}].Sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].File=e(this.expressions[t].File,`expressions[${t}].File`)}}MS(eo,[CS]);class YH extends hv{constructor(e,t){var i;super(e,t),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new ES,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new WH(this.settings,e)),this.queueManager.setEventCallback((t,i,n)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,t){return e.setFinishedMotionHandler(t),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,t,i){const n=ov.create(e),s=new SS(e),o=(t===this.groups.idle?or.idleMotionFadingDuration:or.motionFadingDuration)/1e3;return s.getMotionFadeInTime()===void 0&&n.setFadeInTime(i.FadeInTime>0?i.FadeInTime:o),s.getMotionFadeOutTime()===void 0&&n.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:o),n.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),n}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,t){return this.queueManager.doUpdateMotion(e,t)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const Qy=new Sr;class qH extends VH{constructor(e,t,i){super(),this.lipSync=!0,this.breath=ev.create(),this.renderer=new PS,this.idParamAngleX=wH,this.idParamAngleY=PH,this.idParamAngleZ=CH,this.idParamEyeBallX=MH,this.idParamEyeBallY=IH,this.idParamBodyAngleX=AH,this.idParamBreath=OH,this.pixelsPerUnit=1,this.centeringTransform=new We,this.coreModel=e,this.settings=t,this.motionManager=new YH(t,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=xS.create(this.settings)),this.breath.setParameters([new Qo(this.idParamAngleX,0,15,6.5345,.5),new Qo(this.idParamAngleY,0,8,3.5345,.5),new Qo(this.idParamAngleZ,0,10,5.5345,.5),new Qo(this.idParamBodyAngleX,0,4,15.5345,.5),new Qo(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout)){const i=t.charAt(0).toLowerCase()+t.slice(1);e[i]=this.settings.layout[t]}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,t){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=t,this.renderer._clippingManager._maskTexture=void 0,Qs.getInstance()._shaderSets=[]}bindTexture(e,t){this.renderer.bindTexture(e,t)}getHitAreaDefs(){var e,t;return(t=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?t:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const t=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<t.length;i+=2)t[i]=t[i]*this.pixelsPerUnit+this.originalWidth/2,t[i+1]=-t[i+1]*this.pixelsPerUnit+this.originalHeight/2;return t}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,t){var i,n,s,o;super.update(e,t),e/=1e3,t/=1e3;const a=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),a.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(a,t),l||(n=this.eyeBlink)==null||n.updateParameters(a,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,t*1e3),(s=this.physics)==null||s.evaluate(a,e),(o=this.pose)==null||o.updateParameters(a,e),this.emit("beforeModelUpdate"),a.update(),a.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(e,t){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const t=this.drawingMatrix,i=Qy.getArray();i[0]=t.a,i[1]=t.b,i[4]=-t.c,i[5]=-t.d,i[12]=t.tx,i[13]=t.ty,this.renderer.setMvpMatrix(Qy),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let uu,e0=20;function KH(){return sl.isStarted()?Promise.resolve():(uu??(uu=new Promise((r,e)=>{function t(){try{ZH(),r()}catch(i){if(e0--,e0<0){const n=new Error("Failed to start up Cubism 4 framework.");n.cause=i,e(n);return}qe.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(t,10)}}t()})),uu)}function ZH(r){r=Object.assign({logFunction:console.log,loggingLevel:Es.LogLevel_Verbose},r),sl.startUp(r),sl.initialize()}ft.registerRuntime({version:4,ready:KH,test(r){return r instanceof eo||eo.isValidJSON(r)},isValidMoc(r){if(r.byteLength<4)return!1;const e=new Int8Array(r,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(r){return new eo(r)},createCoreModel(r){const e=iv.create(r);try{const t=e.createModel();return t.__moc=e,t}catch(t){try{e.release()}catch{}throw t}},createInternalModel(r,e,t){const i=new qH(r,e,t),n=r;return n.__moc&&(i.__moc=n.__moc,delete n.__moc,i.once("destroy",JH)),i},createPhysics(r,e){return av.create(e)},createPose(r,e){return tv.create(e)}});function JH(){var r;(r=this.__moc)==null||r.release()}window.PIXI=MV;async function QH(r){const e=Gh();let t=await ST({url:"/get",method:"get"}).catch(s=>{console.log(s)})||{};const i=await NS.from("/model/"+(t.data||"mao_pro_t03.model3.json"),{autoUpdate:!0});e.state.model4=i,e.state.model4.scale.set(e.state.scale);let n=new Qm({view:r,autoStart:!0,width:e.state.model4.width,height:e.state.model4.height,backgroundAlpha:0});return n.stage.addChild(i),e.state.model4.internalModel.coreModel._parameterIds.includes("ParamMouthOpenY")&&(e.state.parameterIndex=e.state.model4.internalModel.coreModel.getParameterIndex("ParamMouthOpenY")),e.state.model4.internalModel.coreModel._parameterIds.includes("PARAM_MOUTH_OPEN_Y")&&(e.state.parameterIndex=e.state.model4.internalModel.coreModel.getParameterIndex("PARAM_MOUTH_OPEN_Y")),e.state.model4.internalModel.coreModel._parameterIds.includes("ParamMouthA")&&(e.state.parameterIndex=e.state.model4.internalModel.coreModel.getParameterIndex("ParamMouthA")),n}const e$={id:"app",style:{"text-align":"center"}},t$={__name:"App",setup(r){xt.logLevel=xt.LOG_LEVEL_WARNING;const e=oe(!1),t=oe(0),i=oe(0),n=oe(null),s=Gh();function o(u){e.value=!0,t.value=u.clientX,i.value=u.clientY}function a(u){if(e.value){const h=u.clientX-t.value,c=u.clientY-i.value;n.value.style.left=parseInt(n.value.style.left||0)+h+"px",n.value.style.top=parseInt(n.value.style.top||0)+c+"px",t.value=u.clientX,i.value=u.clientY}}function l(){e.value=!1,e.value=!1,e.value=!1}return Ot(async()=>{s.state.app=await QH(n.value),s5(),window.onresize=()=>{s.state.model4.x=n.value.clientWidth/2-s.state.model4.width/2},s.state.live2d=n.value}),hp(()=>{s.state.websocket=a5()}),Yr(()=>{s.state.websocket.close()}),(u,h)=>(K(),ue("div",e$,[Me(U8),ye("canvas",{ref_key:"live2d",ref:n,onMousedown:o,onMousemove:a,onMouseup:l,style:{position:"relative"}},null,544)]))}},r$={reduce(r,e){typeof localStorage.scale!="number"&&(localStorage.scale=parseFloat(localStorage.scale)),r.state.scale<=.3&&(r.state.scale=.3),r.state.scale-=.1,r.state.model4.scale.set(r.state.scale),e.width=r.state.model4.width,e.height=r.state.model4.height,r.state.app.resizeTo=e},amplify(r,e){typeof localStorage.scale!="number"&&(localStorage.scale=parseFloat(localStorage.scale)),r.state.scale>=1.5&&(r.state.scale=1.5),r.state.scale-=-.1,r.state.model4.scale.set(r.state.scale),e.width=r.state.model4.width,e.height=r.state.model4.height,r.state.app.resizeTo=e}},i$={},n$={websocket:"",model4:"",parameterIndex:"",percentage:parseFloat(localStorage.getItem("percentage")||60),scale:parseFloat(localStorage.getItem("scale")||1),app:"",live2d:""},s$=P8({actions:r$,mutations:i$,state:n$}),kS=uP(t$);kS.use(s$);kS.mount("#app");
