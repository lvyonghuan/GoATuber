{"version":3,"file":"js/app.f9edb24b.js","mappings":"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","sources":["webpack://live2d/./src/App.vue","webpack://live2d/./src/components/Drawer.vue","webpack://live2d/src/components/Drawer.vue","webpack://live2d/./src/components/Drawer.vue?0738","webpack://live2d/./src/components/Drawer.vue?af4e","webpack://live2d/./src/ws/index.js","webpack://live2d/./src/utils/index.js","webpack://live2d/./src/openMouthY/index.js","webpack://live2d/./src/pixi-live2d-display/dist/cubism4.es.js","webpack://live2d/./src/loadLive2d/index.js","webpack://live2d/src/App.vue","webpack://live2d/./src/App.vue?51dd","webpack://live2d/./src/App.vue?0e40","webpack://live2d/./src/store/index.js","webpack://live2d/./src/main.js","webpack://live2d/./src/pixi-live2d-display/dist/index.js","webpack://live2d/webpack/bootstrap","webpack://live2d/webpack/runtime/chunk loaded","webpack://live2d/webpack/runtime/compat get default export","webpack://live2d/webpack/runtime/define property getters","webpack://live2d/webpack/runtime/global","webpack://live2d/webpack/runtime/hasOwnProperty shorthand","webpack://live2d/webpack/runtime/make namespace object","webpack://live2d/webpack/runtime/node module decorator","webpack://live2d/webpack/runtime/jsonp chunk loading","webpack://live2d/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"id\":\"app\"}},[_c('Drawer'),_c('canvas',{ref:\"live2d\",staticStyle:{\"position\":\"relative\"},on:{\"mousedown\":_vm.handleMouseDown,\"mousemove\":_vm.handleMouseMove,\"mouseup\":_vm.handleMouseUp}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('div',{staticClass:\"show_setting\",on:{\"click\":_vm.handlerClick}},[_c('i',{staticClass:\"el-icon-arrow-right\"})]),_c('el-drawer',{attrs:{\"visible\":_vm.drawer,\"with-header\":false,\"direction\":\"ltr\"},on:{\"update:visible\":function($event){_vm.drawer=$event}}},[_c('div',{staticClass:\"button\"},[_c('el-button',{staticStyle:{\"height\":\"7vh\",\"width\":\"8vw\",\"font-size\":\"2vh\",\"line-height\":\"0vh\",\"border-radius\":\"3.5vh\"},attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('amplify',_vm.live2d)}}},[_vm._v(\"放大\")]),_c('el-button',{staticStyle:{\"height\":\"7vh\",\"width\":\"8vw\",\"font-size\":\"2vh\",\"line-height\":\"0vh\",\"border-radius\":\"3.5vh\"},attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('reduce',_vm.live2d)}}},[_vm._v(\"缩小\")])],1),_c('div',{staticClass:\"percentage\",on:{\"mousedown\":_vm.mouseDown}},[_c('div',{ref:\"per\",staticClass:\"in-percentage\"})]),_c('el-button-group',[_c('el-button',{staticStyle:{\"height\":\"5vh\",\"width\":\"4vw\",\"font-size\":\"2vh\",\"line-height\":\"0vh\"},attrs:{\"icon\":\"el-icon-minus\"},on:{\"click\":function($event){return _vm.$store.dispatch('decrease')}}}),_c('el-button',{staticStyle:{\"height\":\"5vh\",\"width\":\"4vw\",\"font-size\":\"2vh\",\"line-height\":\"0vh\"},attrs:{\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.$store.dispatch('increase')}}})],1),_c('br'),_c('el-input',{staticStyle:{\"height\":\"4vh\",\"width\":\"20vw\",\"margin-top\":\"2vh\"},attrs:{\"placeholder\":\"要改变的数值\"},model:{value:(_vm.$store.state.percentage),callback:function ($$v) {_vm.$set(_vm.$store.state, \"percentage\", $$v)},expression:\"$store.state.percentage\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\nimport {defineComponent} from 'vue'\r\n\r\n\r\n\r\nexport default defineComponent({\r\n  name: \"Drawer\",\r\n  data(){\r\n    return {\r\n      drawer: false,\r\n      customColor: '#409eff',\r\n      x:\"\",\r\n      dragging :false\r\n    }\r\n  },\r\n  methods:{\r\n    handlerClick(){\r\n      this.drawer = true\r\n      setTimeout(()=>{\r\n        this.$refs.per.style.width = `${this.percentage}%`\r\n      })\r\n    },\r\n    //添加进度条的点击事件\r\n    mouseDown(e){\r\n\r\n      this.$store.state.percentage = e.offsetX/this.$refs.per.parentElement.clientWidth * 100\r\n\r\n      this.x = e.clientX;\r\n    }\r\n\r\n  },\r\n\r\n  computed:{\r\n    percentage(){\r\n      return this.$store.state.percentage\r\n    },\r\n    scale(){\r\n      return this.$store.state.scale\r\n    },\r\n    live2d(){\r\n      return this.$store.state.live2d\r\n    }\r\n  },\r\n\r\n\r\n  watch:{\r\n    percentage:{\r\n      handler(newValue){\r\n        if (typeof newValue != 'number'){\r\n          this.percentage = 60\r\n        }\r\n        this.$refs.per.style.width = `${this.percentage}%`\r\n        window.localStorage.setItem(\"percentage\",newValue)\r\n\r\n      }\r\n    },\r\n    scale:{\r\n      handler(newValue){\r\n\r\n        if (typeof newValue != 'number'){\r\n          this.percentage = 1\r\n        }\r\n\r\n        window.localStorage.setItem(\"scale\",newValue)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"keydown\", (events) => {\r\n          if(events.code==\"ArrowLeft\"){\r\n            this.drawer=false\r\n          }\r\n          if(events.code==\"ArrowRight\"){\r\n            this.drawer=true\r\n          }\r\n          if(events.code==\"ArrowUp\"){\r\n            this.amplify()\r\n          }\r\n          if(events.code==\"ArrowDown\"){\r\n            this.reduce()\r\n          }\r\n        }\r\n    )\r\n  }\r\n\r\n\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"show_setting\" @click=\"handlerClick\">\r\n      <i class=\"el-icon-arrow-right\"></i>\r\n    </div>\r\n\r\n    <el-drawer\r\n        :visible.sync=\"drawer\"\r\n        :with-header=\"false\"\r\n        direction=\"ltr\"\r\n    >\r\n\r\n      <div class=\"button\" >\r\n        <el-button  @click=\"$store.dispatch('amplify',live2d)\"  type=\"primary\" round style=\"height: 7vh;width: 8vw;font-size: 2vh;line-height: 0vh;border-radius: 3.5vh\" >放大</el-button>\r\n        <el-button  @click=\"$store.dispatch('reduce',live2d)\"  type=\"primary\" round style=\"height: 7vh;width: 8vw;font-size: 2vh;line-height: 0vh;border-radius: 3.5vh\">缩小</el-button>\r\n      </div>\r\n\r\n\r\n\r\n      <div class=\"percentage\"\r\n           @mousedown=\"mouseDown\"\r\n\r\n      >\r\n        <div class=\"in-percentage\"\r\n             ref=\"per\"\r\n\r\n\r\n        ></div>\r\n      </div>\r\n\r\n      <el-button-group>\r\n        <el-button icon=\"el-icon-minus\"\r\n                   @click=\"$store.dispatch('decrease')\"\r\n                   style=\"height: 5vh;\r\n                   width: 4vw;\r\n                   font-size: 2vh;\r\n                   line-height: 0vh;\" ></el-button>\r\n        <el-button icon=\"el-icon-plus\"\r\n                   @click=\"$store.dispatch('increase')\"\r\n                   style=\"height: 5vh;\r\n                   width: 4vw;\r\n                   font-size: 2vh;\r\n                   line-height: 0vh;\"></el-button>\r\n      </el-button-group>\r\n      <br>\r\n      <el-input v-model=\"$store.state.percentage\" placeholder=\"要改变的数值\" style=\"height: 4vh; width: 20vw;margin-top: 2vh\"></el-input>\r\n    </el-drawer>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n\r\n\r\n.button {\r\n  z-index: 10;\r\n  cursor: pointer;\r\n  margin-top: 8vh;\r\n}\r\n\r\n.el-drawer__body {\r\n  background-image: url(\"@/../public/drawer.webp\");\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.show_setting {\r\n  position: relative;\r\n  width: 1.5vw;\r\n  height: 4vw;\r\n  background:rgba(139,139,139,0.6);\r\n  top: 50vh;\r\n  transform: translateY(-4vw);\r\n  font-size: 3vh;\r\n  line-height: 4vw;\r\n  text-align: center;\r\n  z-index: 10;\r\n\r\n}\r\n\r\n.percentage {\r\n\r\n  width: 25vw;\r\n  height: 1vh;\r\n  background: white;\r\n  margin-top: 10vh;\r\n  position: relative;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  border-radius: 0.5vh;\r\n  overflow: hidden;\r\n  margin-bottom: 3vh;\r\n\r\n}\r\n\r\n.in-percentage{\r\n  height: 1vh;\r\n  background:rgba(64,158,255,1);\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Drawer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Drawer.vue?vue&type=template&id=eb56ff50&\"\nimport script from \"./Drawer.vue?vue&type=script&lang=js&\"\nexport * from \"./Drawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Drawer.vue?vue&type=style&index=0&id=eb56ff50&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","let websocket\r\n\r\nimport {Message} from \"element-ui\";\r\nexport  default  function  initWebSocket() {\r\n    //初始化weosocket\r\n    const wsuri = `ws://${location.host}/live2d`;\r\n\r\n    websocket = new WebSocket(wsuri);\r\n\r\n\r\n    // 连接建立时触发\r\n    websocket.onopen = websocketonopen;\r\n    // 通信发生错误时触发\r\n    websocket.onerror = websocketonerror;\r\n    // 连接关闭时触发\r\n    websocket.onclose = websocketclose;\r\n\r\n    return websocket\r\n}\r\n\r\n\r\nfunction websocketonopen(){\r\n    Message({\r\n        message: '成功建立连接 ₍ᐢ..ᐢ₎♡ ',\r\n        type: 'success'\r\n    });\r\n}\r\nfunction websocketonerror(){\r\n    Message({\r\n        message: '连接发生了错误! ̊ଳ ̊ᵎᵎᵎᵎ ',\r\n        type: 'warning'\r\n    });\r\n}\r\nfunction websocketclose(){\r\n    Message({\r\n        message: '连接已断开!!! ˃̣̣̥᷄⌓˂̣̣̥᷅ ',\r\n        type: 'warning'\r\n    });\r\n}\r\n\r\n","// a function for converting  base64 to ArrayBuffer\r\nexport  function base64ToArrayBuffer(base64) {\r\n    let binary_string =  window.atob(base64);\r\n    let len = binary_string.length;\r\n    let bytes = new Uint8Array( len );\r\n    for (let i = 0; i < len; i++)        {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n// a function for adding the every number in the array\r\nexport function arrayAdd(a){return a.reduce((i,a)=>i+a,0)}","import axios from \"axios\";\r\nimport {base64ToArrayBuffer,arrayAdd} from \"@/utils\"\r\n\r\n\r\nlet audioCtx\r\n\r\nlet analyser\r\n\r\nlet frequencyData\r\n\r\nlet playing = false\r\n\r\nlet o = 80\r\n\r\nexport  async function getWav(data,store){\r\n    let response\r\n\r\n    switch (data[\"VType\"]) {\r\n        case 1 :\r\n            response =  await axios({\r\n                url:data.voice,\r\n                method:\"get\",\r\n                responseType:\"arraybuffer\"\r\n            })\r\n            response = response.data\r\n            break\r\n        //如果为 2 和 3 则需要转化为arraybuffer\r\n        case 2  :\r\n            break\r\n            response = base64ToArrayBuffer(data.voice)\r\n        case 3  :\r\n            response = base64ToArrayBuffer(data.voice)\r\n            break\r\n\r\n    }\r\n\r\n\r\n\r\n    ((response) => {\r\n\r\n        const audioData = response;\r\n        audioCtx.decodeAudioData(audioData, (buffer)=>{\r\n            // 新建 Buffer 源\r\n            const source = audioCtx.createBufferSource();\r\n            source.buffer = buffer;\r\n            // 连接到 audioCtx\r\n            source.connect(audioCtx.destination);\r\n            // 连接到 音频分析器\r\n            source.connect(analyser);\r\n            // window.navigator.mediaDevices.getUserMedia({ audio: true });\r\n            // 开始播放\r\n\r\n            playing = true;\r\n            run()\r\n            setTimeout(() => {\r\n                source.start(0);\r\n            },0.5)\r\n //调用相应地动作和表情\r\n            store.model4.expression(data.expression)\r\n            store.model4.motion(data[\"act\"],data[\"movement\"])\r\n\r\n\r\n\r\n            source.onended = ()=>{\r\n                // 停止播放\r\n               playing = false;\r\n               //清空model 的动作和表情\r\n                store.websocket.send(0)\r\n                store.model4.expression(0);\r\n            }\r\n        }).catch(error => {\r\n            console.log(error)\r\n            store.websocket.send(-1)\r\n        })\r\n    })(response)\r\n\r\n\r\n    function run(){\r\n\r\n        if(!playing) return;\r\n\r\n        const frequencyData =getByteFrequencyData();\r\n\r\n        const arr = [];\r\n        // 频率范围还是太广了，跳采！\r\n        for (var i = 0; i < 700; i += o) {\r\n            arr.push(frequencyData[i]);\r\n        }\r\n\r\n        setMouthOpenY((arrayAdd(arr)/arr.length - 20)/store.percentage);\r\n\r\n        setTimeout(run,1000/60);//相隔一段时间执行\r\n    }\r\n\r\n    function setMouthOpenY(v){\r\n        //去除调小于0和大于1的值\r\n        v = Math.max(0, Math.min(1, v));\r\n        console.log(v)\r\n\r\n        //mouthOpenY参数\r\n        store.model4.internalModel.coreModel.setParameterValueByIndex(store.parameterIndex, v,1,true)\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport function createAnalyser() {\r\n\r\n    navigator.mediaDevices.getUserMedia({ audio: true })\r\n        .then(function(stream) {\r\n            // 麦克风授权成功，此时用户已与页面进行了交互\r\n            // 创建 AudioContext 对象\r\n            audioCtx = new AudioContext();\r\n            // 处理音频流\r\n\r\n            // audioCtx = new AudioContext();\r\n            // 新建分析仪\r\n            analyser =audioCtx.createAnalyser();\r\n            // 根据 频率分辨率建立个 Uint8Array 数组备用\r\n            frequencyData = new Uint8Array(analyser.frequencyBinCount);\r\n            // 取音频文件成 arraybuffer\r\n        })\r\n        .catch(function(err) {\r\n            alert('未授予音频权限或发生错误：' + err.name+\",请将sound(autoplay)权限改为allow\");\r\n        });\r\n\r\n\r\n}\r\nfunction getByteFrequencyData(){\r\n    analyser.getByteFrequencyData(frequencyData);\r\n    return frequencyData\r\n}\r\n\r\n","var __pow = Math.pow;\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { EventEmitter, url } from \"@pixi/utils\";\nimport { Matrix, Transform, Point, ObservablePoint } from \"@pixi/math\";\nimport { Texture } from \"@pixi/core\";\nimport { Container } from \"@pixi/display\";\nclass CubismBreath {\n  constructor() {\n    this._breathParameters = [];\n    this._currentTime = 0;\n  }\n  static create() {\n    return new CubismBreath();\n  }\n  setParameters(breathParameters) {\n    this._breathParameters = breathParameters;\n  }\n  getParameters() {\n    return this._breathParameters;\n  }\n  updateParameters(model, deltaTimeSeconds) {\n    this._currentTime += deltaTimeSeconds;\n    const t = this._currentTime * 2 * 3.14159;\n    for (let i = 0; i < this._breathParameters.length; ++i) {\n      const data = this._breathParameters[i];\n      model.addParameterValueById(data.parameterId, data.offset + data.peak * Math.sin(t / data.cycle), data.weight);\n    }\n  }\n}\nclass BreathParameterData {\n  constructor(parameterId, offset, peak, cycle, weight) {\n    this.parameterId = parameterId == void 0 ? void 0 : parameterId;\n    this.offset = offset == void 0 ? 0 : offset;\n    this.peak = peak == void 0 ? 0 : peak;\n    this.cycle = cycle == void 0 ? 0 : cycle;\n    this.weight = weight == void 0 ? 0 : weight;\n  }\n}\nconst _CubismEyeBlink = class {\n  static create(modelSetting) {\n    return new _CubismEyeBlink(modelSetting);\n  }\n  setBlinkingInterval(blinkingInterval) {\n    this._blinkingIntervalSeconds = blinkingInterval;\n  }\n  setBlinkingSetting(closing, closed, opening) {\n    this._closingSeconds = closing;\n    this._closedSeconds = closed;\n    this._openingSeconds = opening;\n  }\n  setParameterIds(parameterIds) {\n    this._parameterIds = parameterIds;\n  }\n  getParameterIds() {\n    return this._parameterIds;\n  }\n  updateParameters(model, deltaTimeSeconds) {\n    this._userTimeSeconds += deltaTimeSeconds;\n    let parameterValue;\n    let t = 0;\n    switch (this._blinkingState) {\n      case EyeState.EyeState_Closing:\n        t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closingSeconds;\n        if (t >= 1) {\n          t = 1;\n          this._blinkingState = EyeState.EyeState_Closed;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n        parameterValue = 1 - t;\n        break;\n      case EyeState.EyeState_Closed:\n        t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closedSeconds;\n        if (t >= 1) {\n          this._blinkingState = EyeState.EyeState_Opening;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n        parameterValue = 0;\n        break;\n      case EyeState.EyeState_Opening:\n        t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._openingSeconds;\n        if (t >= 1) {\n          t = 1;\n          this._blinkingState = EyeState.EyeState_Interval;\n          this._nextBlinkingTime = this.determinNextBlinkingTiming();\n        }\n        parameterValue = t;\n        break;\n      case EyeState.EyeState_Interval:\n        if (this._nextBlinkingTime < this._userTimeSeconds) {\n          this._blinkingState = EyeState.EyeState_Closing;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n        parameterValue = 1;\n        break;\n      case EyeState.EyeState_First:\n      default:\n        this._blinkingState = EyeState.EyeState_Interval;\n        this._nextBlinkingTime = this.determinNextBlinkingTiming();\n        parameterValue = 1;\n        break;\n    }\n    if (!_CubismEyeBlink.CloseIfZero) {\n      parameterValue = -parameterValue;\n    }\n    for (let i = 0; i < this._parameterIds.length; ++i) {\n      model.setParameterValueById(this._parameterIds[i], parameterValue);\n    }\n  }\n  constructor(modelSetting) {\n    var _a, _b;\n    this._blinkingState = EyeState.EyeState_First;\n    this._nextBlinkingTime = 0;\n    this._stateStartTimeSeconds = 0;\n    this._blinkingIntervalSeconds = 4;\n    this._closingSeconds = 0.1;\n    this._closedSeconds = 0.05;\n    this._openingSeconds = 0.15;\n    this._userTimeSeconds = 0;\n    this._parameterIds = [];\n    if (modelSetting == null) {\n      return;\n    }\n    this._parameterIds = (_b = (_a = modelSetting.getEyeBlinkParameters()) == null ? void 0 : _a.slice()) != null ? _b : this._parameterIds;\n  }\n  determinNextBlinkingTiming() {\n    const r = Math.random();\n    return this._userTimeSeconds + r * (2 * this._blinkingIntervalSeconds - 1);\n  }\n};\nlet CubismEyeBlink = _CubismEyeBlink;\nCubismEyeBlink.CloseIfZero = true;\nvar EyeState = /* @__PURE__ */ ((EyeState2) => {\n  EyeState2[EyeState2[\"EyeState_First\"] = 0] = \"EyeState_First\";\n  EyeState2[EyeState2[\"EyeState_Interval\"] = 1] = \"EyeState_Interval\";\n  EyeState2[EyeState2[\"EyeState_Closing\"] = 2] = \"EyeState_Closing\";\n  EyeState2[EyeState2[\"EyeState_Closed\"] = 3] = \"EyeState_Closed\";\n  EyeState2[EyeState2[\"EyeState_Opening\"] = 4] = \"EyeState_Opening\";\n  return EyeState2;\n})(EyeState || {});\nconst Epsilon = 1e-3;\nconst DefaultFadeInSeconds = 0.5;\nclass CubismPose {\n  static create(pose3json) {\n    const ret = new CubismPose();\n    if (typeof pose3json.FadeInTime === \"number\") {\n      ret._fadeTimeSeconds = pose3json.FadeInTime;\n      if (ret._fadeTimeSeconds <= 0) {\n        ret._fadeTimeSeconds = DefaultFadeInSeconds;\n      }\n    }\n    const poseListInfo = pose3json.Groups;\n    const poseCount = poseListInfo.length;\n    for (let poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n      const idListInfo = poseListInfo[poseIndex];\n      const idCount = idListInfo.length;\n      let groupCount = 0;\n      for (let groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n        const partInfo = idListInfo[groupIndex];\n        const partData = new PartData();\n        partData.partId = partInfo.Id;\n        const linkListInfo = partInfo.Link;\n        if (linkListInfo) {\n          const linkCount = linkListInfo.length;\n          for (let linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n            const linkPart = new PartData();\n            linkPart.partId = linkListInfo[linkIndex];\n            partData.link.push(linkPart);\n          }\n        }\n        ret._partGroups.push(partData);\n        ++groupCount;\n      }\n      ret._partGroupCounts.push(groupCount);\n    }\n    return ret;\n  }\n  updateParameters(model, deltaTimeSeconds) {\n    if (model != this._lastModel) {\n      this.reset(model);\n    }\n    this._lastModel = model;\n    if (deltaTimeSeconds < 0) {\n      deltaTimeSeconds = 0;\n    }\n    let beginIndex = 0;\n    for (let i = 0; i < this._partGroupCounts.length; i++) {\n      const partGroupCount = this._partGroupCounts[i];\n      this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n      beginIndex += partGroupCount;\n    }\n    this.copyPartOpacities(model);\n  }\n  reset(model) {\n    let beginIndex = 0;\n    for (let i = 0; i < this._partGroupCounts.length; ++i) {\n      const groupCount = this._partGroupCounts[i];\n      for (let j = beginIndex; j < beginIndex + groupCount; ++j) {\n        this._partGroups[j].initialize(model);\n        const partsIndex = this._partGroups[j].partIndex;\n        const paramIndex = this._partGroups[j].parameterIndex;\n        if (partsIndex < 0) {\n          continue;\n        }\n        model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1 : 0);\n        model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1 : 0);\n        for (let k = 0; k < this._partGroups[j].link.length; ++k) {\n          this._partGroups[j].link[k].initialize(model);\n        }\n      }\n      beginIndex += groupCount;\n    }\n  }\n  copyPartOpacities(model) {\n    for (let groupIndex = 0; groupIndex < this._partGroups.length; ++groupIndex) {\n      const partData = this._partGroups[groupIndex];\n      if (partData.link.length == 0) {\n        continue;\n      }\n      const partIndex = this._partGroups[groupIndex].partIndex;\n      const opacity = model.getPartOpacityByIndex(partIndex);\n      for (let linkIndex = 0; linkIndex < partData.link.length; ++linkIndex) {\n        const linkPart = partData.link[linkIndex];\n        const linkPartIndex = linkPart.partIndex;\n        if (linkPartIndex < 0) {\n          continue;\n        }\n        model.setPartOpacityByIndex(linkPartIndex, opacity);\n      }\n    }\n  }\n  doFade(model, deltaTimeSeconds, beginIndex, partGroupCount) {\n    let visiblePartIndex = -1;\n    let newOpacity = 1;\n    const phi = 0.5;\n    const backOpacityThreshold = 0.15;\n    for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n      const partIndex = this._partGroups[i].partIndex;\n      const paramIndex = this._partGroups[i].parameterIndex;\n      if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n        if (visiblePartIndex >= 0) {\n          break;\n        }\n        visiblePartIndex = i;\n        newOpacity = model.getPartOpacityByIndex(partIndex);\n        newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n        if (newOpacity > 1) {\n          newOpacity = 1;\n        }\n      }\n    }\n    if (visiblePartIndex < 0) {\n      visiblePartIndex = 0;\n      newOpacity = 1;\n    }\n    for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n      const partsIndex = this._partGroups[i].partIndex;\n      if (visiblePartIndex == i) {\n        model.setPartOpacityByIndex(partsIndex, newOpacity);\n      } else {\n        let opacity = model.getPartOpacityByIndex(partsIndex);\n        let a1;\n        if (newOpacity < phi) {\n          a1 = newOpacity * (phi - 1) / phi + 1;\n        } else {\n          a1 = (1 - newOpacity) * phi / (1 - phi);\n        }\n        const backOpacity = (1 - a1) * (1 - newOpacity);\n        if (backOpacity > backOpacityThreshold) {\n          a1 = 1 - backOpacityThreshold / (1 - newOpacity);\n        }\n        if (opacity > a1) {\n          opacity = a1;\n        }\n        model.setPartOpacityByIndex(partsIndex, opacity);\n      }\n    }\n  }\n  constructor() {\n    this._fadeTimeSeconds = DefaultFadeInSeconds;\n    this._lastModel = void 0;\n    this._partGroups = [];\n    this._partGroupCounts = [];\n  }\n}\nclass PartData {\n  constructor(v) {\n    this.parameterIndex = 0;\n    this.partIndex = 0;\n    this.partId = \"\";\n    this.link = [];\n    if (v != void 0) {\n      this.assignment(v);\n    }\n  }\n  assignment(v) {\n    this.partId = v.partId;\n    this.link = v.link.map((link) => link.clone());\n    return this;\n  }\n  initialize(model) {\n    this.parameterIndex = model.getParameterIndex(this.partId);\n    this.partIndex = model.getPartIndex(this.partId);\n    model.setParameterValueByIndex(this.parameterIndex, 1);\n  }\n  clone() {\n    const clonePartData = new PartData();\n    clonePartData.partId = this.partId;\n    clonePartData.parameterIndex = this.parameterIndex;\n    clonePartData.partIndex = this.partIndex;\n    clonePartData.link = this.link.map((link) => link.clone());\n    return clonePartData;\n  }\n}\nclass CubismVector2 {\n  constructor(x, y) {\n    this.x = x || 0;\n    this.y = y || 0;\n  }\n  add(vector2) {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this.x + vector2.x;\n    ret.y = this.y + vector2.y;\n    return ret;\n  }\n  substract(vector2) {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this.x - vector2.x;\n    ret.y = this.y - vector2.y;\n    return ret;\n  }\n  multiply(vector2) {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this.x * vector2.x;\n    ret.y = this.y * vector2.y;\n    return ret;\n  }\n  multiplyByScaler(scalar) {\n    return this.multiply(new CubismVector2(scalar, scalar));\n  }\n  division(vector2) {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this.x / vector2.x;\n    ret.y = this.y / vector2.y;\n    return ret;\n  }\n  divisionByScalar(scalar) {\n    return this.division(new CubismVector2(scalar, scalar));\n  }\n  getLength() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  getDistanceWith(a) {\n    return Math.sqrt((this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y));\n  }\n  dot(a) {\n    return this.x * a.x + this.y * a.y;\n  }\n  normalize() {\n    const length = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n    this.x = this.x / length;\n    this.y = this.y / length;\n  }\n  isEqual(rhs) {\n    return this.x == rhs.x && this.y == rhs.y;\n  }\n  isNotEqual(rhs) {\n    return !this.isEqual(rhs);\n  }\n}\nconst _CubismMath = class {\n  static range(value, min, max) {\n    if (value < min) {\n      value = min;\n    } else if (value > max) {\n      value = max;\n    }\n    return value;\n  }\n  static sin(x) {\n    return Math.sin(x);\n  }\n  static cos(x) {\n    return Math.cos(x);\n  }\n  static abs(x) {\n    return Math.abs(x);\n  }\n  static sqrt(x) {\n    return Math.sqrt(x);\n  }\n  static cbrt(x) {\n    if (x === 0) {\n      return x;\n    }\n    let cx = x;\n    const isNegativeNumber = cx < 0;\n    if (isNegativeNumber) {\n      cx = -cx;\n    }\n    let ret;\n    if (cx === Infinity) {\n      ret = Infinity;\n    } else {\n      ret = Math.exp(Math.log(cx) / 3);\n      ret = (cx / (ret * ret) + 2 * ret) / 3;\n    }\n    return isNegativeNumber ? -ret : ret;\n  }\n  static getEasingSine(value) {\n    if (value < 0) {\n      return 0;\n    } else if (value > 1) {\n      return 1;\n    }\n    return 0.5 - 0.5 * this.cos(value * Math.PI);\n  }\n  static max(left, right) {\n    return left > right ? left : right;\n  }\n  static min(left, right) {\n    return left > right ? right : left;\n  }\n  static degreesToRadian(degrees) {\n    return degrees / 180 * Math.PI;\n  }\n  static radianToDegrees(radian) {\n    return radian * 180 / Math.PI;\n  }\n  static directionToRadian(from, to) {\n    const q1 = Math.atan2(to.y, to.x);\n    const q2 = Math.atan2(from.y, from.x);\n    let ret = q1 - q2;\n    while (ret < -Math.PI) {\n      ret += Math.PI * 2;\n    }\n    while (ret > Math.PI) {\n      ret -= Math.PI * 2;\n    }\n    return ret;\n  }\n  static directionToDegrees(from, to) {\n    const radian = this.directionToRadian(from, to);\n    let degree = this.radianToDegrees(radian);\n    if (to.x - from.x > 0) {\n      degree = -degree;\n    }\n    return degree;\n  }\n  static radianToDirection(totalAngle) {\n    const ret = new CubismVector2();\n    ret.x = this.sin(totalAngle);\n    ret.y = this.cos(totalAngle);\n    return ret;\n  }\n  static quadraticEquation(a, b, c) {\n    if (this.abs(a) < _CubismMath.Epsilon) {\n      if (this.abs(b) < _CubismMath.Epsilon) {\n        return -c;\n      }\n      return -c / b;\n    }\n    return -(b + this.sqrt(b * b - 4 * a * c)) / (2 * a);\n  }\n  static cardanoAlgorithmForBezier(a, b, c, d) {\n    if (this.sqrt(a) < _CubismMath.Epsilon) {\n      return this.range(this.quadraticEquation(b, c, d), 0, 1);\n    }\n    const ba = b / a;\n    const ca = c / a;\n    const da = d / a;\n    const p = (3 * ca - ba * ba) / 3;\n    const p3 = p / 3;\n    const q = (2 * ba * ba * ba - 9 * ba * ca + 27 * da) / 27;\n    const q2 = q / 2;\n    const discriminant = q2 * q2 + p3 * p3 * p3;\n    const center = 0.5;\n    const threshold = center + 0.01;\n    if (discriminant < 0) {\n      const mp3 = -p / 3;\n      const mp33 = mp3 * mp3 * mp3;\n      const r = this.sqrt(mp33);\n      const t = -q / (2 * r);\n      const cosphi = this.range(t, -1, 1);\n      const phi = Math.acos(cosphi);\n      const crtr = this.cbrt(r);\n      const t1 = 2 * crtr;\n      const root12 = t1 * this.cos(phi / 3) - ba / 3;\n      if (this.abs(root12 - center) < threshold) {\n        return this.range(root12, 0, 1);\n      }\n      const root2 = t1 * this.cos((phi + 2 * Math.PI) / 3) - ba / 3;\n      if (this.abs(root2 - center) < threshold) {\n        return this.range(root2, 0, 1);\n      }\n      const root3 = t1 * this.cos((phi + 4 * Math.PI) / 3) - ba / 3;\n      return this.range(root3, 0, 1);\n    }\n    if (discriminant == 0) {\n      let u12;\n      if (q2 < 0) {\n        u12 = this.cbrt(-q2);\n      } else {\n        u12 = -this.cbrt(q2);\n      }\n      const root12 = 2 * u12 - ba / 3;\n      if (this.abs(root12 - center) < threshold) {\n        return this.range(root12, 0, 1);\n      }\n      const root2 = -u12 - ba / 3;\n      return this.range(root2, 0, 1);\n    }\n    const sd = this.sqrt(discriminant);\n    const u1 = this.cbrt(sd - q2);\n    const v1 = this.cbrt(sd + q2);\n    const root1 = u1 - v1 - ba / 3;\n    return this.range(root1, 0, 1);\n  }\n  constructor() {\n  }\n};\nlet CubismMath = _CubismMath;\nCubismMath.Epsilon = 1e-5;\nclass CubismMatrix44 {\n  constructor() {\n    this._tr = new Float32Array(16);\n    this.loadIdentity();\n  }\n  static multiply(a, b, dst) {\n    const c = new Float32Array([\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0\n    ]);\n    const n = 4;\n    for (let i = 0; i < n; ++i) {\n      for (let j = 0; j < n; ++j) {\n        for (let k = 0; k < n; ++k) {\n          c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n        }\n      }\n    }\n    for (let i = 0; i < 16; ++i) {\n      dst[i] = c[i];\n    }\n  }\n  loadIdentity() {\n    const c = new Float32Array([\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    this.setMatrix(c);\n  }\n  setMatrix(tr) {\n    for (let i = 0; i < 16; ++i) {\n      this._tr[i] = tr[i];\n    }\n  }\n  getArray() {\n    return this._tr;\n  }\n  getScaleX() {\n    return this._tr[0];\n  }\n  getScaleY() {\n    return this._tr[5];\n  }\n  getTranslateX() {\n    return this._tr[12];\n  }\n  getTranslateY() {\n    return this._tr[13];\n  }\n  transformX(src) {\n    return this._tr[0] * src + this._tr[12];\n  }\n  transformY(src) {\n    return this._tr[5] * src + this._tr[13];\n  }\n  invertTransformX(src) {\n    return (src - this._tr[12]) / this._tr[0];\n  }\n  invertTransformY(src) {\n    return (src - this._tr[13]) / this._tr[5];\n  }\n  translateRelative(x, y) {\n    const tr1 = new Float32Array([\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      x,\n      y,\n      0,\n      1\n    ]);\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n  translate(x, y) {\n    this._tr[12] = x;\n    this._tr[13] = y;\n  }\n  translateX(x) {\n    this._tr[12] = x;\n  }\n  translateY(y) {\n    this._tr[13] = y;\n  }\n  scaleRelative(x, y) {\n    const tr1 = new Float32Array([\n      x,\n      0,\n      0,\n      0,\n      0,\n      y,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n  scale(x, y) {\n    this._tr[0] = x;\n    this._tr[5] = y;\n  }\n  multiplyByMatrix(m) {\n    CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n  }\n  clone() {\n    const cloneMatrix = new CubismMatrix44();\n    for (let i = 0; i < this._tr.length; i++) {\n      cloneMatrix._tr[i] = this._tr[i];\n    }\n    return cloneMatrix;\n  }\n}\nclass CubismRenderer {\n  initialize(model) {\n    this._model = model;\n  }\n  drawModel() {\n    if (this.getModel() == null)\n      return;\n    this.doDrawModel();\n  }\n  setMvpMatrix(matrix44) {\n    this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n  }\n  getMvpMatrix() {\n    return this._mvpMatrix4x4;\n  }\n  setModelColor(red, green, blue, alpha) {\n    if (red < 0) {\n      red = 0;\n    } else if (red > 1) {\n      red = 1;\n    }\n    if (green < 0) {\n      green = 0;\n    } else if (green > 1) {\n      green = 1;\n    }\n    if (blue < 0) {\n      blue = 0;\n    } else if (blue > 1) {\n      blue = 1;\n    }\n    if (alpha < 0) {\n      alpha = 0;\n    } else if (alpha > 1) {\n      alpha = 1;\n    }\n    this._modelColor.R = red;\n    this._modelColor.G = green;\n    this._modelColor.B = blue;\n    this._modelColor.A = alpha;\n  }\n  getModelColor() {\n    return Object.assign({}, this._modelColor);\n  }\n  setIsPremultipliedAlpha(enable) {\n    this._isPremultipliedAlpha = enable;\n  }\n  isPremultipliedAlpha() {\n    return this._isPremultipliedAlpha;\n  }\n  setIsCulling(culling) {\n    this._isCulling = culling;\n  }\n  isCulling() {\n    return this._isCulling;\n  }\n  setAnisotropy(n) {\n    this._anisortopy = n;\n  }\n  getAnisotropy() {\n    return this._anisortopy;\n  }\n  getModel() {\n    return this._model;\n  }\n  constructor() {\n    this._isCulling = false;\n    this._isPremultipliedAlpha = false;\n    this._anisortopy = 0;\n    this._modelColor = new CubismTextureColor();\n    this._mvpMatrix4x4 = new CubismMatrix44();\n    this._mvpMatrix4x4.loadIdentity();\n  }\n}\nvar CubismBlendMode = /* @__PURE__ */ ((CubismBlendMode2) => {\n  CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Normal\"] = 0] = \"CubismBlendMode_Normal\";\n  CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Additive\"] = 1] = \"CubismBlendMode_Additive\";\n  CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Multiplicative\"] = 2] = \"CubismBlendMode_Multiplicative\";\n  return CubismBlendMode2;\n})(CubismBlendMode || {});\nclass CubismTextureColor {\n  constructor() {\n    this.R = 1;\n    this.G = 1;\n    this.B = 1;\n    this.A = 1;\n  }\n}\nlet s_isStarted = false;\nlet s_isInitialized = false;\nlet s_option = void 0;\nconst Constant = {\n  vertexOffset: 0,\n  vertexStep: 2\n};\nclass CubismFramework {\n  static startUp(option) {\n    if (s_isStarted) {\n      CubismLogInfo(\"CubismFramework.startUp() is already done.\");\n      return s_isStarted;\n    }\n    if (Live2DCubismCore._isStarted) {\n      s_isStarted = true;\n      return true;\n    }\n    Live2DCubismCore._isStarted = true;\n    s_option = option;\n    if (s_option) {\n      Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n    }\n    s_isStarted = true;\n    if (s_isStarted) {\n      const version = Live2DCubismCore.Version.csmGetVersion();\n      const major = (version & 4278190080) >> 24;\n      const minor = (version & 16711680) >> 16;\n      const patch = version & 65535;\n      const versionNumber = version;\n      CubismLogInfo(`Live2D Cubism Core version: {0}.{1}.{2} ({3})`, (\"00\" + major).slice(-2), (\"00\" + minor).slice(-2), (\"0000\" + patch).slice(-4), versionNumber);\n    }\n    CubismLogInfo(\"CubismFramework.startUp() is complete.\");\n    return s_isStarted;\n  }\n  static cleanUp() {\n    s_isStarted = false;\n    s_isInitialized = false;\n    s_option = void 0;\n  }\n  static initialize() {\n    if (!s_isStarted) {\n      CubismLogWarning(\"CubismFramework is not started.\");\n      return;\n    }\n    if (s_isInitialized) {\n      CubismLogWarning(\"CubismFramework.initialize() skipped, already initialized.\");\n      return;\n    }\n    s_isInitialized = true;\n    CubismLogInfo(\"CubismFramework.initialize() is complete.\");\n  }\n  static dispose() {\n    if (!s_isStarted) {\n      CubismLogWarning(\"CubismFramework is not started.\");\n      return;\n    }\n    if (!s_isInitialized) {\n      CubismLogWarning(\"CubismFramework.dispose() skipped, not initialized.\");\n      return;\n    }\n    CubismRenderer.staticRelease();\n    s_isInitialized = false;\n    CubismLogInfo(\"CubismFramework.dispose() is complete.\");\n  }\n  static isStarted() {\n    return s_isStarted;\n  }\n  static isInitialized() {\n    return s_isInitialized;\n  }\n  static coreLogFunction(message) {\n    if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n      return;\n    }\n    Live2DCubismCore.Logging.csmGetLogFunction()(message);\n  }\n  static getLoggingLevel() {\n    if (s_option != null) {\n      return s_option.loggingLevel;\n    }\n    return LogLevel.LogLevel_Off;\n  }\n  constructor() {\n  }\n}\nvar LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n  LogLevel2[LogLevel2[\"LogLevel_Verbose\"] = 0] = \"LogLevel_Verbose\";\n  LogLevel2[LogLevel2[\"LogLevel_Debug\"] = 1] = \"LogLevel_Debug\";\n  LogLevel2[LogLevel2[\"LogLevel_Info\"] = 2] = \"LogLevel_Info\";\n  LogLevel2[LogLevel2[\"LogLevel_Warning\"] = 3] = \"LogLevel_Warning\";\n  LogLevel2[LogLevel2[\"LogLevel_Error\"] = 4] = \"LogLevel_Error\";\n  LogLevel2[LogLevel2[\"LogLevel_Off\"] = 5] = \"LogLevel_Off\";\n  return LogLevel2;\n})(LogLevel || {});\nconst CSM_ASSERT = () => {\n};\nfunction CubismLogVerbose(fmt, ...args) {\n  CubismDebug.print(LogLevel.LogLevel_Verbose, \"[CSM][V]\" + fmt + \"\\n\", args);\n}\nfunction CubismLogDebug(fmt, ...args) {\n  CubismDebug.print(LogLevel.LogLevel_Debug, \"[CSM][D]\" + fmt + \"\\n\", args);\n}\nfunction CubismLogInfo(fmt, ...args) {\n  CubismDebug.print(LogLevel.LogLevel_Info, \"[CSM][I]\" + fmt + \"\\n\", args);\n}\nfunction CubismLogWarning(fmt, ...args) {\n  CubismDebug.print(LogLevel.LogLevel_Warning, \"[CSM][W]\" + fmt + \"\\n\", args);\n}\nfunction CubismLogError(fmt, ...args) {\n  CubismDebug.print(LogLevel.LogLevel_Error, \"[CSM][E]\" + fmt + \"\\n\", args);\n}\nclass CubismDebug {\n  static print(logLevel, format, args) {\n    if (logLevel < CubismFramework.getLoggingLevel()) {\n      return;\n    }\n    const logPrint = CubismFramework.coreLogFunction;\n    if (!logPrint)\n      return;\n    const buffer = format.replace(/{(\\d+)}/g, (m, k) => {\n      return args[k];\n    });\n    logPrint(buffer);\n  }\n  static dumpBytes(logLevel, data, length) {\n    for (let i = 0; i < length; i++) {\n      if (i % 16 == 0 && i > 0)\n        this.print(logLevel, \"\\n\");\n      else if (i % 8 == 0 && i > 0)\n        this.print(logLevel, \"  \");\n      this.print(logLevel, \"{0} \", [data[i] & 255]);\n    }\n    this.print(logLevel, \"\\n\");\n  }\n  constructor() {\n  }\n}\nclass CubismModel {\n  update() {\n    this._model.update();\n    this._model.drawables.resetDynamicFlags();\n  }\n  getCanvasWidth() {\n    if (this._model == null) {\n      return 0;\n    }\n    return this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit;\n  }\n  getCanvasHeight() {\n    if (this._model == null) {\n      return 0;\n    }\n    return this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit;\n  }\n  saveParameters() {\n    const parameterCount = this._model.parameters.count;\n    const savedParameterCount = this._savedParameters.length;\n    for (let i = 0; i < parameterCount; ++i) {\n      if (i < savedParameterCount) {\n        this._savedParameters[i] = this._parameterValues[i];\n      } else {\n        this._savedParameters.push(this._parameterValues[i]);\n      }\n    }\n  }\n  getModel() {\n    return this._model;\n  }\n  getPartIndex(partId) {\n    let partIndex;\n    const partCount = this._model.parts.count;\n    for (partIndex = 0; partIndex < partCount; ++partIndex) {\n      if (partId == this._partIds[partIndex]) {\n        return partIndex;\n      }\n    }\n    if (partId in this._notExistPartId) {\n      return this._notExistPartId[partId];\n    }\n    partIndex = partCount + this._notExistPartId.length;\n    this._notExistPartId[partId] = partIndex;\n    this._notExistPartOpacities[partIndex] = 0;\n    return partIndex;\n  }\n  getPartCount() {\n    return this._model.parts.count;\n  }\n  setPartOpacityByIndex(partIndex, opacity) {\n    if (partIndex in this._notExistPartOpacities) {\n      this._notExistPartOpacities[partIndex] = opacity;\n      return;\n    }\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n    this._partOpacities[partIndex] = opacity;\n  }\n  setPartOpacityById(partId, opacity) {\n    const index = this.getPartIndex(partId);\n    if (index < 0) {\n      return;\n    }\n    this.setPartOpacityByIndex(index, opacity);\n  }\n  getPartOpacityByIndex(partIndex) {\n    if (partIndex in this._notExistPartOpacities) {\n      return this._notExistPartOpacities[partIndex];\n    }\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n    return this._partOpacities[partIndex];\n  }\n  getPartOpacityById(partId) {\n    const index = this.getPartIndex(partId);\n    if (index < 0) {\n      return 0;\n    }\n    return this.getPartOpacityByIndex(index);\n  }\n  getParameterIndex(parameterId) {\n    let parameterIndex;\n    const idCount = this._model.parameters.count;\n\n    for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n      if (parameterId != this._parameterIds[parameterIndex]) {\n        continue;\n      }\n      return parameterIndex;\n    }\n\n    if (parameterId in this._notExistParameterId) {\n      return this._notExistParameterId[parameterId];\n    }\n\n    parameterIndex = this._model.parameters.count + Object.keys(this._notExistParameterId).length;\n    this._notExistParameterId[parameterId] = parameterIndex;\n    this._notExistParameterValues[parameterIndex] = 0;\n    return parameterIndex;\n\n  }\n  getParameterCount() {\n    return this._model.parameters.count;\n  }\n  getParameterMaximumValue(parameterIndex) {\n    return this._model.parameters.maximumValues[parameterIndex];\n  }\n  getParameterMinimumValue(parameterIndex) {\n    return this._model.parameters.minimumValues[parameterIndex];\n  }\n  getParameterDefaultValue(parameterIndex) {\n    return this._model.parameters.defaultValues[parameterIndex];\n  }\n  getParameterValueByIndex(parameterIndex) {\n    if (parameterIndex in this._notExistParameterValues) {\n      return this._notExistParameterValues[parameterIndex];\n    }\n    CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n    return this._parameterValues[parameterIndex];\n  }\n  getParameterValueById(parameterId) {\n    const parameterIndex = this.getParameterIndex(parameterId);\n    return this.getParameterValueByIndex(parameterIndex);\n  }\n  setParameterValueByIndex(parameterIndex, value, weight = 1,user=false) {\n\n    // let p=this.getParameterIndex(\"ParamMouthOpenY\");\n    //\n    // if(parameterIndex in this._notExistParameterValues){\n    //   p=this.getParameterIndex(\"PARAM_MOUTH_OPEN_Y\");\n    // }\n    let p;\n\n    if (this._model.parameters.ids.includes(\"ParamMouthOpenY\")){\n      p = this.getParameterIndex(\"ParamMouthOpenY\")\n    }\n\n    if (this._model.parameters.ids.includes(\"PARAM_MOUTH_OPEN_Y\")){\n      p = this.getParameterIndex(\"PARAM_MOUTH_OPEN_Y\")\n    }\n\n    if (this._model.parameters.ids.includes(\"ParamMouthA\")){\n      p = this.getParameterIndex(\"ParamMouthA\")\n    }\n\n    if (parameterIndex in this._notExistParameterValues) {\n      this._notExistParameterValues[parameterIndex] = weight == 1 ? value : this._notExistParameterValues[parameterIndex] * (1 - weight) + value * weight;\n      return;\n    }\n    CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n    if (this._model.parameters.maximumValues[parameterIndex] < value) {\n      value = this._model.parameters.maximumValues[parameterIndex];\n    }\n    if (this._model.parameters.minimumValues[parameterIndex] > value) {\n      value = this._model.parameters.minimumValues[parameterIndex];\n    }\n\n    if (parameterIndex != p || user){\n      this._parameterValues[parameterIndex] = weight == 1 ? value : this._parameterValues[parameterIndex] = this._parameterValues[parameterIndex] * (1 - weight) + value * weight;\n    }\n\n  }\n  setParameterValueById(parameterId, value, weight = 1,user=false) {\n    const index = this.getParameterIndex(parameterId);\n    this.setParameterValueByIndex(index, value, weight,user);\n  }\n  addParameterValueByIndex(parameterIndex, value, weight = 1) {\n    this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) + value * weight);\n  }\n  addParameterValueById(parameterId, value, weight = 1) {\n    const index = this.getParameterIndex(parameterId);\n    this.addParameterValueByIndex(index, value, weight);\n  }\n  multiplyParameterValueById(parameterId, value, weight = 1) {\n    const index = this.getParameterIndex(parameterId);\n    this.multiplyParameterValueByIndex(index, value, weight);\n  }\n  multiplyParameterValueByIndex(parameterIndex, value, weight = 1) {\n    this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) * (1 + (value - 1) * weight));\n  }\n  getDrawableIds() {\n    return this._drawableIds.slice();\n  }\n  getDrawableIndex(drawableId) {\n    const drawableCount = this._model.drawables.count;\n    for (let drawableIndex = 0; drawableIndex < drawableCount; ++drawableIndex) {\n      if (this._drawableIds[drawableIndex] == drawableId) {\n        return drawableIndex;\n      }\n    }\n    return -1;\n  }\n  getDrawableCount() {\n    return this._model.drawables.count;\n  }\n  getDrawableId(drawableIndex) {\n    return this._model.drawables.ids[drawableIndex];\n  }\n  getDrawableRenderOrders() {\n    return this._model.drawables.renderOrders;\n  }\n  getDrawableTextureIndices(drawableIndex) {\n    return this._model.drawables.textureIndices[drawableIndex];\n  }\n  getDrawableDynamicFlagVertexPositionsDidChange(drawableIndex) {\n    const dynamicFlags = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(dynamicFlags[drawableIndex]);\n  }\n  getDrawableVertexIndexCount(drawableIndex) {\n    return this._model.drawables.indexCounts[drawableIndex];\n  }\n  getDrawableVertexCount(drawableIndex) {\n    return this._model.drawables.vertexCounts[drawableIndex];\n  }\n  getDrawableVertices(drawableIndex) {\n    return this.getDrawableVertexPositions(drawableIndex);\n  }\n  getDrawableVertexIndices(drawableIndex) {\n    return this._model.drawables.indices[drawableIndex];\n  }\n  getDrawableVertexPositions(drawableIndex) {\n    return this._model.drawables.vertexPositions[drawableIndex];\n  }\n  getDrawableVertexUvs(drawableIndex) {\n    return this._model.drawables.vertexUvs[drawableIndex];\n  }\n  getDrawableOpacity(drawableIndex) {\n    return this._model.drawables.opacities[drawableIndex];\n  }\n  getDrawableCulling(drawableIndex) {\n    const constantFlags = this._model.drawables.constantFlags;\n    return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(constantFlags[drawableIndex]);\n  }\n  getDrawableBlendMode(drawableIndex) {\n    const constantFlags = this._model.drawables.constantFlags;\n    return Live2DCubismCore.Utils.hasBlendAdditiveBit(constantFlags[drawableIndex]) ? CubismBlendMode.CubismBlendMode_Additive : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(constantFlags[drawableIndex]) ? CubismBlendMode.CubismBlendMode_Multiplicative : CubismBlendMode.CubismBlendMode_Normal;\n  }\n  getDrawableInvertedMaskBit(drawableIndex) {\n    const constantFlags = this._model.drawables.constantFlags;\n    return Live2DCubismCore.Utils.hasIsInvertedMaskBit(constantFlags[drawableIndex]);\n  }\n  getDrawableMasks() {\n    return this._model.drawables.masks;\n  }\n  getDrawableMaskCounts() {\n    return this._model.drawables.maskCounts;\n  }\n  isUsingMasking() {\n    for (let d = 0; d < this._model.drawables.count; ++d) {\n      if (this._model.drawables.maskCounts[d] <= 0) {\n        continue;\n      }\n      return true;\n    }\n    return false;\n  }\n  getDrawableDynamicFlagIsVisible(drawableIndex) {\n    const dynamicFlags = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n  }\n  getDrawableDynamicFlagVisibilityDidChange(drawableIndex) {\n    const dynamicFlags = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(dynamicFlags[drawableIndex]);\n  }\n  getDrawableDynamicFlagOpacityDidChange(drawableIndex) {\n    const dynamicFlags = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasOpacityDidChangeBit(dynamicFlags[drawableIndex]);\n  }\n  getDrawableDynamicFlagRenderOrderDidChange(drawableIndex) {\n    const dynamicFlags = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(dynamicFlags[drawableIndex]);\n  }\n  loadParameters() {\n    let parameterCount = this._model.parameters.count;\n    const savedParameterCount = this._savedParameters.length;\n    if (parameterCount > savedParameterCount) {\n      parameterCount = savedParameterCount;\n    }\n    for (let i = 0; i < parameterCount; ++i) {\n      this._parameterValues[i] = this._savedParameters[i];\n    }\n  }\n  initialize() {\n    this._parameterValues = this._model.parameters.values;\n    this._partOpacities = this._model.parts.opacities;\n    this._parameterMaximumValues = this._model.parameters.maximumValues;\n    this._parameterMinimumValues = this._model.parameters.minimumValues;\n    {\n      const parameterIds = this._model.parameters.ids;\n      const parameterCount = this._model.parameters.count;\n      for (let i = 0; i < parameterCount; ++i) {\n        this._parameterIds.push(parameterIds[i]);\n      }\n    }\n    {\n      const partIds = this._model.parts.ids;\n      const partCount = this._model.parts.count;\n      for (let i = 0; i < partCount; ++i) {\n        this._partIds.push(partIds[i]);\n      }\n    }\n    {\n      const drawableIds = this._model.drawables.ids;\n      const drawableCount = this._model.drawables.count;\n      for (let i = 0; i < drawableCount; ++i) {\n        this._drawableIds.push(drawableIds[i]);\n      }\n    }\n  }\n  constructor(model) {\n    this._model = model;\n    this._savedParameters = [];\n    this._parameterIds = [];\n    this._drawableIds = [];\n    this._partIds = [];\n    this._notExistPartId = {};\n    this._notExistParameterId = {};\n    this._notExistParameterValues = {};\n    this._notExistPartOpacities = {};\n    this.initialize();\n  }\n  release() {\n    this._model.release();\n    this._model = void 0;\n  }\n}\nclass CubismMoc {\n  static create(mocBytes) {\n    const moc = Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n    if (moc) {\n      return new CubismMoc(moc);\n    }\n    throw new Error(\"Unknown error\");\n  }\n  createModel() {\n    let cubismModel;\n    const model = Live2DCubismCore.Model.fromMoc(this._moc);\n    if (model) {\n      cubismModel = new CubismModel(model);\n      ++this._modelCount;\n      return cubismModel;\n    }\n    throw new Error(\"Unknown error\");\n  }\n  deleteModel(model) {\n    if (model != null) {\n      --this._modelCount;\n    }\n  }\n  constructor(moc) {\n    this._moc = moc;\n    this._modelCount = 0;\n  }\n  release() {\n    this._moc._release();\n    this._moc = void 0;\n  }\n}\nclass CubismModelUserDataJson {\n  constructor(json, size) {\n    this._json = json;\n  }\n  release() {\n    this._json = void 0;\n  }\n  getUserDataCount() {\n    return this._json.Meta.UserDataCount;\n  }\n  getTotalUserDataSize() {\n    return this._json.Meta.TotalUserDataSize;\n  }\n  getUserDataTargetType(i) {\n    return this._json.UserData[i].Target;\n  }\n  getUserDataId(i) {\n    return this._json.UserData[i].Id;\n  }\n  getUserDataValue(i) {\n    return this._json.UserData[i].Value;\n  }\n}\nconst ArtMesh = \"ArtMesh\";\nclass CubismModelUserData {\n  static create(json, size) {\n    const ret = new CubismModelUserData();\n    ret.parseUserData(json, size);\n    return ret;\n  }\n  getArtMeshUserDatas() {\n    return this._artMeshUserDataNode;\n  }\n  parseUserData(data, size) {\n    let json = new CubismModelUserDataJson(data, size);\n    const typeOfArtMesh = ArtMesh;\n    const nodeCount = json.getUserDataCount();\n    for (let i = 0; i < nodeCount; i++) {\n      const addNode = {\n        targetId: json.getUserDataId(i),\n        targetType: json.getUserDataTargetType(i),\n        value: json.getUserDataValue(i)\n      };\n      this._userDataNodes.push(addNode);\n      if (addNode.targetType == typeOfArtMesh) {\n        this._artMeshUserDataNode.push(addNode);\n      }\n    }\n    json.release();\n  }\n  constructor() {\n    this._userDataNodes = [];\n    this._artMeshUserDataNode = [];\n  }\n  release() {\n    this._userDataNodes = null;\n  }\n}\nclass ACubismMotion {\n  constructor() {\n    this._fadeInSeconds = -1;\n    this._fadeOutSeconds = -1;\n    this._weight = 1;\n    this._offsetSeconds = 0;\n    this._firedEventValues = [];\n  }\n  release() {\n    this._weight = 0;\n  }\n  updateParameters(model, motionQueueEntry, userTimeSeconds) {\n    if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n      return;\n    }\n    if (!motionQueueEntry.isStarted()) {\n      motionQueueEntry.setIsStarted(true);\n      motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds);\n      motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n      const duration = this.getDuration();\n      if (motionQueueEntry.getEndTime() < 0) {\n        motionQueueEntry.setEndTime(duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration);\n      }\n    }\n    let fadeWeight = this._weight;\n    const fadeIn = this._fadeInSeconds == 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n    const fadeOut = this._fadeOutSeconds == 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n    fadeWeight = fadeWeight * fadeIn * fadeOut;\n    motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n    this.doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry);\n    if (motionQueueEntry.getEndTime() > 0 && motionQueueEntry.getEndTime() < userTimeSeconds) {\n      motionQueueEntry.setIsFinished(true);\n    }\n  }\n  setFadeInTime(fadeInSeconds) {\n    this._fadeInSeconds = fadeInSeconds;\n  }\n  setFadeOutTime(fadeOutSeconds) {\n    this._fadeOutSeconds = fadeOutSeconds;\n  }\n  getFadeOutTime() {\n    return this._fadeOutSeconds;\n  }\n  getFadeInTime() {\n    return this._fadeInSeconds;\n  }\n  setWeight(weight) {\n    this._weight = weight;\n  }\n  getWeight() {\n    return this._weight;\n  }\n  getDuration() {\n    return -1;\n  }\n  getLoopDuration() {\n    return -1;\n  }\n  setOffsetTime(offsetSeconds) {\n    this._offsetSeconds = offsetSeconds;\n  }\n  getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n    return this._firedEventValues;\n  }\n  setFinishedMotionHandler(onFinishedMotionHandler) {\n    this._onFinishedMotion = onFinishedMotionHandler;\n  }\n  getFinishedMotionHandler() {\n    return this._onFinishedMotion;\n  }\n}\nconst DefaultFadeTime = 1;\nclass CubismExpressionMotion extends ACubismMotion {\n  constructor() {\n    super();\n    this._parameters = [];\n  }\n  static create(json) {\n    const expression = new CubismExpressionMotion();\n    const fadeInTime = json.FadeInTime;\n    const fadeOutTime = json.FadeOutTime;\n    expression.setFadeInTime(fadeInTime !== void 0 ? fadeInTime : DefaultFadeTime);\n    expression.setFadeOutTime(fadeOutTime !== void 0 ? fadeOutTime : DefaultFadeTime);\n    const parameters = json.Parameters || [];\n    for (let i = 0; i < parameters.length; ++i) {\n      const param = parameters[i];\n      const parameterId = param.Id;\n      const value = param.Value;\n      let blendType;\n      switch (param.Blend) {\n        case \"Multiply\":\n          blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\n          break;\n        case \"Overwrite\":\n          blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\n          break;\n        case \"Add\":\n        default:\n          blendType = ExpressionBlendType.ExpressionBlendType_Add;\n          break;\n      }\n      const item = {\n        parameterId,\n        blendType,\n        value\n      };\n      expression._parameters.push(item);\n    }\n    return expression;\n  }\n  doUpdateParameters(model, userTimeSeconds, weight, motionQueueEntry) {\n    for (let i = 0; i < this._parameters.length; ++i) {\n      const parameter = this._parameters[i];\n      switch (parameter.blendType) {\n        case ExpressionBlendType.ExpressionBlendType_Add: {\n          model.addParameterValueById(parameter.parameterId, parameter.value, weight);\n          break;\n        }\n        case ExpressionBlendType.ExpressionBlendType_Multiply: {\n          model.multiplyParameterValueById(parameter.parameterId, parameter.value, weight);\n          break;\n        }\n        case ExpressionBlendType.ExpressionBlendType_Overwrite: {\n          model.setParameterValueById(parameter.parameterId, parameter.value, weight);\n          break;\n        }\n      }\n    }\n  }\n}\nvar ExpressionBlendType = /* @__PURE__ */ ((ExpressionBlendType2) => {\n  ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Add\"] = 0] = \"ExpressionBlendType_Add\";\n  ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Multiply\"] = 1] = \"ExpressionBlendType_Multiply\";\n  ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Overwrite\"] = 2] = \"ExpressionBlendType_Overwrite\";\n  return ExpressionBlendType2;\n})(ExpressionBlendType || {});\nvar CubismConfig;\n((CubismConfig2) => {\n  CubismConfig2.supportMoreMaskDivisions = true;\n  CubismConfig2.setOpacityFromMotion = false;\n})(CubismConfig || (CubismConfig = {}));\nvar CubismMotionCurveTarget = /* @__PURE__ */ ((CubismMotionCurveTarget2) => {\n  CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_Model\"] = 0] = \"CubismMotionCurveTarget_Model\";\n  CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_Parameter\"] = 1] = \"CubismMotionCurveTarget_Parameter\";\n  CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_PartOpacity\"] = 2] = \"CubismMotionCurveTarget_PartOpacity\";\n  return CubismMotionCurveTarget2;\n})(CubismMotionCurveTarget || {});\nvar CubismMotionSegmentType = /* @__PURE__ */ ((CubismMotionSegmentType2) => {\n  CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Linear\"] = 0] = \"CubismMotionSegmentType_Linear\";\n  CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Bezier\"] = 1] = \"CubismMotionSegmentType_Bezier\";\n  CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Stepped\"] = 2] = \"CubismMotionSegmentType_Stepped\";\n  CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_InverseStepped\"] = 3] = \"CubismMotionSegmentType_InverseStepped\";\n  return CubismMotionSegmentType2;\n})(CubismMotionSegmentType || {});\nclass CubismMotionPoint {\n  constructor(time = 0, value = 0) {\n    this.time = time;\n    this.value = value;\n  }\n}\nclass CubismMotionSegment {\n  constructor() {\n    this.basePointIndex = 0;\n    this.segmentType = 0;\n  }\n}\nclass CubismMotionCurve {\n  constructor() {\n    this.id = \"\";\n    this.type = 0;\n    this.segmentCount = 0;\n    this.baseSegmentIndex = 0;\n    this.fadeInTime = 0;\n    this.fadeOutTime = 0;\n  }\n}\nclass CubismMotionEvent {\n  constructor() {\n    this.fireTime = 0;\n    this.value = \"\";\n  }\n}\nclass CubismMotionData {\n  constructor() {\n    this.duration = 0;\n    this.loop = false;\n    this.curveCount = 0;\n    this.eventCount = 0;\n    this.fps = 0;\n    this.curves = [];\n    this.segments = [];\n    this.points = [];\n    this.events = [];\n  }\n}\nclass CubismMotionJson {\n  constructor(json) {\n    this._json = json;\n  }\n  release() {\n    this._json = void 0;\n  }\n  getMotionDuration() {\n    return this._json.Meta.Duration;\n  }\n  isMotionLoop() {\n    return this._json.Meta.Loop || false;\n  }\n  getEvaluationOptionFlag(flagType) {\n    if (EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType) {\n      return !!this._json.Meta.AreBeziersRestricted;\n    }\n    return false;\n  }\n  getMotionCurveCount() {\n    return this._json.Meta.CurveCount;\n  }\n  getMotionFps() {\n    return this._json.Meta.Fps;\n  }\n  getMotionTotalSegmentCount() {\n    return this._json.Meta.TotalSegmentCount;\n  }\n  getMotionTotalPointCount() {\n    return this._json.Meta.TotalPointCount;\n  }\n  getMotionFadeInTime() {\n    return this._json.Meta.FadeInTime;\n  }\n  getMotionFadeOutTime() {\n    return this._json.Meta.FadeOutTime;\n  }\n  getMotionCurveTarget(curveIndex) {\n    return this._json.Curves[curveIndex].Target;\n  }\n  getMotionCurveId(curveIndex) {\n    return this._json.Curves[curveIndex].Id;\n  }\n  getMotionCurveFadeInTime(curveIndex) {\n    return this._json.Curves[curveIndex].FadeInTime;\n  }\n  getMotionCurveFadeOutTime(curveIndex) {\n    return this._json.Curves[curveIndex].FadeOutTime;\n  }\n  getMotionCurveSegmentCount(curveIndex) {\n    return this._json.Curves[curveIndex].Segments.length;\n  }\n  getMotionCurveSegment(curveIndex, segmentIndex) {\n    return this._json.Curves[curveIndex].Segments[segmentIndex];\n  }\n  getEventCount() {\n    return this._json.Meta.UserDataCount || 0;\n  }\n  getTotalEventValueSize() {\n    return this._json.Meta.TotalUserDataSize;\n  }\n  getEventTime(userDataIndex) {\n    return this._json.UserData[userDataIndex].Time;\n  }\n  getEventValue(userDataIndex) {\n    return this._json.UserData[userDataIndex].Value;\n  }\n}\nvar EvaluationOptionFlag = /* @__PURE__ */ ((EvaluationOptionFlag2) => {\n  EvaluationOptionFlag2[EvaluationOptionFlag2[\"EvaluationOptionFlag_AreBeziersRistricted\"] = 0] = \"EvaluationOptionFlag_AreBeziersRistricted\";\n  return EvaluationOptionFlag2;\n})(EvaluationOptionFlag || {});\nconst EffectNameEyeBlink = \"EyeBlink\";\nconst EffectNameLipSync = \"LipSync\";\nconst TargetNameModel = \"Model\";\nconst TargetNameParameter = \"Parameter\";\nconst TargetNamePartOpacity = \"PartOpacity\";\nconst UseOldBeziersCurveMotion = false;\nfunction lerpPoints(a, b, t) {\n  const result = new CubismMotionPoint();\n  result.time = a.time + (b.time - a.time) * t;\n  result.value = a.value + (b.value - a.value) * t;\n  return result;\n}\nfunction linearEvaluate(points, time) {\n  let t = (time - points[0].time) / (points[1].time - points[0].time);\n  if (t < 0) {\n    t = 0;\n  }\n  return points[0].value + (points[1].value - points[0].value) * t;\n}\nfunction bezierEvaluate(points, time) {\n  let t = (time - points[0].time) / (points[3].time - points[0].time);\n  if (t < 0) {\n    t = 0;\n  }\n  const p01 = lerpPoints(points[0], points[1], t);\n  const p12 = lerpPoints(points[1], points[2], t);\n  const p23 = lerpPoints(points[2], points[3], t);\n  const p012 = lerpPoints(p01, p12, t);\n  const p123 = lerpPoints(p12, p23, t);\n  return lerpPoints(p012, p123, t).value;\n}\nfunction bezierEvaluateCardanoInterpretation(points, time) {\n  const x = time;\n  const x1 = points[0].time;\n  const x2 = points[3].time;\n  const cx1 = points[1].time;\n  const cx2 = points[2].time;\n  const a = x2 - 3 * cx2 + 3 * cx1 - x1;\n  const b = 3 * cx2 - 6 * cx1 + 3 * x1;\n  const c = 3 * cx1 - 3 * x1;\n  const d = x1 - x;\n  const t = CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n  const p01 = lerpPoints(points[0], points[1], t);\n  const p12 = lerpPoints(points[1], points[2], t);\n  const p23 = lerpPoints(points[2], points[3], t);\n  const p012 = lerpPoints(p01, p12, t);\n  const p123 = lerpPoints(p12, p23, t);\n  return lerpPoints(p012, p123, t).value;\n}\nfunction steppedEvaluate(points, time) {\n  return points[0].value;\n}\nfunction inverseSteppedEvaluate(points, time) {\n  return points[1].value;\n}\nfunction evaluateCurve(motionData, index, time) {\n  const curve = motionData.curves[index];\n  let target = -1;\n  const totalSegmentCount = curve.baseSegmentIndex + curve.segmentCount;\n  let pointPosition = 0;\n  for (let i = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n    pointPosition = motionData.segments[i].basePointIndex + (motionData.segments[i].segmentType == CubismMotionSegmentType.CubismMotionSegmentType_Bezier ? 3 : 1);\n    if (motionData.points[pointPosition].time > time) {\n      target = i;\n      break;\n    }\n  }\n  if (target == -1) {\n    return motionData.points[pointPosition].value;\n  }\n  const segment = motionData.segments[target];\n  return segment.evaluate(motionData.points.slice(segment.basePointIndex), time);\n}\nclass CubismMotion extends ACubismMotion {\n  constructor() {\n    super();\n    this._eyeBlinkParameterIds = [];\n    this._lipSyncParameterIds = [];\n    this._sourceFrameRate = 30;\n    this._loopDurationSeconds = -1;\n    this._isLoop = false;\n    this._isLoopFadeIn = true;\n    this._lastWeight = 0;\n  }\n  static create(json, onFinishedMotionHandler) {\n    const ret = new CubismMotion();\n    ret.parse(json);\n    ret._sourceFrameRate = ret._motionData.fps;\n    ret._loopDurationSeconds = ret._motionData.duration;\n    ret._onFinishedMotion = onFinishedMotionHandler;\n    return ret;\n  }\n  doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry) {\n    if (this._modelCurveIdEyeBlink == null) {\n      this._modelCurveIdEyeBlink = EffectNameEyeBlink;\n    }\n    if (this._modelCurveIdLipSync == null) {\n      this._modelCurveIdLipSync = EffectNameLipSync;\n    }\n    let timeOffsetSeconds = userTimeSeconds - motionQueueEntry.getStartTime();\n    if (timeOffsetSeconds < 0) {\n      timeOffsetSeconds = 0;\n    }\n    let lipSyncValue = Number.MAX_VALUE;\n    let eyeBlinkValue = Number.MAX_VALUE;\n    const MaxTargetSize = 64;\n    let lipSyncFlags = 0;\n    let eyeBlinkFlags = 0;\n    if (this._eyeBlinkParameterIds.length > MaxTargetSize) {\n      CubismLogDebug(\"too many eye blink targets : {0}\", this._eyeBlinkParameterIds.length);\n    }\n    if (this._lipSyncParameterIds.length > MaxTargetSize) {\n      CubismLogDebug(\"too many lip sync targets : {0}\", this._lipSyncParameterIds.length);\n    }\n    const tmpFadeIn = this._fadeInSeconds <= 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n    const tmpFadeOut = this._fadeOutSeconds <= 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n    let value;\n    let c, parameterIndex;\n    let time = timeOffsetSeconds;\n    if (this._isLoop) {\n      while (time > this._motionData.duration) {\n        time -= this._motionData.duration;\n      }\n    }\n    const curves = this._motionData.curves;\n    for (c = 0; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_Model; ++c) {\n      value = evaluateCurve(this._motionData, c, time);\n      if (curves[c].id == this._modelCurveIdEyeBlink) {\n        eyeBlinkValue = value;\n      } else if (curves[c].id == this._modelCurveIdLipSync) {\n        lipSyncValue = value;\n      }\n    }\n    for (; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter; ++c) {\n      parameterIndex = model.getParameterIndex(curves[c].id);\n      if (parameterIndex == -1) {\n        continue;\n      }\n      const sourceValue = model.getParameterValueByIndex(parameterIndex);\n      value = evaluateCurve(this._motionData, c, time);\n      if (eyeBlinkValue != Number.MAX_VALUE) {\n        for (let i = 0; i < this._eyeBlinkParameterIds.length && i < MaxTargetSize; ++i) {\n          if (this._eyeBlinkParameterIds[i] == curves[c].id) {\n            value *= eyeBlinkValue;\n            eyeBlinkFlags |= 1 << i;\n            break;\n          }\n        }\n      }\n      if (lipSyncValue != Number.MAX_VALUE) {\n        for (let i = 0; i < this._lipSyncParameterIds.length && i < MaxTargetSize; ++i) {\n          if (this._lipSyncParameterIds[i] == curves[c].id) {\n            value += lipSyncValue;\n            lipSyncFlags |= 1 << i;\n            break;\n          }\n        }\n      }\n      let v;\n      if (curves[c].fadeInTime < 0 && curves[c].fadeOutTime < 0) {\n        v = sourceValue + (value - sourceValue) * fadeWeight;\n      } else {\n        let fin;\n        let fout;\n        if (curves[c].fadeInTime < 0) {\n          fin = tmpFadeIn;\n        } else {\n          fin = curves[c].fadeInTime == 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / curves[c].fadeInTime);\n        }\n        if (curves[c].fadeOutTime < 0) {\n          fout = tmpFadeOut;\n        } else {\n          fout = curves[c].fadeOutTime == 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / curves[c].fadeOutTime);\n        }\n        const paramWeight = this._weight * fin * fout;\n        v = sourceValue + (value - sourceValue) * paramWeight;\n      }\n      model.setParameterValueByIndex(parameterIndex, v, 1);\n    }\n    {\n      if (eyeBlinkValue != Number.MAX_VALUE) {\n        for (let i = 0; i < this._eyeBlinkParameterIds.length && i < MaxTargetSize; ++i) {\n          const sourceValue = model.getParameterValueById(this._eyeBlinkParameterIds[i]);\n          if (eyeBlinkFlags >> i & 1) {\n            continue;\n          }\n          const v = sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n          model.setParameterValueById(this._eyeBlinkParameterIds[i], v);\n        }\n      }\n      if (lipSyncValue != Number.MAX_VALUE) {\n        for (let i = 0; i < this._lipSyncParameterIds.length && i < MaxTargetSize; ++i) {\n          const sourceValue = model.getParameterValueById(this._lipSyncParameterIds[i]);\n          if (lipSyncFlags >> i & 1) {\n            continue;\n          }\n          const v = sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n          model.setParameterValueById(this._lipSyncParameterIds[i], v);\n        }\n      }\n    }\n    for (; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity; ++c) {\n      value = evaluateCurve(this._motionData, c, time);\n      if (CubismConfig.setOpacityFromMotion) {\n        model.setPartOpacityById(curves[c].id, value);\n      } else {\n        parameterIndex = model.getParameterIndex(curves[c].id);\n        if (parameterIndex == -1) {\n          continue;\n        }\n        model.setParameterValueByIndex(parameterIndex, value);\n      }\n    }\n    if (timeOffsetSeconds >= this._motionData.duration) {\n      if (this._isLoop) {\n        motionQueueEntry.setStartTime(userTimeSeconds);\n        if (this._isLoopFadeIn) {\n          motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n        }\n      } else {\n        if (this._onFinishedMotion) {\n          this._onFinishedMotion(this);\n        }\n        motionQueueEntry.setIsFinished(true);\n      }\n    }\n    this._lastWeight = fadeWeight;\n  }\n  setIsLoop(loop) {\n    this._isLoop = loop;\n  }\n  isLoop() {\n    return this._isLoop;\n  }\n  setIsLoopFadeIn(loopFadeIn) {\n    this._isLoopFadeIn = loopFadeIn;\n  }\n  isLoopFadeIn() {\n    return this._isLoopFadeIn;\n  }\n  getDuration() {\n    return this._isLoop ? -1 : this._loopDurationSeconds;\n  }\n  getLoopDuration() {\n    return this._loopDurationSeconds;\n  }\n  setParameterFadeInTime(parameterId, value) {\n    const curves = this._motionData.curves;\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves[i].id) {\n        curves[i].fadeInTime = value;\n        return;\n      }\n    }\n  }\n  setParameterFadeOutTime(parameterId, value) {\n    const curves = this._motionData.curves;\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves[i].id) {\n        curves[i].fadeOutTime = value;\n        return;\n      }\n    }\n  }\n  getParameterFadeInTime(parameterId) {\n    const curves = this._motionData.curves;\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves[i].id) {\n        return curves[i].fadeInTime;\n      }\n    }\n    return -1;\n  }\n  getParameterFadeOutTime(parameterId) {\n    const curves = this._motionData.curves;\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves[i].id) {\n        return curves[i].fadeOutTime;\n      }\n    }\n    return -1;\n  }\n  setEffectIds(eyeBlinkParameterIds, lipSyncParameterIds) {\n    this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n    this._lipSyncParameterIds = lipSyncParameterIds;\n  }\n  release() {\n    this._motionData = void 0;\n  }\n  parse(motionJson) {\n    this._motionData = new CubismMotionData();\n    let json = new CubismMotionJson(motionJson);\n    this._motionData.duration = json.getMotionDuration();\n    this._motionData.loop = json.isMotionLoop();\n    this._motionData.curveCount = json.getMotionCurveCount();\n    this._motionData.fps = json.getMotionFps();\n    this._motionData.eventCount = json.getEventCount();\n    const areBeziersRestructed = json.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);\n    const fadeInSeconds = json.getMotionFadeInTime();\n    const fadeOutSeconds = json.getMotionFadeOutTime();\n    if (fadeInSeconds !== void 0) {\n      this._fadeInSeconds = fadeInSeconds < 0 ? 1 : fadeInSeconds;\n    } else {\n      this._fadeInSeconds = 1;\n    }\n    if (fadeOutSeconds !== void 0) {\n      this._fadeOutSeconds = fadeOutSeconds < 0 ? 1 : fadeOutSeconds;\n    } else {\n      this._fadeOutSeconds = 1;\n    }\n    this._motionData.curves = Array.from({ length: this._motionData.curveCount }).map(() => new CubismMotionCurve());\n    this._motionData.segments = Array.from({ length: json.getMotionTotalSegmentCount() }).map(() => new CubismMotionSegment());\n    this._motionData.events = Array.from({ length: this._motionData.eventCount }).map(() => new CubismMotionEvent());\n    this._motionData.points = [];\n    let totalPointCount = 0;\n    let totalSegmentCount = 0;\n    for (let curveCount = 0; curveCount < this._motionData.curveCount; ++curveCount) {\n      const curve = this._motionData.curves[curveCount];\n      switch (json.getMotionCurveTarget(curveCount)) {\n        case TargetNameModel:\n          curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n          break;\n        case TargetNameParameter:\n          curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n          break;\n        case TargetNamePartOpacity:\n          curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n          break;\n        default:\n          CubismLogWarning('Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!');\n      }\n      curve.id = json.getMotionCurveId(curveCount);\n      curve.baseSegmentIndex = totalSegmentCount;\n      const fadeInTime = json.getMotionCurveFadeInTime(curveCount);\n      const fadeOutTime = json.getMotionCurveFadeOutTime(curveCount);\n      curve.fadeInTime = fadeInTime !== void 0 ? fadeInTime : -1;\n      curve.fadeOutTime = fadeOutTime !== void 0 ? fadeOutTime : -1;\n      for (let segmentPosition = 0; segmentPosition < json.getMotionCurveSegmentCount(curveCount); ) {\n        if (segmentPosition == 0) {\n          this._motionData.segments[totalSegmentCount].basePointIndex = totalPointCount;\n          this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition), json.getMotionCurveSegment(curveCount, segmentPosition + 1));\n          totalPointCount += 1;\n          segmentPosition += 2;\n        } else {\n          this._motionData.segments[totalSegmentCount].basePointIndex = totalPointCount - 1;\n        }\n        const segment = json.getMotionCurveSegment(curveCount, segmentPosition);\n        switch (segment) {\n          case CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\n            this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n            this._motionData.segments[totalSegmentCount].evaluate = linearEvaluate;\n            this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n            totalPointCount += 1;\n            segmentPosition += 3;\n            break;\n          }\n          case CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\n            this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n            if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n              this._motionData.segments[totalSegmentCount].evaluate = bezierEvaluate;\n            } else {\n              this._motionData.segments[totalSegmentCount].evaluate = bezierEvaluateCardanoInterpretation;\n            }\n            this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n            this._motionData.points[totalPointCount + 1] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 3), json.getMotionCurveSegment(curveCount, segmentPosition + 4));\n            this._motionData.points[totalPointCount + 2] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 5), json.getMotionCurveSegment(curveCount, segmentPosition + 6));\n            totalPointCount += 3;\n            segmentPosition += 7;\n            break;\n          }\n          case CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\n            this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n            this._motionData.segments[totalSegmentCount].evaluate = steppedEvaluate;\n            this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n            totalPointCount += 1;\n            segmentPosition += 3;\n            break;\n          }\n          case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\n            this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n            this._motionData.segments[totalSegmentCount].evaluate = inverseSteppedEvaluate;\n            this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n            totalPointCount += 1;\n            segmentPosition += 3;\n            break;\n          }\n        }\n        ++curve.segmentCount;\n        ++totalSegmentCount;\n      }\n      this._motionData.curves.push(curve);\n    }\n    for (let userdatacount = 0; userdatacount < json.getEventCount(); ++userdatacount) {\n      this._motionData.events[userdatacount].fireTime = json.getEventTime(userdatacount);\n      this._motionData.events[userdatacount].value = json.getEventValue(userdatacount);\n    }\n    json.release();\n  }\n  getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n    this._firedEventValues.length = 0;\n    for (let u = 0; u < this._motionData.eventCount; ++u) {\n      if (this._motionData.events[u].fireTime > beforeCheckTimeSeconds && this._motionData.events[u].fireTime <= motionTimeSeconds) {\n        this._firedEventValues.push(this._motionData.events[u].value);\n      }\n    }\n    return this._firedEventValues;\n  }\n}\nclass CubismMotionQueueEntry {\n  constructor() {\n    this._autoDelete = false;\n    this._available = true;\n    this._finished = false;\n    this._started = false;\n    this._startTimeSeconds = -1;\n    this._fadeInStartTimeSeconds = 0;\n    this._endTimeSeconds = -1;\n    this._stateTimeSeconds = 0;\n    this._stateWeight = 0;\n    this._lastEventCheckSeconds = 0;\n    this._motionQueueEntryHandle = this;\n    this._fadeOutSeconds = 0;\n    this._isTriggeredFadeOut = false;\n  }\n  release() {\n    if (this._autoDelete && this._motion) {\n      this._motion.release();\n    }\n  }\n  setFadeOut(fadeOutSeconds) {\n    this._fadeOutSeconds = fadeOutSeconds;\n    this._isTriggeredFadeOut = true;\n  }\n  startFadeOut(fadeOutSeconds, userTimeSeconds) {\n    const newEndTimeSeconds = userTimeSeconds + fadeOutSeconds;\n    this._isTriggeredFadeOut = true;\n    if (this._endTimeSeconds < 0 || newEndTimeSeconds < this._endTimeSeconds) {\n      this._endTimeSeconds = newEndTimeSeconds;\n    }\n  }\n  isFinished() {\n    return this._finished;\n  }\n  isStarted() {\n    return this._started;\n  }\n  getStartTime() {\n    return this._startTimeSeconds;\n  }\n  getFadeInStartTime() {\n    return this._fadeInStartTimeSeconds;\n  }\n  getEndTime() {\n    return this._endTimeSeconds;\n  }\n  setStartTime(startTime) {\n    this._startTimeSeconds = startTime;\n  }\n  setFadeInStartTime(startTime) {\n    this._fadeInStartTimeSeconds = startTime;\n  }\n  setEndTime(endTime) {\n    this._endTimeSeconds = endTime;\n  }\n  setIsFinished(f) {\n    this._finished = f;\n  }\n  setIsStarted(f) {\n    this._started = f;\n  }\n  isAvailable() {\n    return this._available;\n  }\n  setIsAvailable(v) {\n    this._available = v;\n  }\n  setState(timeSeconds, weight) {\n    this._stateTimeSeconds = timeSeconds;\n    this._stateWeight = weight;\n  }\n  getStateTime() {\n    return this._stateTimeSeconds;\n  }\n  getStateWeight() {\n    return this._stateWeight;\n  }\n  getLastCheckEventSeconds() {\n    return this._lastEventCheckSeconds;\n  }\n  setLastCheckEventSeconds(checkSeconds) {\n    this._lastEventCheckSeconds = checkSeconds;\n  }\n  isTriggeredFadeOut() {\n    return this._isTriggeredFadeOut;\n  }\n  getFadeOutSeconds() {\n    return this._fadeOutSeconds;\n  }\n}\nclass CubismMotionQueueManager {\n  constructor() {\n    this._userTimeSeconds = 0;\n    this._eventCustomData = null;\n    this._motions = [];\n  }\n  release() {\n    for (let i = 0; i < this._motions.length; ++i) {\n      if (this._motions[i]) {\n        this._motions[i].release();\n      }\n    }\n    this._motions = void 0;\n  }\n  startMotion(motion, autoDelete, userTimeSeconds) {\n    if (motion == null) {\n      return InvalidMotionQueueEntryHandleValue;\n    }\n    let motionQueueEntry;\n    for (let i = 0; i < this._motions.length; ++i) {\n      motionQueueEntry = this._motions[i];\n      if (motionQueueEntry == null) {\n        continue;\n      }\n      motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime());\n    }\n    motionQueueEntry = new CubismMotionQueueEntry();\n    motionQueueEntry._autoDelete = autoDelete;\n    motionQueueEntry._motion = motion;\n    this._motions.push(motionQueueEntry);\n    return motionQueueEntry._motionQueueEntryHandle;\n  }\n  isFinished() {\n    let i = 0;\n    while (i < this._motions.length) {\n      const motionQueueEntry = this._motions[i];\n      if (motionQueueEntry == null) {\n        this._motions.splice(i, 1);\n        continue;\n      }\n      const motion = motionQueueEntry._motion;\n      if (motion == null) {\n        motionQueueEntry.release();\n        this._motions.splice(i, 1);\n        continue;\n      }\n      if (!motionQueueEntry.isFinished()) {\n        return false;\n      }\n      i++;\n    }\n    return true;\n  }\n  isFinishedByHandle(motionQueueEntryNumber) {\n    for (let i = 0; i < this._motions.length; i++) {\n      const motionQueueEntry = this._motions[i];\n      if (motionQueueEntry == null) {\n        continue;\n      }\n      if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber && !motionQueueEntry.isFinished()) {\n        return false;\n      }\n    }\n    return true;\n  }\n  stopAllMotions() {\n    for (let i = 0; i < this._motions.length; i++) {\n      const motionQueueEntry = this._motions[i];\n      if (motionQueueEntry != null) {\n        motionQueueEntry.release();\n      }\n    }\n    this._motions = [];\n  }\n  getCubismMotionQueueEntry(motionQueueEntryNumber) {\n    return this._motions.find((entry) => entry != null && entry._motionQueueEntryHandle == motionQueueEntryNumber);\n  }\n  setEventCallback(callback, customData = null) {\n    this._eventCallBack = callback;\n    this._eventCustomData = customData;\n  }\n  doUpdateMotion(model, userTimeSeconds) {\n    let updated = false;\n    let i = 0;\n    while (i < this._motions.length) {\n      const motionQueueEntry = this._motions[i];\n      if (motionQueueEntry == null) {\n        this._motions.splice(i, 1);\n        continue;\n      }\n      const motion = motionQueueEntry._motion;\n      if (motion == null) {\n        motionQueueEntry.release();\n        this._motions.splice(i, 1);\n        continue;\n      }\n      motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n      updated = true;\n      const firedList = motion.getFiredEvent(motionQueueEntry.getLastCheckEventSeconds() - motionQueueEntry.getStartTime(), userTimeSeconds - motionQueueEntry.getStartTime());\n      for (let i2 = 0; i2 < firedList.length; ++i2) {\n        this._eventCallBack(this, firedList[i2], this._eventCustomData);\n      }\n      motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n      if (motionQueueEntry.isFinished()) {\n        motionQueueEntry.release();\n        this._motions.splice(i, 1);\n      } else {\n        if (motionQueueEntry.isTriggeredFadeOut()) {\n          motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), userTimeSeconds);\n        }\n        i++;\n      }\n    }\n    return updated;\n  }\n}\nconst InvalidMotionQueueEntryHandleValue = -1;\nclass CubismMotionManager extends CubismMotionQueueManager {\n  constructor() {\n    super();\n    this._currentPriority = 0;\n    this._reservePriority = 0;\n  }\n  getCurrentPriority() {\n    return this._currentPriority;\n  }\n  getReservePriority() {\n    return this._reservePriority;\n  }\n  setReservePriority(val) {\n    this._reservePriority = val;\n  }\n  startMotionPriority(motion, autoDelete, priority) {\n    if (priority == this._reservePriority) {\n      this._reservePriority = 0;\n    }\n    this._currentPriority = priority;\n    return super.startMotion(motion, autoDelete, this._userTimeSeconds);\n  }\n  updateMotion(model, deltaTimeSeconds) {\n    this._userTimeSeconds += deltaTimeSeconds;\n    const updated = super.doUpdateMotion(model, this._userTimeSeconds);\n    if (this.isFinished()) {\n      this._currentPriority = 0;\n    }\n    return updated;\n  }\n  reserveMotion(priority) {\n    if (priority <= this._reservePriority || priority <= this._currentPriority) {\n      return false;\n    }\n    this._reservePriority = priority;\n    return true;\n  }\n}\nvar CubismPhysicsTargetType = /* @__PURE__ */ ((CubismPhysicsTargetType2) => {\n  CubismPhysicsTargetType2[CubismPhysicsTargetType2[\"CubismPhysicsTargetType_Parameter\"] = 0] = \"CubismPhysicsTargetType_Parameter\";\n  return CubismPhysicsTargetType2;\n})(CubismPhysicsTargetType || {});\nvar CubismPhysicsSource = /* @__PURE__ */ ((CubismPhysicsSource2) => {\n  CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_X\"] = 0] = \"CubismPhysicsSource_X\";\n  CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_Y\"] = 1] = \"CubismPhysicsSource_Y\";\n  CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_Angle\"] = 2] = \"CubismPhysicsSource_Angle\";\n  return CubismPhysicsSource2;\n})(CubismPhysicsSource || {});\nclass PhysicsJsonEffectiveForces {\n  constructor() {\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n  }\n}\nclass CubismPhysicsParticle {\n  constructor() {\n    this.initialPosition = new CubismVector2(0, 0);\n    this.position = new CubismVector2(0, 0);\n    this.lastPosition = new CubismVector2(0, 0);\n    this.lastGravity = new CubismVector2(0, 0);\n    this.force = new CubismVector2(0, 0);\n    this.velocity = new CubismVector2(0, 0);\n  }\n}\nclass CubismPhysicsSubRig {\n  constructor() {\n    this.normalizationPosition = {};\n    this.normalizationAngle = {};\n  }\n}\nclass CubismPhysicsInput {\n  constructor() {\n    this.source = {};\n  }\n}\nclass CubismPhysicsOutput {\n  constructor() {\n    this.destination = {};\n    this.translationScale = new CubismVector2(0, 0);\n  }\n}\nclass CubismPhysicsRig {\n  constructor() {\n    this.settings = [];\n    this.inputs = [];\n    this.outputs = [];\n    this.particles = [];\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n  }\n}\nclass CubismPhysicsJson {\n  constructor(json) {\n    this._json = json;\n  }\n  release() {\n    this._json = void 0;\n  }\n  getGravity() {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this._json.Meta.EffectiveForces.Gravity.X;\n    ret.y = this._json.Meta.EffectiveForces.Gravity.Y;\n    return ret;\n  }\n  getWind() {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this._json.Meta.EffectiveForces.Wind.X;\n    ret.y = this._json.Meta.EffectiveForces.Wind.Y;\n    return ret;\n  }\n  getSubRigCount() {\n    return this._json.Meta.PhysicsSettingCount;\n  }\n  getTotalInputCount() {\n    return this._json.Meta.TotalInputCount;\n  }\n  getTotalOutputCount() {\n    return this._json.Meta.TotalOutputCount;\n  }\n  getVertexCount() {\n    return this._json.Meta.VertexCount;\n  }\n  getNormalizationPositionMinimumValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Minimum;\n  }\n  getNormalizationPositionMaximumValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Maximum;\n  }\n  getNormalizationPositionDefaultValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Default;\n  }\n  getNormalizationAngleMinimumValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Minimum;\n  }\n  getNormalizationAngleMaximumValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Maximum;\n  }\n  getNormalizationAngleDefaultValue(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Default;\n  }\n  getInputCount(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Input.length;\n  }\n  getInputWeight(physicsSettingIndex, inputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Weight;\n  }\n  getInputReflect(physicsSettingIndex, inputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Reflect;\n  }\n  getInputType(physicsSettingIndex, inputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Type;\n  }\n  getInputSourceId(physicsSettingIndex, inputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Source.Id;\n  }\n  getOutputCount(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output.length;\n  }\n  getOutputVertexIndex(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].VertexIndex;\n  }\n  getOutputAngleScale(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Scale;\n  }\n  getOutputWeight(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Weight;\n  }\n  getOutputDestinationId(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Destination.Id;\n  }\n  getOutputType(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Type;\n  }\n  getOutputReflect(physicsSettingIndex, outputIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Reflect;\n  }\n  getParticleCount(physicsSettingIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Vertices.length;\n  }\n  getParticleMobility(physicsSettingIndex, vertexIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Mobility;\n  }\n  getParticleDelay(physicsSettingIndex, vertexIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Delay;\n  }\n  getParticleAcceleration(physicsSettingIndex, vertexIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Acceleration;\n  }\n  getParticleRadius(physicsSettingIndex, vertexIndex) {\n    return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Radius;\n  }\n  getParticlePosition(physicsSettingIndex, vertexIndex) {\n    const ret = new CubismVector2(0, 0);\n    ret.x = this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Position.X;\n    ret.y = this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Position.Y;\n    return ret;\n  }\n}\nconst PhysicsTypeTagX = \"X\";\nconst PhysicsTypeTagY = \"Y\";\nconst PhysicsTypeTagAngle = \"Angle\";\nconst AirResistance = 5;\nconst MaximumWeight = 100;\nconst MovementThreshold = 1e-3;\nclass CubismPhysics {\n  static create(json) {\n    const ret = new CubismPhysics();\n    ret.parse(json);\n    ret._physicsRig.gravity.y = 0;\n    return ret;\n  }\n  evaluate(model, deltaTimeSeconds) {\n    let totalAngle;\n    let weight;\n    let radAngle;\n    let outputValue;\n    const totalTranslation = new CubismVector2();\n    let currentSetting;\n    let currentInput;\n    let currentOutput;\n    let currentParticles;\n    let parameterValue;\n    let parameterMaximumValue;\n    let parameterMinimumValue;\n    let parameterDefaultValue;\n    parameterValue = model.getModel().parameters.values;\n    parameterMaximumValue = model.getModel().parameters.maximumValues;\n    parameterMinimumValue = model.getModel().parameters.minimumValues;\n    parameterDefaultValue = model.getModel().parameters.defaultValues;\n    for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n      totalAngle = { angle: 0 };\n      totalTranslation.x = 0;\n      totalTranslation.y = 0;\n      currentSetting = this._physicsRig.settings[settingIndex];\n      currentInput = this._physicsRig.inputs.slice(currentSetting.baseInputIndex);\n      currentOutput = this._physicsRig.outputs.slice(currentSetting.baseOutputIndex);\n      currentParticles = this._physicsRig.particles.slice(currentSetting.baseParticleIndex);\n      for (let i = 0; i < currentSetting.inputCount; ++i) {\n        weight = currentInput[i].weight / MaximumWeight;\n        if (currentInput[i].sourceParameterIndex == -1) {\n          currentInput[i].sourceParameterIndex = model.getParameterIndex(currentInput[i].source.id);\n        }\n        currentInput[i].getNormalizedParameterValue(totalTranslation, totalAngle, parameterValue[currentInput[i].sourceParameterIndex], parameterMinimumValue[currentInput[i].sourceParameterIndex], parameterMaximumValue[currentInput[i].sourceParameterIndex], parameterDefaultValue[currentInput[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInput[i].reflect, weight);\n      }\n      radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n      totalTranslation.x = totalTranslation.x * CubismMath.cos(radAngle) - totalTranslation.y * CubismMath.sin(radAngle);\n      totalTranslation.y = totalTranslation.x * CubismMath.sin(radAngle) + totalTranslation.y * CubismMath.cos(radAngle);\n      updateParticles(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum, deltaTimeSeconds, AirResistance);\n      for (let i = 0; i < currentSetting.outputCount; ++i) {\n        const particleIndex = currentOutput[i].vertexIndex;\n        if (particleIndex < 1 || particleIndex >= currentSetting.particleCount) {\n          break;\n        }\n        if (currentOutput[i].destinationParameterIndex == -1) {\n          currentOutput[i].destinationParameterIndex = model.getParameterIndex(currentOutput[i].destination.id);\n        }\n        const translation = new CubismVector2();\n        translation.x = currentParticles[particleIndex].position.x - currentParticles[particleIndex - 1].position.x;\n        translation.y = currentParticles[particleIndex].position.y - currentParticles[particleIndex - 1].position.y;\n        outputValue = currentOutput[i].getValue(translation, currentParticles, particleIndex, currentOutput[i].reflect, this._options.gravity);\n        const destinationParameterIndex = currentOutput[i].destinationParameterIndex;\n        const outParameterValue = !Float32Array.prototype.slice && \"subarray\" in Float32Array.prototype ? JSON.parse(JSON.stringify(parameterValue.subarray(destinationParameterIndex))) : parameterValue.slice(destinationParameterIndex);\n        updateOutputParameterValue(outParameterValue, parameterMinimumValue[destinationParameterIndex], parameterMaximumValue[destinationParameterIndex], outputValue, currentOutput[i]);\n        for (let offset = destinationParameterIndex, outParamIndex = 0; offset < parameterValue.length; offset++, outParamIndex++) {\n          parameterValue[offset] = outParameterValue[outParamIndex];\n        }\n      }\n    }\n  }\n  setOptions(options) {\n    this._options = options;\n  }\n  getOption() {\n    return this._options;\n  }\n  constructor() {\n    this._options = new Options();\n    this._options.gravity.y = -1;\n    this._options.gravity.x = 0;\n    this._options.wind.x = 0;\n    this._options.wind.y = 0;\n  }\n  release() {\n    this._physicsRig = void 0;\n  }\n  parse(physicsJson) {\n    this._physicsRig = new CubismPhysicsRig();\n    let json = new CubismPhysicsJson(physicsJson);\n    this._physicsRig.gravity = json.getGravity();\n    this._physicsRig.wind = json.getWind();\n    this._physicsRig.subRigCount = json.getSubRigCount();\n    let inputIndex = 0, outputIndex = 0, particleIndex = 0;\n    for (let i = 0; i < this._physicsRig.subRigCount; ++i) {\n      const setting = new CubismPhysicsSubRig();\n      setting.normalizationPosition.minimum = json.getNormalizationPositionMinimumValue(i);\n      setting.normalizationPosition.maximum = json.getNormalizationPositionMaximumValue(i);\n      setting.normalizationPosition.defalut = json.getNormalizationPositionDefaultValue(i);\n      setting.normalizationAngle.minimum = json.getNormalizationAngleMinimumValue(i);\n      setting.normalizationAngle.maximum = json.getNormalizationAngleMaximumValue(i);\n      setting.normalizationAngle.defalut = json.getNormalizationAngleDefaultValue(i);\n      setting.inputCount = json.getInputCount(i);\n      setting.baseInputIndex = inputIndex;\n      inputIndex += setting.inputCount;\n      for (let j = 0; j < setting.inputCount; ++j) {\n        const input = new CubismPhysicsInput();\n        input.sourceParameterIndex = -1;\n        input.weight = json.getInputWeight(i, j);\n        input.reflect = json.getInputReflect(i, j);\n        switch (json.getInputType(i, j)) {\n          case PhysicsTypeTagX:\n            input.type = CubismPhysicsSource.CubismPhysicsSource_X;\n            input.getNormalizedParameterValue = getInputTranslationXFromNormalizedParameterValue;\n            break;\n          case PhysicsTypeTagY:\n            input.type = CubismPhysicsSource.CubismPhysicsSource_Y;\n            input.getNormalizedParameterValue = getInputTranslationYFromNormalizedParamterValue;\n            break;\n          case PhysicsTypeTagAngle:\n            input.type = CubismPhysicsSource.CubismPhysicsSource_Angle;\n            input.getNormalizedParameterValue = getInputAngleFromNormalizedParameterValue;\n            break;\n        }\n        input.source.targetType = CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n        input.source.id = json.getInputSourceId(i, j);\n        this._physicsRig.inputs.push(input);\n      }\n      setting.outputCount = json.getOutputCount(i);\n      setting.baseOutputIndex = outputIndex;\n      outputIndex += setting.outputCount;\n      for (let j = 0; j < setting.outputCount; ++j) {\n        const output = new CubismPhysicsOutput();\n        output.destinationParameterIndex = -1;\n        output.vertexIndex = json.getOutputVertexIndex(i, j);\n        output.angleScale = json.getOutputAngleScale(i, j);\n        output.weight = json.getOutputWeight(i, j);\n        output.destination.targetType = CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n        output.destination.id = json.getOutputDestinationId(i, j);\n        switch (json.getOutputType(i, j)) {\n          case PhysicsTypeTagX:\n            output.type = CubismPhysicsSource.CubismPhysicsSource_X;\n            output.getValue = getOutputTranslationX;\n            output.getScale = getOutputScaleTranslationX;\n            break;\n          case PhysicsTypeTagY:\n            output.type = CubismPhysicsSource.CubismPhysicsSource_Y;\n            output.getValue = getOutputTranslationY;\n            output.getScale = getOutputScaleTranslationY;\n            break;\n          case PhysicsTypeTagAngle:\n            output.type = CubismPhysicsSource.CubismPhysicsSource_Angle;\n            output.getValue = getOutputAngle;\n            output.getScale = getOutputScaleAngle;\n            break;\n        }\n        output.reflect = json.getOutputReflect(i, j);\n        this._physicsRig.outputs.push(output);\n      }\n      setting.particleCount = json.getParticleCount(i);\n      setting.baseParticleIndex = particleIndex;\n      particleIndex += setting.particleCount;\n      for (let j = 0; j < setting.particleCount; ++j) {\n        const particle = new CubismPhysicsParticle();\n        particle.mobility = json.getParticleMobility(i, j);\n        particle.delay = json.getParticleDelay(i, j);\n        particle.acceleration = json.getParticleAcceleration(i, j);\n        particle.radius = json.getParticleRadius(i, j);\n        particle.position = json.getParticlePosition(i, j);\n        this._physicsRig.particles.push(particle);\n      }\n      this._physicsRig.settings.push(setting);\n    }\n    this.initialize();\n    json.release();\n  }\n  initialize() {\n    let strand;\n    let currentSetting;\n    let radius;\n    for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n      currentSetting = this._physicsRig.settings[settingIndex];\n      strand = this._physicsRig.particles.slice(currentSetting.baseParticleIndex);\n      strand[0].initialPosition = new CubismVector2(0, 0);\n      strand[0].lastPosition = new CubismVector2(strand[0].initialPosition.x, strand[0].initialPosition.y);\n      strand[0].lastGravity = new CubismVector2(0, -1);\n      strand[0].lastGravity.y *= -1;\n      strand[0].velocity = new CubismVector2(0, 0);\n      strand[0].force = new CubismVector2(0, 0);\n      for (let i = 1; i < currentSetting.particleCount; ++i) {\n        radius = new CubismVector2(0, 0);\n        radius.y = strand[i].radius;\n        strand[i].initialPosition = new CubismVector2(strand[i - 1].initialPosition.x + radius.x, strand[i - 1].initialPosition.y + radius.y);\n        strand[i].position = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n        strand[i].lastPosition = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n        strand[i].lastGravity = new CubismVector2(0, -1);\n        strand[i].lastGravity.y *= -1;\n        strand[i].velocity = new CubismVector2(0, 0);\n        strand[i].force = new CubismVector2(0, 0);\n      }\n    }\n  }\n}\nclass Options {\n  constructor() {\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n  }\n}\nfunction getInputTranslationXFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n  targetTranslation.x += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputTranslationYFromNormalizedParamterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n  targetTranslation.y += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n}\nfunction getInputAngleFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizaitionPosition, normalizationAngle, isInverted, weight) {\n  targetAngle.angle += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationAngle.minimum, normalizationAngle.maximum, normalizationAngle.defalut, isInverted) * weight;\n}\nfunction getOutputTranslationX(translation, particles, particleIndex, isInverted, parentGravity) {\n  let outputValue = translation.x;\n  if (isInverted) {\n    outputValue *= -1;\n  }\n  return outputValue;\n}\nfunction getOutputTranslationY(translation, particles, particleIndex, isInverted, parentGravity) {\n  let outputValue = translation.y;\n  if (isInverted) {\n    outputValue *= -1;\n  }\n  return outputValue;\n}\nfunction getOutputAngle(translation, particles, particleIndex, isInverted, parentGravity) {\n  let outputValue;\n  if (particleIndex >= 2) {\n    parentGravity = particles[particleIndex - 1].position.substract(particles[particleIndex - 2].position);\n  } else {\n    parentGravity = parentGravity.multiplyByScaler(-1);\n  }\n  outputValue = CubismMath.directionToRadian(parentGravity, translation);\n  if (isInverted) {\n    outputValue *= -1;\n  }\n  return outputValue;\n}\nfunction getRangeValue(min, max) {\n  return Math.abs(Math.max(min, max) - Math.min(min, max));\n}\nfunction getDefaultValue(min, max) {\n  const minValue = Math.min(min, max);\n  return minValue + getRangeValue(min, max) / 2;\n}\nfunction getOutputScaleTranslationX(translationScale, angleScale) {\n  return translationScale.x;\n}\nfunction getOutputScaleTranslationY(translationScale, angleScale) {\n  return translationScale.y;\n}\nfunction getOutputScaleAngle(translationScale, angleScale) {\n  return angleScale;\n}\nfunction updateParticles(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue, deltaTimeSeconds, airResistance) {\n  let totalRadian;\n  let delay;\n  let radian;\n  let currentGravity;\n  let direction = new CubismVector2(0, 0);\n  let velocity = new CubismVector2(0, 0);\n  let force = new CubismVector2(0, 0);\n  let newDirection = new CubismVector2(0, 0);\n  strand[0].position = new CubismVector2(totalTranslation.x, totalTranslation.y);\n  totalRadian = CubismMath.degreesToRadian(totalAngle);\n  currentGravity = CubismMath.radianToDirection(totalRadian);\n  currentGravity.normalize();\n  for (let i = 1; i < strandCount; ++i) {\n    strand[i].force = currentGravity.multiplyByScaler(strand[i].acceleration).add(windDirection);\n    strand[i].lastPosition = new CubismVector2(strand[i].position.x, strand[i].position.y);\n    delay = strand[i].delay * deltaTimeSeconds * 30;\n    direction = strand[i].position.substract(strand[i - 1].position);\n    radian = CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) / airResistance;\n    direction.x = CubismMath.cos(radian) * direction.x - direction.y * CubismMath.sin(radian);\n    direction.y = CubismMath.sin(radian) * direction.x + direction.y * CubismMath.cos(radian);\n    strand[i].position = strand[i - 1].position.add(direction);\n    velocity = strand[i].velocity.multiplyByScaler(delay);\n    force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n    strand[i].position = strand[i].position.add(velocity).add(force);\n    newDirection = strand[i].position.substract(strand[i - 1].position);\n    newDirection.normalize();\n    strand[i].position = strand[i - 1].position.add(newDirection.multiplyByScaler(strand[i].radius));\n    if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n      strand[i].position.x = 0;\n    }\n    if (delay != 0) {\n      strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n      strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n      strand[i].velocity = strand[i].velocity.multiplyByScaler(strand[i].mobility);\n    }\n    strand[i].force = new CubismVector2(0, 0);\n    strand[i].lastGravity = new CubismVector2(currentGravity.x, currentGravity.y);\n  }\n}\nfunction updateOutputParameterValue(parameterValue, parameterValueMinimum, parameterValueMaximum, translation, output) {\n  let outputScale;\n  let value;\n  let weight;\n  outputScale = output.getScale(output.translationScale, output.angleScale);\n  value = translation * outputScale;\n  if (value < parameterValueMinimum) {\n    if (value < output.valueBelowMinimum) {\n      output.valueBelowMinimum = value;\n    }\n    value = parameterValueMinimum;\n  } else if (value > parameterValueMaximum) {\n    if (value > output.valueExceededMaximum) {\n      output.valueExceededMaximum = value;\n    }\n    value = parameterValueMaximum;\n  }\n  weight = output.weight / MaximumWeight;\n  if (weight >= 1) {\n    parameterValue[0] = value;\n  } else {\n    value = parameterValue[0] * (1 - weight) + value * weight;\n    parameterValue[0] = value;\n  }\n}\nfunction normalizeParameterValue(value, parameterMinimum, parameterMaximum, parameterDefault, normalizedMinimum, normalizedMaximum, normalizedDefault, isInverted) {\n  let result = 0;\n  const maxValue = CubismMath.max(parameterMaximum, parameterMinimum);\n  if (maxValue < value) {\n    value = maxValue;\n  }\n  const minValue = CubismMath.min(parameterMaximum, parameterMinimum);\n  if (minValue > value) {\n    value = minValue;\n  }\n  const minNormValue = CubismMath.min(normalizedMinimum, normalizedMaximum);\n  const maxNormValue = CubismMath.max(normalizedMinimum, normalizedMaximum);\n  const middleNormValue = normalizedDefault;\n  const middleValue = getDefaultValue(minValue, maxValue);\n  const paramValue = value - middleValue;\n  switch (Math.sign(paramValue)) {\n    case 1: {\n      const nLength = maxNormValue - middleNormValue;\n      const pLength = maxValue - middleValue;\n      if (pLength != 0) {\n        result = paramValue * (nLength / pLength);\n        result += middleNormValue;\n      }\n      break;\n    }\n    case -1: {\n      const nLength = minNormValue - middleNormValue;\n      const pLength = minValue - middleValue;\n      if (pLength != 0) {\n        result = paramValue * (nLength / pLength);\n        result += middleNormValue;\n      }\n      break;\n    }\n    case 0: {\n      result = middleNormValue;\n      break;\n    }\n  }\n  return isInverted ? result : result * -1;\n}\nclass csmRect {\n  constructor(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.width = w;\n    this.height = h;\n  }\n  getCenterX() {\n    return this.x + 0.5 * this.width;\n  }\n  getCenterY() {\n    return this.y + 0.5 * this.height;\n  }\n  getRight() {\n    return this.x + this.width;\n  }\n  getBottom() {\n    return this.y + this.height;\n  }\n  setRect(r) {\n    this.x = r.x;\n    this.y = r.y;\n    this.width = r.width;\n    this.height = r.height;\n  }\n  expand(w, h) {\n    this.x -= w;\n    this.y -= h;\n    this.width += w * 2;\n    this.height += h * 2;\n  }\n}\nconst ColorChannelCount = 4;\nconst shaderCount = 10;\nlet s_instance;\nlet s_viewport;\nlet s_fbo;\nclass CubismClippingManager_WebGL {\n  getChannelFlagAsColor(channelNo) {\n    return this._channelColors[channelNo];\n  }\n  getMaskRenderTexture() {\n    let ret = 0;\n    if (this._maskTexture && this._maskTexture.texture != 0) {\n      this._maskTexture.frameNo = this._currentFrameNo;\n      ret = this._maskTexture.texture;\n    }\n    if (ret == 0) {\n      const size = this._clippingMaskBufferSize;\n      this._colorBuffer = this.gl.createTexture();\n      this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer);\n      this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, size, size, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n      this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n      ret = this.gl.createFramebuffer();\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, ret);\n      this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._colorBuffer, 0);\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n      this._maskTexture = new CubismRenderTextureResource(this._currentFrameNo, ret);\n    }\n    return ret;\n  }\n  setGL(gl) {\n    this.gl = gl;\n  }\n  calcClippedDrawTotalBounds(model, clippingContext) {\n    let clippedDrawTotalMinX = Number.MAX_VALUE;\n    let clippedDrawTotalMinY = Number.MAX_VALUE;\n    let clippedDrawTotalMaxX = Number.MIN_VALUE;\n    let clippedDrawTotalMaxY = Number.MIN_VALUE;\n    const clippedDrawCount = clippingContext._clippedDrawableIndexList.length;\n    for (let clippedDrawableIndex = 0; clippedDrawableIndex < clippedDrawCount; clippedDrawableIndex++) {\n      const drawableIndex = clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n      const drawableVertexCount = model.getDrawableVertexCount(drawableIndex);\n      const drawableVertexes = model.getDrawableVertices(drawableIndex);\n      let minX = Number.MAX_VALUE;\n      let minY = Number.MAX_VALUE;\n      let maxX = Number.MIN_VALUE;\n      let maxY = Number.MIN_VALUE;\n      const loop = drawableVertexCount * Constant.vertexStep;\n      for (let pi = Constant.vertexOffset; pi < loop; pi += Constant.vertexStep) {\n        const x = drawableVertexes[pi];\n        const y = drawableVertexes[pi + 1];\n        if (x < minX) {\n          minX = x;\n        }\n        if (x > maxX) {\n          maxX = x;\n        }\n        if (y < minY) {\n          minY = y;\n        }\n        if (y > maxY) {\n          maxY = y;\n        }\n      }\n      if (minX == Number.MAX_VALUE) {\n        continue;\n      }\n      if (minX < clippedDrawTotalMinX) {\n        clippedDrawTotalMinX = minX;\n      }\n      if (minY < clippedDrawTotalMinY) {\n        clippedDrawTotalMinY = minY;\n      }\n      if (maxX > clippedDrawTotalMaxX) {\n        clippedDrawTotalMaxX = maxX;\n      }\n      if (maxY > clippedDrawTotalMaxY) {\n        clippedDrawTotalMaxY = maxY;\n      }\n      if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n        clippingContext._allClippedDrawRect.x = 0;\n        clippingContext._allClippedDrawRect.y = 0;\n        clippingContext._allClippedDrawRect.width = 0;\n        clippingContext._allClippedDrawRect.height = 0;\n        clippingContext._isUsing = false;\n      } else {\n        clippingContext._isUsing = true;\n        const w = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n        const h = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n        clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n        clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n        clippingContext._allClippedDrawRect.width = w;\n        clippingContext._allClippedDrawRect.height = h;\n      }\n    }\n  }\n  constructor() {\n    this._maskRenderTexture = null;\n    this._colorBuffer = null;\n    this._currentFrameNo = 0;\n    this._clippingMaskBufferSize = 256;\n    this._clippingContextListForMask = [];\n    this._clippingContextListForDraw = [];\n    this._channelColors = [];\n    this._tmpBoundsOnModel = new csmRect();\n    this._tmpMatrix = new CubismMatrix44();\n    this._tmpMatrixForMask = new CubismMatrix44();\n    this._tmpMatrixForDraw = new CubismMatrix44();\n    let tmp = new CubismTextureColor();\n    tmp.R = 1;\n    tmp.G = 0;\n    tmp.B = 0;\n    tmp.A = 0;\n    this._channelColors.push(tmp);\n    tmp = new CubismTextureColor();\n    tmp.R = 0;\n    tmp.G = 1;\n    tmp.B = 0;\n    tmp.A = 0;\n    this._channelColors.push(tmp);\n    tmp = new CubismTextureColor();\n    tmp.R = 0;\n    tmp.G = 0;\n    tmp.B = 1;\n    tmp.A = 0;\n    this._channelColors.push(tmp);\n    tmp = new CubismTextureColor();\n    tmp.R = 0;\n    tmp.G = 0;\n    tmp.B = 0;\n    tmp.A = 1;\n    this._channelColors.push(tmp);\n  }\n  release() {\n    var _a, _b, _c;\n    const self = this;\n    for (let i = 0; i < this._clippingContextListForMask.length; i++) {\n      if (this._clippingContextListForMask[i]) {\n        (_a = this._clippingContextListForMask[i]) == null ? void 0 : _a.release();\n      }\n    }\n    self._clippingContextListForMask = void 0;\n    self._clippingContextListForDraw = void 0;\n    if (this._maskTexture) {\n      (_b = this.gl) == null ? void 0 : _b.deleteFramebuffer(this._maskTexture.texture);\n      self._maskTexture = void 0;\n    }\n    self._channelColors = void 0;\n    (_c = this.gl) == null ? void 0 : _c.deleteTexture(this._colorBuffer);\n    this._colorBuffer = null;\n  }\n  initialize(model, drawableCount, drawableMasks, drawableMaskCounts) {\n    for (let i = 0; i < drawableCount; i++) {\n      if (drawableMaskCounts[i] <= 0) {\n        this._clippingContextListForDraw.push(null);\n        continue;\n      }\n      let clippingContext = this.findSameClip(drawableMasks[i], drawableMaskCounts[i]);\n      if (clippingContext == null) {\n        clippingContext = new CubismClippingContext(this, drawableMasks[i], drawableMaskCounts[i]);\n        this._clippingContextListForMask.push(clippingContext);\n      }\n      clippingContext.addClippedDrawable(i);\n      this._clippingContextListForDraw.push(clippingContext);\n    }\n  }\n  setupClippingContext(model, renderer) {\n    this._currentFrameNo++;\n    let usingClipCount = 0;\n    for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.length; clipIndex++) {\n      const cc = this._clippingContextListForMask[clipIndex];\n      this.calcClippedDrawTotalBounds(model, cc);\n      if (cc._isUsing) {\n        usingClipCount++;\n      }\n    }\n    if (usingClipCount > 0) {\n      this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize);\n      this._maskRenderTexture = this.getMaskRenderTexture();\n      renderer.getMvpMatrix();\n      renderer.preDraw();\n      this.setupLayoutBounds(usingClipCount);\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture);\n      this.gl.clearColor(1, 1, 1, 1);\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n      for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.length; clipIndex++) {\n        const clipContext = this._clippingContextListForMask[clipIndex];\n        const allClipedDrawRect = clipContext._allClippedDrawRect;\n        const layoutBoundsOnTex01 = clipContext._layoutBounds;\n        const MARGIN = 0.05;\n        this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n        this._tmpBoundsOnModel.expand(allClipedDrawRect.width * MARGIN, allClipedDrawRect.height * MARGIN);\n        const scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n        const scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n        {\n          this._tmpMatrix.loadIdentity();\n          {\n            this._tmpMatrix.translateRelative(-1, -1);\n            this._tmpMatrix.scaleRelative(2, 2);\n          }\n          {\n            this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n            this._tmpMatrix.scaleRelative(scaleX, scaleY);\n            this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n          }\n          this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n        }\n        {\n          this._tmpMatrix.loadIdentity();\n          {\n            this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n            this._tmpMatrix.scaleRelative(scaleX, scaleY);\n            this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n          }\n          this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n        }\n        clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n        clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n        const clipDrawCount = clipContext._clippingIdCount;\n        for (let i = 0; i < clipDrawCount; i++) {\n          const clipDrawIndex = clipContext._clippingIdList[i];\n          if (!model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n            continue;\n          }\n          renderer.setIsCulling(model.getDrawableCulling(clipDrawIndex) != false);\n          renderer.setClippingContextBufferForMask(clipContext);\n          renderer.drawMesh(model.getDrawableTextureIndices(clipDrawIndex), model.getDrawableVertexIndexCount(clipDrawIndex), model.getDrawableVertexCount(clipDrawIndex), model.getDrawableVertexIndices(clipDrawIndex), model.getDrawableVertices(clipDrawIndex), model.getDrawableVertexUvs(clipDrawIndex), model.getDrawableOpacity(clipDrawIndex), CubismBlendMode.CubismBlendMode_Normal, false);\n        }\n      }\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n      renderer.setClippingContextBufferForMask(null);\n      this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n    }\n  }\n  findSameClip(drawableMasks, drawableMaskCounts) {\n    for (let i = 0; i < this._clippingContextListForMask.length; i++) {\n      const clippingContext = this._clippingContextListForMask[i];\n      const count = clippingContext._clippingIdCount;\n      if (count != drawableMaskCounts) {\n        continue;\n      }\n      let sameCount = 0;\n      for (let j = 0; j < count; j++) {\n        const clipId = clippingContext._clippingIdList[j];\n        for (let k = 0; k < count; k++) {\n          if (drawableMasks[k] == clipId) {\n            sameCount++;\n            break;\n          }\n        }\n      }\n      if (sameCount == count) {\n        return clippingContext;\n      }\n    }\n    return null;\n  }\n  setupLayoutBounds(usingClipCount) {\n    let div = usingClipCount / ColorChannelCount;\n    let mod = usingClipCount % ColorChannelCount;\n    div = ~~div;\n    mod = ~~mod;\n    let curClipIndex = 0;\n    for (let channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\n      const layoutCount = div + (channelNo < mod ? 1 : 0);\n      if (layoutCount == 0)\n        ;\n      else if (layoutCount == 1) {\n        const clipContext = this._clippingContextListForMask[curClipIndex++];\n        clipContext._layoutChannelNo = channelNo;\n        clipContext._layoutBounds.x = 0;\n        clipContext._layoutBounds.y = 0;\n        clipContext._layoutBounds.width = 1;\n        clipContext._layoutBounds.height = 1;\n      } else if (layoutCount == 2) {\n        for (let i = 0; i < layoutCount; i++) {\n          let xpos = i % 2;\n          xpos = ~~xpos;\n          const cc = this._clippingContextListForMask[curClipIndex++];\n          cc._layoutChannelNo = channelNo;\n          cc._layoutBounds.x = xpos * 0.5;\n          cc._layoutBounds.y = 0;\n          cc._layoutBounds.width = 0.5;\n          cc._layoutBounds.height = 1;\n        }\n      } else if (layoutCount <= 4) {\n        for (let i = 0; i < layoutCount; i++) {\n          let xpos = i % 2;\n          let ypos = i / 2;\n          xpos = ~~xpos;\n          ypos = ~~ypos;\n          const cc = this._clippingContextListForMask[curClipIndex++];\n          cc._layoutChannelNo = channelNo;\n          cc._layoutBounds.x = xpos * 0.5;\n          cc._layoutBounds.y = ypos * 0.5;\n          cc._layoutBounds.width = 0.5;\n          cc._layoutBounds.height = 0.5;\n        }\n      } else if (layoutCount <= 9) {\n        for (let i = 0; i < layoutCount; i++) {\n          let xpos = i % 3;\n          let ypos = i / 3;\n          xpos = ~~xpos;\n          ypos = ~~ypos;\n          const cc = this._clippingContextListForMask[curClipIndex++];\n          cc._layoutChannelNo = channelNo;\n          cc._layoutBounds.x = xpos / 3;\n          cc._layoutBounds.y = ypos / 3;\n          cc._layoutBounds.width = 1 / 3;\n          cc._layoutBounds.height = 1 / 3;\n        }\n      } else if (CubismConfig.supportMoreMaskDivisions && layoutCount <= 16) {\n        for (let i = 0; i < layoutCount; i++) {\n          let xpos = i % 4;\n          let ypos = i / 4;\n          xpos = ~~xpos;\n          ypos = ~~ypos;\n          const cc = this._clippingContextListForMask[curClipIndex++];\n          cc._layoutChannelNo = channelNo;\n          cc._layoutBounds.x = xpos / 4;\n          cc._layoutBounds.y = ypos / 4;\n          cc._layoutBounds.width = 1 / 4;\n          cc._layoutBounds.height = 1 / 4;\n        }\n      } else {\n        CubismLogError(\"not supported mask count : {0}\", layoutCount);\n      }\n    }\n  }\n  getColorBuffer() {\n    return this._colorBuffer;\n  }\n  getClippingContextListForDraw() {\n    return this._clippingContextListForDraw;\n  }\n  setClippingMaskBufferSize(size) {\n    this._clippingMaskBufferSize = size;\n  }\n  getClippingMaskBufferSize() {\n    return this._clippingMaskBufferSize;\n  }\n}\nclass CubismRenderTextureResource {\n  constructor(frameNo, texture) {\n    this.frameNo = frameNo;\n    this.texture = texture;\n  }\n}\nclass CubismClippingContext {\n  constructor(manager, clippingDrawableIndices, clipCount) {\n    this._isUsing = false;\n    this._owner = manager;\n    this._clippingIdList = clippingDrawableIndices;\n    this._clippingIdCount = clipCount;\n    this._allClippedDrawRect = new csmRect();\n    this._layoutBounds = new csmRect();\n    this._clippedDrawableIndexList = [];\n    this._matrixForMask = new CubismMatrix44();\n    this._matrixForDraw = new CubismMatrix44();\n  }\n  release() {\n    const self = this;\n    self._layoutBounds = void 0;\n    self._allClippedDrawRect = void 0;\n    self._clippedDrawableIndexList = void 0;\n  }\n  addClippedDrawable(drawableIndex) {\n    this._clippedDrawableIndexList.push(drawableIndex);\n  }\n  getClippingManager() {\n    return this._owner;\n  }\n  setGl(gl) {\n    this._owner.setGL(gl);\n  }\n}\nclass CubismShader_WebGL {\n  static getInstance() {\n    if (s_instance == null) {\n      s_instance = new CubismShader_WebGL();\n      return s_instance;\n    }\n    return s_instance;\n  }\n  static deleteInstance() {\n    if (s_instance) {\n      s_instance.release();\n      s_instance = void 0;\n    }\n  }\n  constructor() {\n    this._shaderSets = [];\n  }\n  release() {\n    this.releaseShaderProgram();\n  }\n  setupShaderProgram(renderer, textureId, vertexCount, vertexArray, indexArray, uvArray, bufferData, opacity, colorBlendMode, baseColor, isPremultipliedAlpha, matrix4x4, invertedMask) {\n    if (!isPremultipliedAlpha) {\n      CubismLogError(\"NoPremultipliedAlpha is not allowed\");\n    }\n    if (this._shaderSets.length == 0) {\n      this.generateShaders();\n    }\n    let SRC_COLOR;\n    let DST_COLOR;\n    let SRC_ALPHA;\n    let DST_ALPHA;\n    const clippingContextBufferForMask = renderer.getClippingContextBufferForMask();\n    if (clippingContextBufferForMask != null) {\n      const shaderSet = this._shaderSets[ShaderNames.ShaderNames_SetupMask];\n      this.gl.useProgram(shaderSet.shaderProgram);\n      this.gl.activeTexture(this.gl.TEXTURE0);\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n      if (bufferData.vertex == null) {\n        bufferData.vertex = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n      this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n      if (bufferData.uv == null) {\n        bufferData.uv = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n      this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n      const channelNo = clippingContextBufferForMask._layoutChannelNo;\n      const colorChannel = clippingContextBufferForMask.getClippingManager().getChannelFlagAsColor(channelNo);\n      this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n      this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, clippingContextBufferForMask._matrixForMask.getArray());\n      const rect = clippingContextBufferForMask._layoutBounds;\n      this.gl.uniform4f(shaderSet.uniformBaseColorLocation, rect.x * 2 - 1, rect.y * 2 - 1, rect.getRight() * 2 - 1, rect.getBottom() * 2 - 1);\n      SRC_COLOR = this.gl.ZERO;\n      DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\n      SRC_ALPHA = this.gl.ZERO;\n      DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n    } else {\n      const clippingContextBufferForDraw = renderer.getClippingContextBufferForDraw();\n      const masked = clippingContextBufferForDraw != null;\n      const offset = masked ? invertedMask ? 2 : 1 : 0;\n      let shaderSet;\n      switch (colorBlendMode) {\n        case CubismBlendMode.CubismBlendMode_Normal:\n        default:\n          shaderSet = this._shaderSets[ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset];\n          SRC_COLOR = this.gl.ONE;\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n          SRC_ALPHA = this.gl.ONE;\n          DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n          break;\n        case CubismBlendMode.CubismBlendMode_Additive:\n          shaderSet = this._shaderSets[ShaderNames.ShaderNames_AddPremultipliedAlpha + offset];\n          SRC_COLOR = this.gl.ONE;\n          DST_COLOR = this.gl.ONE;\n          SRC_ALPHA = this.gl.ZERO;\n          DST_ALPHA = this.gl.ONE;\n          break;\n        case CubismBlendMode.CubismBlendMode_Multiplicative:\n          shaderSet = this._shaderSets[ShaderNames.ShaderNames_MultPremultipliedAlpha + offset];\n          SRC_COLOR = this.gl.DST_COLOR;\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n          SRC_ALPHA = this.gl.ZERO;\n          DST_ALPHA = this.gl.ONE;\n          break;\n      }\n      this.gl.useProgram(shaderSet.shaderProgram);\n      if (bufferData.vertex == null) {\n        bufferData.vertex = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n      this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n      if (bufferData.uv == null) {\n        bufferData.uv = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n      this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n      if (clippingContextBufferForDraw != null) {\n        this.gl.activeTexture(this.gl.TEXTURE1);\n        const tex = clippingContextBufferForDraw.getClippingManager().getColorBuffer();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n        this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n        this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, clippingContextBufferForDraw._matrixForDraw.getArray());\n        const channelNo = clippingContextBufferForDraw._layoutChannelNo;\n        const colorChannel = clippingContextBufferForDraw.getClippingManager().getChannelFlagAsColor(channelNo);\n        this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n      }\n      this.gl.activeTexture(this.gl.TEXTURE0);\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n      this.gl.uniformMatrix4fv(shaderSet.uniformMatrixLocation, false, matrix4x4.getArray());\n      this.gl.uniform4f(shaderSet.uniformBaseColorLocation, baseColor.R, baseColor.G, baseColor.B, baseColor.A);\n    }\n    if (bufferData.index == null) {\n      bufferData.index = this.gl.createBuffer();\n    }\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\n    this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n    this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\n  }\n  releaseShaderProgram() {\n    for (let i = 0; i < this._shaderSets.length; i++) {\n      this.gl.deleteProgram(this._shaderSets[i].shaderProgram);\n      this._shaderSets[i].shaderProgram = 0;\n    }\n    this._shaderSets = [];\n  }\n  generateShaders() {\n    for (let i = 0; i < shaderCount; i++) {\n      this._shaderSets.push({});\n    }\n    this._shaderSets[0].shaderProgram = this.loadShaderProgram(vertexShaderSrcSetupMask, fragmentShaderSrcsetupMask);\n    this._shaderSets[1].shaderProgram = this.loadShaderProgram(vertexShaderSrc, fragmentShaderSrcPremultipliedAlpha);\n    this._shaderSets[2].shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskPremultipliedAlpha);\n    this._shaderSets[3].shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskInvertedPremultipliedAlpha);\n    this._shaderSets[4].shaderProgram = this._shaderSets[1].shaderProgram;\n    this._shaderSets[5].shaderProgram = this._shaderSets[2].shaderProgram;\n    this._shaderSets[6].shaderProgram = this._shaderSets[3].shaderProgram;\n    this._shaderSets[7].shaderProgram = this._shaderSets[1].shaderProgram;\n    this._shaderSets[8].shaderProgram = this._shaderSets[2].shaderProgram;\n    this._shaderSets[9].shaderProgram = this._shaderSets[3].shaderProgram;\n    this._shaderSets[0].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, \"a_position\");\n    this._shaderSets[0].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, \"a_texCoord\");\n    this._shaderSets[0].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"s_texture0\");\n    this._shaderSets[0].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[0].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[0].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_baseColor\");\n    this._shaderSets[1].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, \"a_position\");\n    this._shaderSets[1].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, \"a_texCoord\");\n    this._shaderSets[1].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"s_texture0\");\n    this._shaderSets[1].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"u_matrix\");\n    this._shaderSets[1].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"u_baseColor\");\n    this._shaderSets[2].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, \"a_position\");\n    this._shaderSets[2].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, \"a_texCoord\");\n    this._shaderSets[2].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"s_texture0\");\n    this._shaderSets[2].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"s_texture1\");\n    this._shaderSets[2].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_matrix\");\n    this._shaderSets[2].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[2].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[2].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_baseColor\");\n    this._shaderSets[3].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, \"a_position\");\n    this._shaderSets[3].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, \"a_texCoord\");\n    this._shaderSets[3].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"s_texture0\");\n    this._shaderSets[3].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"s_texture1\");\n    this._shaderSets[3].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_matrix\");\n    this._shaderSets[3].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[3].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[3].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_baseColor\");\n    this._shaderSets[4].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, \"a_position\");\n    this._shaderSets[4].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, \"a_texCoord\");\n    this._shaderSets[4].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"s_texture0\");\n    this._shaderSets[4].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"u_matrix\");\n    this._shaderSets[4].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"u_baseColor\");\n    this._shaderSets[5].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, \"a_position\");\n    this._shaderSets[5].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, \"a_texCoord\");\n    this._shaderSets[5].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"s_texture0\");\n    this._shaderSets[5].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"s_texture1\");\n    this._shaderSets[5].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_matrix\");\n    this._shaderSets[5].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[5].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[5].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_baseColor\");\n    this._shaderSets[6].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, \"a_position\");\n    this._shaderSets[6].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, \"a_texCoord\");\n    this._shaderSets[6].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"s_texture0\");\n    this._shaderSets[6].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"s_texture1\");\n    this._shaderSets[6].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_matrix\");\n    this._shaderSets[6].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[6].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[6].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_baseColor\");\n    this._shaderSets[7].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, \"a_position\");\n    this._shaderSets[7].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, \"a_texCoord\");\n    this._shaderSets[7].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"s_texture0\");\n    this._shaderSets[7].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"u_matrix\");\n    this._shaderSets[7].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"u_baseColor\");\n    this._shaderSets[8].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, \"a_position\");\n    this._shaderSets[8].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, \"a_texCoord\");\n    this._shaderSets[8].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"s_texture0\");\n    this._shaderSets[8].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"s_texture1\");\n    this._shaderSets[8].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_matrix\");\n    this._shaderSets[8].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[8].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[8].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_baseColor\");\n    this._shaderSets[9].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, \"a_position\");\n    this._shaderSets[9].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, \"a_texCoord\");\n    this._shaderSets[9].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"s_texture0\");\n    this._shaderSets[9].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"s_texture1\");\n    this._shaderSets[9].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_matrix\");\n    this._shaderSets[9].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_clipMatrix\");\n    this._shaderSets[9].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_channelFlag\");\n    this._shaderSets[9].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_baseColor\");\n  }\n  loadShaderProgram(vertexShaderSource, fragmentShaderSource) {\n    let shaderProgram = this.gl.createProgram();\n    let vertShader = this.compileShaderSource(this.gl.VERTEX_SHADER, vertexShaderSource);\n    if (!vertShader) {\n      CubismLogError(\"Vertex shader compile error!\");\n      return 0;\n    }\n    let fragShader = this.compileShaderSource(this.gl.FRAGMENT_SHADER, fragmentShaderSource);\n    if (!fragShader) {\n      CubismLogError(\"Vertex shader compile error!\");\n      return 0;\n    }\n    this.gl.attachShader(shaderProgram, vertShader);\n    this.gl.attachShader(shaderProgram, fragShader);\n    this.gl.linkProgram(shaderProgram);\n    const linkStatus = this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS);\n    if (!linkStatus) {\n      CubismLogError(\"Failed to link program: {0}\", shaderProgram);\n      this.gl.deleteShader(vertShader);\n      this.gl.deleteShader(fragShader);\n      if (shaderProgram) {\n        this.gl.deleteProgram(shaderProgram);\n      }\n      return 0;\n    }\n    this.gl.deleteShader(vertShader);\n    this.gl.deleteShader(fragShader);\n    return shaderProgram;\n  }\n  compileShaderSource(shaderType, shaderSource) {\n    const source = shaderSource;\n    const shader = this.gl.createShader(shaderType);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n    if (!shader) {\n      const log = this.gl.getShaderInfoLog(shader);\n      CubismLogError(\"Shader compile log: {0} \", log);\n    }\n    const status = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n    if (!status) {\n      this.gl.deleteShader(shader);\n      return null;\n    }\n    return shader;\n  }\n  setGl(gl) {\n    this.gl = gl;\n  }\n}\nvar ShaderNames = /* @__PURE__ */ ((ShaderNames2) => {\n  ShaderNames2[ShaderNames2[\"ShaderNames_SetupMask\"] = 0] = \"ShaderNames_SetupMask\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_NormalPremultipliedAlpha\"] = 1] = \"ShaderNames_NormalPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_NormalMaskedPremultipliedAlpha\"] = 2] = \"ShaderNames_NormalMaskedPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\"] = 3] = \"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_AddPremultipliedAlpha\"] = 4] = \"ShaderNames_AddPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_AddMaskedPremultipliedAlpha\"] = 5] = \"ShaderNames_AddMaskedPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_AddMaskedPremultipliedAlphaInverted\"] = 6] = \"ShaderNames_AddMaskedPremultipliedAlphaInverted\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_MultPremultipliedAlpha\"] = 7] = \"ShaderNames_MultPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_MultMaskedPremultipliedAlpha\"] = 8] = \"ShaderNames_MultMaskedPremultipliedAlpha\";\n  ShaderNames2[ShaderNames2[\"ShaderNames_MultMaskedPremultipliedAlphaInverted\"] = 9] = \"ShaderNames_MultMaskedPremultipliedAlphaInverted\";\n  return ShaderNames2;\n})(ShaderNames || {});\nconst vertexShaderSrcSetupMask = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\nconst fragmentShaderSrcsetupMask = \"precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}\";\nconst vertexShaderSrc = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\nconst vertexShaderSrcMasked = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\nconst fragmentShaderSrcPremultipliedAlpha = \"precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}\";\nconst fragmentShaderSrcMaskPremultipliedAlpha = \"precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}\";\nconst fragmentShaderSrcMaskInvertedPremultipliedAlpha = \"precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}\";\nclass CubismRenderer_WebGL extends CubismRenderer {\n  constructor() {\n    super();\n    this._clippingContextBufferForMask = null;\n    this._clippingContextBufferForDraw = null;\n    this._clippingManager = new CubismClippingManager_WebGL();\n    this.firstDraw = true;\n    this._textures = {};\n    this._sortedDrawableIndexList = [];\n    this._bufferData = {\n      vertex: null,\n      uv: null,\n      index: null\n    };\n  }\n  initialize(model) {\n    if (model.isUsingMasking()) {\n      this._clippingManager = new CubismClippingManager_WebGL();\n      this._clippingManager.initialize(model, model.getDrawableCount(), model.getDrawableMasks(), model.getDrawableMaskCounts());\n    }\n    for (let i = model.getDrawableCount() - 1; i >= 0; i--) {\n      this._sortedDrawableIndexList[i] = 0;\n    }\n    super.initialize(model);\n  }\n  bindTexture(modelTextureNo, glTexture) {\n    this._textures[modelTextureNo] = glTexture;\n  }\n  getBindedTextures() {\n    return this._textures;\n  }\n  setClippingMaskBufferSize(size) {\n    this._clippingManager.release();\n    this._clippingManager = new CubismClippingManager_WebGL();\n    this._clippingManager.setClippingMaskBufferSize(size);\n    this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts());\n  }\n  getClippingMaskBufferSize() {\n    return this._clippingManager.getClippingMaskBufferSize();\n  }\n  release() {\n    var _a, _b, _c;\n    const self = this;\n    this._clippingManager.release();\n    self._clippingManager = void 0;\n    (_a = this.gl) == null ? void 0 : _a.deleteBuffer(this._bufferData.vertex);\n    this._bufferData.vertex = null;\n    (_b = this.gl) == null ? void 0 : _b.deleteBuffer(this._bufferData.uv);\n    this._bufferData.uv = null;\n    (_c = this.gl) == null ? void 0 : _c.deleteBuffer(this._bufferData.index);\n    this._bufferData.index = null;\n    self._bufferData = void 0;\n    self._textures = void 0;\n  }\n  doDrawModel() {\n    this.preDraw();\n    if (this._clippingManager != null) {\n      this._clippingManager.setupClippingContext(this.getModel(), this);\n    }\n    const drawableCount = this.getModel().getDrawableCount();\n    const renderOrder = this.getModel().getDrawableRenderOrders();\n    for (let i = 0; i < drawableCount; ++i) {\n      const order = renderOrder[i];\n      this._sortedDrawableIndexList[order] = i;\n    }\n    for (let i = 0; i < drawableCount; ++i) {\n      const drawableIndex = this._sortedDrawableIndexList[i];\n      if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n        continue;\n      }\n      this.setClippingContextBufferForDraw(this._clippingManager != null ? this._clippingManager.getClippingContextListForDraw()[drawableIndex] : null);\n      this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n      this.drawMesh(this.getModel().getDrawableTextureIndices(drawableIndex), this.getModel().getDrawableVertexIndexCount(drawableIndex), this.getModel().getDrawableVertexCount(drawableIndex), this.getModel().getDrawableVertexIndices(drawableIndex), this.getModel().getDrawableVertices(drawableIndex), this.getModel().getDrawableVertexUvs(drawableIndex), this.getModel().getDrawableOpacity(drawableIndex), this.getModel().getDrawableBlendMode(drawableIndex), this.getModel().getDrawableInvertedMaskBit(drawableIndex));\n    }\n  }\n  drawMesh(textureNo, indexCount, vertexCount, indexArray, vertexArray, uvArray, opacity, colorBlendMode, invertedMask) {\n    if (this.isCulling()) {\n      this.gl.enable(this.gl.CULL_FACE);\n    } else {\n      this.gl.disable(this.gl.CULL_FACE);\n    }\n    this.gl.frontFace(this.gl.CCW);\n    const modelColorRGBA = this.getModelColor();\n    if (this.getClippingContextBufferForMask() == null) {\n      modelColorRGBA.A *= opacity;\n      if (this.isPremultipliedAlpha()) {\n        modelColorRGBA.R *= modelColorRGBA.A;\n        modelColorRGBA.G *= modelColorRGBA.A;\n        modelColorRGBA.B *= modelColorRGBA.A;\n      }\n    }\n    let drawtexture = null;\n    if (this._textures[textureNo] != null) {\n      drawtexture = this._textures[textureNo];\n    }\n    CubismShader_WebGL.getInstance().setupShaderProgram(this, drawtexture, vertexCount, vertexArray, indexArray, uvArray, this._bufferData, opacity, colorBlendMode, modelColorRGBA, this.isPremultipliedAlpha(), this.getMvpMatrix(), invertedMask);\n    this.gl.drawElements(this.gl.TRIANGLES, indexCount, this.gl.UNSIGNED_SHORT, 0);\n    this.gl.useProgram(null);\n    this.setClippingContextBufferForDraw(null);\n    this.setClippingContextBufferForMask(null);\n  }\n  static doStaticRelease() {\n    CubismShader_WebGL.deleteInstance();\n  }\n  setRenderState(fbo, viewport) {\n    s_fbo = fbo;\n    s_viewport = viewport;\n  }\n  preDraw() {\n    if (this.firstDraw) {\n      this.firstDraw = false;\n      this._anisortopy = this.gl.getExtension(\"EXT_texture_filter_anisotropic\") || this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\");\n    }\n    this.gl.disable(this.gl.SCISSOR_TEST);\n    this.gl.disable(this.gl.STENCIL_TEST);\n    this.gl.disable(this.gl.DEPTH_TEST);\n    this.gl.frontFace(this.gl.CW);\n    this.gl.enable(this.gl.BLEND);\n    this.gl.colorMask(true, true, true, true);\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n  }\n  setClippingContextBufferForMask(clip) {\n    this._clippingContextBufferForMask = clip;\n  }\n  getClippingContextBufferForMask() {\n    return this._clippingContextBufferForMask;\n  }\n  setClippingContextBufferForDraw(clip) {\n    this._clippingContextBufferForDraw = clip;\n  }\n  getClippingContextBufferForDraw() {\n    return this._clippingContextBufferForDraw;\n  }\n  startUp(gl) {\n    this.gl = gl;\n    this._clippingManager.setGL(gl);\n    CubismShader_WebGL.getInstance().setGl(gl);\n  }\n}\nCubismRenderer.staticRelease = () => {\n  CubismRenderer_WebGL.doStaticRelease();\n};\nclass CubismModelSettingsJson {\n  constructor(json) {\n    this.groups = json.Groups;\n    this.hitAreas = json.HitAreas;\n    this.layout = json.Layout;\n    this.moc = json.FileReferences.Moc;\n    this.expressions = json.FileReferences.Expressions;\n    this.motions = json.FileReferences.Motions;\n    this.textures = json.FileReferences.Textures;\n    this.physics = json.FileReferences.Physics;\n    this.pose = json.FileReferences.Pose;\n  }\n  getEyeBlinkParameters() {\n    var _a, _b;\n    return (_b = (_a = this.groups) == null ? void 0 : _a.find((group) => group.Name === \"EyeBlink\")) == null ? void 0 : _b.Ids;\n  }\n  getLipSyncParameters() {\n    var _a, _b;\n    return (_b = (_a = this.groups) == null ? void 0 : _a.find((group) => group.Name === \"LipSync\")) == null ? void 0 : _b.Ids;\n  }\n}\nconst HitAreaPrefix = \"HitArea\";\nconst HitAreaHead = \"Head\";\nconst HitAreaBody = \"Body\";\nconst PartsIdCore = \"Parts01Core\";\nconst PartsArmPrefix = \"Parts01Arm_\";\nconst PartsArmLPrefix = \"Parts01ArmL_\";\nconst PartsArmRPrefix = \"Parts01ArmR_\";\nconst ParamAngleX = \"ParamAngleX\";\nconst ParamAngleY = \"ParamAngleY\";\nconst ParamAngleZ = \"ParamAngleZ\";\nconst ParamEyeLOpen = \"ParamEyeLOpen\";\nconst ParamEyeLSmile = \"ParamEyeLSmile\";\nconst ParamEyeROpen = \"ParamEyeROpen\";\nconst ParamEyeRSmile = \"ParamEyeRSmile\";\nconst ParamEyeBallX = \"ParamEyeBallX\";\nconst ParamEyeBallY = \"ParamEyeBallY\";\nconst ParamEyeBallForm = \"ParamEyeBallForm\";\nconst ParamBrowLY = \"ParamBrowLY\";\nconst ParamBrowRY = \"ParamBrowRY\";\nconst ParamBrowLX = \"ParamBrowLX\";\nconst ParamBrowRX = \"ParamBrowRX\";\nconst ParamBrowLAngle = \"ParamBrowLAngle\";\nconst ParamBrowRAngle = \"ParamBrowRAngle\";\nconst ParamBrowLForm = \"ParamBrowLForm\";\nconst ParamBrowRForm = \"ParamBrowRForm\";\nconst ParamMouthForm = \"ParamMouthForm\";\nconst ParamMouthOpenY = \"ParamMouthOpenY\";\nconst ParamCheek = \"ParamCheek\";\nconst ParamBodyAngleX = \"ParamBodyAngleX\";\nconst ParamBodyAngleY = \"ParamBodyAngleY\";\nconst ParamBodyAngleZ = \"ParamBodyAngleZ\";\nconst ParamBreath = \"ParamBreath\";\nconst ParamArmLA = \"ParamArmLA\";\nconst ParamArmRA = \"ParamArmRA\";\nconst ParamArmLB = \"ParamArmLB\";\nconst ParamArmRB = \"ParamArmRB\";\nconst ParamHandL = \"ParamHandL\";\nconst ParamHandR = \"ParamHandR\";\nconst ParamHairFront = \"ParamHairFront\";\nconst ParamHairSide = \"ParamHairSide\";\nconst ParamHairBack = \"ParamHairBack\";\nconst ParamHairFluffy = \"ParamHairFluffy\";\nconst ParamShoulderY = \"ParamShoulderY\";\nconst ParamBustX = \"ParamBustX\";\nconst ParamBustY = \"ParamBustY\";\nconst ParamBaseX = \"ParamBaseX\";\nconst ParamBaseY = \"ParamBaseY\";\nconst ParamNONE = \"NONE:\";\nconst LOGICAL_WIDTH = 2;\nconst LOGICAL_HEIGHT = 2;\nvar config;\n((config2) => {\n  config2.LOG_LEVEL_VERBOSE = 0;\n  config2.LOG_LEVEL_WARNING = 1;\n  config2.LOG_LEVEL_ERROR = 2;\n  config2.LOG_LEVEL_NONE = 999;\n  config2.logLevel = config2.LOG_LEVEL_WARNING;\n  config2.sound = true;\n  config2.motionSync = true;\n  config2.motionFadingDuration = 500;\n  config2.idleMotionFadingDuration = 2e3;\n  config2.expressionFadingDuration = 500;\n  config2.preserveExpressionOnMotion = true;\n  config2.cubism4 = CubismConfig;\n})(config || (config = {}));\nconst VERSION = \"0.4.0\";\nconst logger = {\n  log(tag, ...messages) {\n    if (config.logLevel <= config.LOG_LEVEL_VERBOSE) {\n      console.log(`[${tag}]`, ...messages);\n    }\n  },\n  warn(tag, ...messages) {\n    if (config.logLevel <= config.LOG_LEVEL_WARNING) {\n      console.warn(`[${tag}]`, ...messages);\n    }\n  },\n  error(tag, ...messages) {\n    if (config.logLevel <= config.LOG_LEVEL_ERROR) {\n      console.error(`[${tag}]`, ...messages);\n    }\n  }\n};\nfunction clamp(num, lower, upper) {\n  return num < lower ? lower : num > upper ? upper : num;\n}\nfunction rand(min, max) {\n  return Math.random() * (max - min) + min;\n}\nfunction copyProperty(type, from, to, fromKey, toKey) {\n  const value = from[fromKey];\n  if (value !== null && typeof value === type) {\n    to[toKey] = value;\n  }\n}\nfunction copyArray(type, from, to, fromKey, toKey) {\n  const array = from[fromKey];\n  if (Array.isArray(array)) {\n    to[toKey] = array.filter((item) => item !== null && typeof item === type);\n  }\n}\nfunction applyMixins(derivedCtor, baseCtors) {\n  baseCtors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      if (name !== \"constructor\") {\n        Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n      }\n    });\n  });\n}\nfunction folderName(url2) {\n  let lastSlashIndex = url2.lastIndexOf(\"/\");\n  if (lastSlashIndex != -1) {\n    url2 = url2.slice(0, lastSlashIndex);\n  }\n  lastSlashIndex = url2.lastIndexOf(\"/\");\n  if (lastSlashIndex !== -1) {\n    url2 = url2.slice(lastSlashIndex + 1);\n  }\n  return url2;\n}\nfunction remove(array, item) {\n  const index = array.indexOf(item);\n  if (index !== -1) {\n    array.splice(index, 1);\n  }\n}\nclass ExpressionManager extends EventEmitter {\n  constructor(settings, options) {\n    super();\n    this.expressions = [];\n    this.reserveExpressionIndex = -1;\n    this.destroyed = false;\n    this.settings = settings;\n    this.tag = `ExpressionManager(${settings.name})`;\n  }\n  init() {\n    this.defaultExpression = this.createExpression({}, void 0);\n    this.currentExpression = this.defaultExpression;\n    this.stopAllExpressions();\n  }\n  loadExpression(index) {\n    return __async(this, null, function* () {\n      if (!this.definitions[index]) {\n        logger.warn(this.tag, `Undefined expression at [${index}]`);\n        return void 0;\n      }\n      if (this.expressions[index] === null) {\n        logger.warn(this.tag, `Cannot set expression at [${index}] because it's already failed in loading.`);\n        return void 0;\n      }\n      if (this.expressions[index]) {\n        return this.expressions[index];\n      }\n      const expression = yield this._loadExpression(index);\n      this.expressions[index] = expression;\n      return expression;\n    });\n  }\n  _loadExpression(index) {\n    throw new Error(\"Not implemented.\");\n  }\n  setRandomExpression() {\n    return __async(this, null, function* () {\n      if (this.definitions.length) {\n        const availableIndices = [];\n        for (let i = 0; i < this.definitions.length; i++) {\n          if (this.expressions[i] !== null && this.expressions[i] !== this.currentExpression && i !== this.reserveExpressionIndex) {\n            availableIndices.push(i);\n          }\n        }\n        if (availableIndices.length) {\n          const index = Math.floor(Math.random() * availableIndices.length);\n          return this.setExpression(index);\n        }\n      }\n      return false;\n    });\n  }\n  resetExpression() {\n    this._setExpression(this.defaultExpression);\n  }\n  restoreExpression() {\n    this._setExpression(this.currentExpression);\n  }\n  setExpression(index) {\n    return __async(this, null, function* () {\n      if (typeof index !== \"number\") {\n        index = this.getExpressionIndex(index);\n      }\n      if (!(index > -1 && index < this.definitions.length)) {\n        return false;\n      }\n      if (index === this.expressions.indexOf(this.currentExpression)) {\n        return false;\n      }\n      this.reserveExpressionIndex = index;\n      const expression = yield this.loadExpression(index);\n      if (!expression || this.reserveExpressionIndex !== index) {\n        return false;\n      }\n      this.reserveExpressionIndex = -1;\n      this.currentExpression = expression;\n      this._setExpression(expression);\n      return true;\n    });\n  }\n  update(model, now) {\n    if (!this.isFinished()) {\n      return this.updateParameters(model, now);\n    }\n    return false;\n  }\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\");\n    const self = this;\n    self.definitions = void 0;\n    self.expressions = void 0;\n  }\n}\nconst EPSILON = 0.01;\nconst MAX_SPEED = 40 / 7.5;\nconst ACCELERATION_TIME = 1 / (0.15 * 1e3);\nclass FocusController {\n  constructor() {\n    this.targetX = 0;\n    this.targetY = 0;\n    this.x = 0;\n    this.y = 0;\n    this.vx = 0;\n    this.vy = 0;\n  }\n  focus(x, y, instant = false) {\n    this.targetX = clamp(x, -1, 1);\n    this.targetY = clamp(y, -1, 1);\n    if (instant) {\n      this.x = this.targetX;\n      this.y = this.targetY;\n    }\n  }\n  update(dt) {\n    const dx = this.targetX - this.x;\n    const dy = this.targetY - this.y;\n    if (Math.abs(dx) < EPSILON && Math.abs(dy) < EPSILON)\n      return;\n    const d = Math.sqrt(__pow(dx, 2) + __pow(dy, 2));\n    const maxSpeed = MAX_SPEED / (1e3 / dt);\n    let ax = maxSpeed * (dx / d) - this.vx;\n    let ay = maxSpeed * (dy / d) - this.vy;\n    const a = Math.sqrt(__pow(ax, 2) + __pow(ay, 2));\n    const maxA = maxSpeed * ACCELERATION_TIME * dt;\n    if (a > maxA) {\n      ax *= maxA / a;\n      ay *= maxA / a;\n    }\n    this.vx += ax;\n    this.vy += ay;\n    const v = Math.sqrt(__pow(this.vx, 2) + __pow(this.vy, 2));\n    const maxV = 0.5 * (Math.sqrt(__pow(maxA, 2) + 8 * maxA * d) - maxA);\n    if (v > maxV) {\n      this.vx *= maxV / v;\n      this.vy *= maxV / v;\n    }\n    this.x += this.vx;\n    this.y += this.vy;\n  }\n}\nclass ModelSettings {\n  constructor(json) {\n    this.json = json;\n    let url2 = json.url;\n    if (typeof url2 !== \"string\") {\n      throw new TypeError(\"The `url` field in settings JSON must be defined as a string.\");\n    }\n    this.url = url2;\n    this.name = folderName(this.url);\n  }\n  resolveURL(path) {\n    return url.resolve(this.url, path);\n  }\n  replaceFiles(replacer) {\n    this.moc = replacer(this.moc, \"moc\");\n    if (this.pose !== void 0) {\n      this.pose = replacer(this.pose, \"pose\");\n    }\n    if (this.physics !== void 0) {\n      this.physics = replacer(this.physics, \"physics\");\n    }\n    for (let i = 0; i < this.textures.length; i++) {\n      this.textures[i] = replacer(this.textures[i], `textures[${i}]`);\n    }\n  }\n  getDefinedFiles() {\n    const files = [];\n    this.replaceFiles((file) => {\n      files.push(file);\n      return file;\n    });\n    return files;\n  }\n  validateFiles(files) {\n    const assertFileExists = (expectedFile, shouldThrow) => {\n      const actualPath = this.resolveURL(expectedFile);\n      if (!files.includes(actualPath)) {\n        if (shouldThrow) {\n          throw new Error(`File \"${expectedFile}\" is defined in settings, but doesn't exist in given files`);\n        }\n        return false;\n      }\n      return true;\n    };\n    const essentialFiles = [this.moc, ...this.textures];\n    essentialFiles.forEach((texture) => assertFileExists(texture, true));\n    const definedFiles = this.getDefinedFiles();\n    return definedFiles.filter((file) => assertFileExists(file, false));\n  }\n}\nvar MotionPriority = /* @__PURE__ */ ((MotionPriority2) => {\n  MotionPriority2[MotionPriority2[\"NONE\"] = 0] = \"NONE\";\n  MotionPriority2[MotionPriority2[\"IDLE\"] = 1] = \"IDLE\";\n  MotionPriority2[MotionPriority2[\"NORMAL\"] = 2] = \"NORMAL\";\n  MotionPriority2[MotionPriority2[\"FORCE\"] = 3] = \"FORCE\";\n  return MotionPriority2;\n})(MotionPriority || {});\nclass MotionState {\n  constructor() {\n    this.debug = false;\n    this.currentPriority = 0;\n    this.reservePriority = 0;\n  }\n  reserve(group, index, priority) {\n    if (priority <= 0) {\n      logger.log(this.tag, `Cannot start a motion with MotionPriority.NONE.`);\n      return false;\n    }\n    if (group === this.currentGroup && index === this.currentIndex) {\n      logger.log(this.tag, `Motion is already playing.`, this.dump(group, index));\n      return false;\n    }\n    if (group === this.reservedGroup && index === this.reservedIndex || group === this.reservedIdleGroup && index === this.reservedIdleIndex) {\n      logger.log(this.tag, `Motion is already reserved.`, this.dump(group, index));\n      return false;\n    }\n    if (priority === 1) {\n      if (this.currentPriority !== 0) {\n        logger.log(this.tag, `Cannot start idle motion because another motion is playing.`, this.dump(group, index));\n        return false;\n      }\n      if (this.reservedIdleGroup !== void 0) {\n        logger.log(this.tag, `Cannot start idle motion because another idle motion has reserved.`, this.dump(group, index));\n        return false;\n      }\n      this.setReservedIdle(group, index);\n    } else {\n      if (priority < 3) {\n        if (priority <= this.currentPriority) {\n          logger.log(this.tag, \"Cannot start motion because another motion is playing as an equivalent or higher priority.\", this.dump(group, index));\n          return false;\n        }\n        if (priority <= this.reservePriority) {\n          logger.log(this.tag, \"Cannot start motion because another motion has reserved as an equivalent or higher priority.\", this.dump(group, index));\n          return false;\n        }\n      }\n      this.setReserved(group, index, priority);\n    }\n    return true;\n  }\n  start(motion, group, index, priority) {\n    if (priority === 1) {\n      this.setReservedIdle(void 0, void 0);\n      if (this.currentPriority !== 0) {\n        logger.log(this.tag, \"Cannot start idle motion because another motion is playing.\", this.dump(group, index));\n        return false;\n      }\n    } else {\n      if (group !== this.reservedGroup || index !== this.reservedIndex) {\n        logger.log(this.tag, \"Cannot start motion because another motion has taken the place.\", this.dump(group, index));\n        return false;\n      }\n      this.setReserved(void 0, void 0, 0);\n    }\n    if (!motion) {\n      return false;\n    }\n    this.setCurrent(group, index, priority);\n    return true;\n  }\n  complete() {\n    this.setCurrent(void 0, void 0, 0);\n  }\n  setCurrent(group, index, priority) {\n    this.currentPriority = priority;\n    this.currentGroup = group;\n    this.currentIndex = index;\n  }\n  setReserved(group, index, priority) {\n    this.reservePriority = priority;\n    this.reservedGroup = group;\n    this.reservedIndex = index;\n  }\n  setReservedIdle(group, index) {\n    this.reservedIdleGroup = group;\n    this.reservedIdleIndex = index;\n  }\n  isActive(group, index) {\n    return group === this.currentGroup && index === this.currentIndex || group === this.reservedGroup && index === this.reservedIndex || group === this.reservedIdleGroup && index === this.reservedIdleIndex;\n  }\n  reset() {\n    this.setCurrent(void 0, void 0, 0);\n    this.setReserved(void 0, void 0, 0);\n    this.setReservedIdle(void 0, void 0);\n  }\n  shouldRequestIdleMotion() {\n    return this.currentGroup === void 0 && this.reservedIdleGroup === void 0;\n  }\n  shouldOverrideExpression() {\n    return !config.preserveExpressionOnMotion && this.currentPriority > 1;\n  }\n  dump(requestedGroup, requestedIndex) {\n    if (this.debug) {\n      const keys = [\n        \"currentPriority\",\n        \"reservePriority\",\n        \"currentGroup\",\n        \"currentIndex\",\n        \"reservedGroup\",\n        \"reservedIndex\",\n        \"reservedIdleGroup\",\n        \"reservedIdleIndex\"\n      ];\n      return `\n<Requested> group = \"${requestedGroup}\", index = ${requestedIndex}\n` + keys.map((key) => \"[\" + key + \"] \" + this[key]).join(\"\\n\");\n    }\n    return \"\";\n  }\n}\nconst TAG$2 = \"SoundManager\";\nconst VOLUME = 0.5;\nclass SoundManager {\n  static get volume() {\n    return this._volume;\n  }\n  static set volume(value) {\n    this._volume = (value > 1 ? 1 : value < 0 ? 0 : value) || 0;\n    this.audios.forEach((audio) => audio.volume = this._volume);\n  }\n  static add(file, onFinish, onError) {\n    const audio = new Audio(file);\n    audio.volume = this._volume;\n    audio.preload = \"auto\";\n    audio.addEventListener(\"ended\", () => {\n      this.dispose(audio);\n      onFinish == null ? void 0 : onFinish();\n    });\n    audio.addEventListener(\"error\", (e) => {\n      this.dispose(audio);\n      logger.warn(TAG$2, `Error occurred on \"${file}\"`, e.error);\n      onError == null ? void 0 : onError(e.error);\n    });\n    this.audios.push(audio);\n    return audio;\n  }\n  static play(audio) {\n    return new Promise((resolve, reject) => {\n      var _a;\n      (_a = audio.play()) == null ? void 0 : _a.catch((e) => {\n        audio.dispatchEvent(new ErrorEvent(\"error\", { error: e }));\n        reject(e);\n      });\n      if (audio.readyState === audio.HAVE_ENOUGH_DATA) {\n        resolve();\n      } else {\n        audio.addEventListener(\"canplaythrough\", resolve);\n      }\n    });\n  }\n  static dispose(audio) {\n    audio.pause();\n    audio.removeAttribute(\"src\");\n    remove(this.audios, audio);\n  }\n  static destroy() {\n    for (let i = this.audios.length - 1; i >= 0; i--) {\n      this.dispose(this.audios[i]);\n    }\n  }\n}\nSoundManager.audios = [];\nSoundManager._volume = VOLUME;\nvar MotionPreloadStrategy = /* @__PURE__ */ ((MotionPreloadStrategy2) => {\n  MotionPreloadStrategy2[\"ALL\"] = \"ALL\";\n  MotionPreloadStrategy2[\"IDLE\"] = \"IDLE\";\n  MotionPreloadStrategy2[\"NONE\"] = \"NONE\";\n  return MotionPreloadStrategy2;\n})(MotionPreloadStrategy || {});\nclass MotionManager extends EventEmitter {\n  constructor(settings, options) {\n    super();\n    this.motionGroups = {};\n    this.state = new MotionState();\n    this.playing = false;\n    this.destroyed = false;\n    this.settings = settings;\n    this.tag = `MotionManager(${settings.name})`;\n    this.state.tag = this.tag;\n  }\n  init(options) {\n    if (options == null ? void 0 : options.idleMotionGroup) {\n      this.groups.idle = options.idleMotionGroup;\n    }\n    this.setupMotions(options);\n    this.stopAllMotions();\n  }\n  setupMotions(options) {\n    for (const group of Object.keys(this.definitions)) {\n      this.motionGroups[group] = [];\n    }\n    let groups;\n    switch (options == null ? void 0 : options.motionPreload) {\n      case \"NONE\":\n        return;\n      case \"ALL\":\n        groups = Object.keys(this.definitions);\n        break;\n      case \"IDLE\":\n      default:\n        groups = [this.groups.idle];\n        break;\n    }\n    for (const group of groups) {\n      if (this.definitions[group]) {\n        for (let i = 0; i < this.definitions[group].length; i++) {\n          this.loadMotion(group, i).then();\n        }\n      }\n    }\n  }\n  loadMotion(group, index) {\n    return __async(this, null, function* () {\n      var _a;\n      if (!((_a = this.definitions[group]) == null ? void 0 : _a[index])) {\n        logger.warn(this.tag, `Undefined motion at \"${group}\"[${index}]`);\n        return void 0;\n      }\n      if (this.motionGroups[group][index] === null) {\n        logger.warn(this.tag, `Cannot start motion at \"${group}\"[${index}] because it's already failed in loading.`);\n        return void 0;\n      }\n      if (this.motionGroups[group][index]) {\n        return this.motionGroups[group][index];\n      }\n      const motion = yield this._loadMotion(group, index);\n      if (this.destroyed) {\n        return;\n      }\n      this.motionGroups[group][index] = motion != null ? motion : null;\n      return motion;\n    });\n  }\n  _loadMotion(group, index) {\n    throw new Error(\"Not implemented.\");\n  }\n  startMotion(_0, _1) {\n    return __async(this, arguments, function* (group, index, priority = MotionPriority.NORMAL) {\n      var _a;\n      if (!this.state.reserve(group, index, priority)) {\n        return false;\n      }\n      const definition = (_a = this.definitions[group]) == null ? void 0 : _a[index];\n      if (!definition) {\n        return false;\n      }\n      if (this.currentAudio) {\n        SoundManager.dispose(this.currentAudio);\n      }\n      let audio;\n      if (config.sound) {\n        const soundURL = this.getSoundFile(definition);\n        if (soundURL) {\n          try {\n            audio = SoundManager.add(this.settings.resolveURL(soundURL), () => this.currentAudio = void 0, () => this.currentAudio = void 0);\n            this.currentAudio = audio;\n          } catch (e) {\n            logger.warn(this.tag, \"Failed to create audio\", soundURL, e);\n          }\n        }\n      }\n      const motion = yield this.loadMotion(group, index);\n      if (audio) {\n        const readyToPlay = SoundManager.play(audio).catch((e) => logger.warn(this.tag, \"Failed to play audio\", audio.src, e));\n        if (config.motionSync) {\n          yield readyToPlay;\n        }\n      }\n      if (!this.state.start(motion, group, index, priority)) {\n        if (audio) {\n          SoundManager.dispose(audio);\n          this.currentAudio = void 0;\n        }\n        return false;\n      }\n      logger.log(this.tag, \"Start motion:\", this.getMotionName(definition));\n      this.emit(\"motionStart\", group, index, audio);\n      if (this.state.shouldOverrideExpression()) {\n        this.expressionManager && this.expressionManager.resetExpression();\n      }\n      this.playing = true;\n      this._startMotion(motion);\n      return true;\n    });\n  }\n  startRandomMotion(group, priority) {\n    return __async(this, null, function* () {\n      const groupDefs = this.definitions[group];\n      if (groupDefs == null ? void 0 : groupDefs.length) {\n        const availableIndices = [];\n        for (let i = 0; i < groupDefs.length; i++) {\n          if (this.motionGroups[group][i] !== null && !this.state.isActive(group, i)) {\n            availableIndices.push(i);\n          }\n        }\n        if (availableIndices.length) {\n          const index = Math.floor(Math.random() * availableIndices.length);\n          return this.startMotion(group, availableIndices[index], priority);\n        }\n      }\n      return false;\n    });\n  }\n  stopAllMotions() {\n    this._stopAllMotions();\n    this.state.reset();\n    if (this.currentAudio) {\n      SoundManager.dispose(this.currentAudio);\n      this.currentAudio = void 0;\n    }\n  }\n  update(model, now) {\n    var _a;\n    if (this.isFinished()) {\n      if (this.playing) {\n        this.playing = false;\n        this.emit(\"motionFinish\");\n      }\n      if (this.state.shouldOverrideExpression()) {\n        (_a = this.expressionManager) == null ? void 0 : _a.restoreExpression();\n      }\n      this.state.complete();\n      if (this.state.shouldRequestIdleMotion()) {\n        this.startRandomMotion(this.groups.idle, MotionPriority.IDLE);\n      }\n    }\n    return this.updateParameters(model, now);\n  }\n  destroy() {\n    var _a;\n    this.destroyed = true;\n    this.emit(\"destroy\");\n    this.stopAllMotions();\n    (_a = this.expressionManager) == null ? void 0 : _a.destroy();\n    const self = this;\n    self.definitions = void 0;\n    self.motionGroups = void 0;\n  }\n}\nconst tempBounds = { x: 0, y: 0, width: 0, height: 0 };\nclass InternalModel extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    this.focusController = new FocusController();\n    this.originalWidth = 0;\n    this.originalHeight = 0;\n    this.width = 0;\n    this.height = 0;\n    this.localTransform = new Matrix();\n    this.drawingMatrix = new Matrix();\n    this.hitAreas = {};\n    this.textureFlipY = false;\n    this.viewport = [0, 0, 0, 0];\n    this.destroyed = false;\n  }\n  init() {\n    this.setupLayout();\n    this.setupHitAreas();\n  }\n  setupLayout() {\n    const self = this;\n    const size = this.getSize();\n    self.originalWidth = size[0];\n    self.originalHeight = size[1];\n    const layout = Object.assign({\n      width: LOGICAL_WIDTH,\n      height: LOGICAL_HEIGHT\n    }, this.getLayout());\n    this.localTransform.scale(layout.width / LOGICAL_WIDTH, layout.height / LOGICAL_HEIGHT);\n    self.width = this.originalWidth * this.localTransform.a;\n    self.height = this.originalHeight * this.localTransform.d;\n    const offsetX = layout.x !== void 0 && layout.x - layout.width / 2 || layout.centerX !== void 0 && layout.centerX || layout.left !== void 0 && layout.left - layout.width / 2 || layout.right !== void 0 && layout.right + layout.width / 2 || 0;\n    const offsetY = layout.y !== void 0 && layout.y - layout.height / 2 || layout.centerY !== void 0 && layout.centerY || layout.top !== void 0 && layout.top - layout.height / 2 || layout.bottom !== void 0 && layout.bottom + layout.height / 2 || 0;\n    this.localTransform.translate(this.width * offsetX, -this.height * offsetY);\n  }\n  setupHitAreas() {\n    const definitions = this.getHitAreaDefs().filter((hitArea) => hitArea.index >= 0);\n    for (const def of definitions) {\n      this.hitAreas[def.name] = def;\n    }\n  }\n  hitTest(x, y) {\n    return Object.keys(this.hitAreas).filter((hitAreaName) => this.isHit(hitAreaName, x, y));\n  }\n  isHit(hitAreaName, x, y) {\n    if (!this.hitAreas[hitAreaName]) {\n      return false;\n    }\n    const drawIndex = this.hitAreas[hitAreaName].index;\n    const bounds = this.getDrawableBounds(drawIndex, tempBounds);\n    return bounds.x <= x && x <= bounds.x + bounds.width && bounds.y <= y && y <= bounds.y + bounds.height;\n  }\n  getDrawableBounds(index, bounds) {\n    const vertices = this.getDrawableVertices(index);\n    let left = vertices[0];\n    let right = vertices[0];\n    let top = vertices[1];\n    let bottom = vertices[1];\n    for (let i = 0; i < vertices.length; i += 2) {\n      const vx = vertices[i];\n      const vy = vertices[i + 1];\n      left = Math.min(vx, left);\n      right = Math.max(vx, right);\n      top = Math.min(vy, top);\n      bottom = Math.max(vy, bottom);\n    }\n    bounds != null ? bounds : bounds = {};\n    bounds.x = left;\n    bounds.y = top;\n    bounds.width = right - left;\n    bounds.height = bottom - top;\n    return bounds;\n  }\n  updateTransform(transform) {\n    this.drawingMatrix.copyFrom(transform).append(this.localTransform);\n  }\n  update(dt, now) {\n    this.focusController.update(dt);\n  }\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\");\n    this.motionManager.destroy();\n    this.motionManager = void 0;\n  }\n}\nconst TAG$1 = \"XHRLoader\";\nclass NetworkError extends Error {\n  constructor(message, url2, status, aborted = false) {\n    super(message);\n    this.url = url2;\n    this.status = status;\n    this.aborted = aborted;\n  }\n}\nconst _XHRLoader = class {\n  static createXHR(target, url2, type, onload, onerror) {\n    const xhr = new XMLHttpRequest();\n    _XHRLoader.allXhrSet.add(xhr);\n    if (target) {\n      let xhrSet = _XHRLoader.xhrMap.get(target);\n      if (!xhrSet) {\n        xhrSet = /* @__PURE__ */ new Set([xhr]);\n        _XHRLoader.xhrMap.set(target, xhrSet);\n      } else {\n        xhrSet.add(xhr);\n      }\n      if (!target.listeners(\"destroy\").includes(_XHRLoader.cancelXHRs)) {\n        target.once(\"destroy\", _XHRLoader.cancelXHRs);\n      }\n    }\n    xhr.open(\"GET\", url2);\n    xhr.responseType = type;\n    xhr.onload = () => {\n      if ((xhr.status === 200 || xhr.status === 0) && xhr.response) {\n        onload(xhr.response);\n      } else {\n        xhr.onerror();\n      }\n    };\n    xhr.onerror = () => {\n      logger.warn(TAG$1, `Failed to load resource as ${xhr.responseType} (Status ${xhr.status}): ${url2}`);\n      onerror(new NetworkError(\"Network error.\", url2, xhr.status));\n    };\n    xhr.onabort = () => onerror(new NetworkError(\"Aborted.\", url2, xhr.status, true));\n    xhr.onloadend = () => {\n      var _a;\n      _XHRLoader.allXhrSet.delete(xhr);\n      if (target) {\n        (_a = _XHRLoader.xhrMap.get(target)) == null ? void 0 : _a.delete(xhr);\n      }\n    };\n    return xhr;\n  }\n  static cancelXHRs() {\n    var _a;\n    (_a = _XHRLoader.xhrMap.get(this)) == null ? void 0 : _a.forEach((xhr) => {\n      xhr.abort();\n      _XHRLoader.allXhrSet.delete(xhr);\n    });\n    _XHRLoader.xhrMap.delete(this);\n  }\n  static release() {\n    _XHRLoader.allXhrSet.forEach((xhr) => xhr.abort());\n    _XHRLoader.allXhrSet.clear();\n    _XHRLoader.xhrMap = /* @__PURE__ */ new WeakMap();\n  }\n};\nlet XHRLoader = _XHRLoader;\nXHRLoader.xhrMap = /* @__PURE__ */ new WeakMap();\nXHRLoader.allXhrSet = /* @__PURE__ */ new Set();\nXHRLoader.loader = (context, next) => {\n  return new Promise((resolve, reject) => {\n    const xhr = _XHRLoader.createXHR(context.target, context.settings ? context.settings.resolveURL(context.url) : context.url, context.type, (data) => {\n      context.result = data;\n      resolve();\n    }, reject);\n    xhr.send();\n  });\n};\nfunction runMiddlewares(middleware, context) {\n  let index = -1;\n  return dispatch(0);\n  function dispatch(i, err) {\n    if (err)\n      return Promise.reject(err);\n    if (i <= index)\n      return Promise.reject(new Error(\"next() called multiple times\"));\n    index = i;\n    const fn = middleware[i];\n    if (!fn)\n      return Promise.resolve();\n    try {\n      return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n    } catch (err2) {\n      return Promise.reject(err2);\n    }\n  }\n}\nclass Live2DLoader {\n  static load(context) {\n    return runMiddlewares(this.middlewares, context).then(() => context.result);\n  }\n}\nLive2DLoader.middlewares = [XHRLoader.loader];\nfunction createTexture(url2, options = {}) {\n  var _a;\n  const textureOptions = { resourceOptions: { crossorigin: options.crossOrigin } };\n  if (Texture.fromURL) {\n    return Texture.fromURL(url2, textureOptions).catch((e) => {\n      if (e instanceof Error) {\n        throw e;\n      }\n      const err = new Error(\"Texture loading error\");\n      err.event = e;\n      throw err;\n    });\n  }\n  textureOptions.resourceOptions.autoLoad = false;\n  const texture = Texture.from(url2, textureOptions);\n  if (texture.baseTexture.valid) {\n    return Promise.resolve(texture);\n  }\n  const resource = texture.baseTexture.resource;\n  (_a = resource._live2d_load) != null ? _a : resource._live2d_load = new Promise((resolve, reject) => {\n    const errorHandler = (event) => {\n      resource.source.removeEventListener(\"error\", errorHandler);\n      const err = new Error(\"Texture loading error\");\n      err.event = event;\n      reject(err);\n    };\n    resource.source.addEventListener(\"error\", errorHandler);\n    resource.load().then(() => resolve(texture)).catch(errorHandler);\n  });\n  return resource._live2d_load;\n}\nconst TAG = \"Live2DFactory\";\nconst urlToJSON = (context, next) => __async(void 0, null, function* () {\n  if (typeof context.source === \"string\") {\n    const data = yield Live2DLoader.load({\n      url: context.source,\n      type: \"json\",\n      target: context.live2dModel\n    });\n    data.url = context.source;\n    context.source = data;\n    context.live2dModel.emit(\"settingsJSONLoaded\", data);\n  }\n  return next();\n});\nconst jsonToSettings = (context, next) => __async(void 0, null, function* () {\n  if (context.source instanceof ModelSettings) {\n    context.settings = context.source;\n    return next();\n  } else if (typeof context.source === \"object\") {\n    const runtime = Live2DFactory.findRuntime(context.source);\n    if (runtime) {\n      const settings = runtime.createModelSettings(context.source);\n      context.settings = settings;\n      context.live2dModel.emit(\"settingsLoaded\", settings);\n      return next();\n    }\n  }\n  throw new TypeError(\"Unknown settings format.\");\n});\nconst waitUntilReady = (context, next) => {\n  if (context.settings) {\n    const runtime = Live2DFactory.findRuntime(context.settings);\n    if (runtime) {\n      return runtime.ready().then(next);\n    }\n  }\n  return next();\n};\nconst setupOptionals = (context, next) => __async(void 0, null, function* () {\n  yield next();\n  const internalModel = context.internalModel;\n  if (internalModel) {\n    const settings = context.settings;\n    const runtime = Live2DFactory.findRuntime(settings);\n    if (runtime) {\n      const tasks = [];\n      if (settings.pose) {\n        tasks.push(Live2DLoader.load({\n          settings,\n          url: settings.pose,\n          type: \"json\",\n          target: internalModel\n        }).then((data) => {\n          internalModel.pose = runtime.createPose(internalModel.coreModel, data);\n          context.live2dModel.emit(\"poseLoaded\", internalModel.pose);\n        }).catch((e) => {\n          context.live2dModel.emit(\"poseLoadError\", e);\n          logger.warn(TAG, \"Failed to load pose.\", e);\n        }));\n      }\n      if (settings.physics) {\n        tasks.push(Live2DLoader.load({\n          settings,\n          url: settings.physics,\n          type: \"json\",\n          target: internalModel\n        }).then((data) => {\n          internalModel.physics = runtime.createPhysics(internalModel.coreModel, data);\n          context.live2dModel.emit(\"physicsLoaded\", internalModel.physics);\n        }).catch((e) => {\n          context.live2dModel.emit(\"physicsLoadError\", e);\n          logger.warn(TAG, \"Failed to load physics.\", e);\n        }));\n      }\n      if (tasks.length) {\n        yield Promise.all(tasks);\n      }\n    }\n  }\n});\nconst setupEssentials = (context, next) => __async(void 0, null, function* () {\n  if (context.settings) {\n    const live2DModel = context.live2dModel;\n    const textureLoadings = context.settings.textures.map((tex) => {\n      const url2 = context.settings.resolveURL(tex);\n      return createTexture(url2, { crossOrigin: context.options.crossOrigin });\n    });\n    yield next();\n    if (context.internalModel) {\n      live2DModel.internalModel = context.internalModel;\n      live2DModel.emit(\"modelLoaded\", context.internalModel);\n    } else {\n      throw new TypeError(\"Missing internal model.\");\n    }\n    live2DModel.textures = yield Promise.all(textureLoadings);\n    live2DModel.emit(\"textureLoaded\", live2DModel.textures);\n  } else {\n    throw new TypeError(\"Missing settings.\");\n  }\n});\nconst createInternalModel = (context, next) => __async(void 0, null, function* () {\n  const settings = context.settings;\n  if (settings instanceof ModelSettings) {\n    const runtime = Live2DFactory.findRuntime(settings);\n    if (!runtime) {\n      throw new TypeError(\"Unknown model settings.\");\n    }\n    const modelData = yield Live2DLoader.load({\n      settings,\n      url: settings.moc,\n      type: \"arraybuffer\",\n      target: context.live2dModel\n    });\n    if (!runtime.isValidMoc(modelData)) {\n      throw new Error(\"Invalid moc data\");\n    }\n    const coreModel = runtime.createCoreModel(modelData);\n    context.internalModel = runtime.createInternalModel(coreModel, settings, context.options);\n    return next();\n  }\n  throw new TypeError(\"Missing settings.\");\n});\nconst _Live2DFactory = class {\n  static registerRuntime(runtime) {\n    _Live2DFactory.runtimes.push(runtime);\n    _Live2DFactory.runtimes.sort((a, b) => b.version - a.version);\n  }\n  static findRuntime(source) {\n    for (const runtime of _Live2DFactory.runtimes) {\n      if (runtime.test(source)) {\n        return runtime;\n      }\n    }\n  }\n  static setupLive2DModel(live2dModel, source, options) {\n    return __async(this, null, function* () {\n      const textureLoaded = new Promise((resolve) => live2dModel.once(\"textureLoaded\", resolve));\n      const modelLoaded = new Promise((resolve) => live2dModel.once(\"modelLoaded\", resolve));\n      const readyEventEmitted = Promise.all([textureLoaded, modelLoaded]).then(() => live2dModel.emit(\"ready\"));\n      yield runMiddlewares(_Live2DFactory.live2DModelMiddlewares, {\n        live2dModel,\n        source,\n        options: options || {}\n      });\n      yield readyEventEmitted;\n      live2dModel.emit(\"load\");\n    });\n  }\n  static loadMotion(motionManager, group, index) {\n    var _a, _b;\n    const handleError = (e) => motionManager.emit(\"motionLoadError\", group, index, e);\n    try {\n      const definition = (_a = motionManager.definitions[group]) == null ? void 0 : _a[index];\n      if (!definition) {\n        return Promise.resolve(void 0);\n      }\n      if (!motionManager.listeners(\"destroy\").includes(_Live2DFactory.releaseTasks)) {\n        motionManager.once(\"destroy\", _Live2DFactory.releaseTasks);\n      }\n      let tasks = _Live2DFactory.motionTasksMap.get(motionManager);\n      if (!tasks) {\n        tasks = {};\n        _Live2DFactory.motionTasksMap.set(motionManager, tasks);\n      }\n      let taskGroup = tasks[group];\n      if (!taskGroup) {\n        taskGroup = [];\n        tasks[group] = taskGroup;\n      }\n      const path = motionManager.getMotionFile(definition);\n      (_b = taskGroup[index]) != null ? _b : taskGroup[index] = Live2DLoader.load({\n        url: path,\n        settings: motionManager.settings,\n        type: motionManager.motionDataType,\n        target: motionManager\n      }).then((data) => {\n        var _a2;\n        const taskGroup2 = (_a2 = _Live2DFactory.motionTasksMap.get(motionManager)) == null ? void 0 : _a2[group];\n        if (taskGroup2) {\n          delete taskGroup2[index];\n        }\n        const motion = motionManager.createMotion(data, group, definition);\n        motionManager.emit(\"motionLoaded\", group, index, motion);\n        return motion;\n      }).catch((e) => {\n        logger.warn(motionManager.tag, `Failed to load motion: ${path}\n`, e);\n        handleError(e);\n      });\n      return taskGroup[index];\n    } catch (e) {\n      logger.warn(motionManager.tag, `Failed to load motion at \"${group}\"[${index}]\n`, e);\n      handleError(e);\n    }\n    return Promise.resolve(void 0);\n  }\n  static loadExpression(expressionManager, index) {\n    var _a;\n    const handleError = (e) => expressionManager.emit(\"expressionLoadError\", index, e);\n    try {\n      const definition = expressionManager.definitions[index];\n      if (!definition) {\n        return Promise.resolve(void 0);\n      }\n      if (!expressionManager.listeners(\"destroy\").includes(_Live2DFactory.releaseTasks)) {\n        expressionManager.once(\"destroy\", _Live2DFactory.releaseTasks);\n      }\n      let tasks = _Live2DFactory.expressionTasksMap.get(expressionManager);\n      if (!tasks) {\n        tasks = [];\n        _Live2DFactory.expressionTasksMap.set(expressionManager, tasks);\n      }\n      const path = expressionManager.getExpressionFile(definition);\n      (_a = tasks[index]) != null ? _a : tasks[index] = Live2DLoader.load({\n        url: path,\n        settings: expressionManager.settings,\n        type: \"json\",\n        target: expressionManager\n      }).then((data) => {\n        const tasks2 = _Live2DFactory.expressionTasksMap.get(expressionManager);\n        if (tasks2) {\n          delete tasks2[index];\n        }\n        const expression = expressionManager.createExpression(data, definition);\n        expressionManager.emit(\"expressionLoaded\", index, expression);\n        return expression;\n      }).catch((e) => {\n        logger.warn(expressionManager.tag, `Failed to load expression: ${path}\n`, e);\n        handleError(e);\n      });\n      return tasks[index];\n    } catch (e) {\n      logger.warn(expressionManager.tag, `Failed to load expression at [${index}]\n`, e);\n      handleError(e);\n    }\n    return Promise.resolve(void 0);\n  }\n  static releaseTasks() {\n    if (this instanceof MotionManager) {\n      _Live2DFactory.motionTasksMap.delete(this);\n    } else {\n      _Live2DFactory.expressionTasksMap.delete(this);\n    }\n  }\n};\nlet Live2DFactory = _Live2DFactory;\nLive2DFactory.runtimes = [];\nLive2DFactory.urlToJSON = urlToJSON;\nLive2DFactory.jsonToSettings = jsonToSettings;\nLive2DFactory.waitUntilReady = waitUntilReady;\nLive2DFactory.setupOptionals = setupOptionals;\nLive2DFactory.setupEssentials = setupEssentials;\nLive2DFactory.createInternalModel = createInternalModel;\nLive2DFactory.live2DModelMiddlewares = [\n  urlToJSON,\n  jsonToSettings,\n  waitUntilReady,\n  setupOptionals,\n  setupEssentials,\n  createInternalModel\n];\nLive2DFactory.motionTasksMap = /* @__PURE__ */ new WeakMap();\nLive2DFactory.expressionTasksMap = /* @__PURE__ */ new WeakMap();\nMotionManager.prototype[\"_loadMotion\"] = function(group, index) {\n  return Live2DFactory.loadMotion(this, group, index);\n};\nExpressionManager.prototype[\"_loadExpression\"] = function(index) {\n  return Live2DFactory.loadExpression(this, index);\n};\nclass InteractionMixin {\n  constructor() {\n    this._autoInteract = false;\n  }\n  get autoInteract() {\n    return this._autoInteract;\n  }\n  set autoInteract(autoInteract) {\n    if (autoInteract !== this._autoInteract) {\n      if (autoInteract) {\n        this.on(\"pointertap\", onTap, this);\n      } else {\n        this.off(\"pointertap\", onTap, this);\n      }\n      this._autoInteract = autoInteract;\n    }\n  }\n  registerInteraction(manager) {\n    if (manager !== this.interactionManager) {\n      this.unregisterInteraction();\n      if (this._autoInteract && manager) {\n        this.interactionManager = manager;\n        manager.on(\"pointermove\", onPointerMove, this);\n      }\n    }\n  }\n  unregisterInteraction() {\n    var _a;\n    if (this.interactionManager) {\n      (_a = this.interactionManager) == null ? void 0 : _a.off(\"pointermove\", onPointerMove, this);\n      this.interactionManager = void 0;\n    }\n  }\n}\nfunction onTap(event) {\n  this.tap(event.data.global.x, event.data.global.y);\n}\nfunction onPointerMove(event) {\n  this.focus(event.data.global.x, event.data.global.y);\n}\nclass Live2DTransform extends Transform {\n}\nconst tempPoint = new Point();\nconst tempMatrix$1 = new Matrix();\nlet tickerRef;\nclass Live2DModel extends Container {\n  constructor(options) {\n    super();\n    this.tag = \"Live2DModel(uninitialized)\";\n    this.textures = [];\n    this.transform = new Live2DTransform();\n    this.anchor = new ObservablePoint(this.onAnchorChange, this, 0, 0);\n    this.glContextID = -1;\n    this.elapsedTime = performance.now();\n    this.deltaTime = 0;\n    this._autoUpdate = false;\n    this.once(\"modelLoaded\", () => this.init(options));\n  }\n  static from(source, options) {\n    const model = new this(options);\n    return Live2DFactory.setupLive2DModel(model, source, options).then(() => model);\n  }\n  static fromSync(source, options) {\n    const model = new this(options);\n    Live2DFactory.setupLive2DModel(model, source, options).then(options == null ? void 0 : options.onLoad).catch(options == null ? void 0 : options.onError);\n    return model;\n  }\n  static registerTicker(tickerClass) {\n    tickerRef = tickerClass;\n  }\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(autoUpdate) {\n    var _a;\n    tickerRef || (tickerRef = (_a = window.PIXI) == null ? void 0 : _a.Ticker);\n    if (autoUpdate) {\n      if (!this._destroyed) {\n        if (tickerRef) {\n          tickerRef.shared.add(this.onTickerUpdate, this);\n          this._autoUpdate = true;\n        } else {\n          logger.warn(this.tag, \"No Ticker registered, please call Live2DModel.registerTicker(Ticker).\");\n        }\n      }\n    } else {\n      tickerRef == null ? void 0 : tickerRef.shared.remove(this.onTickerUpdate, this);\n      this._autoUpdate = false;\n    }\n  }\n  init(options) {\n    this.tag = `Live2DModel(${this.internalModel.settings.name})`;\n    const _options = Object.assign({\n      autoUpdate: true,\n      autoInteract: true\n    }, options);\n    if (_options.autoInteract) {\n      this.interactive = true;\n    }\n    this.autoInteract = _options.autoInteract;\n    this.autoUpdate = _options.autoUpdate;\n  }\n  onAnchorChange() {\n    this.pivot.set(this.anchor.x * this.internalModel.width, this.anchor.y * this.internalModel.height);\n  }\n  motion(group, index, priority) {\n    return index === void 0 ? this.internalModel.motionManager.startRandomMotion(group, priority) : this.internalModel.motionManager.startMotion(group, index, priority);\n  }\n  expression(id) {\n    if (this.internalModel.motionManager.expressionManager) {\n      return id === void 0 ? this.internalModel.motionManager.expressionManager.setRandomExpression() : this.internalModel.motionManager.expressionManager.setExpression(id);\n    }\n    return Promise.resolve(false);\n  }\n  focus(x, y, instant = false) {\n    tempPoint.x = x;\n    tempPoint.y = y;\n    this.toModelPosition(tempPoint, tempPoint, true);\n    let tx = tempPoint.x / this.internalModel.originalWidth * 2 - 1;\n    let ty = tempPoint.y / this.internalModel.originalHeight * 2 - 1;\n    let radian = Math.atan2(ty, tx);\n    this.internalModel.focusController.focus(Math.cos(radian), -Math.sin(radian), instant);\n  }\n  tap(x, y) {\n    const hitAreaNames = this.hitTest(x, y);\n    if (hitAreaNames.length) {\n      logger.log(this.tag, `Hit`, hitAreaNames);\n      this.emit(\"hit\", hitAreaNames);\n    }\n  }\n  hitTest(x, y) {\n    tempPoint.x = x;\n    tempPoint.y = y;\n    this.toModelPosition(tempPoint, tempPoint);\n    return this.internalModel.hitTest(tempPoint.x, tempPoint.y);\n  }\n  toModelPosition(position, result = position.clone(), skipUpdate) {\n    if (!skipUpdate) {\n      this._recursivePostUpdateTransform();\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.displayObjectUpdateTransform();\n        this.parent = null;\n      } else {\n        this.displayObjectUpdateTransform();\n      }\n    }\n    this.transform.worldTransform.applyInverse(position, result);\n    this.internalModel.localTransform.applyInverse(result, result);\n    return result;\n  }\n  containsPoint(point) {\n    return this.getBounds(true).contains(point.x, point.y);\n  }\n  _calculateBounds() {\n    this._bounds.addFrame(this.transform, 0, 0, this.internalModel.width, this.internalModel.height);\n  }\n  onTickerUpdate() {\n    this.update(tickerRef.shared.deltaMS);\n  }\n  update(dt) {\n    this.deltaTime += dt;\n    this.elapsedTime += dt;\n  }\n  _render(renderer) {\n    this.registerInteraction(renderer.plugins.interaction);\n    renderer.batch.reset();\n    renderer.geometry.reset();\n    renderer.shader.reset();\n    renderer.state.reset();\n    let shouldUpdateTexture = false;\n    if (this.glContextID !== renderer.CONTEXT_UID) {\n      this.glContextID = renderer.CONTEXT_UID;\n      this.internalModel.updateWebGLContext(renderer.gl, this.glContextID);\n      shouldUpdateTexture = true;\n    }\n    for (let i = 0; i < this.textures.length; i++) {\n      const texture = this.textures[i];\n      if (!texture.valid) {\n        continue;\n      }\n      if (shouldUpdateTexture || !texture.baseTexture._glTextures[this.glContextID]) {\n        renderer.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL, this.internalModel.textureFlipY);\n        renderer.texture.bind(texture.baseTexture, 0);\n      }\n      this.internalModel.bindTexture(i, texture.baseTexture._glTextures[this.glContextID].texture);\n      texture.baseTexture.touched = renderer.textureGC.count;\n    }\n    const viewport = renderer.framebuffer.viewport;\n    this.internalModel.viewport = [viewport.x, viewport.y, viewport.width, viewport.height];\n    if (this.deltaTime) {\n      this.internalModel.update(this.deltaTime, this.elapsedTime);\n      this.deltaTime = 0;\n    }\n    const internalTransform = tempMatrix$1.copyFrom(renderer.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);\n    this.internalModel.updateTransform(internalTransform);\n    this.internalModel.draw(renderer.gl);\n    renderer.state.reset();\n    renderer.texture.reset();\n  }\n  destroy(options) {\n    this.emit(\"destroy\");\n    this.autoUpdate = false;\n    this.unregisterInteraction();\n    if (options == null ? void 0 : options.texture) {\n      this.textures.forEach((texture) => texture.destroy(options.baseTexture));\n    }\n    this.internalModel.destroy();\n    super.destroy(options);\n  }\n}\napplyMixins(Live2DModel, [InteractionMixin]);\nconst _FileLoader = class {\n  static resolveURL(settingsURL, filePath) {\n    var _a;\n    const resolved = (_a = _FileLoader.filesMap[settingsURL]) == null ? void 0 : _a[filePath];\n    if (resolved === void 0) {\n      throw new Error(\"Cannot find this file from uploaded files: \" + filePath);\n    }\n    return resolved;\n  }\n  static upload(files, settings) {\n    return __async(this, null, function* () {\n      const fileMap = {};\n      for (const definedFile of settings.getDefinedFiles()) {\n        const actualPath = decodeURI(url.resolve(settings.url, definedFile));\n        const actualFile = files.find((file) => file.webkitRelativePath === actualPath);\n        if (actualFile) {\n          fileMap[definedFile] = URL.createObjectURL(actualFile);\n        }\n      }\n      _FileLoader.filesMap[settings._objectURL] = fileMap;\n    });\n  }\n  static createSettings(files) {\n    return __async(this, null, function* () {\n      const settingsFile = files.find((file) => file.name.endsWith(\"model.json\") || file.name.endsWith(\"model3.json\"));\n      if (!settingsFile) {\n        throw new TypeError(\"Settings file not found\");\n      }\n      const settingsText = yield _FileLoader.readText(settingsFile);\n      const settingsJSON = JSON.parse(settingsText);\n      settingsJSON.url = settingsFile.webkitRelativePath;\n      const runtime = Live2DFactory.findRuntime(settingsJSON);\n      if (!runtime) {\n        throw new Error(\"Unknown settings JSON\");\n      }\n      const settings = runtime.createModelSettings(settingsJSON);\n      settings._objectURL = URL.createObjectURL(settingsFile);\n      return settings;\n    });\n  }\n  static readText(file) {\n    return __async(this, null, function* () {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsText(file, \"utf8\");\n      });\n    });\n  }\n};\nlet FileLoader = _FileLoader;\nFileLoader.filesMap = {};\nFileLoader.factory = (context, next) => __async(void 0, null, function* () {\n  if (Array.isArray(context.source) && context.source[0] instanceof File) {\n    const files = context.source;\n    let settings = files.settings;\n    if (!settings) {\n      settings = yield _FileLoader.createSettings(files);\n    } else if (!settings._objectURL) {\n      throw new Error('\"_objectURL\" must be specified in ModelSettings');\n    }\n    settings.validateFiles(files.map((file) => encodeURI(file.webkitRelativePath)));\n    yield _FileLoader.upload(files, settings);\n    settings.resolveURL = function(url2) {\n      return _FileLoader.resolveURL(this._objectURL, url2);\n    };\n    context.source = settings;\n    context.live2dModel.once(\"modelLoaded\", (internalModel) => {\n      internalModel.once(\"destroy\", function() {\n        const objectURL = this.settings._objectURL;\n        URL.revokeObjectURL(objectURL);\n        if (_FileLoader.filesMap[objectURL]) {\n          for (const resourceObjectURL of Object.values(_FileLoader.filesMap[objectURL])) {\n            URL.revokeObjectURL(resourceObjectURL);\n          }\n        }\n        delete _FileLoader.filesMap[objectURL];\n      });\n    });\n  }\n  return next();\n});\nLive2DFactory.live2DModelMiddlewares.unshift(FileLoader.factory);\nconst _ZipLoader = class {\n  static unzip(reader, settings) {\n    return __async(this, null, function* () {\n      const filePaths = yield _ZipLoader.getFilePaths(reader);\n      const requiredFilePaths = [];\n      for (const definedFile of settings.getDefinedFiles()) {\n        const actualPath = decodeURI(url.resolve(settings.url, definedFile));\n        if (filePaths.includes(actualPath)) {\n          requiredFilePaths.push(actualPath);\n        }\n      }\n      const files = yield _ZipLoader.getFiles(reader, requiredFilePaths);\n      for (let i = 0; i < files.length; i++) {\n        const path = requiredFilePaths[i];\n        const file = files[i];\n        Object.defineProperty(file, \"webkitRelativePath\", {\n          value: path\n        });\n      }\n      return files;\n    });\n  }\n  static createSettings(reader) {\n    return __async(this, null, function* () {\n      const filePaths = yield _ZipLoader.getFilePaths(reader);\n      const settingsFilePath = filePaths.find((path) => path.endsWith(\"model.json\") || path.endsWith(\"model3.json\"));\n      if (!settingsFilePath) {\n        throw new Error(\"Settings file not found\");\n      }\n      const settingsText = yield _ZipLoader.readText(reader, settingsFilePath);\n      if (!settingsText) {\n        throw new Error(\"Empty settings file: \" + settingsFilePath);\n      }\n      const settingsJSON = JSON.parse(settingsText);\n      settingsJSON.url = settingsFilePath;\n      const runtime = Live2DFactory.findRuntime(settingsJSON);\n      if (!runtime) {\n        throw new Error(\"Unknown settings JSON\");\n      }\n      return runtime.createModelSettings(settingsJSON);\n    });\n  }\n  static zipReader(data, url2) {\n    return __async(this, null, function* () {\n      throw new Error(\"Not implemented\");\n    });\n  }\n  static getFilePaths(reader) {\n    return __async(this, null, function* () {\n      throw new Error(\"Not implemented\");\n    });\n  }\n  static getFiles(reader, paths) {\n    return __async(this, null, function* () {\n      throw new Error(\"Not implemented\");\n    });\n  }\n  static readText(reader, path) {\n    return __async(this, null, function* () {\n      throw new Error(\"Not implemented\");\n    });\n  }\n  static releaseReader(reader) {\n  }\n};\nlet ZipLoader = _ZipLoader;\nZipLoader.ZIP_PROTOCOL = \"zip://\";\nZipLoader.uid = 0;\nZipLoader.factory = (context, next) => __async(void 0, null, function* () {\n  const source = context.source;\n  let sourceURL;\n  let zipBlob;\n  let settings;\n  if (typeof source === \"string\" && (source.endsWith(\".zip\") || source.startsWith(_ZipLoader.ZIP_PROTOCOL))) {\n    if (source.startsWith(_ZipLoader.ZIP_PROTOCOL)) {\n      sourceURL = source.slice(_ZipLoader.ZIP_PROTOCOL.length);\n    } else {\n      sourceURL = source;\n    }\n    zipBlob = yield Live2DLoader.load({\n      url: sourceURL,\n      type: \"blob\",\n      target: context.live2dModel\n    });\n  } else if (Array.isArray(source) && source.length === 1 && source[0] instanceof File && source[0].name.endsWith(\".zip\")) {\n    zipBlob = source[0];\n    sourceURL = URL.createObjectURL(zipBlob);\n    settings = source.settings;\n  }\n  if (zipBlob) {\n    if (!zipBlob.size) {\n      throw new Error(\"Empty zip file\");\n    }\n    const reader = yield _ZipLoader.zipReader(zipBlob, sourceURL);\n    if (!settings) {\n      settings = yield _ZipLoader.createSettings(reader);\n    }\n    settings._objectURL = _ZipLoader.ZIP_PROTOCOL + _ZipLoader.uid + \"/\" + settings.url;\n    const files = yield _ZipLoader.unzip(reader, settings);\n    files.settings = settings;\n    context.source = files;\n    if (sourceURL.startsWith(\"blob:\")) {\n      context.live2dModel.once(\"modelLoaded\", (internalModel) => {\n        internalModel.once(\"destroy\", function() {\n          URL.revokeObjectURL(sourceURL);\n        });\n      });\n    }\n    _ZipLoader.releaseReader(reader);\n  }\n  return next();\n});\nLive2DFactory.live2DModelMiddlewares.unshift(ZipLoader.factory);\nif (!window.Live2DCubismCore) {\n  throw new Error(\"Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.\");\n}\nclass Cubism4ExpressionManager extends ExpressionManager {\n  constructor(settings, options) {\n    var _a;\n    super(settings, options);\n    this.queueManager = new CubismMotionQueueManager();\n    this.definitions = (_a = settings.expressions) != null ? _a : [];\n    this.init();\n  }\n  isFinished() {\n    return this.queueManager.isFinished();\n  }\n  getExpressionIndex(name) {\n    return this.definitions.findIndex((def) => def.Name === name);\n  }\n  getExpressionFile(definition) {\n    return definition.File;\n  }\n  createExpression(data, definition) {\n    return CubismExpressionMotion.create(data);\n  }\n  _setExpression(motion) {\n    return this.queueManager.startMotion(motion, false, performance.now());\n  }\n  stopAllExpressions() {\n    this.queueManager.stopAllMotions();\n  }\n  updateParameters(model, now) {\n    return this.queueManager.doUpdateMotion(model, now);\n  }\n}\nclass Cubism4ModelSettings extends ModelSettings {\n  constructor(json) {\n    super(json);\n    if (!Cubism4ModelSettings.isValidJSON(json)) {\n      throw new TypeError(\"Invalid JSON.\");\n    }\n    Object.assign(this, new CubismModelSettingsJson(json));\n  }\n  static isValidJSON(json) {\n    var _a;\n    return !!(json == null ? void 0 : json.FileReferences) && typeof json.FileReferences.Moc === \"string\" && ((_a = json.FileReferences.Textures) == null ? void 0 : _a.length) > 0 && json.FileReferences.Textures.every((item) => typeof item === \"string\");\n  }\n  replaceFiles(replace) {\n    super.replaceFiles(replace);\n    if (this.motions) {\n      for (const [group, motions] of Object.entries(this.motions)) {\n        for (let i = 0; i < motions.length; i++) {\n          motions[i].File = replace(motions[i].File, `motions.${group}[${i}].File`);\n          if (motions[i].Sound !== void 0) {\n            motions[i].Sound = replace(motions[i].Sound, `motions.${group}[${i}].Sound`);\n          }\n        }\n      }\n    }\n    if (this.expressions) {\n      for (let i = 0; i < this.expressions.length; i++) {\n        this.expressions[i].File = replace(this.expressions[i].File, `expressions[${i}].File`);\n      }\n    }\n  }\n}\napplyMixins(Cubism4ModelSettings, [CubismModelSettingsJson]);\nclass Cubism4MotionManager extends MotionManager {\n  constructor(settings, options) {\n    var _a;\n    super(settings, options);\n    this.groups = { idle: \"Idle\" };\n    this.motionDataType = \"json\";\n    this.queueManager = new CubismMotionQueueManager();\n    this.definitions = (_a = settings.motions) != null ? _a : {};\n    this.eyeBlinkIds = settings.getEyeBlinkParameters() || [];\n    this.lipSyncIds = settings.getLipSyncParameters() || [];\n    this.init(options);\n  }\n  init(options) {\n    super.init(options);\n    if (this.settings.expressions) {\n      this.expressionManager = new Cubism4ExpressionManager(this.settings, options);\n    }\n    this.queueManager.setEventCallback((caller, eventValue, customData) => {\n      this.emit(\"motion:\" + eventValue);\n    });\n  }\n  isFinished() {\n    return this.queueManager.isFinished();\n  }\n  _startMotion(motion, onFinish) {\n    motion.setFinishedMotionHandler(onFinish);\n    this.queueManager.stopAllMotions();\n    return this.queueManager.startMotion(motion, false, performance.now());\n  }\n  _stopAllMotions() {\n    this.queueManager.stopAllMotions();\n  }\n  createMotion(data, group, definition) {\n    const motion = CubismMotion.create(data);\n    const json = new CubismMotionJson(data);\n    const defaultFadingDuration = (group === this.groups.idle ? config.idleMotionFadingDuration : config.motionFadingDuration) / 1e3;\n    if (json.getMotionFadeInTime() === void 0) {\n      motion.setFadeInTime(definition.FadeInTime > 0 ? definition.FadeInTime : defaultFadingDuration);\n    }\n    if (json.getMotionFadeOutTime() === void 0) {\n      motion.setFadeOutTime(definition.FadeOutTime > 0 ? definition.FadeOutTime : defaultFadingDuration);\n    }\n    motion.setEffectIds(this.eyeBlinkIds, this.lipSyncIds);\n    return motion;\n  }\n  getMotionFile(definition) {\n    return definition.File;\n  }\n  getMotionName(definition) {\n    return definition.File;\n  }\n  getSoundFile(definition) {\n    return definition.Sound;\n  }\n  updateParameters(model, now) {\n    return this.queueManager.doUpdateMotion(model, now);\n  }\n  destroy() {\n    super.destroy();\n    this.queueManager.release();\n    this.queueManager = void 0;\n  }\n}\nconst tempMatrix = new CubismMatrix44();\nclass Cubism4InternalModel extends InternalModel {\n  constructor(coreModel, settings, options) {\n    super();\n    this.lipSync = true;\n    this.breath = CubismBreath.create();\n    this.renderer = new CubismRenderer_WebGL();\n    this.idParamAngleX = ParamAngleX;\n    this.idParamAngleY = ParamAngleY;\n    this.idParamAngleZ = ParamAngleZ;\n    this.idParamEyeBallX = ParamEyeBallX;\n    this.idParamEyeBallY = ParamEyeBallY;\n    this.idParamBodyAngleX = ParamBodyAngleX;\n    this.idParamBreath = ParamBreath;\n    this.pixelsPerUnit = 1;\n    this.centeringTransform = new Matrix();\n    this.coreModel = coreModel;\n    this.settings = settings;\n    this.motionManager = new Cubism4MotionManager(settings, options);\n    this.init();\n  }\n  init() {\n    var _a;\n    super.init();\n    if (((_a = this.settings.getEyeBlinkParameters()) == null ? void 0 : _a.length) > 0) {\n      this.eyeBlink = CubismEyeBlink.create(this.settings);\n    }\n    this.breath.setParameters([\n      new BreathParameterData(this.idParamAngleX, 0, 15, 6.5345, 0.5),\n      new BreathParameterData(this.idParamAngleY, 0, 8, 3.5345, 0.5),\n      new BreathParameterData(this.idParamAngleZ, 0, 10, 5.5345, 0.5),\n      new BreathParameterData(this.idParamBodyAngleX, 0, 4, 15.5345, 0.5),\n      new BreathParameterData(this.idParamBreath, 0, 0.5, 3.2345, 0.5)\n    ]);\n    this.renderer.initialize(this.coreModel);\n    this.renderer.setIsPremultipliedAlpha(true);\n  }\n  getSize() {\n    return [this.coreModel.getModel().canvasinfo.CanvasWidth, this.coreModel.getModel().canvasinfo.CanvasHeight];\n  }\n  getLayout() {\n    const layout = {};\n    if (this.settings.layout) {\n      for (const key of Object.keys(this.settings.layout)) {\n        const commonKey = key.charAt(0).toLowerCase() + key.slice(1);\n        layout[commonKey] = this.settings.layout[key];\n      }\n    }\n    return layout;\n  }\n  setupLayout() {\n    super.setupLayout();\n    this.pixelsPerUnit = this.coreModel.getModel().canvasinfo.PixelsPerUnit;\n    this.centeringTransform.scale(this.pixelsPerUnit, this.pixelsPerUnit).translate(this.originalWidth / 2, this.originalHeight / 2);\n  }\n  updateWebGLContext(gl, glContextID) {\n    this.renderer.firstDraw = true;\n    this.renderer._bufferData = {\n      vertex: null,\n      uv: null,\n      index: null\n    };\n    this.renderer.startUp(gl);\n    this.renderer._clippingManager._currentFrameNo = glContextID;\n    this.renderer._clippingManager._maskTexture = void 0;\n    CubismShader_WebGL.getInstance()._shaderSets = [];\n  }\n  bindTexture(index, texture) {\n    this.renderer.bindTexture(index, texture);\n  }\n  getHitAreaDefs() {\n    var _a, _b;\n    return (_b = (_a = this.settings.hitAreas) == null ? void 0 : _a.map((hitArea) => ({\n      id: hitArea.Id,\n      name: hitArea.Name,\n      index: this.coreModel.getDrawableIndex(hitArea.Id)\n    }))) != null ? _b : [];\n  }\n  getDrawableIDs() {\n    return this.coreModel.getDrawableIds();\n  }\n  getDrawableIndex(id) {\n    return this.coreModel.getDrawableIndex(id);\n  }\n  getDrawableVertices(drawIndex) {\n    if (typeof drawIndex === \"string\") {\n      drawIndex = this.coreModel.getDrawableIndex(drawIndex);\n      if (drawIndex === -1)\n        throw new TypeError(\"Unable to find drawable ID: \" + drawIndex);\n    }\n    const arr = this.coreModel.getDrawableVertices(drawIndex).slice();\n    for (let i = 0; i < arr.length; i += 2) {\n      arr[i] = arr[i] * this.pixelsPerUnit + this.originalWidth / 2;\n      arr[i + 1] = -arr[i + 1] * this.pixelsPerUnit + this.originalHeight / 2;\n    }\n    return arr;\n  }\n  updateTransform(transform) {\n    this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(transform);\n  }\n  update(dt, now) {\n    var _a, _b, _c, _d;\n    super.update(dt, now);\n    dt /= 1e3;\n    now /= 1e3;\n    const model = this.coreModel;\n    this.emit(\"beforeMotionUpdate\");\n    const motionUpdated = this.motionManager.update(this.coreModel, now);\n    this.emit(\"afterMotionUpdate\");\n    model.saveParameters();\n    (_a = this.motionManager.expressionManager) == null ? void 0 : _a.update(model, now);\n    if (!motionUpdated) {\n      (_b = this.eyeBlink) == null ? void 0 : _b.updateParameters(model, dt);\n    }\n    this.updateFocus();\n    this.updateNaturalMovements(dt * 1e3, now * 1e3);\n    (_c = this.physics) == null ? void 0 : _c.evaluate(model, dt);\n    (_d = this.pose) == null ? void 0 : _d.updateParameters(model, dt);\n    this.emit(\"beforeModelUpdate\");\n    model.update();\n    model.loadParameters();\n  }\n  updateFocus() {\n    this.coreModel.addParameterValueById(this.idParamEyeBallX, this.focusController.x);\n    this.coreModel.addParameterValueById(this.idParamEyeBallY, this.focusController.y);\n    this.coreModel.addParameterValueById(this.idParamAngleX, this.focusController.x * 30);\n    this.coreModel.addParameterValueById(this.idParamAngleY, this.focusController.y * 30);\n    this.coreModel.addParameterValueById(this.idParamAngleZ, this.focusController.x * this.focusController.y * -30);\n    this.coreModel.addParameterValueById(this.idParamBodyAngleX, this.focusController.x * 10);\n  }\n  updateNaturalMovements(dt, now) {\n    var _a;\n    (_a = this.breath) == null ? void 0 : _a.updateParameters(this.coreModel, dt / 1e3);\n  }\n  draw(gl) {\n    const matrix = this.drawingMatrix;\n    const array = tempMatrix.getArray();\n    array[0] = matrix.a;\n    array[1] = matrix.b;\n    array[4] = -matrix.c;\n    array[5] = -matrix.d;\n    array[12] = matrix.tx;\n    array[13] = matrix.ty;\n    this.renderer.setMvpMatrix(tempMatrix);\n    this.renderer.setRenderState(gl.getParameter(gl.FRAMEBUFFER_BINDING), this.viewport);\n    this.renderer.drawModel();\n  }\n  destroy() {\n    super.destroy();\n    this.renderer.release();\n    this.coreModel.release();\n    this.renderer = void 0;\n    this.coreModel = void 0;\n  }\n}\nlet startupPromise;\nlet startupRetries = 20;\nfunction cubism4Ready() {\n  if (CubismFramework.isStarted()) {\n    return Promise.resolve();\n  }\n  startupPromise != null ? startupPromise : startupPromise = new Promise((resolve, reject) => {\n    function startUpWithRetry() {\n      try {\n        startUpCubism4();\n        resolve();\n      } catch (e) {\n        startupRetries--;\n        if (startupRetries < 0) {\n          const err = new Error(\"Failed to start up Cubism 4 framework.\");\n          err.cause = e;\n          reject(err);\n          return;\n        }\n        logger.log(\"Cubism4\", \"Startup failed, retrying 10ms later...\");\n        setTimeout(startUpWithRetry, 10);\n      }\n    }\n    startUpWithRetry();\n  });\n  return startupPromise;\n}\nfunction startUpCubism4(options) {\n  options = Object.assign({\n    logFunction: console.log,\n    loggingLevel: LogLevel.LogLevel_Verbose\n  }, options);\n  CubismFramework.startUp(options);\n  CubismFramework.initialize();\n}\nLive2DFactory.registerRuntime({\n  version: 4,\n  ready: cubism4Ready,\n  test(source) {\n    return source instanceof Cubism4ModelSettings || Cubism4ModelSettings.isValidJSON(source);\n  },\n  isValidMoc(modelData) {\n    if (modelData.byteLength < 4) {\n      return false;\n    }\n    const view = new Int8Array(modelData, 0, 4);\n    return String.fromCharCode(...view) === \"MOC3\";\n  },\n  createModelSettings(json) {\n    return new Cubism4ModelSettings(json);\n  },\n  createCoreModel(data) {\n    const moc = CubismMoc.create(data);\n    try {\n      const model = moc.createModel();\n      model.__moc = moc;\n      return model;\n    } catch (e) {\n      try {\n        moc.release();\n      } catch (ignored) {\n      }\n      throw e;\n    }\n  },\n  createInternalModel(coreModel, settings, options) {\n    const model = new Cubism4InternalModel(coreModel, settings, options);\n    const coreModelWithMoc = coreModel;\n    if (coreModelWithMoc.__moc) {\n      model.__moc = coreModelWithMoc.__moc;\n      delete coreModelWithMoc.__moc;\n      model.once(\"destroy\", releaseMoc);\n    }\n    return model;\n  },\n  createPhysics(coreModel, data) {\n    return CubismPhysics.create(data);\n  },\n  createPose(coreModel, data) {\n    return CubismPose.create(data);\n  }\n});\nfunction releaseMoc() {\n  var _a;\n  (_a = this.__moc) == null ? void 0 : _a.release();\n}\nexport { ACubismMotion, BreathParameterData, CSM_ASSERT, Constant, Cubism4ExpressionManager, Cubism4InternalModel, Cubism4ModelSettings, Cubism4MotionManager, CubismBlendMode, CubismBreath, CubismClippingContext, CubismClippingManager_WebGL, CubismConfig, CubismDebug, CubismExpressionMotion, CubismEyeBlink, CubismFramework, CubismLogDebug, CubismLogError, CubismLogInfo, CubismLogVerbose, CubismLogWarning, CubismMath, CubismMatrix44, CubismMoc, CubismModel, CubismModelSettingsJson, CubismModelUserData, CubismModelUserDataJson, CubismMotion, CubismMotionCurve, CubismMotionCurveTarget, CubismMotionData, CubismMotionEvent, CubismMotionJson, CubismMotionManager, CubismMotionPoint, CubismMotionQueueEntry, CubismMotionQueueManager, CubismMotionSegment, CubismMotionSegmentType, CubismPhysics, CubismPhysicsInput, CubismPhysicsJson, CubismPhysicsOutput, CubismPhysicsParticle, CubismPhysicsRig, CubismPhysicsSource, CubismPhysicsSubRig, CubismPhysicsTargetType, CubismPose, CubismRenderTextureResource, CubismRenderer, CubismRenderer_WebGL, CubismShader_WebGL, CubismTextureColor, CubismVector2, EvaluationOptionFlag, ExpressionBlendType, ExpressionManager, EyeState, FileLoader, FocusController, HitAreaBody, HitAreaHead, HitAreaPrefix, InteractionMixin, InternalModel, InvalidMotionQueueEntryHandleValue, LOGICAL_HEIGHT, LOGICAL_WIDTH, Live2DFactory, Live2DLoader, Live2DModel, Live2DTransform, LogLevel, ModelSettings, MotionManager, MotionPreloadStrategy, MotionPriority, MotionState, Options, ParamAngleX, ParamAngleY, ParamAngleZ, ParamArmLA, ParamArmLB, ParamArmRA, ParamArmRB, ParamBaseX, ParamBaseY, ParamBodyAngleX, ParamBodyAngleY, ParamBodyAngleZ, ParamBreath, ParamBrowLAngle, ParamBrowLForm, ParamBrowLX, ParamBrowLY, ParamBrowRAngle, ParamBrowRForm, ParamBrowRX, ParamBrowRY, ParamBustX, ParamBustY, ParamCheek, ParamEyeBallForm, ParamEyeBallX, ParamEyeBallY, ParamEyeLOpen, ParamEyeLSmile, ParamEyeROpen, ParamEyeRSmile, ParamHairBack, ParamHairFluffy, ParamHairFront, ParamHairSide, ParamHandL, ParamHandR, ParamMouthForm, ParamMouthOpenY, ParamNONE, ParamShoulderY, PartData, PartsArmLPrefix, PartsArmPrefix, PartsArmRPrefix, PartsIdCore, PhysicsJsonEffectiveForces, ShaderNames, SoundManager, VERSION, XHRLoader, ZipLoader, applyMixins, clamp, config, copyArray, copyProperty, csmRect, cubism4Ready, folderName, fragmentShaderSrcMaskInvertedPremultipliedAlpha, fragmentShaderSrcMaskPremultipliedAlpha, fragmentShaderSrcPremultipliedAlpha, fragmentShaderSrcsetupMask, logger, rand, remove, startUpCubism4, vertexShaderSrc, vertexShaderSrcMasked, vertexShaderSrcSetupMask };\n","import * as PIXI from \"pixi.js\";\r\nimport {Live2DModel} from \"@/pixi-live2d-display/dist/cubism4.es\";\r\nimport axios from \"axios\";\r\n\r\nwindow.PIXI = PIXI;\r\n\r\nexport default async function createModel(store,live2d){\r\n//for the modelName\r\n    let modelName= await axios({\r\n      url:\"/get\",\r\n      method:\"get\"\r\n    }).catch( err => {\r\n      console.log(err)\r\n\r\n    }) || {};\r\n    //load the live2d model and add the  model on the state\r\n    store.model4 = await Live2DModel.from(\r\n        \"./model/\"+ (modelName.data || \"mao_pro_t02.model3.json\"),\r\n        { autoUpdate: true });\r\n    // this.set=this.model4.\r\n    //     internalModel.coreModel.\r\n    //     setParameterValueById\r\n\r\n    //set the scale of model\r\n    store.model4.scale.set(store.scale+0)\r\n\r\n    let app = new PIXI.Application({\r\n        view: live2d,\r\n        autoStart: true,\r\n        width:store.model4.width ,\r\n        height:store.model4.height ,\r\n        backgroundAlpha:0\r\n    });\r\n\r\n\r\n\r\n    app.stage.addChild(store.model4);\r\n\r\n\r\n\r\n\r\n//adapt defferent parameterIds of models\r\n   if (store.model4.internalModel.coreModel._parameterIds.includes(\"ParamMouthOpenY\")){\r\n        store.parameterIndex = store.model4.internalModel.coreModel.getParameterIndex(\"ParamMouthOpenY\")\r\n    }\r\n\r\n    if (store.model4.internalModel.coreModel._parameterIds.includes(\"PARAM_MOUTH_OPEN_Y\")){\r\n        store.parameterIndex = store.model4.internalModel.coreModel.getParameterIndex(\"PARAM_MOUTH_OPEN_Y\")\r\n    }\r\n\r\n    if (store.model4.internalModel.coreModel._parameterIds.includes(\"ParamMouthA\")){\r\n        store.parameterIndex = store.model4.internalModel.coreModel.getParameterIndex(\"ParamMouthA\")\r\n    }\r\n\r\n    return app\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","<template>\n  <div id=\"app\" style=\"text-align: center;\">\n    <Drawer\n    ></Drawer>\n    <canvas ref=\"live2d\"\n            @mousedown=\"handleMouseDown\"\n            @mousemove=\"handleMouseMove\"\n            @mouseup=\"handleMouseUp\"\n            style=\"position: relative;\"\n    ></canvas>\n  </div>\n</template>\n\n<script>\n\n\nimport { config } from './pixi-live2d-display';\nimport Drawer from \"@/components/Drawer.vue\";\nimport initWebSocket from \"@/ws\";\nimport {getWav,createAnalyser} from \"@/openMouthY\";\nimport createModel from \"@/loadLive2d\"\n\n\n// log level\nconfig.logLevel = config.LOG_LEVEL_WARNING; // LOG_LEVEL_VERBOSE, LOG_LEVEL_ERROR, LOG_LEVEL_NONE\n\n\n\n\n\nexport default {\n  name:\"app\",\n  components: {Drawer},\n  data(){\n  return{\n\n    isDragging: false,\n    lastX: 0,\n    lastY: 0,\n  }\n  },\n  mounted() {\n    //load live2d model\n    (async () => {\n      this.$store.state.app = await createModel(this.$store.state,this.$refs.live2d)\n      //create analyser\n      createAnalyser()\n    })()\n    //addlistener for the window resizing\n    window.onresize = () => {\n      this.$store.state.model4.x = this.$refs.live2d.clientWidth / 2 -this.$store.state.model4.width / 2\n    }\n\n// put the canvas dom-element in the state\n    this.$store.state.live2d = this.$refs.live2d\n// test the mouthOpen\n//     this.$refs.live2d.onclick=()=>{\n//       getWav({\n//         voice :\"synthesize.wav\",\n//         VType:1\n//       },this.$store.state)\n\n    // }\n\n  }\n  ,\n  created() {\n    // init the ws\n    this.$store.state.websocket = initWebSocket()\n// async add a callback function for the message\n   setTimeout(()=>{\n     this.$store.state.websocket.onmessage =\n         (event) => {\n           let data=JSON.parse(event.data)\n           getWav(data,this.$store.state)\n\n         }\n    })\n  },\n  destroyed() {\n    this.$store.state.websocket.close(); //离开路由之后断开websocket连接\n  },\n  methods:{\n    //add drag\n    handleMouseDown(event) {\n      this.isDragging = true;\n      this.lastX = event.clientX;\n      this.lastY = event.clientY;\n    },\n    handleMouseMove(event) {\n      if (this.isDragging) {\n        const deltaX = event.clientX - this.lastX;\n        const deltaY = event.clientY - this.lastY;\n        this.$refs.live2d.style.left = parseInt(this.$refs.live2d.style.left || 0) + deltaX + \"px\";\n        this.$refs.live2d.style.top = parseInt(this.$refs.live2d.style.top || 0) + deltaY + \"px\";\n        this.lastX = event.clientX;\n        this.lastY = event.clientY;\n      }\n    },\n    handleMouseUp() {\n      this.isDragging = false;\n      this.isDragging = false;\n      this.isDragging = false;\n    }\n\n\n\n},\n\n\n}\n\n\n</script>\n\n<style>\n\nbody {\n  padding: 0;\n  margin: 0;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n  background-color: #01FE00;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n\n\n\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=b72fbc5a&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=b72fbc5a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport {store} from \"core-js/internals/reflect-metadata\";\r\n\r\n\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        websocket :\"\",\r\n        model4:\"\",\r\n        parameterIndex:\"\",\r\n        percentage:localStorage.getItem(\"percentage\") || 60,\r\n        scale:localStorage.getItem(\"scale\") || 1 ,\r\n        app:\"\",\r\n        live2d:\"\"\r\n\r\n    },\r\n    mutations: {\r\n    },\r\n    actions: {\r\n        //increase the percentage when click the button\r\n        increase(context) {\r\n            context.state.percentage += 5;\r\n            if (context.state.percentage > 100) {\r\n                context.state.percentage = 100;\r\n            }\r\n        },\r\n       // decrease the percentage when click the button\r\n        decrease(context) {\r\n            context.state.percentage -= 5;\r\n            if (context.state.percentage <= 1) {\r\n                context.state.percentage = 1;\r\n            }\r\n        },\r\n        //reduce the scale of the live2d model when click the button\r\n        reduce(context,live2d){\r\n        // ensure the scale is a number\r\n            if (typeof localStorage.scale != \"number\" ){\r\n                localStorage.scale = parseFloat(localStorage.scale)\r\n            }\r\n\r\n\r\n            if(context.state.scale<=0.3){\r\n                context.state.scale=0.3\r\n            }\r\n            context.state.scale-=0.1\r\n            context.state.model4.scale.set(context.state.scale) // reset the scale of the model\r\n\r\n            //reset the width and height of canvas\r\n            // live2d.style.width=context.state.width/2\r\n            live2d.width=context.state.model4.width\r\n            live2d.height=context.state.model4.height\r\n            context.state.app.resizeTo=live2d\r\n        },\r\n\r\n        //amplify the scale of the live2d model when click the button\r\n        amplify(context,live2d){\r\n        // ensure the scale is a number\r\n            if (typeof localStorage.scale != \"number\" ){\r\n                localStorage.scale = parseFloat(localStorage.scale)\r\n            }\r\n\r\n            if (context.state.scale>=1.5){\r\n                context.state.scale=1.5\r\n            }\r\n            context.state.scale-=(-0.1)\r\n            context.state.model4.scale.set(context.state.scale) // reset the scale of the model\r\n\r\n            //reset the width and height of canvas\r\n            live2d.width=context.state.model4.width\r\n            live2d.height=context.state.model4.height\r\n            context.state.app.resizeTo=live2d\r\n        },\r\n\r\n\r\n    }\r\n});","import Vue from 'vue'\nimport App from './App.vue'\nimport {Button, ButtonGroup, Drawer, Input, Message, Progress} from \"element-ui\";\n\nimport store from './store'\n\n\nVue.config.productionTip = false\n\n// navigator.mediaDevices.getUserMedia({ audio: true });\nVue.use(Button)\nVue.use(Drawer)\nVue.use(Progress)\nVue.use(ButtonGroup)\nVue.use(Input)\n\n\n\n\nnew Vue({\n  render: h => h(App),\n  beforeCreate() {\n    Vue.prototype.$message = Message;\n  },\n  store,\n\n\n}).$mount('#app');\n\n\n\n\n","var __pow = Math.pow;\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n(function(global, factory) {\n  typeof exports === \"object\" && typeof module !== \"undefined\" ? factory(exports, require(\"@pixi/utils\"), require(\"@pixi/math\"), require(\"@pixi/core\"), require(\"@pixi/display\")) : typeof define === \"function\" && define.amd ? define([\"exports\", \"@pixi/utils\", \"@pixi/math\", \"@pixi/core\", \"@pixi/display\"], factory) : (global = typeof globalThis !== \"undefined\" ? globalThis : global || self, factory((global.PIXI = global.PIXI || {}, global.PIXI.live2d = global.PIXI.live2d || {}), global.PIXI.utils, global.PIXI, global.PIXI, global.PIXI));\n})(this, function(exports2, utils, math, core, display) {\n  \"use strict\";\n  const LOGICAL_WIDTH = 2;\n  const LOGICAL_HEIGHT = 2;\n  var CubismConfig;\n  ((CubismConfig2) => {\n    CubismConfig2.supportMoreMaskDivisions = true;\n    CubismConfig2.setOpacityFromMotion = false;\n  })(CubismConfig || (CubismConfig = {}));\n  exports2.config = void 0;\n  ((config2) => {\n    config2.LOG_LEVEL_VERBOSE = 0;\n    config2.LOG_LEVEL_WARNING = 1;\n    config2.LOG_LEVEL_ERROR = 2;\n    config2.LOG_LEVEL_NONE = 999;\n    config2.logLevel = config2.LOG_LEVEL_WARNING;\n    config2.sound = true;\n    config2.motionSync = true;\n    config2.motionFadingDuration = 500;\n    config2.idleMotionFadingDuration = 2e3;\n    config2.expressionFadingDuration = 500;\n    config2.preserveExpressionOnMotion = true;\n    config2.cubism4 = CubismConfig;\n  })(exports2.config || (exports2.config = {}));\n  const VERSION = \"0.4.0\";\n  const logger = {\n    log(tag, ...messages) {\n      if (exports2.config.logLevel <= exports2.config.LOG_LEVEL_VERBOSE) {\n        console.log(`[${tag}]`, ...messages);\n      }\n    },\n    warn(tag, ...messages) {\n      if (exports2.config.logLevel <= exports2.config.LOG_LEVEL_WARNING) {\n        console.warn(`[${tag}]`, ...messages);\n      }\n    },\n    error(tag, ...messages) {\n      if (exports2.config.logLevel <= exports2.config.LOG_LEVEL_ERROR) {\n        console.error(`[${tag}]`, ...messages);\n      }\n    }\n  };\n  function clamp(num, lower, upper) {\n    return num < lower ? lower : num > upper ? upper : num;\n  }\n  function rand(min, max) {\n    return Math.random() * (max - min) + min;\n  }\n  function copyProperty(type, from, to, fromKey, toKey) {\n    const value = from[fromKey];\n    if (value !== null && typeof value === type) {\n      to[toKey] = value;\n    }\n  }\n  function copyArray(type, from, to, fromKey, toKey) {\n    const array = from[fromKey];\n    if (Array.isArray(array)) {\n      to[toKey] = array.filter((item) => item !== null && typeof item === type);\n    }\n  }\n  function applyMixins(derivedCtor, baseCtors) {\n    baseCtors.forEach((baseCtor) => {\n      Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n        if (name !== \"constructor\") {\n          Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n        }\n      });\n    });\n  }\n  function folderName(url) {\n    let lastSlashIndex = url.lastIndexOf(\"/\");\n    if (lastSlashIndex != -1) {\n      url = url.slice(0, lastSlashIndex);\n    }\n    lastSlashIndex = url.lastIndexOf(\"/\");\n    if (lastSlashIndex !== -1) {\n      url = url.slice(lastSlashIndex + 1);\n    }\n    return url;\n  }\n  function remove(array, item) {\n    const index = array.indexOf(item);\n    if (index !== -1) {\n      array.splice(index, 1);\n    }\n  }\n  class ExpressionManager extends utils.EventEmitter {\n    constructor(settings, options) {\n      super();\n      this.expressions = [];\n      this.reserveExpressionIndex = -1;\n      this.destroyed = false;\n      this.settings = settings;\n      this.tag = `ExpressionManager(${settings.name})`;\n    }\n    init() {\n      this.defaultExpression = this.createExpression({}, void 0);\n      this.currentExpression = this.defaultExpression;\n      this.stopAllExpressions();\n    }\n    loadExpression(index) {\n      return __async(this, null, function* () {\n        if (!this.definitions[index]) {\n          logger.warn(this.tag, `Undefined expression at [${index}]`);\n          return void 0;\n        }\n        if (this.expressions[index] === null) {\n          logger.warn(this.tag, `Cannot set expression at [${index}] because it's already failed in loading.`);\n          return void 0;\n        }\n        if (this.expressions[index]) {\n          return this.expressions[index];\n        }\n        const expression = yield this._loadExpression(index);\n        this.expressions[index] = expression;\n        return expression;\n      });\n    }\n    _loadExpression(index) {\n      throw new Error(\"Not implemented.\");\n    }\n    setRandomExpression() {\n      return __async(this, null, function* () {\n        if (this.definitions.length) {\n          const availableIndices = [];\n          for (let i = 0; i < this.definitions.length; i++) {\n            if (this.expressions[i] !== null && this.expressions[i] !== this.currentExpression && i !== this.reserveExpressionIndex) {\n              availableIndices.push(i);\n            }\n          }\n          if (availableIndices.length) {\n            const index = Math.floor(Math.random() * availableIndices.length);\n            return this.setExpression(index);\n          }\n        }\n        return false;\n      });\n    }\n    resetExpression() {\n      this._setExpression(this.defaultExpression);\n    }\n    restoreExpression() {\n      this._setExpression(this.currentExpression);\n    }\n    setExpression(index) {\n      return __async(this, null, function* () {\n        if (typeof index !== \"number\") {\n          index = this.getExpressionIndex(index);\n        }\n        if (!(index > -1 && index < this.definitions.length)) {\n          return false;\n        }\n        if (index === this.expressions.indexOf(this.currentExpression)) {\n          return false;\n        }\n        this.reserveExpressionIndex = index;\n        const expression = yield this.loadExpression(index);\n        if (!expression || this.reserveExpressionIndex !== index) {\n          return false;\n        }\n        this.reserveExpressionIndex = -1;\n        this.currentExpression = expression;\n        this._setExpression(expression);\n        return true;\n      });\n    }\n    update(model, now) {\n      if (!this.isFinished()) {\n        return this.updateParameters(model, now);\n      }\n      return false;\n    }\n    destroy() {\n      this.destroyed = true;\n      this.emit(\"destroy\");\n      const self2 = this;\n      self2.definitions = void 0;\n      self2.expressions = void 0;\n    }\n  }\n  const EPSILON = 0.01;\n  const MAX_SPEED = 40 / 7.5;\n  const ACCELERATION_TIME = 1 / (0.15 * 1e3);\n  class FocusController {\n    constructor() {\n      this.targetX = 0;\n      this.targetY = 0;\n      this.x = 0;\n      this.y = 0;\n      this.vx = 0;\n      this.vy = 0;\n    }\n    focus(x, y, instant = false) {\n      this.targetX = clamp(x, -1, 1);\n      this.targetY = clamp(y, -1, 1);\n      if (instant) {\n        this.x = this.targetX;\n        this.y = this.targetY;\n      }\n    }\n    update(dt) {\n      const dx = this.targetX - this.x;\n      const dy = this.targetY - this.y;\n      if (Math.abs(dx) < EPSILON && Math.abs(dy) < EPSILON)\n        return;\n      const d = Math.sqrt(__pow(dx, 2) + __pow(dy, 2));\n      const maxSpeed = MAX_SPEED / (1e3 / dt);\n      let ax = maxSpeed * (dx / d) - this.vx;\n      let ay = maxSpeed * (dy / d) - this.vy;\n      const a = Math.sqrt(__pow(ax, 2) + __pow(ay, 2));\n      const maxA = maxSpeed * ACCELERATION_TIME * dt;\n      if (a > maxA) {\n        ax *= maxA / a;\n        ay *= maxA / a;\n      }\n      this.vx += ax;\n      this.vy += ay;\n      const v = Math.sqrt(__pow(this.vx, 2) + __pow(this.vy, 2));\n      const maxV = 0.5 * (Math.sqrt(__pow(maxA, 2) + 8 * maxA * d) - maxA);\n      if (v > maxV) {\n        this.vx *= maxV / v;\n        this.vy *= maxV / v;\n      }\n      this.x += this.vx;\n      this.y += this.vy;\n    }\n  }\n  class ModelSettings {\n    constructor(json) {\n      this.json = json;\n      let url2 = json.url;\n      if (typeof url2 !== \"string\") {\n        throw new TypeError(\"The `url` field in settings JSON must be defined as a string.\");\n      }\n      this.url = url2;\n      this.name = folderName(this.url);\n    }\n    resolveURL(path) {\n      return utils.url.resolve(this.url, path);\n    }\n    replaceFiles(replacer) {\n      this.moc = replacer(this.moc, \"moc\");\n      if (this.pose !== void 0) {\n        this.pose = replacer(this.pose, \"pose\");\n      }\n      if (this.physics !== void 0) {\n        this.physics = replacer(this.physics, \"physics\");\n      }\n      for (let i = 0; i < this.textures.length; i++) {\n        this.textures[i] = replacer(this.textures[i], `textures[${i}]`);\n      }\n    }\n    getDefinedFiles() {\n      const files = [];\n      this.replaceFiles((file) => {\n        files.push(file);\n        return file;\n      });\n      return files;\n    }\n    validateFiles(files) {\n      const assertFileExists = (expectedFile, shouldThrow) => {\n        const actualPath = this.resolveURL(expectedFile);\n        if (!files.includes(actualPath)) {\n          if (shouldThrow) {\n            throw new Error(`File \"${expectedFile}\" is defined in settings, but doesn't exist in given files`);\n          }\n          return false;\n        }\n        return true;\n      };\n      const essentialFiles = [this.moc, ...this.textures];\n      essentialFiles.forEach((texture) => assertFileExists(texture, true));\n      const definedFiles = this.getDefinedFiles();\n      return definedFiles.filter((file) => assertFileExists(file, false));\n    }\n  }\n  var MotionPriority = /* @__PURE__ */ ((MotionPriority2) => {\n    MotionPriority2[MotionPriority2[\"NONE\"] = 0] = \"NONE\";\n    MotionPriority2[MotionPriority2[\"IDLE\"] = 1] = \"IDLE\";\n    MotionPriority2[MotionPriority2[\"NORMAL\"] = 2] = \"NORMAL\";\n    MotionPriority2[MotionPriority2[\"FORCE\"] = 3] = \"FORCE\";\n    return MotionPriority2;\n  })(MotionPriority || {});\n  class MotionState {\n    constructor() {\n      this.debug = false;\n      this.currentPriority = 0;\n      this.reservePriority = 0;\n    }\n    reserve(group, index, priority) {\n      if (priority <= 0) {\n        logger.log(this.tag, `Cannot start a motion with MotionPriority.NONE.`);\n        return false;\n      }\n      if (group === this.currentGroup && index === this.currentIndex) {\n        logger.log(this.tag, `Motion is already playing.`, this.dump(group, index));\n        return false;\n      }\n      if (group === this.reservedGroup && index === this.reservedIndex || group === this.reservedIdleGroup && index === this.reservedIdleIndex) {\n        logger.log(this.tag, `Motion is already reserved.`, this.dump(group, index));\n        return false;\n      }\n      if (priority === 1) {\n        if (this.currentPriority !== 0) {\n          logger.log(this.tag, `Cannot start idle motion because another motion is playing.`, this.dump(group, index));\n          return false;\n        }\n        if (this.reservedIdleGroup !== void 0) {\n          logger.log(this.tag, `Cannot start idle motion because another idle motion has reserved.`, this.dump(group, index));\n          return false;\n        }\n        this.setReservedIdle(group, index);\n      } else {\n        if (priority < 3) {\n          if (priority <= this.currentPriority) {\n            logger.log(this.tag, \"Cannot start motion because another motion is playing as an equivalent or higher priority.\", this.dump(group, index));\n            return false;\n          }\n          if (priority <= this.reservePriority) {\n            logger.log(this.tag, \"Cannot start motion because another motion has reserved as an equivalent or higher priority.\", this.dump(group, index));\n            return false;\n          }\n        }\n        this.setReserved(group, index, priority);\n      }\n      return true;\n    }\n    start(motion, group, index, priority) {\n      if (priority === 1) {\n        this.setReservedIdle(void 0, void 0);\n        if (this.currentPriority !== 0) {\n          logger.log(this.tag, \"Cannot start idle motion because another motion is playing.\", this.dump(group, index));\n          return false;\n        }\n      } else {\n        if (group !== this.reservedGroup || index !== this.reservedIndex) {\n          logger.log(this.tag, \"Cannot start motion because another motion has taken the place.\", this.dump(group, index));\n          return false;\n        }\n        this.setReserved(void 0, void 0, 0);\n      }\n      if (!motion) {\n        return false;\n      }\n      this.setCurrent(group, index, priority);\n      return true;\n    }\n    complete() {\n      this.setCurrent(void 0, void 0, 0);\n    }\n    setCurrent(group, index, priority) {\n      this.currentPriority = priority;\n      this.currentGroup = group;\n      this.currentIndex = index;\n    }\n    setReserved(group, index, priority) {\n      this.reservePriority = priority;\n      this.reservedGroup = group;\n      this.reservedIndex = index;\n    }\n    setReservedIdle(group, index) {\n      this.reservedIdleGroup = group;\n      this.reservedIdleIndex = index;\n    }\n    isActive(group, index) {\n      return group === this.currentGroup && index === this.currentIndex || group === this.reservedGroup && index === this.reservedIndex || group === this.reservedIdleGroup && index === this.reservedIdleIndex;\n    }\n    reset() {\n      this.setCurrent(void 0, void 0, 0);\n      this.setReserved(void 0, void 0, 0);\n      this.setReservedIdle(void 0, void 0);\n    }\n    shouldRequestIdleMotion() {\n      return this.currentGroup === void 0 && this.reservedIdleGroup === void 0;\n    }\n    shouldOverrideExpression() {\n      return !exports2.config.preserveExpressionOnMotion && this.currentPriority > 1;\n    }\n    dump(requestedGroup, requestedIndex) {\n      if (this.debug) {\n        const keys = [\n          \"currentPriority\",\n          \"reservePriority\",\n          \"currentGroup\",\n          \"currentIndex\",\n          \"reservedGroup\",\n          \"reservedIndex\",\n          \"reservedIdleGroup\",\n          \"reservedIdleIndex\"\n        ];\n        return `\n<Requested> group = \"${requestedGroup}\", index = ${requestedIndex}\n` + keys.map((key) => \"[\" + key + \"] \" + this[key]).join(\"\\n\");\n      }\n      return \"\";\n    }\n  }\n  const TAG$2 = \"SoundManager\";\n  const VOLUME = 0.5;\n  class SoundManager {\n    static get volume() {\n      return this._volume;\n    }\n    static set volume(value) {\n      this._volume = (value > 1 ? 1 : value < 0 ? 0 : value) || 0;\n      this.audios.forEach((audio) => audio.volume = this._volume);\n    }\n    static add(file, onFinish, onError) {\n      const audio = new Audio(file);\n      audio.volume = this._volume;\n      audio.preload = \"auto\";\n      audio.addEventListener(\"ended\", () => {\n        this.dispose(audio);\n        onFinish == null ? void 0 : onFinish();\n      });\n      audio.addEventListener(\"error\", (e) => {\n        this.dispose(audio);\n        logger.warn(TAG$2, `Error occurred on \"${file}\"`, e.error);\n        onError == null ? void 0 : onError(e.error);\n      });\n      this.audios.push(audio);\n      return audio;\n    }\n    static play(audio) {\n      return new Promise((resolve, reject) => {\n        var _a;\n        (_a = audio.play()) == null ? void 0 : _a.catch((e) => {\n          audio.dispatchEvent(new ErrorEvent(\"error\", { error: e }));\n          reject(e);\n        });\n        if (audio.readyState === audio.HAVE_ENOUGH_DATA) {\n          resolve();\n        } else {\n          audio.addEventListener(\"canplaythrough\", resolve);\n        }\n      });\n    }\n    static dispose(audio) {\n      audio.pause();\n      audio.removeAttribute(\"src\");\n      remove(this.audios, audio);\n    }\n    static destroy() {\n      for (let i = this.audios.length - 1; i >= 0; i--) {\n        this.dispose(this.audios[i]);\n      }\n    }\n  }\n  SoundManager.audios = [];\n  SoundManager._volume = VOLUME;\n  var MotionPreloadStrategy = /* @__PURE__ */ ((MotionPreloadStrategy2) => {\n    MotionPreloadStrategy2[\"ALL\"] = \"ALL\";\n    MotionPreloadStrategy2[\"IDLE\"] = \"IDLE\";\n    MotionPreloadStrategy2[\"NONE\"] = \"NONE\";\n    return MotionPreloadStrategy2;\n  })(MotionPreloadStrategy || {});\n  class MotionManager extends utils.EventEmitter {\n    constructor(settings, options) {\n      super();\n      this.motionGroups = {};\n      this.state = new MotionState();\n      this.playing = false;\n      this.destroyed = false;\n      this.settings = settings;\n      this.tag = `MotionManager(${settings.name})`;\n      this.state.tag = this.tag;\n    }\n    init(options) {\n      if (options == null ? void 0 : options.idleMotionGroup) {\n        this.groups.idle = options.idleMotionGroup;\n      }\n      this.setupMotions(options);\n      this.stopAllMotions();\n    }\n    setupMotions(options) {\n      for (const group of Object.keys(this.definitions)) {\n        this.motionGroups[group] = [];\n      }\n      let groups;\n      switch (options == null ? void 0 : options.motionPreload) {\n        case \"NONE\":\n          return;\n        case \"ALL\":\n          groups = Object.keys(this.definitions);\n          break;\n        case \"IDLE\":\n        default:\n          groups = [this.groups.idle];\n          break;\n      }\n      for (const group of groups) {\n        if (this.definitions[group]) {\n          for (let i = 0; i < this.definitions[group].length; i++) {\n            this.loadMotion(group, i).then();\n          }\n        }\n      }\n    }\n    loadMotion(group, index) {\n      return __async(this, null, function* () {\n        var _a;\n        if (!((_a = this.definitions[group]) == null ? void 0 : _a[index])) {\n          logger.warn(this.tag, `Undefined motion at \"${group}\"[${index}]`);\n          return void 0;\n        }\n        if (this.motionGroups[group][index] === null) {\n          logger.warn(this.tag, `Cannot start motion at \"${group}\"[${index}] because it's already failed in loading.`);\n          return void 0;\n        }\n        if (this.motionGroups[group][index]) {\n          return this.motionGroups[group][index];\n        }\n        const motion = yield this._loadMotion(group, index);\n        if (this.destroyed) {\n          return;\n        }\n        this.motionGroups[group][index] = motion != null ? motion : null;\n        return motion;\n      });\n    }\n    _loadMotion(group, index) {\n      throw new Error(\"Not implemented.\");\n    }\n    startMotion(_0, _1) {\n      return __async(this, arguments, function* (group, index, priority = MotionPriority.NORMAL) {\n        var _a;\n        if (!this.state.reserve(group, index, priority)) {\n          return false;\n        }\n        const definition = (_a = this.definitions[group]) == null ? void 0 : _a[index];\n        if (!definition) {\n          return false;\n        }\n        if (this.currentAudio) {\n          SoundManager.dispose(this.currentAudio);\n        }\n        let audio;\n        if (exports2.config.sound) {\n          const soundURL = this.getSoundFile(definition);\n          if (soundURL) {\n            try {\n              audio = SoundManager.add(this.settings.resolveURL(soundURL), () => this.currentAudio = void 0, () => this.currentAudio = void 0);\n              this.currentAudio = audio;\n            } catch (e) {\n              logger.warn(this.tag, \"Failed to create audio\", soundURL, e);\n            }\n          }\n        }\n        const motion = yield this.loadMotion(group, index);\n        if (audio) {\n          const readyToPlay = SoundManager.play(audio).catch((e) => logger.warn(this.tag, \"Failed to play audio\", audio.src, e));\n          if (exports2.config.motionSync) {\n            yield readyToPlay;\n          }\n        }\n        if (!this.state.start(motion, group, index, priority)) {\n          if (audio) {\n            SoundManager.dispose(audio);\n            this.currentAudio = void 0;\n          }\n          return false;\n        }\n        logger.log(this.tag, \"Start motion:\", this.getMotionName(definition));\n        this.emit(\"motionStart\", group, index, audio);\n        if (this.state.shouldOverrideExpression()) {\n          this.expressionManager && this.expressionManager.resetExpression();\n        }\n        this.playing = true;\n        this._startMotion(motion);\n        return true;\n      });\n    }\n    startRandomMotion(group, priority) {\n      return __async(this, null, function* () {\n        const groupDefs = this.definitions[group];\n        if (groupDefs == null ? void 0 : groupDefs.length) {\n          const availableIndices = [];\n          for (let i = 0; i < groupDefs.length; i++) {\n            if (this.motionGroups[group][i] !== null && !this.state.isActive(group, i)) {\n              availableIndices.push(i);\n            }\n          }\n          if (availableIndices.length) {\n            const index = Math.floor(Math.random() * availableIndices.length);\n            return this.startMotion(group, availableIndices[index], priority);\n          }\n        }\n        return false;\n      });\n    }\n    stopAllMotions() {\n      this._stopAllMotions();\n      this.state.reset();\n      if (this.currentAudio) {\n        SoundManager.dispose(this.currentAudio);\n        this.currentAudio = void 0;\n      }\n    }\n    update(model, now) {\n      var _a;\n      if (this.isFinished()) {\n        if (this.playing) {\n          this.playing = false;\n          this.emit(\"motionFinish\");\n        }\n        if (this.state.shouldOverrideExpression()) {\n          (_a = this.expressionManager) == null ? void 0 : _a.restoreExpression();\n        }\n        this.state.complete();\n        if (this.state.shouldRequestIdleMotion()) {\n          this.startRandomMotion(this.groups.idle, MotionPriority.IDLE);\n        }\n      }\n      return this.updateParameters(model, now);\n    }\n    destroy() {\n      var _a;\n      this.destroyed = true;\n      this.emit(\"destroy\");\n      this.stopAllMotions();\n      (_a = this.expressionManager) == null ? void 0 : _a.destroy();\n      const self2 = this;\n      self2.definitions = void 0;\n      self2.motionGroups = void 0;\n    }\n  }\n  const tempBounds = { x: 0, y: 0, width: 0, height: 0 };\n  class InternalModel extends utils.EventEmitter {\n    constructor() {\n      super(...arguments);\n      this.focusController = new FocusController();\n      this.originalWidth = 0;\n      this.originalHeight = 0;\n      this.width = 0;\n      this.height = 0;\n      this.localTransform = new math.Matrix();\n      this.drawingMatrix = new math.Matrix();\n      this.hitAreas = {};\n      this.textureFlipY = false;\n      this.viewport = [0, 0, 0, 0];\n      this.destroyed = false;\n    }\n    init() {\n      this.setupLayout();\n      this.setupHitAreas();\n    }\n    setupLayout() {\n      const self2 = this;\n      const size = this.getSize();\n      self2.originalWidth = size[0];\n      self2.originalHeight = size[1];\n      const layout = Object.assign({\n        width: LOGICAL_WIDTH,\n        height: LOGICAL_HEIGHT\n      }, this.getLayout());\n      this.localTransform.scale(layout.width / LOGICAL_WIDTH, layout.height / LOGICAL_HEIGHT);\n      self2.width = this.originalWidth * this.localTransform.a;\n      self2.height = this.originalHeight * this.localTransform.d;\n      const offsetX = layout.x !== void 0 && layout.x - layout.width / 2 || layout.centerX !== void 0 && layout.centerX || layout.left !== void 0 && layout.left - layout.width / 2 || layout.right !== void 0 && layout.right + layout.width / 2 || 0;\n      const offsetY = layout.y !== void 0 && layout.y - layout.height / 2 || layout.centerY !== void 0 && layout.centerY || layout.top !== void 0 && layout.top - layout.height / 2 || layout.bottom !== void 0 && layout.bottom + layout.height / 2 || 0;\n      this.localTransform.translate(this.width * offsetX, -this.height * offsetY);\n    }\n    setupHitAreas() {\n      const definitions = this.getHitAreaDefs().filter((hitArea) => hitArea.index >= 0);\n      for (const def of definitions) {\n        this.hitAreas[def.name] = def;\n      }\n    }\n    hitTest(x, y) {\n      return Object.keys(this.hitAreas).filter((hitAreaName) => this.isHit(hitAreaName, x, y));\n    }\n    isHit(hitAreaName, x, y) {\n      if (!this.hitAreas[hitAreaName]) {\n        return false;\n      }\n      const drawIndex = this.hitAreas[hitAreaName].index;\n      const bounds = this.getDrawableBounds(drawIndex, tempBounds);\n      return bounds.x <= x && x <= bounds.x + bounds.width && bounds.y <= y && y <= bounds.y + bounds.height;\n    }\n    getDrawableBounds(index, bounds) {\n      const vertices = this.getDrawableVertices(index);\n      let left = vertices[0];\n      let right = vertices[0];\n      let top = vertices[1];\n      let bottom = vertices[1];\n      for (let i = 0; i < vertices.length; i += 2) {\n        const vx = vertices[i];\n        const vy = vertices[i + 1];\n        left = Math.min(vx, left);\n        right = Math.max(vx, right);\n        top = Math.min(vy, top);\n        bottom = Math.max(vy, bottom);\n      }\n      bounds != null ? bounds : bounds = {};\n      bounds.x = left;\n      bounds.y = top;\n      bounds.width = right - left;\n      bounds.height = bottom - top;\n      return bounds;\n    }\n    updateTransform(transform) {\n      this.drawingMatrix.copyFrom(transform).append(this.localTransform);\n    }\n    update(dt, now) {\n      this.focusController.update(dt);\n    }\n    destroy() {\n      this.destroyed = true;\n      this.emit(\"destroy\");\n      this.motionManager.destroy();\n      this.motionManager = void 0;\n    }\n  }\n  const TAG$1 = \"XHRLoader\";\n  class NetworkError extends Error {\n    constructor(message, url, status, aborted = false) {\n      super(message);\n      this.url = url;\n      this.status = status;\n      this.aborted = aborted;\n    }\n  }\n  const _XHRLoader = class {\n    static createXHR(target, url, type, onload, onerror) {\n      const xhr = new XMLHttpRequest();\n      _XHRLoader.allXhrSet.add(xhr);\n      if (target) {\n        let xhrSet = _XHRLoader.xhrMap.get(target);\n        if (!xhrSet) {\n          xhrSet = /* @__PURE__ */ new Set([xhr]);\n          _XHRLoader.xhrMap.set(target, xhrSet);\n        } else {\n          xhrSet.add(xhr);\n        }\n        if (!target.listeners(\"destroy\").includes(_XHRLoader.cancelXHRs)) {\n          target.once(\"destroy\", _XHRLoader.cancelXHRs);\n        }\n      }\n      xhr.open(\"GET\", url);\n      xhr.responseType = type;\n      xhr.onload = () => {\n        if ((xhr.status === 200 || xhr.status === 0) && xhr.response) {\n          onload(xhr.response);\n        } else {\n          xhr.onerror();\n        }\n      };\n      xhr.onerror = () => {\n        logger.warn(TAG$1, `Failed to load resource as ${xhr.responseType} (Status ${xhr.status}): ${url}`);\n        onerror(new NetworkError(\"Network error.\", url, xhr.status));\n      };\n      xhr.onabort = () => onerror(new NetworkError(\"Aborted.\", url, xhr.status, true));\n      xhr.onloadend = () => {\n        var _a;\n        _XHRLoader.allXhrSet.delete(xhr);\n        if (target) {\n          (_a = _XHRLoader.xhrMap.get(target)) == null ? void 0 : _a.delete(xhr);\n        }\n      };\n      return xhr;\n    }\n    static cancelXHRs() {\n      var _a;\n      (_a = _XHRLoader.xhrMap.get(this)) == null ? void 0 : _a.forEach((xhr) => {\n        xhr.abort();\n        _XHRLoader.allXhrSet.delete(xhr);\n      });\n      _XHRLoader.xhrMap.delete(this);\n    }\n    static release() {\n      _XHRLoader.allXhrSet.forEach((xhr) => xhr.abort());\n      _XHRLoader.allXhrSet.clear();\n      _XHRLoader.xhrMap = /* @__PURE__ */ new WeakMap();\n    }\n  };\n  let XHRLoader = _XHRLoader;\n  XHRLoader.xhrMap = /* @__PURE__ */ new WeakMap();\n  XHRLoader.allXhrSet = /* @__PURE__ */ new Set();\n  XHRLoader.loader = (context, next) => {\n    return new Promise((resolve, reject) => {\n      const xhr = _XHRLoader.createXHR(context.target, context.settings ? context.settings.resolveURL(context.url) : context.url, context.type, (data) => {\n        context.result = data;\n        resolve();\n      }, reject);\n      xhr.send();\n    });\n  };\n  function runMiddlewares(middleware, context) {\n    let index = -1;\n    return dispatch(0);\n    function dispatch(i, err) {\n      if (err)\n        return Promise.reject(err);\n      if (i <= index)\n        return Promise.reject(new Error(\"next() called multiple times\"));\n      index = i;\n      const fn = middleware[i];\n      if (!fn)\n        return Promise.resolve();\n      try {\n        return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n      } catch (err2) {\n        return Promise.reject(err2);\n      }\n    }\n  }\n  class Live2DLoader {\n    static load(context) {\n      return runMiddlewares(this.middlewares, context).then(() => context.result);\n    }\n  }\n  Live2DLoader.middlewares = [XHRLoader.loader];\n  function createTexture(url, options = {}) {\n    var _a;\n    const textureOptions = { resourceOptions: { crossorigin: options.crossOrigin } };\n    if (core.Texture.fromURL) {\n      return core.Texture.fromURL(url, textureOptions).catch((e) => {\n        if (e instanceof Error) {\n          throw e;\n        }\n        const err = new Error(\"Texture loading error\");\n        err.event = e;\n        throw err;\n      });\n    }\n    textureOptions.resourceOptions.autoLoad = false;\n    const texture = core.Texture.from(url, textureOptions);\n    if (texture.baseTexture.valid) {\n      return Promise.resolve(texture);\n    }\n    const resource = texture.baseTexture.resource;\n    (_a = resource._live2d_load) != null ? _a : resource._live2d_load = new Promise((resolve, reject) => {\n      const errorHandler = (event) => {\n        resource.source.removeEventListener(\"error\", errorHandler);\n        const err = new Error(\"Texture loading error\");\n        err.event = event;\n        reject(err);\n      };\n      resource.source.addEventListener(\"error\", errorHandler);\n      resource.load().then(() => resolve(texture)).catch(errorHandler);\n    });\n    return resource._live2d_load;\n  }\n  const TAG = \"Live2DFactory\";\n  const urlToJSON = (context, next) => __async(this, null, function* () {\n    if (typeof context.source === \"string\") {\n      const data = yield Live2DLoader.load({\n        url: context.source,\n        type: \"json\",\n        target: context.live2dModel\n      });\n      data.url = context.source;\n      context.source = data;\n      context.live2dModel.emit(\"settingsJSONLoaded\", data);\n    }\n    return next();\n  });\n  const jsonToSettings = (context, next) => __async(this, null, function* () {\n    if (context.source instanceof ModelSettings) {\n      context.settings = context.source;\n      return next();\n    } else if (typeof context.source === \"object\") {\n      const runtime = Live2DFactory.findRuntime(context.source);\n      if (runtime) {\n        const settings = runtime.createModelSettings(context.source);\n        context.settings = settings;\n        context.live2dModel.emit(\"settingsLoaded\", settings);\n        return next();\n      }\n    }\n    throw new TypeError(\"Unknown settings format.\");\n  });\n  const waitUntilReady = (context, next) => {\n    if (context.settings) {\n      const runtime = Live2DFactory.findRuntime(context.settings);\n      if (runtime) {\n        return runtime.ready().then(next);\n      }\n    }\n    return next();\n  };\n  const setupOptionals = (context, next) => __async(this, null, function* () {\n    yield next();\n    const internalModel = context.internalModel;\n    if (internalModel) {\n      const settings = context.settings;\n      const runtime = Live2DFactory.findRuntime(settings);\n      if (runtime) {\n        const tasks = [];\n        if (settings.pose) {\n          tasks.push(Live2DLoader.load({\n            settings,\n            url: settings.pose,\n            type: \"json\",\n            target: internalModel\n          }).then((data) => {\n            internalModel.pose = runtime.createPose(internalModel.coreModel, data);\n            context.live2dModel.emit(\"poseLoaded\", internalModel.pose);\n          }).catch((e) => {\n            context.live2dModel.emit(\"poseLoadError\", e);\n            logger.warn(TAG, \"Failed to load pose.\", e);\n          }));\n        }\n        if (settings.physics) {\n          tasks.push(Live2DLoader.load({\n            settings,\n            url: settings.physics,\n            type: \"json\",\n            target: internalModel\n          }).then((data) => {\n            internalModel.physics = runtime.createPhysics(internalModel.coreModel, data);\n            context.live2dModel.emit(\"physicsLoaded\", internalModel.physics);\n          }).catch((e) => {\n            context.live2dModel.emit(\"physicsLoadError\", e);\n            logger.warn(TAG, \"Failed to load physics.\", e);\n          }));\n        }\n        if (tasks.length) {\n          yield Promise.all(tasks);\n        }\n      }\n    }\n  });\n  const setupEssentials = (context, next) => __async(this, null, function* () {\n    if (context.settings) {\n      const live2DModel = context.live2dModel;\n      const textureLoadings = context.settings.textures.map((tex) => {\n        const url = context.settings.resolveURL(tex);\n        return createTexture(url, { crossOrigin: context.options.crossOrigin });\n      });\n      yield next();\n      if (context.internalModel) {\n        live2DModel.internalModel = context.internalModel;\n        live2DModel.emit(\"modelLoaded\", context.internalModel);\n      } else {\n        throw new TypeError(\"Missing internal model.\");\n      }\n      live2DModel.textures = yield Promise.all(textureLoadings);\n      live2DModel.emit(\"textureLoaded\", live2DModel.textures);\n    } else {\n      throw new TypeError(\"Missing settings.\");\n    }\n  });\n  const createInternalModel = (context, next) => __async(this, null, function* () {\n    const settings = context.settings;\n    if (settings instanceof ModelSettings) {\n      const runtime = Live2DFactory.findRuntime(settings);\n      if (!runtime) {\n        throw new TypeError(\"Unknown model settings.\");\n      }\n      const modelData = yield Live2DLoader.load({\n        settings,\n        url: settings.moc,\n        type: \"arraybuffer\",\n        target: context.live2dModel\n      });\n      if (!runtime.isValidMoc(modelData)) {\n        throw new Error(\"Invalid moc data\");\n      }\n      const coreModel = runtime.createCoreModel(modelData);\n      context.internalModel = runtime.createInternalModel(coreModel, settings, context.options);\n      return next();\n    }\n    throw new TypeError(\"Missing settings.\");\n  });\n  const _Live2DFactory = class {\n    static registerRuntime(runtime) {\n      _Live2DFactory.runtimes.push(runtime);\n      _Live2DFactory.runtimes.sort((a, b) => b.version - a.version);\n    }\n    static findRuntime(source) {\n      for (const runtime of _Live2DFactory.runtimes) {\n        if (runtime.test(source)) {\n          return runtime;\n        }\n      }\n    }\n    static setupLive2DModel(live2dModel, source, options) {\n      return __async(this, null, function* () {\n        const textureLoaded = new Promise((resolve) => live2dModel.once(\"textureLoaded\", resolve));\n        const modelLoaded = new Promise((resolve) => live2dModel.once(\"modelLoaded\", resolve));\n        const readyEventEmitted = Promise.all([textureLoaded, modelLoaded]).then(() => live2dModel.emit(\"ready\"));\n        yield runMiddlewares(_Live2DFactory.live2DModelMiddlewares, {\n          live2dModel,\n          source,\n          options: options || {}\n        });\n        yield readyEventEmitted;\n        live2dModel.emit(\"load\");\n      });\n    }\n    static loadMotion(motionManager, group, index) {\n      var _a, _b;\n      const handleError = (e) => motionManager.emit(\"motionLoadError\", group, index, e);\n      try {\n        const definition = (_a = motionManager.definitions[group]) == null ? void 0 : _a[index];\n        if (!definition) {\n          return Promise.resolve(void 0);\n        }\n        if (!motionManager.listeners(\"destroy\").includes(_Live2DFactory.releaseTasks)) {\n          motionManager.once(\"destroy\", _Live2DFactory.releaseTasks);\n        }\n        let tasks = _Live2DFactory.motionTasksMap.get(motionManager);\n        if (!tasks) {\n          tasks = {};\n          _Live2DFactory.motionTasksMap.set(motionManager, tasks);\n        }\n        let taskGroup = tasks[group];\n        if (!taskGroup) {\n          taskGroup = [];\n          tasks[group] = taskGroup;\n        }\n        const path = motionManager.getMotionFile(definition);\n        (_b = taskGroup[index]) != null ? _b : taskGroup[index] = Live2DLoader.load({\n          url: path,\n          settings: motionManager.settings,\n          type: motionManager.motionDataType,\n          target: motionManager\n        }).then((data) => {\n          var _a2;\n          const taskGroup2 = (_a2 = _Live2DFactory.motionTasksMap.get(motionManager)) == null ? void 0 : _a2[group];\n          if (taskGroup2) {\n            delete taskGroup2[index];\n          }\n          const motion = motionManager.createMotion(data, group, definition);\n          motionManager.emit(\"motionLoaded\", group, index, motion);\n          return motion;\n        }).catch((e) => {\n          logger.warn(motionManager.tag, `Failed to load motion: ${path}\n`, e);\n          handleError(e);\n        });\n        return taskGroup[index];\n      } catch (e) {\n        logger.warn(motionManager.tag, `Failed to load motion at \"${group}\"[${index}]\n`, e);\n        handleError(e);\n      }\n      return Promise.resolve(void 0);\n    }\n    static loadExpression(expressionManager, index) {\n      var _a;\n      const handleError = (e) => expressionManager.emit(\"expressionLoadError\", index, e);\n      try {\n        const definition = expressionManager.definitions[index];\n        if (!definition) {\n          return Promise.resolve(void 0);\n        }\n        if (!expressionManager.listeners(\"destroy\").includes(_Live2DFactory.releaseTasks)) {\n          expressionManager.once(\"destroy\", _Live2DFactory.releaseTasks);\n        }\n        let tasks = _Live2DFactory.expressionTasksMap.get(expressionManager);\n        if (!tasks) {\n          tasks = [];\n          _Live2DFactory.expressionTasksMap.set(expressionManager, tasks);\n        }\n        const path = expressionManager.getExpressionFile(definition);\n        (_a = tasks[index]) != null ? _a : tasks[index] = Live2DLoader.load({\n          url: path,\n          settings: expressionManager.settings,\n          type: \"json\",\n          target: expressionManager\n        }).then((data) => {\n          const tasks2 = _Live2DFactory.expressionTasksMap.get(expressionManager);\n          if (tasks2) {\n            delete tasks2[index];\n          }\n          const expression = expressionManager.createExpression(data, definition);\n          expressionManager.emit(\"expressionLoaded\", index, expression);\n          return expression;\n        }).catch((e) => {\n          logger.warn(expressionManager.tag, `Failed to load expression: ${path}\n`, e);\n          handleError(e);\n        });\n        return tasks[index];\n      } catch (e) {\n        logger.warn(expressionManager.tag, `Failed to load expression at [${index}]\n`, e);\n        handleError(e);\n      }\n      return Promise.resolve(void 0);\n    }\n    static releaseTasks() {\n      if (this instanceof MotionManager) {\n        _Live2DFactory.motionTasksMap.delete(this);\n      } else {\n        _Live2DFactory.expressionTasksMap.delete(this);\n      }\n    }\n  };\n  let Live2DFactory = _Live2DFactory;\n  Live2DFactory.runtimes = [];\n  Live2DFactory.urlToJSON = urlToJSON;\n  Live2DFactory.jsonToSettings = jsonToSettings;\n  Live2DFactory.waitUntilReady = waitUntilReady;\n  Live2DFactory.setupOptionals = setupOptionals;\n  Live2DFactory.setupEssentials = setupEssentials;\n  Live2DFactory.createInternalModel = createInternalModel;\n  Live2DFactory.live2DModelMiddlewares = [\n    urlToJSON,\n    jsonToSettings,\n    waitUntilReady,\n    setupOptionals,\n    setupEssentials,\n    createInternalModel\n  ];\n  Live2DFactory.motionTasksMap = /* @__PURE__ */ new WeakMap();\n  Live2DFactory.expressionTasksMap = /* @__PURE__ */ new WeakMap();\n  MotionManager.prototype[\"_loadMotion\"] = function(group, index) {\n    return Live2DFactory.loadMotion(this, group, index);\n  };\n  ExpressionManager.prototype[\"_loadExpression\"] = function(index) {\n    return Live2DFactory.loadExpression(this, index);\n  };\n  class InteractionMixin {\n    constructor() {\n      this._autoInteract = false;\n    }\n    get autoInteract() {\n      return this._autoInteract;\n    }\n    set autoInteract(autoInteract) {\n      if (autoInteract !== this._autoInteract) {\n        if (autoInteract) {\n          this.on(\"pointertap\", onTap, this);\n        } else {\n          this.off(\"pointertap\", onTap, this);\n        }\n        this._autoInteract = autoInteract;\n      }\n    }\n    registerInteraction(manager) {\n      if (manager !== this.interactionManager) {\n        this.unregisterInteraction();\n        if (this._autoInteract && manager) {\n          this.interactionManager = manager;\n          manager.on(\"pointermove\", onPointerMove, this);\n        }\n      }\n    }\n    unregisterInteraction() {\n      var _a;\n      if (this.interactionManager) {\n        (_a = this.interactionManager) == null ? void 0 : _a.off(\"pointermove\", onPointerMove, this);\n        this.interactionManager = void 0;\n      }\n    }\n  }\n  function onTap(event) {\n    this.tap(event.data.global.x, event.data.global.y);\n  }\n  function onPointerMove(event) {\n    this.focus(event.data.global.x, event.data.global.y);\n  }\n  class Live2DTransform extends math.Transform {\n  }\n  const tempPoint = new math.Point();\n  const tempMatrix$1 = new math.Matrix();\n  let tickerRef;\n  class Live2DModel extends display.Container {\n    constructor(options) {\n      super();\n      this.tag = \"Live2DModel(uninitialized)\";\n      this.textures = [];\n      this.transform = new Live2DTransform();\n      this.anchor = new math.ObservablePoint(this.onAnchorChange, this, 0, 0);\n      this.glContextID = -1;\n      this.elapsedTime = performance.now();\n      this.deltaTime = 0;\n      this._autoUpdate = false;\n      this.once(\"modelLoaded\", () => this.init(options));\n    }\n    static from(source, options) {\n      const model = new this(options);\n      return Live2DFactory.setupLive2DModel(model, source, options).then(() => model);\n    }\n    static fromSync(source, options) {\n      const model = new this(options);\n      Live2DFactory.setupLive2DModel(model, source, options).then(options == null ? void 0 : options.onLoad).catch(options == null ? void 0 : options.onError);\n      return model;\n    }\n    static registerTicker(tickerClass) {\n      tickerRef = tickerClass;\n    }\n    get autoUpdate() {\n      return this._autoUpdate;\n    }\n    set autoUpdate(autoUpdate) {\n      var _a;\n      tickerRef || (tickerRef = (_a = window.PIXI) == null ? void 0 : _a.Ticker);\n      if (autoUpdate) {\n        if (!this._destroyed) {\n          if (tickerRef) {\n            tickerRef.shared.add(this.onTickerUpdate, this);\n            this._autoUpdate = true;\n          } else {\n            logger.warn(this.tag, \"No Ticker registered, please call Live2DModel.registerTicker(Ticker).\");\n          }\n        }\n      } else {\n        tickerRef == null ? void 0 : tickerRef.shared.remove(this.onTickerUpdate, this);\n        this._autoUpdate = false;\n      }\n    }\n    init(options) {\n      this.tag = `Live2DModel(${this.internalModel.settings.name})`;\n      const _options = Object.assign({\n        autoUpdate: true,\n        autoInteract: true\n      }, options);\n      if (_options.autoInteract) {\n        this.interactive = true;\n      }\n      this.autoInteract = _options.autoInteract;\n      this.autoUpdate = _options.autoUpdate;\n    }\n    onAnchorChange() {\n      this.pivot.set(this.anchor.x * this.internalModel.width, this.anchor.y * this.internalModel.height);\n    }\n    motion(group, index, priority) {\n      return index === void 0 ? this.internalModel.motionManager.startRandomMotion(group, priority) : this.internalModel.motionManager.startMotion(group, index, priority);\n    }\n    expression(id) {\n      if (this.internalModel.motionManager.expressionManager) {\n        return id === void 0 ? this.internalModel.motionManager.expressionManager.setRandomExpression() : this.internalModel.motionManager.expressionManager.setExpression(id);\n      }\n      return Promise.resolve(false);\n    }\n    focus(x, y, instant = false) {\n      tempPoint.x = x;\n      tempPoint.y = y;\n      this.toModelPosition(tempPoint, tempPoint, true);\n      let tx = tempPoint.x / this.internalModel.originalWidth * 2 - 1;\n      let ty = tempPoint.y / this.internalModel.originalHeight * 2 - 1;\n      let radian = Math.atan2(ty, tx);\n      this.internalModel.focusController.focus(Math.cos(radian), -Math.sin(radian), instant);\n    }\n    tap(x, y) {\n      const hitAreaNames = this.hitTest(x, y);\n      if (hitAreaNames.length) {\n        logger.log(this.tag, `Hit`, hitAreaNames);\n        this.emit(\"hit\", hitAreaNames);\n      }\n    }\n    hitTest(x, y) {\n      tempPoint.x = x;\n      tempPoint.y = y;\n      this.toModelPosition(tempPoint, tempPoint);\n      return this.internalModel.hitTest(tempPoint.x, tempPoint.y);\n    }\n    toModelPosition(position, result = position.clone(), skipUpdate) {\n      if (!skipUpdate) {\n        this._recursivePostUpdateTransform();\n        if (!this.parent) {\n          this.parent = this._tempDisplayObjectParent;\n          this.displayObjectUpdateTransform();\n          this.parent = null;\n        } else {\n          this.displayObjectUpdateTransform();\n        }\n      }\n      this.transform.worldTransform.applyInverse(position, result);\n      this.internalModel.localTransform.applyInverse(result, result);\n      return result;\n    }\n    containsPoint(point) {\n      return this.getBounds(true).contains(point.x, point.y);\n    }\n    _calculateBounds() {\n      this._bounds.addFrame(this.transform, 0, 0, this.internalModel.width, this.internalModel.height);\n    }\n    onTickerUpdate() {\n      this.update(tickerRef.shared.deltaMS);\n    }\n    update(dt) {\n      this.deltaTime += dt;\n      this.elapsedTime += dt;\n    }\n    _render(renderer) {\n      this.registerInteraction(renderer.plugins.interaction);\n      renderer.batch.reset();\n      renderer.geometry.reset();\n      renderer.shader.reset();\n      renderer.state.reset();\n      let shouldUpdateTexture = false;\n      if (this.glContextID !== renderer.CONTEXT_UID) {\n        this.glContextID = renderer.CONTEXT_UID;\n        this.internalModel.updateWebGLContext(renderer.gl, this.glContextID);\n        shouldUpdateTexture = true;\n      }\n      for (let i = 0; i < this.textures.length; i++) {\n        const texture = this.textures[i];\n        if (!texture.valid) {\n          continue;\n        }\n        if (shouldUpdateTexture || !texture.baseTexture._glTextures[this.glContextID]) {\n          renderer.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL, this.internalModel.textureFlipY);\n          renderer.texture.bind(texture.baseTexture, 0);\n        }\n        this.internalModel.bindTexture(i, texture.baseTexture._glTextures[this.glContextID].texture);\n        texture.baseTexture.touched = renderer.textureGC.count;\n      }\n      const viewport = renderer.framebuffer.viewport;\n      this.internalModel.viewport = [viewport.x, viewport.y, viewport.width, viewport.height];\n      if (this.deltaTime) {\n        this.internalModel.update(this.deltaTime, this.elapsedTime);\n        this.deltaTime = 0;\n      }\n      const internalTransform = tempMatrix$1.copyFrom(renderer.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);\n      this.internalModel.updateTransform(internalTransform);\n      this.internalModel.draw(renderer.gl);\n      renderer.state.reset();\n      renderer.texture.reset();\n    }\n    destroy(options) {\n      this.emit(\"destroy\");\n      this.autoUpdate = false;\n      this.unregisterInteraction();\n      if (options == null ? void 0 : options.texture) {\n        this.textures.forEach((texture) => texture.destroy(options.baseTexture));\n      }\n      this.internalModel.destroy();\n      super.destroy(options);\n    }\n  }\n  applyMixins(Live2DModel, [InteractionMixin]);\n  const _FileLoader = class {\n    static resolveURL(settingsURL, filePath) {\n      var _a;\n      const resolved = (_a = _FileLoader.filesMap[settingsURL]) == null ? void 0 : _a[filePath];\n      if (resolved === void 0) {\n        throw new Error(\"Cannot find this file from uploaded files: \" + filePath);\n      }\n      return resolved;\n    }\n    static upload(files, settings) {\n      return __async(this, null, function* () {\n        const fileMap = {};\n        for (const definedFile of settings.getDefinedFiles()) {\n          const actualPath = decodeURI(utils.url.resolve(settings.url, definedFile));\n          const actualFile = files.find((file) => file.webkitRelativePath === actualPath);\n          if (actualFile) {\n            fileMap[definedFile] = URL.createObjectURL(actualFile);\n          }\n        }\n        _FileLoader.filesMap[settings._objectURL] = fileMap;\n      });\n    }\n    static createSettings(files) {\n      return __async(this, null, function* () {\n        const settingsFile = files.find((file) => file.name.endsWith(\"model.json\") || file.name.endsWith(\"model3.json\"));\n        if (!settingsFile) {\n          throw new TypeError(\"Settings file not found\");\n        }\n        const settingsText = yield _FileLoader.readText(settingsFile);\n        const settingsJSON = JSON.parse(settingsText);\n        settingsJSON.url = settingsFile.webkitRelativePath;\n        const runtime = Live2DFactory.findRuntime(settingsJSON);\n        if (!runtime) {\n          throw new Error(\"Unknown settings JSON\");\n        }\n        const settings = runtime.createModelSettings(settingsJSON);\n        settings._objectURL = URL.createObjectURL(settingsFile);\n        return settings;\n      });\n    }\n    static readText(file) {\n      return __async(this, null, function* () {\n        return new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result);\n          reader.onerror = reject;\n          reader.readAsText(file, \"utf8\");\n        });\n      });\n    }\n  };\n  let FileLoader = _FileLoader;\n  FileLoader.filesMap = {};\n  FileLoader.factory = (context, next) => __async(this, null, function* () {\n    if (Array.isArray(context.source) && context.source[0] instanceof File) {\n      const files = context.source;\n      let settings = files.settings;\n      if (!settings) {\n        settings = yield _FileLoader.createSettings(files);\n      } else if (!settings._objectURL) {\n        throw new Error('\"_objectURL\" must be specified in ModelSettings');\n      }\n      settings.validateFiles(files.map((file) => encodeURI(file.webkitRelativePath)));\n      yield _FileLoader.upload(files, settings);\n      settings.resolveURL = function(url) {\n        return _FileLoader.resolveURL(this._objectURL, url);\n      };\n      context.source = settings;\n      context.live2dModel.once(\"modelLoaded\", (internalModel) => {\n        internalModel.once(\"destroy\", function() {\n          const objectURL = this.settings._objectURL;\n          URL.revokeObjectURL(objectURL);\n          if (_FileLoader.filesMap[objectURL]) {\n            for (const resourceObjectURL of Object.values(_FileLoader.filesMap[objectURL])) {\n              URL.revokeObjectURL(resourceObjectURL);\n            }\n          }\n          delete _FileLoader.filesMap[objectURL];\n        });\n      });\n    }\n    return next();\n  });\n  Live2DFactory.live2DModelMiddlewares.unshift(FileLoader.factory);\n  const _ZipLoader = class {\n    static unzip(reader, settings) {\n      return __async(this, null, function* () {\n        const filePaths = yield _ZipLoader.getFilePaths(reader);\n        const requiredFilePaths = [];\n        for (const definedFile of settings.getDefinedFiles()) {\n          const actualPath = decodeURI(utils.url.resolve(settings.url, definedFile));\n          if (filePaths.includes(actualPath)) {\n            requiredFilePaths.push(actualPath);\n          }\n        }\n        const files = yield _ZipLoader.getFiles(reader, requiredFilePaths);\n        for (let i = 0; i < files.length; i++) {\n          const path = requiredFilePaths[i];\n          const file = files[i];\n          Object.defineProperty(file, \"webkitRelativePath\", {\n            value: path\n          });\n        }\n        return files;\n      });\n    }\n    static createSettings(reader) {\n      return __async(this, null, function* () {\n        const filePaths = yield _ZipLoader.getFilePaths(reader);\n        const settingsFilePath = filePaths.find((path) => path.endsWith(\"model.json\") || path.endsWith(\"model3.json\"));\n        if (!settingsFilePath) {\n          throw new Error(\"Settings file not found\");\n        }\n        const settingsText = yield _ZipLoader.readText(reader, settingsFilePath);\n        if (!settingsText) {\n          throw new Error(\"Empty settings file: \" + settingsFilePath);\n        }\n        const settingsJSON = JSON.parse(settingsText);\n        settingsJSON.url = settingsFilePath;\n        const runtime = Live2DFactory.findRuntime(settingsJSON);\n        if (!runtime) {\n          throw new Error(\"Unknown settings JSON\");\n        }\n        return runtime.createModelSettings(settingsJSON);\n      });\n    }\n    static zipReader(data, url) {\n      return __async(this, null, function* () {\n        throw new Error(\"Not implemented\");\n      });\n    }\n    static getFilePaths(reader) {\n      return __async(this, null, function* () {\n        throw new Error(\"Not implemented\");\n      });\n    }\n    static getFiles(reader, paths) {\n      return __async(this, null, function* () {\n        throw new Error(\"Not implemented\");\n      });\n    }\n    static readText(reader, path) {\n      return __async(this, null, function* () {\n        throw new Error(\"Not implemented\");\n      });\n    }\n    static releaseReader(reader) {\n    }\n  };\n  let ZipLoader = _ZipLoader;\n  ZipLoader.ZIP_PROTOCOL = \"zip://\";\n  ZipLoader.uid = 0;\n  ZipLoader.factory = (context, next) => __async(this, null, function* () {\n    const source = context.source;\n    let sourceURL;\n    let zipBlob;\n    let settings;\n    if (typeof source === \"string\" && (source.endsWith(\".zip\") || source.startsWith(_ZipLoader.ZIP_PROTOCOL))) {\n      if (source.startsWith(_ZipLoader.ZIP_PROTOCOL)) {\n        sourceURL = source.slice(_ZipLoader.ZIP_PROTOCOL.length);\n      } else {\n        sourceURL = source;\n      }\n      zipBlob = yield Live2DLoader.load({\n        url: sourceURL,\n        type: \"blob\",\n        target: context.live2dModel\n      });\n    } else if (Array.isArray(source) && source.length === 1 && source[0] instanceof File && source[0].name.endsWith(\".zip\")) {\n      zipBlob = source[0];\n      sourceURL = URL.createObjectURL(zipBlob);\n      settings = source.settings;\n    }\n    if (zipBlob) {\n      if (!zipBlob.size) {\n        throw new Error(\"Empty zip file\");\n      }\n      const reader = yield _ZipLoader.zipReader(zipBlob, sourceURL);\n      if (!settings) {\n        settings = yield _ZipLoader.createSettings(reader);\n      }\n      settings._objectURL = _ZipLoader.ZIP_PROTOCOL + _ZipLoader.uid + \"/\" + settings.url;\n      const files = yield _ZipLoader.unzip(reader, settings);\n      files.settings = settings;\n      context.source = files;\n      if (sourceURL.startsWith(\"blob:\")) {\n        context.live2dModel.once(\"modelLoaded\", (internalModel) => {\n          internalModel.once(\"destroy\", function() {\n            URL.revokeObjectURL(sourceURL);\n          });\n        });\n      }\n      _ZipLoader.releaseReader(reader);\n    }\n    return next();\n  });\n  Live2DFactory.live2DModelMiddlewares.unshift(ZipLoader.factory);\n  if (!window.Live2D) {\n    throw new Error(\"Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.\");\n  }\n  const originalUpdateParam = Live2DMotion.prototype.updateParam;\n  Live2DMotion.prototype.updateParam = function(model, entry) {\n    originalUpdateParam.call(this, model, entry);\n    if (entry.isFinished() && this.onFinishHandler) {\n      this.onFinishHandler(this);\n      delete this.onFinishHandler;\n    }\n  };\n  class Live2DExpression extends AMotion {\n    constructor(json) {\n      super();\n      this.params = [];\n      this.setFadeIn(json.fade_in > 0 ? json.fade_in : exports2.config.expressionFadingDuration);\n      this.setFadeOut(json.fade_out > 0 ? json.fade_out : exports2.config.expressionFadingDuration);\n      if (Array.isArray(json.params)) {\n        json.params.forEach((param) => {\n          const calc = param.calc || \"add\";\n          if (calc === \"add\") {\n            const defaultValue = param.def || 0;\n            param.val -= defaultValue;\n          } else if (calc === \"mult\") {\n            const defaultValue = param.def || 1;\n            param.val /= defaultValue;\n          }\n          this.params.push({\n            calc,\n            val: param.val,\n            id: param.id\n          });\n        });\n      }\n    }\n    updateParamExe(model, time, weight, motionQueueEnt) {\n      this.params.forEach((param) => {\n        model.setParamFloat(param.id, param.val * weight);\n      });\n    }\n  }\n  class Cubism2ExpressionManager extends ExpressionManager {\n    constructor(settings, options) {\n      var _a;\n      super(settings, options);\n      this.queueManager = new MotionQueueManager();\n      this.definitions = (_a = this.settings.expressions) != null ? _a : [];\n      this.init();\n    }\n    isFinished() {\n      return this.queueManager.isFinished();\n    }\n    getExpressionIndex(name) {\n      return this.definitions.findIndex((def) => def.name === name);\n    }\n    getExpressionFile(definition) {\n      return definition.file;\n    }\n    createExpression(data, definition) {\n      return new Live2DExpression(data);\n    }\n    _setExpression(motion) {\n      return this.queueManager.startMotion(motion);\n    }\n    stopAllExpressions() {\n      this.queueManager.stopAllMotions();\n    }\n    updateParameters(model, dt) {\n      return this.queueManager.updateParam(model);\n    }\n  }\n  class Cubism2MotionManager extends MotionManager {\n    constructor(settings, options) {\n      super(settings, options);\n      this.groups = { idle: \"idle\" };\n      this.motionDataType = \"arraybuffer\";\n      this.queueManager = new MotionQueueManager();\n      this.definitions = this.settings.motions;\n      this.init(options);\n    }\n    init(options) {\n      super.init(options);\n      if (this.settings.expressions) {\n        this.expressionManager = new Cubism2ExpressionManager(this.settings, options);\n      }\n    }\n    isFinished() {\n      return this.queueManager.isFinished();\n    }\n    createMotion(data, group, definition) {\n      const motion = Live2DMotion.loadMotion(data);\n      const defaultFadingDuration = group === this.groups.idle ? exports2.config.idleMotionFadingDuration : exports2.config.motionFadingDuration;\n      motion.setFadeIn(definition.fade_in > 0 ? definition.fade_in : defaultFadingDuration);\n      motion.setFadeOut(definition.fade_out > 0 ? definition.fade_out : defaultFadingDuration);\n      return motion;\n    }\n    getMotionFile(definition) {\n      return definition.file;\n    }\n    getMotionName(definition) {\n      return definition.file;\n    }\n    getSoundFile(definition) {\n      return definition.sound;\n    }\n    _startMotion(motion, onFinish) {\n      motion.onFinishHandler = onFinish;\n      this.queueManager.stopAllMotions();\n      return this.queueManager.startMotion(motion);\n    }\n    _stopAllMotions() {\n      this.queueManager.stopAllMotions();\n    }\n    updateParameters(model, now) {\n      return this.queueManager.updateParam(model);\n    }\n    destroy() {\n      super.destroy();\n      this.queueManager = void 0;\n    }\n  }\n  class Live2DEyeBlink {\n    constructor(coreModel) {\n      this.coreModel = coreModel;\n      this.blinkInterval = 4e3;\n      this.closingDuration = 100;\n      this.closedDuration = 50;\n      this.openingDuration = 150;\n      this.eyeState = 0;\n      this.eyeParamValue = 1;\n      this.closedTimer = 0;\n      this.nextBlinkTimeLeft = this.blinkInterval;\n      this.leftParam = coreModel.getParamIndex(\"PARAM_EYE_L_OPEN\");\n      this.rightParam = coreModel.getParamIndex(\"PARAM_EYE_R_OPEN\");\n    }\n    setEyeParams(value) {\n      this.eyeParamValue = clamp(value, 0, 1);\n      this.coreModel.setParamFloat(this.leftParam, this.eyeParamValue);\n      this.coreModel.setParamFloat(this.rightParam, this.eyeParamValue);\n    }\n    update(dt) {\n      switch (this.eyeState) {\n        case 0:\n          this.nextBlinkTimeLeft -= dt;\n          if (this.nextBlinkTimeLeft < 0) {\n            this.eyeState = 1;\n            this.nextBlinkTimeLeft = this.blinkInterval + this.closingDuration + this.closedDuration + this.openingDuration + rand(0, 2e3);\n          }\n          break;\n        case 1:\n          this.setEyeParams(this.eyeParamValue + dt / this.closingDuration);\n          if (this.eyeParamValue <= 0) {\n            this.eyeState = 2;\n            this.closedTimer = 0;\n          }\n          break;\n        case 2:\n          this.closedTimer += dt;\n          if (this.closedTimer >= this.closedDuration) {\n            this.eyeState = 3;\n          }\n          break;\n        case 3:\n          this.setEyeParams(this.eyeParamValue + dt / this.openingDuration);\n          if (this.eyeParamValue >= 1) {\n            this.eyeState = 0;\n          }\n      }\n    }\n  }\n  const tempMatrixArray = new Float32Array([\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1\n  ]);\n  class Cubism2InternalModel extends InternalModel {\n    constructor(coreModel, settings, options) {\n      super();\n      this.textureFlipY = true;\n      this.drawDataCount = 0;\n      this.disableCulling = false;\n      this.coreModel = coreModel;\n      this.settings = settings;\n      this.motionManager = new Cubism2MotionManager(settings, options);\n      this.eyeBlink = new Live2DEyeBlink(coreModel);\n      this.eyeballXParamIndex = coreModel.getParamIndex(\"PARAM_EYE_BALL_X\");\n      this.eyeballYParamIndex = coreModel.getParamIndex(\"PARAM_EYE_BALL_Y\");\n      this.angleXParamIndex = coreModel.getParamIndex(\"PARAM_ANGLE_X\");\n      this.angleYParamIndex = coreModel.getParamIndex(\"PARAM_ANGLE_Y\");\n      this.angleZParamIndex = coreModel.getParamIndex(\"PARAM_ANGLE_Z\");\n      this.bodyAngleXParamIndex = coreModel.getParamIndex(\"PARAM_BODY_ANGLE_X\");\n      this.breathParamIndex = coreModel.getParamIndex(\"PARAM_BREATH\");\n      this.init();\n    }\n    init() {\n      super.init();\n      if (this.settings.initParams) {\n        this.settings.initParams.forEach(({ id, value }) => this.coreModel.setParamFloat(id, value));\n      }\n      if (this.settings.initOpacities) {\n        this.settings.initOpacities.forEach(({ id, value }) => this.coreModel.setPartsOpacity(id, value));\n      }\n      this.coreModel.saveParam();\n      const arr = this.coreModel.getModelContext()._$aS;\n      if (arr == null ? void 0 : arr.length) {\n        this.drawDataCount = arr.length;\n      }\n      let culling = this.coreModel.drawParamWebGL.culling;\n      Object.defineProperty(this.coreModel.drawParamWebGL, \"culling\", {\n        set: (v) => culling = v,\n        get: () => this.disableCulling ? false : culling\n      });\n      const clipManager = this.coreModel.getModelContext().clipManager;\n      const originalSetupClip = clipManager.setupClip;\n      clipManager.setupClip = (modelContext, drawParam) => {\n        originalSetupClip.call(clipManager, modelContext, drawParam);\n        drawParam.gl.viewport(...this.viewport);\n      };\n    }\n    getSize() {\n      return [this.coreModel.getCanvasWidth(), this.coreModel.getCanvasHeight()];\n    }\n    getLayout() {\n      const layout = {};\n      if (this.settings.layout) {\n        for (const key of Object.keys(this.settings.layout)) {\n          let commonKey = key;\n          if (key === \"center_x\") {\n            commonKey = \"centerX\";\n          } else if (key === \"center_y\") {\n            commonKey = \"centerY\";\n          }\n          layout[commonKey] = this.settings.layout[key];\n        }\n      }\n      return layout;\n    }\n    updateWebGLContext(gl, glContextID) {\n      const drawParamWebGL = this.coreModel.drawParamWebGL;\n      drawParamWebGL.firstDraw = true;\n      drawParamWebGL.setGL(gl);\n      drawParamWebGL.glno = glContextID;\n      for (const prop in drawParamWebGL) {\n        if (drawParamWebGL.hasOwnProperty(prop) && drawParamWebGL[prop] instanceof WebGLBuffer) {\n          drawParamWebGL[prop] = null;\n        }\n      }\n      const clipManager = this.coreModel.getModelContext().clipManager;\n      clipManager.curFrameNo = glContextID;\n      const framebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n      clipManager.getMaskRenderTexture();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    }\n    bindTexture(index, texture) {\n      this.coreModel.setTexture(index, texture);\n    }\n    getHitAreaDefs() {\n      var _a;\n      return ((_a = this.settings.hitAreas) == null ? void 0 : _a.map((hitArea) => ({\n        id: hitArea.id,\n        name: hitArea.name,\n        index: this.coreModel.getDrawDataIndex(hitArea.id)\n      }))) || [];\n    }\n    getDrawableIDs() {\n      const modelContext = this.coreModel.getModelContext();\n      const ids = [];\n      for (let i = 0; i < this.drawDataCount; i++) {\n        const drawData = modelContext.getDrawData(i);\n        if (drawData) {\n          ids.push(drawData.getDrawDataID().id);\n        }\n      }\n      return ids;\n    }\n    getDrawableIndex(id) {\n      return this.coreModel.getDrawDataIndex(id);\n    }\n    getDrawableVertices(drawIndex) {\n      if (typeof drawIndex === \"string\") {\n        drawIndex = this.coreModel.getDrawDataIndex(drawIndex);\n        if (drawIndex === -1)\n          throw new TypeError(\"Unable to find drawable ID: \" + drawIndex);\n      }\n      return this.coreModel.getTransformedPoints(drawIndex).slice();\n    }\n    update(dt, now) {\n      var _a, _b, _c, _d;\n      super.update(dt, now);\n      const model = this.coreModel;\n      this.emit(\"beforeMotionUpdate\");\n      const motionUpdated = this.motionManager.update(this.coreModel, now);\n      this.emit(\"afterMotionUpdate\");\n      model.saveParam();\n      (_a = this.motionManager.expressionManager) == null ? void 0 : _a.update(model, now);\n      if (!motionUpdated) {\n        (_b = this.eyeBlink) == null ? void 0 : _b.update(dt);\n      }\n      this.updateFocus();\n      this.updateNaturalMovements(dt, now);\n      (_c = this.physics) == null ? void 0 : _c.update(now);\n      (_d = this.pose) == null ? void 0 : _d.update(dt);\n      this.emit(\"beforeModelUpdate\");\n      model.update();\n      model.loadParam();\n    }\n    updateFocus() {\n      this.coreModel.addToParamFloat(this.eyeballXParamIndex, this.focusController.x);\n      this.coreModel.addToParamFloat(this.eyeballYParamIndex, this.focusController.y);\n      this.coreModel.addToParamFloat(this.angleXParamIndex, this.focusController.x * 30);\n      this.coreModel.addToParamFloat(this.angleYParamIndex, this.focusController.y * 30);\n      this.coreModel.addToParamFloat(this.angleZParamIndex, this.focusController.x * this.focusController.y * -30);\n      this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, this.focusController.x * 10);\n    }\n    updateNaturalMovements(dt, now) {\n      const t = now / 1e3 * 2 * Math.PI;\n      this.coreModel.addToParamFloat(this.angleXParamIndex, 15 * Math.sin(t / 6.5345) * 0.5);\n      this.coreModel.addToParamFloat(this.angleYParamIndex, 8 * Math.sin(t / 3.5345) * 0.5);\n      this.coreModel.addToParamFloat(this.angleZParamIndex, 10 * Math.sin(t / 5.5345) * 0.5);\n      this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, 4 * Math.sin(t / 15.5345) * 0.5);\n      this.coreModel.setParamFloat(this.breathParamIndex, 0.5 + 0.5 * Math.sin(t / 3.2345));\n    }\n    draw(gl) {\n      const disableCulling = this.disableCulling;\n      if (gl.getParameter(gl.FRAMEBUFFER_BINDING)) {\n        this.disableCulling = true;\n      }\n      const matrix = this.drawingMatrix;\n      tempMatrixArray[0] = matrix.a;\n      tempMatrixArray[1] = matrix.b;\n      tempMatrixArray[4] = matrix.c;\n      tempMatrixArray[5] = matrix.d;\n      tempMatrixArray[12] = matrix.tx;\n      tempMatrixArray[13] = matrix.ty;\n      this.coreModel.setMatrix(tempMatrixArray);\n      this.coreModel.draw();\n      this.disableCulling = disableCulling;\n    }\n    destroy() {\n      super.destroy();\n      this.coreModel = void 0;\n    }\n  }\n  class Cubism2ModelSettings extends ModelSettings {\n    constructor(json) {\n      super(json);\n      this.motions = {};\n      if (!Cubism2ModelSettings.isValidJSON(json)) {\n        throw new TypeError(\"Invalid JSON.\");\n      }\n      this.moc = json.model;\n      copyArray(\"string\", json, this, \"textures\", \"textures\");\n      this.copy(json);\n    }\n    static isValidJSON(json) {\n      var _a;\n      return !!json && typeof json.model === \"string\" && ((_a = json.textures) == null ? void 0 : _a.length) > 0 && json.textures.every((item) => typeof item === \"string\");\n    }\n    copy(json) {\n      copyProperty(\"string\", json, this, \"name\", \"name\");\n      copyProperty(\"string\", json, this, \"pose\", \"pose\");\n      copyProperty(\"string\", json, this, \"physics\", \"physics\");\n      copyProperty(\"object\", json, this, \"layout\", \"layout\");\n      copyProperty(\"object\", json, this, \"motions\", \"motions\");\n      copyArray(\"object\", json, this, \"hit_areas\", \"hitAreas\");\n      copyArray(\"object\", json, this, \"expressions\", \"expressions\");\n      copyArray(\"object\", json, this, \"init_params\", \"initParams\");\n      copyArray(\"object\", json, this, \"init_opacities\", \"initOpacities\");\n    }\n    replaceFiles(replace) {\n      super.replaceFiles(replace);\n      for (const [group, motions] of Object.entries(this.motions)) {\n        for (let i = 0; i < motions.length; i++) {\n          motions[i].file = replace(motions[i].file, `motions.${group}[${i}].file`);\n          if (motions[i].sound !== void 0) {\n            motions[i].sound = replace(motions[i].sound, `motions.${group}[${i}].sound`);\n          }\n        }\n      }\n      if (this.expressions) {\n        for (let i = 0; i < this.expressions.length; i++) {\n          this.expressions[i].file = replace(this.expressions[i].file, `expressions[${i}].file`);\n        }\n      }\n    }\n  }\n  const SRC_TYPE_MAP = {\n    x: PhysicsHair.Src.SRC_TO_X,\n    y: PhysicsHair.Src.SRC_TO_Y,\n    angle: PhysicsHair.Src.SRC_TO_G_ANGLE\n  };\n  const TARGET_TYPE_MAP = {\n    x: PhysicsHair.Src.SRC_TO_X,\n    y: PhysicsHair.Src.SRC_TO_Y,\n    angle: PhysicsHair.Src.SRC_TO_G_ANGLE\n  };\n  class Live2DPhysics {\n    constructor(coreModel, json) {\n      this.coreModel = coreModel;\n      this.physicsHairs = [];\n      if (json.physics_hair) {\n        this.physicsHairs = json.physics_hair.map((definition) => {\n          const physicsHair = new PhysicsHair();\n          physicsHair.setup(definition.setup.length, definition.setup.regist, definition.setup.mass);\n          definition.src.forEach(({ id, ptype, scale, weight }) => {\n            const type = SRC_TYPE_MAP[ptype];\n            if (type) {\n              physicsHair.addSrcParam(type, id, scale, weight);\n            }\n          });\n          definition.targets.forEach(({ id, ptype, scale, weight }) => {\n            const type = TARGET_TYPE_MAP[ptype];\n            if (type) {\n              physicsHair.addTargetParam(type, id, scale, weight);\n            }\n          });\n          return physicsHair;\n        });\n      }\n    }\n    update(elapsed) {\n      this.physicsHairs.forEach((physicsHair) => physicsHair.update(this.coreModel, elapsed));\n    }\n  }\n  class Live2DPartsParam {\n    constructor(id) {\n      this.id = id;\n      this.paramIndex = -1;\n      this.partsIndex = -1;\n      this.link = [];\n    }\n    initIndex(model) {\n      this.paramIndex = model.getParamIndex(\"VISIBLE:\" + this.id);\n      this.partsIndex = model.getPartsDataIndex(PartsDataID.getID(this.id));\n      model.setParamFloat(this.paramIndex, 1);\n    }\n  }\n  class Live2DPose {\n    constructor(coreModel, json) {\n      this.coreModel = coreModel;\n      this.opacityAnimDuration = 500;\n      this.partsGroups = [];\n      if (json.parts_visible) {\n        this.partsGroups = json.parts_visible.map(({ group }) => group.map(({ id, link }) => {\n          const parts = new Live2DPartsParam(id);\n          if (link) {\n            parts.link = link.map((l) => new Live2DPartsParam(l));\n          }\n          return parts;\n        }));\n        this.init();\n      }\n    }\n    init() {\n      this.partsGroups.forEach((group) => {\n        group.forEach((parts) => {\n          parts.initIndex(this.coreModel);\n          if (parts.paramIndex >= 0) {\n            const visible = this.coreModel.getParamFloat(parts.paramIndex) !== 0;\n            this.coreModel.setPartsOpacity(parts.partsIndex, visible ? 1 : 0);\n            this.coreModel.setParamFloat(parts.paramIndex, visible ? 1 : 0);\n            if (parts.link.length > 0) {\n              parts.link.forEach((p) => p.initIndex(this.coreModel));\n            }\n          }\n        });\n      });\n    }\n    normalizePartsOpacityGroup(partsGroup, dt) {\n      const model = this.coreModel;\n      const phi = 0.5;\n      const maxBackOpacity = 0.15;\n      let visibleOpacity = 1;\n      let visibleIndex = partsGroup.findIndex(({ paramIndex, partsIndex }) => partsIndex >= 0 && model.getParamFloat(paramIndex) !== 0);\n      if (visibleIndex >= 0) {\n        const originalOpacity = model.getPartsOpacity(partsGroup[visibleIndex].partsIndex);\n        visibleOpacity = clamp(originalOpacity + dt / this.opacityAnimDuration, 0, 1);\n      } else {\n        visibleIndex = 0;\n        visibleOpacity = 1;\n      }\n      partsGroup.forEach(({ partsIndex }, index) => {\n        if (partsIndex >= 0) {\n          if (visibleIndex == index) {\n            model.setPartsOpacity(partsIndex, visibleOpacity);\n          } else {\n            let opacity = model.getPartsOpacity(partsIndex);\n            let a1;\n            if (visibleOpacity < phi) {\n              a1 = visibleOpacity * (phi - 1) / phi + 1;\n            } else {\n              a1 = (1 - visibleOpacity) * phi / (1 - phi);\n            }\n            let backOp = (1 - a1) * (1 - visibleOpacity);\n            if (backOp > maxBackOpacity) {\n              a1 = 1 - maxBackOpacity / (1 - visibleOpacity);\n            }\n            if (opacity > a1) {\n              opacity = a1;\n            }\n            model.setPartsOpacity(partsIndex, opacity);\n          }\n        }\n      });\n    }\n    copyOpacity(partsGroup) {\n      const model = this.coreModel;\n      partsGroup.forEach(({ partsIndex, link }) => {\n        if (partsIndex >= 0 && link) {\n          const opacity = model.getPartsOpacity(partsIndex);\n          link.forEach(({ partsIndex: partsIndex2 }) => {\n            if (partsIndex2 >= 0) {\n              model.setPartsOpacity(partsIndex2, opacity);\n            }\n          });\n        }\n      });\n    }\n    update(dt) {\n      this.partsGroups.forEach((partGroup) => {\n        this.normalizePartsOpacityGroup(partGroup, dt);\n        this.copyOpacity(partGroup);\n      });\n    }\n  }\n  Live2DFactory.registerRuntime({\n    version: 2,\n    test(source) {\n      return source instanceof Cubism2ModelSettings || Cubism2ModelSettings.isValidJSON(source);\n    },\n    ready() {\n      return Promise.resolve();\n    },\n    isValidMoc(modelData) {\n      if (modelData.byteLength < 3) {\n        return false;\n      }\n      const view = new Int8Array(modelData, 0, 3);\n      return String.fromCharCode(...view) === \"moc\";\n    },\n    createModelSettings(json) {\n      return new Cubism2ModelSettings(json);\n    },\n    createCoreModel(data) {\n      const model = Live2DModelWebGL.loadModel(data);\n      const error = Live2D.getError();\n      if (error)\n        throw error;\n      return model;\n    },\n    createInternalModel(coreModel, settings, options) {\n      return new Cubism2InternalModel(coreModel, settings, options);\n    },\n    createPose(coreModel, data) {\n      return new Live2DPose(coreModel, data);\n    },\n    createPhysics(coreModel, data) {\n      return new Live2DPhysics(coreModel, data);\n    }\n  });\n  if (!window.Live2DCubismCore) {\n    throw new Error(\"Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.\");\n  }\n  class CubismVector2 {\n    constructor(x, y) {\n      this.x = x || 0;\n      this.y = y || 0;\n    }\n    add(vector2) {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this.x + vector2.x;\n      ret.y = this.y + vector2.y;\n      return ret;\n    }\n    substract(vector2) {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this.x - vector2.x;\n      ret.y = this.y - vector2.y;\n      return ret;\n    }\n    multiply(vector2) {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this.x * vector2.x;\n      ret.y = this.y * vector2.y;\n      return ret;\n    }\n    multiplyByScaler(scalar) {\n      return this.multiply(new CubismVector2(scalar, scalar));\n    }\n    division(vector2) {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this.x / vector2.x;\n      ret.y = this.y / vector2.y;\n      return ret;\n    }\n    divisionByScalar(scalar) {\n      return this.division(new CubismVector2(scalar, scalar));\n    }\n    getLength() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n    getDistanceWith(a) {\n      return Math.sqrt((this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y));\n    }\n    dot(a) {\n      return this.x * a.x + this.y * a.y;\n    }\n    normalize() {\n      const length = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n      this.x = this.x / length;\n      this.y = this.y / length;\n    }\n    isEqual(rhs) {\n      return this.x == rhs.x && this.y == rhs.y;\n    }\n    isNotEqual(rhs) {\n      return !this.isEqual(rhs);\n    }\n  }\n  const _CubismMath = class {\n    static range(value, min, max) {\n      if (value < min) {\n        value = min;\n      } else if (value > max) {\n        value = max;\n      }\n      return value;\n    }\n    static sin(x) {\n      return Math.sin(x);\n    }\n    static cos(x) {\n      return Math.cos(x);\n    }\n    static abs(x) {\n      return Math.abs(x);\n    }\n    static sqrt(x) {\n      return Math.sqrt(x);\n    }\n    static cbrt(x) {\n      if (x === 0) {\n        return x;\n      }\n      let cx = x;\n      const isNegativeNumber = cx < 0;\n      if (isNegativeNumber) {\n        cx = -cx;\n      }\n      let ret;\n      if (cx === Infinity) {\n        ret = Infinity;\n      } else {\n        ret = Math.exp(Math.log(cx) / 3);\n        ret = (cx / (ret * ret) + 2 * ret) / 3;\n      }\n      return isNegativeNumber ? -ret : ret;\n    }\n    static getEasingSine(value) {\n      if (value < 0) {\n        return 0;\n      } else if (value > 1) {\n        return 1;\n      }\n      return 0.5 - 0.5 * this.cos(value * Math.PI);\n    }\n    static max(left, right) {\n      return left > right ? left : right;\n    }\n    static min(left, right) {\n      return left > right ? right : left;\n    }\n    static degreesToRadian(degrees) {\n      return degrees / 180 * Math.PI;\n    }\n    static radianToDegrees(radian) {\n      return radian * 180 / Math.PI;\n    }\n    static directionToRadian(from, to) {\n      const q1 = Math.atan2(to.y, to.x);\n      const q2 = Math.atan2(from.y, from.x);\n      let ret = q1 - q2;\n      while (ret < -Math.PI) {\n        ret += Math.PI * 2;\n      }\n      while (ret > Math.PI) {\n        ret -= Math.PI * 2;\n      }\n      return ret;\n    }\n    static directionToDegrees(from, to) {\n      const radian = this.directionToRadian(from, to);\n      let degree = this.radianToDegrees(radian);\n      if (to.x - from.x > 0) {\n        degree = -degree;\n      }\n      return degree;\n    }\n    static radianToDirection(totalAngle) {\n      const ret = new CubismVector2();\n      ret.x = this.sin(totalAngle);\n      ret.y = this.cos(totalAngle);\n      return ret;\n    }\n    static quadraticEquation(a, b, c) {\n      if (this.abs(a) < _CubismMath.Epsilon) {\n        if (this.abs(b) < _CubismMath.Epsilon) {\n          return -c;\n        }\n        return -c / b;\n      }\n      return -(b + this.sqrt(b * b - 4 * a * c)) / (2 * a);\n    }\n    static cardanoAlgorithmForBezier(a, b, c, d) {\n      if (this.sqrt(a) < _CubismMath.Epsilon) {\n        return this.range(this.quadraticEquation(b, c, d), 0, 1);\n      }\n      const ba = b / a;\n      const ca = c / a;\n      const da = d / a;\n      const p = (3 * ca - ba * ba) / 3;\n      const p3 = p / 3;\n      const q = (2 * ba * ba * ba - 9 * ba * ca + 27 * da) / 27;\n      const q2 = q / 2;\n      const discriminant = q2 * q2 + p3 * p3 * p3;\n      const center = 0.5;\n      const threshold = center + 0.01;\n      if (discriminant < 0) {\n        const mp3 = -p / 3;\n        const mp33 = mp3 * mp3 * mp3;\n        const r = this.sqrt(mp33);\n        const t = -q / (2 * r);\n        const cosphi = this.range(t, -1, 1);\n        const phi = Math.acos(cosphi);\n        const crtr = this.cbrt(r);\n        const t1 = 2 * crtr;\n        const root12 = t1 * this.cos(phi / 3) - ba / 3;\n        if (this.abs(root12 - center) < threshold) {\n          return this.range(root12, 0, 1);\n        }\n        const root2 = t1 * this.cos((phi + 2 * Math.PI) / 3) - ba / 3;\n        if (this.abs(root2 - center) < threshold) {\n          return this.range(root2, 0, 1);\n        }\n        const root3 = t1 * this.cos((phi + 4 * Math.PI) / 3) - ba / 3;\n        return this.range(root3, 0, 1);\n      }\n      if (discriminant == 0) {\n        let u12;\n        if (q2 < 0) {\n          u12 = this.cbrt(-q2);\n        } else {\n          u12 = -this.cbrt(q2);\n        }\n        const root12 = 2 * u12 - ba / 3;\n        if (this.abs(root12 - center) < threshold) {\n          return this.range(root12, 0, 1);\n        }\n        const root2 = -u12 - ba / 3;\n        return this.range(root2, 0, 1);\n      }\n      const sd = this.sqrt(discriminant);\n      const u1 = this.cbrt(sd - q2);\n      const v1 = this.cbrt(sd + q2);\n      const root1 = u1 - v1 - ba / 3;\n      return this.range(root1, 0, 1);\n    }\n    constructor() {\n    }\n  };\n  let CubismMath = _CubismMath;\n  CubismMath.Epsilon = 1e-5;\n  class CubismMatrix44 {\n    constructor() {\n      this._tr = new Float32Array(16);\n      this.loadIdentity();\n    }\n    static multiply(a, b, dst) {\n      const c = new Float32Array([\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n      ]);\n      const n = 4;\n      for (let i = 0; i < n; ++i) {\n        for (let j = 0; j < n; ++j) {\n          for (let k = 0; k < n; ++k) {\n            c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n          }\n        }\n      }\n      for (let i = 0; i < 16; ++i) {\n        dst[i] = c[i];\n      }\n    }\n    loadIdentity() {\n      const c = new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n      this.setMatrix(c);\n    }\n    setMatrix(tr) {\n      for (let i = 0; i < 16; ++i) {\n        this._tr[i] = tr[i];\n      }\n    }\n    getArray() {\n      return this._tr;\n    }\n    getScaleX() {\n      return this._tr[0];\n    }\n    getScaleY() {\n      return this._tr[5];\n    }\n    getTranslateX() {\n      return this._tr[12];\n    }\n    getTranslateY() {\n      return this._tr[13];\n    }\n    transformX(src) {\n      return this._tr[0] * src + this._tr[12];\n    }\n    transformY(src) {\n      return this._tr[5] * src + this._tr[13];\n    }\n    invertTransformX(src) {\n      return (src - this._tr[12]) / this._tr[0];\n    }\n    invertTransformY(src) {\n      return (src - this._tr[13]) / this._tr[5];\n    }\n    translateRelative(x, y) {\n      const tr1 = new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        x,\n        y,\n        0,\n        1\n      ]);\n      CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    translate(x, y) {\n      this._tr[12] = x;\n      this._tr[13] = y;\n    }\n    translateX(x) {\n      this._tr[12] = x;\n    }\n    translateY(y) {\n      this._tr[13] = y;\n    }\n    scaleRelative(x, y) {\n      const tr1 = new Float32Array([\n        x,\n        0,\n        0,\n        0,\n        0,\n        y,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n      CubismMatrix44.multiply(tr1, this._tr, this._tr);\n    }\n    scale(x, y) {\n      this._tr[0] = x;\n      this._tr[5] = y;\n    }\n    multiplyByMatrix(m) {\n      CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n    }\n    clone() {\n      const cloneMatrix = new CubismMatrix44();\n      for (let i = 0; i < this._tr.length; i++) {\n        cloneMatrix._tr[i] = this._tr[i];\n      }\n      return cloneMatrix;\n    }\n  }\n  class CubismRenderer {\n    initialize(model) {\n      this._model = model;\n    }\n    drawModel() {\n      if (this.getModel() == null)\n        return;\n      this.doDrawModel();\n    }\n    setMvpMatrix(matrix44) {\n      this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n    }\n    getMvpMatrix() {\n      return this._mvpMatrix4x4;\n    }\n    setModelColor(red, green, blue, alpha) {\n      if (red < 0) {\n        red = 0;\n      } else if (red > 1) {\n        red = 1;\n      }\n      if (green < 0) {\n        green = 0;\n      } else if (green > 1) {\n        green = 1;\n      }\n      if (blue < 0) {\n        blue = 0;\n      } else if (blue > 1) {\n        blue = 1;\n      }\n      if (alpha < 0) {\n        alpha = 0;\n      } else if (alpha > 1) {\n        alpha = 1;\n      }\n      this._modelColor.R = red;\n      this._modelColor.G = green;\n      this._modelColor.B = blue;\n      this._modelColor.A = alpha;\n    }\n    getModelColor() {\n      return Object.assign({}, this._modelColor);\n    }\n    setIsPremultipliedAlpha(enable) {\n      this._isPremultipliedAlpha = enable;\n    }\n    isPremultipliedAlpha() {\n      return this._isPremultipliedAlpha;\n    }\n    setIsCulling(culling) {\n      this._isCulling = culling;\n    }\n    isCulling() {\n      return this._isCulling;\n    }\n    setAnisotropy(n) {\n      this._anisortopy = n;\n    }\n    getAnisotropy() {\n      return this._anisortopy;\n    }\n    getModel() {\n      return this._model;\n    }\n    constructor() {\n      this._isCulling = false;\n      this._isPremultipliedAlpha = false;\n      this._anisortopy = 0;\n      this._modelColor = new CubismTextureColor();\n      this._mvpMatrix4x4 = new CubismMatrix44();\n      this._mvpMatrix4x4.loadIdentity();\n    }\n  }\n  var CubismBlendMode = /* @__PURE__ */ ((CubismBlendMode2) => {\n    CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Normal\"] = 0] = \"CubismBlendMode_Normal\";\n    CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Additive\"] = 1] = \"CubismBlendMode_Additive\";\n    CubismBlendMode2[CubismBlendMode2[\"CubismBlendMode_Multiplicative\"] = 2] = \"CubismBlendMode_Multiplicative\";\n    return CubismBlendMode2;\n  })(CubismBlendMode || {});\n  class CubismTextureColor {\n    constructor() {\n      this.R = 1;\n      this.G = 1;\n      this.B = 1;\n      this.A = 1;\n    }\n  }\n  let s_isStarted = false;\n  let s_isInitialized = false;\n  let s_option = void 0;\n  const Constant = {\n    vertexOffset: 0,\n    vertexStep: 2\n  };\n  class CubismFramework {\n    static startUp(option) {\n      if (s_isStarted) {\n        CubismLogInfo(\"CubismFramework.startUp() is already done.\");\n        return s_isStarted;\n      }\n      if (Live2DCubismCore._isStarted) {\n        s_isStarted = true;\n        return true;\n      }\n      Live2DCubismCore._isStarted = true;\n      s_option = option;\n      if (s_option) {\n        Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n      }\n      s_isStarted = true;\n      if (s_isStarted) {\n        const version = Live2DCubismCore.Version.csmGetVersion();\n        const major = (version & 4278190080) >> 24;\n        const minor = (version & 16711680) >> 16;\n        const patch = version & 65535;\n        const versionNumber = version;\n        CubismLogInfo(`Live2D Cubism Core version: {0}.{1}.{2} ({3})`, (\"00\" + major).slice(-2), (\"00\" + minor).slice(-2), (\"0000\" + patch).slice(-4), versionNumber);\n      }\n      CubismLogInfo(\"CubismFramework.startUp() is complete.\");\n      return s_isStarted;\n    }\n    static cleanUp() {\n      s_isStarted = false;\n      s_isInitialized = false;\n      s_option = void 0;\n    }\n    static initialize() {\n      if (!s_isStarted) {\n        CubismLogWarning(\"CubismFramework is not started.\");\n        return;\n      }\n      if (s_isInitialized) {\n        CubismLogWarning(\"CubismFramework.initialize() skipped, already initialized.\");\n        return;\n      }\n      s_isInitialized = true;\n      CubismLogInfo(\"CubismFramework.initialize() is complete.\");\n    }\n    static dispose() {\n      if (!s_isStarted) {\n        CubismLogWarning(\"CubismFramework is not started.\");\n        return;\n      }\n      if (!s_isInitialized) {\n        CubismLogWarning(\"CubismFramework.dispose() skipped, not initialized.\");\n        return;\n      }\n      CubismRenderer.staticRelease();\n      s_isInitialized = false;\n      CubismLogInfo(\"CubismFramework.dispose() is complete.\");\n    }\n    static isStarted() {\n      return s_isStarted;\n    }\n    static isInitialized() {\n      return s_isInitialized;\n    }\n    static coreLogFunction(message) {\n      if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n        return;\n      }\n      Live2DCubismCore.Logging.csmGetLogFunction()(message);\n    }\n    static getLoggingLevel() {\n      if (s_option != null) {\n        return s_option.loggingLevel;\n      }\n      return LogLevel.LogLevel_Off;\n    }\n    constructor() {\n    }\n  }\n  var LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n    LogLevel2[LogLevel2[\"LogLevel_Verbose\"] = 0] = \"LogLevel_Verbose\";\n    LogLevel2[LogLevel2[\"LogLevel_Debug\"] = 1] = \"LogLevel_Debug\";\n    LogLevel2[LogLevel2[\"LogLevel_Info\"] = 2] = \"LogLevel_Info\";\n    LogLevel2[LogLevel2[\"LogLevel_Warning\"] = 3] = \"LogLevel_Warning\";\n    LogLevel2[LogLevel2[\"LogLevel_Error\"] = 4] = \"LogLevel_Error\";\n    LogLevel2[LogLevel2[\"LogLevel_Off\"] = 5] = \"LogLevel_Off\";\n    return LogLevel2;\n  })(LogLevel || {});\n  const CSM_ASSERT = () => {\n  };\n  function CubismLogDebug(fmt, ...args) {\n    CubismDebug.print(LogLevel.LogLevel_Debug, \"[CSM][D]\" + fmt + \"\\n\", args);\n  }\n  function CubismLogInfo(fmt, ...args) {\n    CubismDebug.print(LogLevel.LogLevel_Info, \"[CSM][I]\" + fmt + \"\\n\", args);\n  }\n  function CubismLogWarning(fmt, ...args) {\n    CubismDebug.print(LogLevel.LogLevel_Warning, \"[CSM][W]\" + fmt + \"\\n\", args);\n  }\n  function CubismLogError(fmt, ...args) {\n    CubismDebug.print(LogLevel.LogLevel_Error, \"[CSM][E]\" + fmt + \"\\n\", args);\n  }\n  class CubismDebug {\n    static print(logLevel, format, args) {\n      if (logLevel < CubismFramework.getLoggingLevel()) {\n        return;\n      }\n      const logPrint = CubismFramework.coreLogFunction;\n      if (!logPrint)\n        return;\n      const buffer = format.replace(/{(\\d+)}/g, (m, k) => {\n        return args[k];\n      });\n      logPrint(buffer);\n    }\n    static dumpBytes(logLevel, data, length) {\n      for (let i = 0; i < length; i++) {\n        if (i % 16 == 0 && i > 0)\n          this.print(logLevel, \"\\n\");\n        else if (i % 8 == 0 && i > 0)\n          this.print(logLevel, \"  \");\n        this.print(logLevel, \"{0} \", [data[i] & 255]);\n      }\n      this.print(logLevel, \"\\n\");\n    }\n    constructor() {\n    }\n  }\n  class ACubismMotion {\n    constructor() {\n      this._fadeInSeconds = -1;\n      this._fadeOutSeconds = -1;\n      this._weight = 1;\n      this._offsetSeconds = 0;\n      this._firedEventValues = [];\n    }\n    release() {\n      this._weight = 0;\n    }\n    updateParameters(model, motionQueueEntry, userTimeSeconds) {\n      if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n        return;\n      }\n      if (!motionQueueEntry.isStarted()) {\n        motionQueueEntry.setIsStarted(true);\n        motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds);\n        motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n        const duration = this.getDuration();\n        if (motionQueueEntry.getEndTime() < 0) {\n          motionQueueEntry.setEndTime(duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration);\n        }\n      }\n      let fadeWeight = this._weight;\n      const fadeIn = this._fadeInSeconds == 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n      const fadeOut = this._fadeOutSeconds == 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n      fadeWeight = fadeWeight * fadeIn * fadeOut;\n      motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n      this.doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry);\n      if (motionQueueEntry.getEndTime() > 0 && motionQueueEntry.getEndTime() < userTimeSeconds) {\n        motionQueueEntry.setIsFinished(true);\n      }\n    }\n    setFadeInTime(fadeInSeconds) {\n      this._fadeInSeconds = fadeInSeconds;\n    }\n    setFadeOutTime(fadeOutSeconds) {\n      this._fadeOutSeconds = fadeOutSeconds;\n    }\n    getFadeOutTime() {\n      return this._fadeOutSeconds;\n    }\n    getFadeInTime() {\n      return this._fadeInSeconds;\n    }\n    setWeight(weight) {\n      this._weight = weight;\n    }\n    getWeight() {\n      return this._weight;\n    }\n    getDuration() {\n      return -1;\n    }\n    getLoopDuration() {\n      return -1;\n    }\n    setOffsetTime(offsetSeconds) {\n      this._offsetSeconds = offsetSeconds;\n    }\n    getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n      return this._firedEventValues;\n    }\n    setFinishedMotionHandler(onFinishedMotionHandler) {\n      this._onFinishedMotion = onFinishedMotionHandler;\n    }\n    getFinishedMotionHandler() {\n      return this._onFinishedMotion;\n    }\n  }\n  const DefaultFadeTime = 1;\n  class CubismExpressionMotion extends ACubismMotion {\n    constructor() {\n      super();\n      this._parameters = [];\n    }\n    static create(json) {\n      const expression = new CubismExpressionMotion();\n      const fadeInTime = json.FadeInTime;\n      const fadeOutTime = json.FadeOutTime;\n      expression.setFadeInTime(fadeInTime !== void 0 ? fadeInTime : DefaultFadeTime);\n      expression.setFadeOutTime(fadeOutTime !== void 0 ? fadeOutTime : DefaultFadeTime);\n      const parameters = json.Parameters || [];\n      for (let i = 0; i < parameters.length; ++i) {\n        const param = parameters[i];\n        const parameterId = param.Id;\n        const value = param.Value;\n        let blendType;\n        switch (param.Blend) {\n          case \"Multiply\":\n            blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\n            break;\n          case \"Overwrite\":\n            blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\n            break;\n          case \"Add\":\n          default:\n            blendType = ExpressionBlendType.ExpressionBlendType_Add;\n            break;\n        }\n        const item = {\n          parameterId,\n          blendType,\n          value\n        };\n        expression._parameters.push(item);\n      }\n      return expression;\n    }\n    doUpdateParameters(model, userTimeSeconds, weight, motionQueueEntry) {\n      for (let i = 0; i < this._parameters.length; ++i) {\n        const parameter = this._parameters[i];\n        switch (parameter.blendType) {\n          case ExpressionBlendType.ExpressionBlendType_Add: {\n            model.addParameterValueById(parameter.parameterId, parameter.value, weight);\n            break;\n          }\n          case ExpressionBlendType.ExpressionBlendType_Multiply: {\n            model.multiplyParameterValueById(parameter.parameterId, parameter.value, weight);\n            break;\n          }\n          case ExpressionBlendType.ExpressionBlendType_Overwrite: {\n            model.setParameterValueById(parameter.parameterId, parameter.value, weight);\n            break;\n          }\n        }\n      }\n    }\n  }\n  var ExpressionBlendType = /* @__PURE__ */ ((ExpressionBlendType2) => {\n    ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Add\"] = 0] = \"ExpressionBlendType_Add\";\n    ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Multiply\"] = 1] = \"ExpressionBlendType_Multiply\";\n    ExpressionBlendType2[ExpressionBlendType2[\"ExpressionBlendType_Overwrite\"] = 2] = \"ExpressionBlendType_Overwrite\";\n    return ExpressionBlendType2;\n  })(ExpressionBlendType || {});\n  class CubismMotionQueueEntry {\n    constructor() {\n      this._autoDelete = false;\n      this._available = true;\n      this._finished = false;\n      this._started = false;\n      this._startTimeSeconds = -1;\n      this._fadeInStartTimeSeconds = 0;\n      this._endTimeSeconds = -1;\n      this._stateTimeSeconds = 0;\n      this._stateWeight = 0;\n      this._lastEventCheckSeconds = 0;\n      this._motionQueueEntryHandle = this;\n      this._fadeOutSeconds = 0;\n      this._isTriggeredFadeOut = false;\n    }\n    release() {\n      if (this._autoDelete && this._motion) {\n        this._motion.release();\n      }\n    }\n    setFadeOut(fadeOutSeconds) {\n      this._fadeOutSeconds = fadeOutSeconds;\n      this._isTriggeredFadeOut = true;\n    }\n    startFadeOut(fadeOutSeconds, userTimeSeconds) {\n      const newEndTimeSeconds = userTimeSeconds + fadeOutSeconds;\n      this._isTriggeredFadeOut = true;\n      if (this._endTimeSeconds < 0 || newEndTimeSeconds < this._endTimeSeconds) {\n        this._endTimeSeconds = newEndTimeSeconds;\n      }\n    }\n    isFinished() {\n      return this._finished;\n    }\n    isStarted() {\n      return this._started;\n    }\n    getStartTime() {\n      return this._startTimeSeconds;\n    }\n    getFadeInStartTime() {\n      return this._fadeInStartTimeSeconds;\n    }\n    getEndTime() {\n      return this._endTimeSeconds;\n    }\n    setStartTime(startTime) {\n      this._startTimeSeconds = startTime;\n    }\n    setFadeInStartTime(startTime) {\n      this._fadeInStartTimeSeconds = startTime;\n    }\n    setEndTime(endTime) {\n      this._endTimeSeconds = endTime;\n    }\n    setIsFinished(f) {\n      this._finished = f;\n    }\n    setIsStarted(f) {\n      this._started = f;\n    }\n    isAvailable() {\n      return this._available;\n    }\n    setIsAvailable(v) {\n      this._available = v;\n    }\n    setState(timeSeconds, weight) {\n      this._stateTimeSeconds = timeSeconds;\n      this._stateWeight = weight;\n    }\n    getStateTime() {\n      return this._stateTimeSeconds;\n    }\n    getStateWeight() {\n      return this._stateWeight;\n    }\n    getLastCheckEventSeconds() {\n      return this._lastEventCheckSeconds;\n    }\n    setLastCheckEventSeconds(checkSeconds) {\n      this._lastEventCheckSeconds = checkSeconds;\n    }\n    isTriggeredFadeOut() {\n      return this._isTriggeredFadeOut;\n    }\n    getFadeOutSeconds() {\n      return this._fadeOutSeconds;\n    }\n  }\n  class CubismMotionQueueManager {\n    constructor() {\n      this._userTimeSeconds = 0;\n      this._eventCustomData = null;\n      this._motions = [];\n    }\n    release() {\n      for (let i = 0; i < this._motions.length; ++i) {\n        if (this._motions[i]) {\n          this._motions[i].release();\n        }\n      }\n      this._motions = void 0;\n    }\n    startMotion(motion, autoDelete, userTimeSeconds) {\n      if (motion == null) {\n        return InvalidMotionQueueEntryHandleValue;\n      }\n      let motionQueueEntry;\n      for (let i = 0; i < this._motions.length; ++i) {\n        motionQueueEntry = this._motions[i];\n        if (motionQueueEntry == null) {\n          continue;\n        }\n        motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime());\n      }\n      motionQueueEntry = new CubismMotionQueueEntry();\n      motionQueueEntry._autoDelete = autoDelete;\n      motionQueueEntry._motion = motion;\n      this._motions.push(motionQueueEntry);\n      return motionQueueEntry._motionQueueEntryHandle;\n    }\n    isFinished() {\n      let i = 0;\n      while (i < this._motions.length) {\n        const motionQueueEntry = this._motions[i];\n        if (motionQueueEntry == null) {\n          this._motions.splice(i, 1);\n          continue;\n        }\n        const motion = motionQueueEntry._motion;\n        if (motion == null) {\n          motionQueueEntry.release();\n          this._motions.splice(i, 1);\n          continue;\n        }\n        if (!motionQueueEntry.isFinished()) {\n          return false;\n        }\n        i++;\n      }\n      return true;\n    }\n    isFinishedByHandle(motionQueueEntryNumber) {\n      for (let i = 0; i < this._motions.length; i++) {\n        const motionQueueEntry = this._motions[i];\n        if (motionQueueEntry == null) {\n          continue;\n        }\n        if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber && !motionQueueEntry.isFinished()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    stopAllMotions() {\n      for (let i = 0; i < this._motions.length; i++) {\n        const motionQueueEntry = this._motions[i];\n        if (motionQueueEntry != null) {\n          motionQueueEntry.release();\n        }\n      }\n      this._motions = [];\n    }\n    getCubismMotionQueueEntry(motionQueueEntryNumber) {\n      return this._motions.find((entry) => entry != null && entry._motionQueueEntryHandle == motionQueueEntryNumber);\n    }\n    setEventCallback(callback, customData = null) {\n      this._eventCallBack = callback;\n      this._eventCustomData = customData;\n    }\n    doUpdateMotion(model, userTimeSeconds) {\n      let updated = false;\n      let i = 0;\n      while (i < this._motions.length) {\n        const motionQueueEntry = this._motions[i];\n        if (motionQueueEntry == null) {\n          this._motions.splice(i, 1);\n          continue;\n        }\n        const motion = motionQueueEntry._motion;\n        if (motion == null) {\n          motionQueueEntry.release();\n          this._motions.splice(i, 1);\n          continue;\n        }\n        motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n        updated = true;\n        const firedList = motion.getFiredEvent(motionQueueEntry.getLastCheckEventSeconds() - motionQueueEntry.getStartTime(), userTimeSeconds - motionQueueEntry.getStartTime());\n        for (let i2 = 0; i2 < firedList.length; ++i2) {\n          this._eventCallBack(this, firedList[i2], this._eventCustomData);\n        }\n        motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n        if (motionQueueEntry.isFinished()) {\n          motionQueueEntry.release();\n          this._motions.splice(i, 1);\n        } else {\n          if (motionQueueEntry.isTriggeredFadeOut()) {\n            motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), userTimeSeconds);\n          }\n          i++;\n        }\n      }\n      return updated;\n    }\n  }\n  const InvalidMotionQueueEntryHandleValue = -1;\n  class Cubism4ExpressionManager extends ExpressionManager {\n    constructor(settings, options) {\n      var _a;\n      super(settings, options);\n      this.queueManager = new CubismMotionQueueManager();\n      this.definitions = (_a = settings.expressions) != null ? _a : [];\n      this.init();\n    }\n    isFinished() {\n      return this.queueManager.isFinished();\n    }\n    getExpressionIndex(name) {\n      return this.definitions.findIndex((def) => def.Name === name);\n    }\n    getExpressionFile(definition) {\n      return definition.File;\n    }\n    createExpression(data, definition) {\n      return CubismExpressionMotion.create(data);\n    }\n    _setExpression(motion) {\n      return this.queueManager.startMotion(motion, false, performance.now());\n    }\n    stopAllExpressions() {\n      this.queueManager.stopAllMotions();\n    }\n    updateParameters(model, now) {\n      return this.queueManager.doUpdateMotion(model, now);\n    }\n  }\n  class CubismModelSettingsJson {\n    constructor(json) {\n      this.groups = json.Groups;\n      this.hitAreas = json.HitAreas;\n      this.layout = json.Layout;\n      this.moc = json.FileReferences.Moc;\n      this.expressions = json.FileReferences.Expressions;\n      this.motions = json.FileReferences.Motions;\n      this.textures = json.FileReferences.Textures;\n      this.physics = json.FileReferences.Physics;\n      this.pose = json.FileReferences.Pose;\n    }\n    getEyeBlinkParameters() {\n      var _a, _b;\n      return (_b = (_a = this.groups) == null ? void 0 : _a.find((group) => group.Name === \"EyeBlink\")) == null ? void 0 : _b.Ids;\n    }\n    getLipSyncParameters() {\n      var _a, _b;\n      return (_b = (_a = this.groups) == null ? void 0 : _a.find((group) => group.Name === \"LipSync\")) == null ? void 0 : _b.Ids;\n    }\n  }\n  class Cubism4ModelSettings extends ModelSettings {\n    constructor(json) {\n      super(json);\n      if (!Cubism4ModelSettings.isValidJSON(json)) {\n        throw new TypeError(\"Invalid JSON.\");\n      }\n      Object.assign(this, new CubismModelSettingsJson(json));\n    }\n    static isValidJSON(json) {\n      var _a;\n      return !!(json == null ? void 0 : json.FileReferences) && typeof json.FileReferences.Moc === \"string\" && ((_a = json.FileReferences.Textures) == null ? void 0 : _a.length) > 0 && json.FileReferences.Textures.every((item) => typeof item === \"string\");\n    }\n    replaceFiles(replace) {\n      super.replaceFiles(replace);\n      if (this.motions) {\n        for (const [group, motions] of Object.entries(this.motions)) {\n          for (let i = 0; i < motions.length; i++) {\n            motions[i].File = replace(motions[i].File, `motions.${group}[${i}].File`);\n            if (motions[i].Sound !== void 0) {\n              motions[i].Sound = replace(motions[i].Sound, `motions.${group}[${i}].Sound`);\n            }\n          }\n        }\n      }\n      if (this.expressions) {\n        for (let i = 0; i < this.expressions.length; i++) {\n          this.expressions[i].File = replace(this.expressions[i].File, `expressions[${i}].File`);\n        }\n      }\n    }\n  }\n  applyMixins(Cubism4ModelSettings, [CubismModelSettingsJson]);\n  var CubismMotionCurveTarget = /* @__PURE__ */ ((CubismMotionCurveTarget2) => {\n    CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_Model\"] = 0] = \"CubismMotionCurveTarget_Model\";\n    CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_Parameter\"] = 1] = \"CubismMotionCurveTarget_Parameter\";\n    CubismMotionCurveTarget2[CubismMotionCurveTarget2[\"CubismMotionCurveTarget_PartOpacity\"] = 2] = \"CubismMotionCurveTarget_PartOpacity\";\n    return CubismMotionCurveTarget2;\n  })(CubismMotionCurveTarget || {});\n  var CubismMotionSegmentType = /* @__PURE__ */ ((CubismMotionSegmentType2) => {\n    CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Linear\"] = 0] = \"CubismMotionSegmentType_Linear\";\n    CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Bezier\"] = 1] = \"CubismMotionSegmentType_Bezier\";\n    CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_Stepped\"] = 2] = \"CubismMotionSegmentType_Stepped\";\n    CubismMotionSegmentType2[CubismMotionSegmentType2[\"CubismMotionSegmentType_InverseStepped\"] = 3] = \"CubismMotionSegmentType_InverseStepped\";\n    return CubismMotionSegmentType2;\n  })(CubismMotionSegmentType || {});\n  class CubismMotionPoint {\n    constructor(time = 0, value = 0) {\n      this.time = time;\n      this.value = value;\n    }\n  }\n  class CubismMotionSegment {\n    constructor() {\n      this.basePointIndex = 0;\n      this.segmentType = 0;\n    }\n  }\n  class CubismMotionCurve {\n    constructor() {\n      this.id = \"\";\n      this.type = 0;\n      this.segmentCount = 0;\n      this.baseSegmentIndex = 0;\n      this.fadeInTime = 0;\n      this.fadeOutTime = 0;\n    }\n  }\n  class CubismMotionEvent {\n    constructor() {\n      this.fireTime = 0;\n      this.value = \"\";\n    }\n  }\n  class CubismMotionData {\n    constructor() {\n      this.duration = 0;\n      this.loop = false;\n      this.curveCount = 0;\n      this.eventCount = 0;\n      this.fps = 0;\n      this.curves = [];\n      this.segments = [];\n      this.points = [];\n      this.events = [];\n    }\n  }\n  class CubismMotionJson {\n    constructor(json) {\n      this._json = json;\n    }\n    release() {\n      this._json = void 0;\n    }\n    getMotionDuration() {\n      return this._json.Meta.Duration;\n    }\n    isMotionLoop() {\n      return this._json.Meta.Loop || false;\n    }\n    getEvaluationOptionFlag(flagType) {\n      if (EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType) {\n        return !!this._json.Meta.AreBeziersRestricted;\n      }\n      return false;\n    }\n    getMotionCurveCount() {\n      return this._json.Meta.CurveCount;\n    }\n    getMotionFps() {\n      return this._json.Meta.Fps;\n    }\n    getMotionTotalSegmentCount() {\n      return this._json.Meta.TotalSegmentCount;\n    }\n    getMotionTotalPointCount() {\n      return this._json.Meta.TotalPointCount;\n    }\n    getMotionFadeInTime() {\n      return this._json.Meta.FadeInTime;\n    }\n    getMotionFadeOutTime() {\n      return this._json.Meta.FadeOutTime;\n    }\n    getMotionCurveTarget(curveIndex) {\n      return this._json.Curves[curveIndex].Target;\n    }\n    getMotionCurveId(curveIndex) {\n      return this._json.Curves[curveIndex].Id;\n    }\n    getMotionCurveFadeInTime(curveIndex) {\n      return this._json.Curves[curveIndex].FadeInTime;\n    }\n    getMotionCurveFadeOutTime(curveIndex) {\n      return this._json.Curves[curveIndex].FadeOutTime;\n    }\n    getMotionCurveSegmentCount(curveIndex) {\n      return this._json.Curves[curveIndex].Segments.length;\n    }\n    getMotionCurveSegment(curveIndex, segmentIndex) {\n      return this._json.Curves[curveIndex].Segments[segmentIndex];\n    }\n    getEventCount() {\n      return this._json.Meta.UserDataCount || 0;\n    }\n    getTotalEventValueSize() {\n      return this._json.Meta.TotalUserDataSize;\n    }\n    getEventTime(userDataIndex) {\n      return this._json.UserData[userDataIndex].Time;\n    }\n    getEventValue(userDataIndex) {\n      return this._json.UserData[userDataIndex].Value;\n    }\n  }\n  var EvaluationOptionFlag = /* @__PURE__ */ ((EvaluationOptionFlag2) => {\n    EvaluationOptionFlag2[EvaluationOptionFlag2[\"EvaluationOptionFlag_AreBeziersRistricted\"] = 0] = \"EvaluationOptionFlag_AreBeziersRistricted\";\n    return EvaluationOptionFlag2;\n  })(EvaluationOptionFlag || {});\n  const EffectNameEyeBlink = \"EyeBlink\";\n  const EffectNameLipSync = \"LipSync\";\n  const TargetNameModel = \"Model\";\n  const TargetNameParameter = \"Parameter\";\n  const TargetNamePartOpacity = \"PartOpacity\";\n  const UseOldBeziersCurveMotion = false;\n  function lerpPoints(a, b, t) {\n    const result = new CubismMotionPoint();\n    result.time = a.time + (b.time - a.time) * t;\n    result.value = a.value + (b.value - a.value) * t;\n    return result;\n  }\n  function linearEvaluate(points, time) {\n    let t = (time - points[0].time) / (points[1].time - points[0].time);\n    if (t < 0) {\n      t = 0;\n    }\n    return points[0].value + (points[1].value - points[0].value) * t;\n  }\n  function bezierEvaluate(points, time) {\n    let t = (time - points[0].time) / (points[3].time - points[0].time);\n    if (t < 0) {\n      t = 0;\n    }\n    const p01 = lerpPoints(points[0], points[1], t);\n    const p12 = lerpPoints(points[1], points[2], t);\n    const p23 = lerpPoints(points[2], points[3], t);\n    const p012 = lerpPoints(p01, p12, t);\n    const p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n  }\n  function bezierEvaluateCardanoInterpretation(points, time) {\n    const x = time;\n    const x1 = points[0].time;\n    const x2 = points[3].time;\n    const cx1 = points[1].time;\n    const cx2 = points[2].time;\n    const a = x2 - 3 * cx2 + 3 * cx1 - x1;\n    const b = 3 * cx2 - 6 * cx1 + 3 * x1;\n    const c = 3 * cx1 - 3 * x1;\n    const d = x1 - x;\n    const t = CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n    const p01 = lerpPoints(points[0], points[1], t);\n    const p12 = lerpPoints(points[1], points[2], t);\n    const p23 = lerpPoints(points[2], points[3], t);\n    const p012 = lerpPoints(p01, p12, t);\n    const p123 = lerpPoints(p12, p23, t);\n    return lerpPoints(p012, p123, t).value;\n  }\n  function steppedEvaluate(points, time) {\n    return points[0].value;\n  }\n  function inverseSteppedEvaluate(points, time) {\n    return points[1].value;\n  }\n  function evaluateCurve(motionData, index, time) {\n    const curve = motionData.curves[index];\n    let target = -1;\n    const totalSegmentCount = curve.baseSegmentIndex + curve.segmentCount;\n    let pointPosition = 0;\n    for (let i = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n      pointPosition = motionData.segments[i].basePointIndex + (motionData.segments[i].segmentType == CubismMotionSegmentType.CubismMotionSegmentType_Bezier ? 3 : 1);\n      if (motionData.points[pointPosition].time > time) {\n        target = i;\n        break;\n      }\n    }\n    if (target == -1) {\n      return motionData.points[pointPosition].value;\n    }\n    const segment = motionData.segments[target];\n    return segment.evaluate(motionData.points.slice(segment.basePointIndex), time);\n  }\n  class CubismMotion extends ACubismMotion {\n    constructor() {\n      super();\n      this._eyeBlinkParameterIds = [];\n      this._lipSyncParameterIds = [];\n      this._sourceFrameRate = 30;\n      this._loopDurationSeconds = -1;\n      this._isLoop = false;\n      this._isLoopFadeIn = true;\n      this._lastWeight = 0;\n    }\n    static create(json, onFinishedMotionHandler) {\n      const ret = new CubismMotion();\n      ret.parse(json);\n      ret._sourceFrameRate = ret._motionData.fps;\n      ret._loopDurationSeconds = ret._motionData.duration;\n      ret._onFinishedMotion = onFinishedMotionHandler;\n      return ret;\n    }\n    doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry) {\n      if (this._modelCurveIdEyeBlink == null) {\n        this._modelCurveIdEyeBlink = EffectNameEyeBlink;\n      }\n      if (this._modelCurveIdLipSync == null) {\n        this._modelCurveIdLipSync = EffectNameLipSync;\n      }\n      let timeOffsetSeconds = userTimeSeconds - motionQueueEntry.getStartTime();\n      if (timeOffsetSeconds < 0) {\n        timeOffsetSeconds = 0;\n      }\n      let lipSyncValue = Number.MAX_VALUE;\n      let eyeBlinkValue = Number.MAX_VALUE;\n      const MaxTargetSize = 64;\n      let lipSyncFlags = 0;\n      let eyeBlinkFlags = 0;\n      if (this._eyeBlinkParameterIds.length > MaxTargetSize) {\n        CubismLogDebug(\"too many eye blink targets : {0}\", this._eyeBlinkParameterIds.length);\n      }\n      if (this._lipSyncParameterIds.length > MaxTargetSize) {\n        CubismLogDebug(\"too many lip sync targets : {0}\", this._lipSyncParameterIds.length);\n      }\n      const tmpFadeIn = this._fadeInSeconds <= 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n      const tmpFadeOut = this._fadeOutSeconds <= 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n      let value;\n      let c, parameterIndex;\n      let time = timeOffsetSeconds;\n      if (this._isLoop) {\n        while (time > this._motionData.duration) {\n          time -= this._motionData.duration;\n        }\n      }\n      const curves = this._motionData.curves;\n      for (c = 0; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_Model; ++c) {\n        value = evaluateCurve(this._motionData, c, time);\n        if (curves[c].id == this._modelCurveIdEyeBlink) {\n          eyeBlinkValue = value;\n        } else if (curves[c].id == this._modelCurveIdLipSync) {\n          lipSyncValue = value;\n        }\n      }\n      for (; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter; ++c) {\n        parameterIndex = model.getParameterIndex(curves[c].id);\n        if (parameterIndex == -1) {\n          continue;\n        }\n        const sourceValue = model.getParameterValueByIndex(parameterIndex);\n        value = evaluateCurve(this._motionData, c, time);\n        if (eyeBlinkValue != Number.MAX_VALUE) {\n          for (let i = 0; i < this._eyeBlinkParameterIds.length && i < MaxTargetSize; ++i) {\n            if (this._eyeBlinkParameterIds[i] == curves[c].id) {\n              value *= eyeBlinkValue;\n              eyeBlinkFlags |= 1 << i;\n              break;\n            }\n          }\n        }\n        if (lipSyncValue != Number.MAX_VALUE) {\n          for (let i = 0; i < this._lipSyncParameterIds.length && i < MaxTargetSize; ++i) {\n            if (this._lipSyncParameterIds[i] == curves[c].id) {\n              value += lipSyncValue;\n              lipSyncFlags |= 1 << i;\n              break;\n            }\n          }\n        }\n        let v;\n        if (curves[c].fadeInTime < 0 && curves[c].fadeOutTime < 0) {\n          v = sourceValue + (value - sourceValue) * fadeWeight;\n        } else {\n          let fin;\n          let fout;\n          if (curves[c].fadeInTime < 0) {\n            fin = tmpFadeIn;\n          } else {\n            fin = curves[c].fadeInTime == 0 ? 1 : CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / curves[c].fadeInTime);\n          }\n          if (curves[c].fadeOutTime < 0) {\n            fout = tmpFadeOut;\n          } else {\n            fout = curves[c].fadeOutTime == 0 || motionQueueEntry.getEndTime() < 0 ? 1 : CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / curves[c].fadeOutTime);\n          }\n          const paramWeight = this._weight * fin * fout;\n          v = sourceValue + (value - sourceValue) * paramWeight;\n        }\n        model.setParameterValueByIndex(parameterIndex, v, 1);\n      }\n      {\n        if (eyeBlinkValue != Number.MAX_VALUE) {\n          for (let i = 0; i < this._eyeBlinkParameterIds.length && i < MaxTargetSize; ++i) {\n            const sourceValue = model.getParameterValueById(this._eyeBlinkParameterIds[i]);\n            if (eyeBlinkFlags >> i & 1) {\n              continue;\n            }\n            const v = sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n            model.setParameterValueById(this._eyeBlinkParameterIds[i], v);\n          }\n        }\n        if (lipSyncValue != Number.MAX_VALUE) {\n          for (let i = 0; i < this._lipSyncParameterIds.length && i < MaxTargetSize; ++i) {\n            const sourceValue = model.getParameterValueById(this._lipSyncParameterIds[i]);\n            if (lipSyncFlags >> i & 1) {\n              continue;\n            }\n            const v = sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n            model.setParameterValueById(this._lipSyncParameterIds[i], v);\n          }\n        }\n      }\n      for (; c < this._motionData.curveCount && curves[c].type == CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity; ++c) {\n        value = evaluateCurve(this._motionData, c, time);\n        if (CubismConfig.setOpacityFromMotion) {\n          model.setPartOpacityById(curves[c].id, value);\n        } else {\n          parameterIndex = model.getParameterIndex(curves[c].id);\n          if (parameterIndex == -1) {\n            continue;\n          }\n          model.setParameterValueByIndex(parameterIndex, value);\n        }\n      }\n      if (timeOffsetSeconds >= this._motionData.duration) {\n        if (this._isLoop) {\n          motionQueueEntry.setStartTime(userTimeSeconds);\n          if (this._isLoopFadeIn) {\n            motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n          }\n        } else {\n          if (this._onFinishedMotion) {\n            this._onFinishedMotion(this);\n          }\n          motionQueueEntry.setIsFinished(true);\n        }\n      }\n      this._lastWeight = fadeWeight;\n    }\n    setIsLoop(loop) {\n      this._isLoop = loop;\n    }\n    isLoop() {\n      return this._isLoop;\n    }\n    setIsLoopFadeIn(loopFadeIn) {\n      this._isLoopFadeIn = loopFadeIn;\n    }\n    isLoopFadeIn() {\n      return this._isLoopFadeIn;\n    }\n    getDuration() {\n      return this._isLoop ? -1 : this._loopDurationSeconds;\n    }\n    getLoopDuration() {\n      return this._loopDurationSeconds;\n    }\n    setParameterFadeInTime(parameterId, value) {\n      const curves = this._motionData.curves;\n      for (let i = 0; i < this._motionData.curveCount; ++i) {\n        if (parameterId == curves[i].id) {\n          curves[i].fadeInTime = value;\n          return;\n        }\n      }\n    }\n    setParameterFadeOutTime(parameterId, value) {\n      const curves = this._motionData.curves;\n      for (let i = 0; i < this._motionData.curveCount; ++i) {\n        if (parameterId == curves[i].id) {\n          curves[i].fadeOutTime = value;\n          return;\n        }\n      }\n    }\n    getParameterFadeInTime(parameterId) {\n      const curves = this._motionData.curves;\n      for (let i = 0; i < this._motionData.curveCount; ++i) {\n        if (parameterId == curves[i].id) {\n          return curves[i].fadeInTime;\n        }\n      }\n      return -1;\n    }\n    getParameterFadeOutTime(parameterId) {\n      const curves = this._motionData.curves;\n      for (let i = 0; i < this._motionData.curveCount; ++i) {\n        if (parameterId == curves[i].id) {\n          return curves[i].fadeOutTime;\n        }\n      }\n      return -1;\n    }\n    setEffectIds(eyeBlinkParameterIds, lipSyncParameterIds) {\n      this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n      this._lipSyncParameterIds = lipSyncParameterIds;\n    }\n    release() {\n      this._motionData = void 0;\n    }\n    parse(motionJson) {\n      this._motionData = new CubismMotionData();\n      let json = new CubismMotionJson(motionJson);\n      this._motionData.duration = json.getMotionDuration();\n      this._motionData.loop = json.isMotionLoop();\n      this._motionData.curveCount = json.getMotionCurveCount();\n      this._motionData.fps = json.getMotionFps();\n      this._motionData.eventCount = json.getEventCount();\n      const areBeziersRestructed = json.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);\n      const fadeInSeconds = json.getMotionFadeInTime();\n      const fadeOutSeconds = json.getMotionFadeOutTime();\n      if (fadeInSeconds !== void 0) {\n        this._fadeInSeconds = fadeInSeconds < 0 ? 1 : fadeInSeconds;\n      } else {\n        this._fadeInSeconds = 1;\n      }\n      if (fadeOutSeconds !== void 0) {\n        this._fadeOutSeconds = fadeOutSeconds < 0 ? 1 : fadeOutSeconds;\n      } else {\n        this._fadeOutSeconds = 1;\n      }\n      this._motionData.curves = Array.from({ length: this._motionData.curveCount }).map(() => new CubismMotionCurve());\n      this._motionData.segments = Array.from({ length: json.getMotionTotalSegmentCount() }).map(() => new CubismMotionSegment());\n      this._motionData.events = Array.from({ length: this._motionData.eventCount }).map(() => new CubismMotionEvent());\n      this._motionData.points = [];\n      let totalPointCount = 0;\n      let totalSegmentCount = 0;\n      for (let curveCount = 0; curveCount < this._motionData.curveCount; ++curveCount) {\n        const curve = this._motionData.curves[curveCount];\n        switch (json.getMotionCurveTarget(curveCount)) {\n          case TargetNameModel:\n            curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n            break;\n          case TargetNameParameter:\n            curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n            break;\n          case TargetNamePartOpacity:\n            curve.type = CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n            break;\n          default:\n            CubismLogWarning('Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!');\n        }\n        curve.id = json.getMotionCurveId(curveCount);\n        curve.baseSegmentIndex = totalSegmentCount;\n        const fadeInTime = json.getMotionCurveFadeInTime(curveCount);\n        const fadeOutTime = json.getMotionCurveFadeOutTime(curveCount);\n        curve.fadeInTime = fadeInTime !== void 0 ? fadeInTime : -1;\n        curve.fadeOutTime = fadeOutTime !== void 0 ? fadeOutTime : -1;\n        for (let segmentPosition = 0; segmentPosition < json.getMotionCurveSegmentCount(curveCount); ) {\n          if (segmentPosition == 0) {\n            this._motionData.segments[totalSegmentCount].basePointIndex = totalPointCount;\n            this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition), json.getMotionCurveSegment(curveCount, segmentPosition + 1));\n            totalPointCount += 1;\n            segmentPosition += 2;\n          } else {\n            this._motionData.segments[totalSegmentCount].basePointIndex = totalPointCount - 1;\n          }\n          const segment = json.getMotionCurveSegment(curveCount, segmentPosition);\n          switch (segment) {\n            case CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\n              this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n              this._motionData.segments[totalSegmentCount].evaluate = linearEvaluate;\n              this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n              totalPointCount += 1;\n              segmentPosition += 3;\n              break;\n            }\n            case CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\n              this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n              if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n                this._motionData.segments[totalSegmentCount].evaluate = bezierEvaluate;\n              } else {\n                this._motionData.segments[totalSegmentCount].evaluate = bezierEvaluateCardanoInterpretation;\n              }\n              this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n              this._motionData.points[totalPointCount + 1] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 3), json.getMotionCurveSegment(curveCount, segmentPosition + 4));\n              this._motionData.points[totalPointCount + 2] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 5), json.getMotionCurveSegment(curveCount, segmentPosition + 6));\n              totalPointCount += 3;\n              segmentPosition += 7;\n              break;\n            }\n            case CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\n              this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n              this._motionData.segments[totalSegmentCount].evaluate = steppedEvaluate;\n              this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n              totalPointCount += 1;\n              segmentPosition += 3;\n              break;\n            }\n            case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\n              this._motionData.segments[totalSegmentCount].segmentType = CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n              this._motionData.segments[totalSegmentCount].evaluate = inverseSteppedEvaluate;\n              this._motionData.points[totalPointCount] = new CubismMotionPoint(json.getMotionCurveSegment(curveCount, segmentPosition + 1), json.getMotionCurveSegment(curveCount, segmentPosition + 2));\n              totalPointCount += 1;\n              segmentPosition += 3;\n              break;\n            }\n          }\n          ++curve.segmentCount;\n          ++totalSegmentCount;\n        }\n        this._motionData.curves.push(curve);\n      }\n      for (let userdatacount = 0; userdatacount < json.getEventCount(); ++userdatacount) {\n        this._motionData.events[userdatacount].fireTime = json.getEventTime(userdatacount);\n        this._motionData.events[userdatacount].value = json.getEventValue(userdatacount);\n      }\n      json.release();\n    }\n    getFiredEvent(beforeCheckTimeSeconds, motionTimeSeconds) {\n      this._firedEventValues.length = 0;\n      for (let u = 0; u < this._motionData.eventCount; ++u) {\n        if (this._motionData.events[u].fireTime > beforeCheckTimeSeconds && this._motionData.events[u].fireTime <= motionTimeSeconds) {\n          this._firedEventValues.push(this._motionData.events[u].value);\n        }\n      }\n      return this._firedEventValues;\n    }\n  }\n  class Cubism4MotionManager extends MotionManager {\n    constructor(settings, options) {\n      var _a;\n      super(settings, options);\n      this.groups = { idle: \"Idle\" };\n      this.motionDataType = \"json\";\n      this.queueManager = new CubismMotionQueueManager();\n      this.definitions = (_a = settings.motions) != null ? _a : {};\n      this.eyeBlinkIds = settings.getEyeBlinkParameters() || [];\n      this.lipSyncIds = settings.getLipSyncParameters() || [];\n      this.init(options);\n    }\n    init(options) {\n      super.init(options);\n      if (this.settings.expressions) {\n        this.expressionManager = new Cubism4ExpressionManager(this.settings, options);\n      }\n      this.queueManager.setEventCallback((caller, eventValue, customData) => {\n        this.emit(\"motion:\" + eventValue);\n      });\n    }\n    isFinished() {\n      return this.queueManager.isFinished();\n    }\n    _startMotion(motion, onFinish) {\n      motion.setFinishedMotionHandler(onFinish);\n      this.queueManager.stopAllMotions();\n      return this.queueManager.startMotion(motion, false, performance.now());\n    }\n    _stopAllMotions() {\n      this.queueManager.stopAllMotions();\n    }\n    createMotion(data, group, definition) {\n      const motion = CubismMotion.create(data);\n      const json = new CubismMotionJson(data);\n      const defaultFadingDuration = (group === this.groups.idle ? exports2.config.idleMotionFadingDuration : exports2.config.motionFadingDuration) / 1e3;\n      if (json.getMotionFadeInTime() === void 0) {\n        motion.setFadeInTime(definition.FadeInTime > 0 ? definition.FadeInTime : defaultFadingDuration);\n      }\n      if (json.getMotionFadeOutTime() === void 0) {\n        motion.setFadeOutTime(definition.FadeOutTime > 0 ? definition.FadeOutTime : defaultFadingDuration);\n      }\n      motion.setEffectIds(this.eyeBlinkIds, this.lipSyncIds);\n      return motion;\n    }\n    getMotionFile(definition) {\n      return definition.File;\n    }\n    getMotionName(definition) {\n      return definition.File;\n    }\n    getSoundFile(definition) {\n      return definition.Sound;\n    }\n    updateParameters(model, now) {\n      return this.queueManager.doUpdateMotion(model, now);\n    }\n    destroy() {\n      super.destroy();\n      this.queueManager.release();\n      this.queueManager = void 0;\n    }\n  }\n  const ParamAngleX = \"ParamAngleX\";\n  const ParamAngleY = \"ParamAngleY\";\n  const ParamAngleZ = \"ParamAngleZ\";\n  const ParamEyeBallX = \"ParamEyeBallX\";\n  const ParamEyeBallY = \"ParamEyeBallY\";\n  const ParamBodyAngleX = \"ParamBodyAngleX\";\n  const ParamBreath = \"ParamBreath\";\n  class CubismBreath {\n    constructor() {\n      this._breathParameters = [];\n      this._currentTime = 0;\n    }\n    static create() {\n      return new CubismBreath();\n    }\n    setParameters(breathParameters) {\n      this._breathParameters = breathParameters;\n    }\n    getParameters() {\n      return this._breathParameters;\n    }\n    updateParameters(model, deltaTimeSeconds) {\n      this._currentTime += deltaTimeSeconds;\n      const t = this._currentTime * 2 * 3.14159;\n      for (let i = 0; i < this._breathParameters.length; ++i) {\n        const data = this._breathParameters[i];\n        model.addParameterValueById(data.parameterId, data.offset + data.peak * Math.sin(t / data.cycle), data.weight);\n      }\n    }\n  }\n  class BreathParameterData {\n    constructor(parameterId, offset, peak, cycle, weight) {\n      this.parameterId = parameterId == void 0 ? void 0 : parameterId;\n      this.offset = offset == void 0 ? 0 : offset;\n      this.peak = peak == void 0 ? 0 : peak;\n      this.cycle = cycle == void 0 ? 0 : cycle;\n      this.weight = weight == void 0 ? 0 : weight;\n    }\n  }\n  const _CubismEyeBlink = class {\n    static create(modelSetting) {\n      return new _CubismEyeBlink(modelSetting);\n    }\n    setBlinkingInterval(blinkingInterval) {\n      this._blinkingIntervalSeconds = blinkingInterval;\n    }\n    setBlinkingSetting(closing, closed, opening) {\n      this._closingSeconds = closing;\n      this._closedSeconds = closed;\n      this._openingSeconds = opening;\n    }\n    setParameterIds(parameterIds) {\n      this._parameterIds = parameterIds;\n    }\n    getParameterIds() {\n      return this._parameterIds;\n    }\n    updateParameters(model, deltaTimeSeconds) {\n      this._userTimeSeconds += deltaTimeSeconds;\n      let parameterValue;\n      let t = 0;\n      switch (this._blinkingState) {\n        case EyeState.EyeState_Closing:\n          t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closingSeconds;\n          if (t >= 1) {\n            t = 1;\n            this._blinkingState = EyeState.EyeState_Closed;\n            this._stateStartTimeSeconds = this._userTimeSeconds;\n          }\n          parameterValue = 1 - t;\n          break;\n        case EyeState.EyeState_Closed:\n          t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closedSeconds;\n          if (t >= 1) {\n            this._blinkingState = EyeState.EyeState_Opening;\n            this._stateStartTimeSeconds = this._userTimeSeconds;\n          }\n          parameterValue = 0;\n          break;\n        case EyeState.EyeState_Opening:\n          t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._openingSeconds;\n          if (t >= 1) {\n            t = 1;\n            this._blinkingState = EyeState.EyeState_Interval;\n            this._nextBlinkingTime = this.determinNextBlinkingTiming();\n          }\n          parameterValue = t;\n          break;\n        case EyeState.EyeState_Interval:\n          if (this._nextBlinkingTime < this._userTimeSeconds) {\n            this._blinkingState = EyeState.EyeState_Closing;\n            this._stateStartTimeSeconds = this._userTimeSeconds;\n          }\n          parameterValue = 1;\n          break;\n        case EyeState.EyeState_First:\n        default:\n          this._blinkingState = EyeState.EyeState_Interval;\n          this._nextBlinkingTime = this.determinNextBlinkingTiming();\n          parameterValue = 1;\n          break;\n      }\n      if (!_CubismEyeBlink.CloseIfZero) {\n        parameterValue = -parameterValue;\n      }\n      for (let i = 0; i < this._parameterIds.length; ++i) {\n        model.setParameterValueById(this._parameterIds[i], parameterValue);\n      }\n    }\n    constructor(modelSetting) {\n      var _a, _b;\n      this._blinkingState = EyeState.EyeState_First;\n      this._nextBlinkingTime = 0;\n      this._stateStartTimeSeconds = 0;\n      this._blinkingIntervalSeconds = 4;\n      this._closingSeconds = 0.1;\n      this._closedSeconds = 0.05;\n      this._openingSeconds = 0.15;\n      this._userTimeSeconds = 0;\n      this._parameterIds = [];\n      if (modelSetting == null) {\n        return;\n      }\n      this._parameterIds = (_b = (_a = modelSetting.getEyeBlinkParameters()) == null ? void 0 : _a.slice()) != null ? _b : this._parameterIds;\n    }\n    determinNextBlinkingTiming() {\n      const r = Math.random();\n      return this._userTimeSeconds + r * (2 * this._blinkingIntervalSeconds - 1);\n    }\n  };\n  let CubismEyeBlink = _CubismEyeBlink;\n  CubismEyeBlink.CloseIfZero = true;\n  var EyeState = /* @__PURE__ */ ((EyeState2) => {\n    EyeState2[EyeState2[\"EyeState_First\"] = 0] = \"EyeState_First\";\n    EyeState2[EyeState2[\"EyeState_Interval\"] = 1] = \"EyeState_Interval\";\n    EyeState2[EyeState2[\"EyeState_Closing\"] = 2] = \"EyeState_Closing\";\n    EyeState2[EyeState2[\"EyeState_Closed\"] = 3] = \"EyeState_Closed\";\n    EyeState2[EyeState2[\"EyeState_Opening\"] = 4] = \"EyeState_Opening\";\n    return EyeState2;\n  })(EyeState || {});\n  class csmRect {\n    constructor(x = 0, y = 0, w = 0, h = 0) {\n      this.x = x;\n      this.y = y;\n      this.width = w;\n      this.height = h;\n    }\n    getCenterX() {\n      return this.x + 0.5 * this.width;\n    }\n    getCenterY() {\n      return this.y + 0.5 * this.height;\n    }\n    getRight() {\n      return this.x + this.width;\n    }\n    getBottom() {\n      return this.y + this.height;\n    }\n    setRect(r) {\n      this.x = r.x;\n      this.y = r.y;\n      this.width = r.width;\n      this.height = r.height;\n    }\n    expand(w, h) {\n      this.x -= w;\n      this.y -= h;\n      this.width += w * 2;\n      this.height += h * 2;\n    }\n  }\n  const ColorChannelCount = 4;\n  const shaderCount = 10;\n  let s_instance;\n  let s_viewport;\n  let s_fbo;\n  class CubismClippingManager_WebGL {\n    getChannelFlagAsColor(channelNo) {\n      return this._channelColors[channelNo];\n    }\n    getMaskRenderTexture() {\n      let ret = 0;\n      if (this._maskTexture && this._maskTexture.texture != 0) {\n        this._maskTexture.frameNo = this._currentFrameNo;\n        ret = this._maskTexture.texture;\n      }\n      if (ret == 0) {\n        const size = this._clippingMaskBufferSize;\n        this._colorBuffer = this.gl.createTexture();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer);\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, size, size, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n        ret = this.gl.createFramebuffer();\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, ret);\n        this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._colorBuffer, 0);\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n        this._maskTexture = new CubismRenderTextureResource(this._currentFrameNo, ret);\n      }\n      return ret;\n    }\n    setGL(gl) {\n      this.gl = gl;\n    }\n    calcClippedDrawTotalBounds(model, clippingContext) {\n      let clippedDrawTotalMinX = Number.MAX_VALUE;\n      let clippedDrawTotalMinY = Number.MAX_VALUE;\n      let clippedDrawTotalMaxX = Number.MIN_VALUE;\n      let clippedDrawTotalMaxY = Number.MIN_VALUE;\n      const clippedDrawCount = clippingContext._clippedDrawableIndexList.length;\n      for (let clippedDrawableIndex = 0; clippedDrawableIndex < clippedDrawCount; clippedDrawableIndex++) {\n        const drawableIndex = clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n        const drawableVertexCount = model.getDrawableVertexCount(drawableIndex);\n        const drawableVertexes = model.getDrawableVertices(drawableIndex);\n        let minX = Number.MAX_VALUE;\n        let minY = Number.MAX_VALUE;\n        let maxX = Number.MIN_VALUE;\n        let maxY = Number.MIN_VALUE;\n        const loop = drawableVertexCount * Constant.vertexStep;\n        for (let pi = Constant.vertexOffset; pi < loop; pi += Constant.vertexStep) {\n          const x = drawableVertexes[pi];\n          const y = drawableVertexes[pi + 1];\n          if (x < minX) {\n            minX = x;\n          }\n          if (x > maxX) {\n            maxX = x;\n          }\n          if (y < minY) {\n            minY = y;\n          }\n          if (y > maxY) {\n            maxY = y;\n          }\n        }\n        if (minX == Number.MAX_VALUE) {\n          continue;\n        }\n        if (minX < clippedDrawTotalMinX) {\n          clippedDrawTotalMinX = minX;\n        }\n        if (minY < clippedDrawTotalMinY) {\n          clippedDrawTotalMinY = minY;\n        }\n        if (maxX > clippedDrawTotalMaxX) {\n          clippedDrawTotalMaxX = maxX;\n        }\n        if (maxY > clippedDrawTotalMaxY) {\n          clippedDrawTotalMaxY = maxY;\n        }\n        if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n          clippingContext._allClippedDrawRect.x = 0;\n          clippingContext._allClippedDrawRect.y = 0;\n          clippingContext._allClippedDrawRect.width = 0;\n          clippingContext._allClippedDrawRect.height = 0;\n          clippingContext._isUsing = false;\n        } else {\n          clippingContext._isUsing = true;\n          const w = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n          const h = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n          clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n          clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n          clippingContext._allClippedDrawRect.width = w;\n          clippingContext._allClippedDrawRect.height = h;\n        }\n      }\n    }\n    constructor() {\n      this._maskRenderTexture = null;\n      this._colorBuffer = null;\n      this._currentFrameNo = 0;\n      this._clippingMaskBufferSize = 256;\n      this._clippingContextListForMask = [];\n      this._clippingContextListForDraw = [];\n      this._channelColors = [];\n      this._tmpBoundsOnModel = new csmRect();\n      this._tmpMatrix = new CubismMatrix44();\n      this._tmpMatrixForMask = new CubismMatrix44();\n      this._tmpMatrixForDraw = new CubismMatrix44();\n      let tmp = new CubismTextureColor();\n      tmp.R = 1;\n      tmp.G = 0;\n      tmp.B = 0;\n      tmp.A = 0;\n      this._channelColors.push(tmp);\n      tmp = new CubismTextureColor();\n      tmp.R = 0;\n      tmp.G = 1;\n      tmp.B = 0;\n      tmp.A = 0;\n      this._channelColors.push(tmp);\n      tmp = new CubismTextureColor();\n      tmp.R = 0;\n      tmp.G = 0;\n      tmp.B = 1;\n      tmp.A = 0;\n      this._channelColors.push(tmp);\n      tmp = new CubismTextureColor();\n      tmp.R = 0;\n      tmp.G = 0;\n      tmp.B = 0;\n      tmp.A = 1;\n      this._channelColors.push(tmp);\n    }\n    release() {\n      var _a, _b, _c;\n      const self2 = this;\n      for (let i = 0; i < this._clippingContextListForMask.length; i++) {\n        if (this._clippingContextListForMask[i]) {\n          (_a = this._clippingContextListForMask[i]) == null ? void 0 : _a.release();\n        }\n      }\n      self2._clippingContextListForMask = void 0;\n      self2._clippingContextListForDraw = void 0;\n      if (this._maskTexture) {\n        (_b = this.gl) == null ? void 0 : _b.deleteFramebuffer(this._maskTexture.texture);\n        self2._maskTexture = void 0;\n      }\n      self2._channelColors = void 0;\n      (_c = this.gl) == null ? void 0 : _c.deleteTexture(this._colorBuffer);\n      this._colorBuffer = null;\n    }\n    initialize(model, drawableCount, drawableMasks, drawableMaskCounts) {\n      for (let i = 0; i < drawableCount; i++) {\n        if (drawableMaskCounts[i] <= 0) {\n          this._clippingContextListForDraw.push(null);\n          continue;\n        }\n        let clippingContext = this.findSameClip(drawableMasks[i], drawableMaskCounts[i]);\n        if (clippingContext == null) {\n          clippingContext = new CubismClippingContext(this, drawableMasks[i], drawableMaskCounts[i]);\n          this._clippingContextListForMask.push(clippingContext);\n        }\n        clippingContext.addClippedDrawable(i);\n        this._clippingContextListForDraw.push(clippingContext);\n      }\n    }\n    setupClippingContext(model, renderer) {\n      this._currentFrameNo++;\n      let usingClipCount = 0;\n      for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.length; clipIndex++) {\n        const cc = this._clippingContextListForMask[clipIndex];\n        this.calcClippedDrawTotalBounds(model, cc);\n        if (cc._isUsing) {\n          usingClipCount++;\n        }\n      }\n      if (usingClipCount > 0) {\n        this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize);\n        this._maskRenderTexture = this.getMaskRenderTexture();\n        renderer.getMvpMatrix();\n        renderer.preDraw();\n        this.setupLayoutBounds(usingClipCount);\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture);\n        this.gl.clearColor(1, 1, 1, 1);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        for (let clipIndex = 0; clipIndex < this._clippingContextListForMask.length; clipIndex++) {\n          const clipContext = this._clippingContextListForMask[clipIndex];\n          const allClipedDrawRect = clipContext._allClippedDrawRect;\n          const layoutBoundsOnTex01 = clipContext._layoutBounds;\n          const MARGIN = 0.05;\n          this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n          this._tmpBoundsOnModel.expand(allClipedDrawRect.width * MARGIN, allClipedDrawRect.height * MARGIN);\n          const scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n          const scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n          {\n            this._tmpMatrix.loadIdentity();\n            {\n              this._tmpMatrix.translateRelative(-1, -1);\n              this._tmpMatrix.scaleRelative(2, 2);\n            }\n            {\n              this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n              this._tmpMatrix.scaleRelative(scaleX, scaleY);\n              this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n            }\n            this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n          }\n          {\n            this._tmpMatrix.loadIdentity();\n            {\n              this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n              this._tmpMatrix.scaleRelative(scaleX, scaleY);\n              this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n            }\n            this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n          }\n          clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n          clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n          const clipDrawCount = clipContext._clippingIdCount;\n          for (let i = 0; i < clipDrawCount; i++) {\n            const clipDrawIndex = clipContext._clippingIdList[i];\n            if (!model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n              continue;\n            }\n            renderer.setIsCulling(model.getDrawableCulling(clipDrawIndex) != false);\n            renderer.setClippingContextBufferForMask(clipContext);\n            renderer.drawMesh(model.getDrawableTextureIndices(clipDrawIndex), model.getDrawableVertexIndexCount(clipDrawIndex), model.getDrawableVertexCount(clipDrawIndex), model.getDrawableVertexIndices(clipDrawIndex), model.getDrawableVertices(clipDrawIndex), model.getDrawableVertexUvs(clipDrawIndex), model.getDrawableOpacity(clipDrawIndex), CubismBlendMode.CubismBlendMode_Normal, false);\n          }\n        }\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n        renderer.setClippingContextBufferForMask(null);\n        this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n      }\n    }\n    findSameClip(drawableMasks, drawableMaskCounts) {\n      for (let i = 0; i < this._clippingContextListForMask.length; i++) {\n        const clippingContext = this._clippingContextListForMask[i];\n        const count = clippingContext._clippingIdCount;\n        if (count != drawableMaskCounts) {\n          continue;\n        }\n        let sameCount = 0;\n        for (let j = 0; j < count; j++) {\n          const clipId = clippingContext._clippingIdList[j];\n          for (let k = 0; k < count; k++) {\n            if (drawableMasks[k] == clipId) {\n              sameCount++;\n              break;\n            }\n          }\n        }\n        if (sameCount == count) {\n          return clippingContext;\n        }\n      }\n      return null;\n    }\n    setupLayoutBounds(usingClipCount) {\n      let div = usingClipCount / ColorChannelCount;\n      let mod = usingClipCount % ColorChannelCount;\n      div = ~~div;\n      mod = ~~mod;\n      let curClipIndex = 0;\n      for (let channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\n        const layoutCount = div + (channelNo < mod ? 1 : 0);\n        if (layoutCount == 0)\n          ;\n        else if (layoutCount == 1) {\n          const clipContext = this._clippingContextListForMask[curClipIndex++];\n          clipContext._layoutChannelNo = channelNo;\n          clipContext._layoutBounds.x = 0;\n          clipContext._layoutBounds.y = 0;\n          clipContext._layoutBounds.width = 1;\n          clipContext._layoutBounds.height = 1;\n        } else if (layoutCount == 2) {\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos = i % 2;\n            xpos = ~~xpos;\n            const cc = this._clippingContextListForMask[curClipIndex++];\n            cc._layoutChannelNo = channelNo;\n            cc._layoutBounds.x = xpos * 0.5;\n            cc._layoutBounds.y = 0;\n            cc._layoutBounds.width = 0.5;\n            cc._layoutBounds.height = 1;\n          }\n        } else if (layoutCount <= 4) {\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos = i % 2;\n            let ypos = i / 2;\n            xpos = ~~xpos;\n            ypos = ~~ypos;\n            const cc = this._clippingContextListForMask[curClipIndex++];\n            cc._layoutChannelNo = channelNo;\n            cc._layoutBounds.x = xpos * 0.5;\n            cc._layoutBounds.y = ypos * 0.5;\n            cc._layoutBounds.width = 0.5;\n            cc._layoutBounds.height = 0.5;\n          }\n        } else if (layoutCount <= 9) {\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos = i % 3;\n            let ypos = i / 3;\n            xpos = ~~xpos;\n            ypos = ~~ypos;\n            const cc = this._clippingContextListForMask[curClipIndex++];\n            cc._layoutChannelNo = channelNo;\n            cc._layoutBounds.x = xpos / 3;\n            cc._layoutBounds.y = ypos / 3;\n            cc._layoutBounds.width = 1 / 3;\n            cc._layoutBounds.height = 1 / 3;\n          }\n        } else if (CubismConfig.supportMoreMaskDivisions && layoutCount <= 16) {\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos = i % 4;\n            let ypos = i / 4;\n            xpos = ~~xpos;\n            ypos = ~~ypos;\n            const cc = this._clippingContextListForMask[curClipIndex++];\n            cc._layoutChannelNo = channelNo;\n            cc._layoutBounds.x = xpos / 4;\n            cc._layoutBounds.y = ypos / 4;\n            cc._layoutBounds.width = 1 / 4;\n            cc._layoutBounds.height = 1 / 4;\n          }\n        } else {\n          CubismLogError(\"not supported mask count : {0}\", layoutCount);\n        }\n      }\n    }\n    getColorBuffer() {\n      return this._colorBuffer;\n    }\n    getClippingContextListForDraw() {\n      return this._clippingContextListForDraw;\n    }\n    setClippingMaskBufferSize(size) {\n      this._clippingMaskBufferSize = size;\n    }\n    getClippingMaskBufferSize() {\n      return this._clippingMaskBufferSize;\n    }\n  }\n  class CubismRenderTextureResource {\n    constructor(frameNo, texture) {\n      this.frameNo = frameNo;\n      this.texture = texture;\n    }\n  }\n  class CubismClippingContext {\n    constructor(manager, clippingDrawableIndices, clipCount) {\n      this._isUsing = false;\n      this._owner = manager;\n      this._clippingIdList = clippingDrawableIndices;\n      this._clippingIdCount = clipCount;\n      this._allClippedDrawRect = new csmRect();\n      this._layoutBounds = new csmRect();\n      this._clippedDrawableIndexList = [];\n      this._matrixForMask = new CubismMatrix44();\n      this._matrixForDraw = new CubismMatrix44();\n    }\n    release() {\n      const self2 = this;\n      self2._layoutBounds = void 0;\n      self2._allClippedDrawRect = void 0;\n      self2._clippedDrawableIndexList = void 0;\n    }\n    addClippedDrawable(drawableIndex) {\n      this._clippedDrawableIndexList.push(drawableIndex);\n    }\n    getClippingManager() {\n      return this._owner;\n    }\n    setGl(gl) {\n      this._owner.setGL(gl);\n    }\n  }\n  class CubismShader_WebGL {\n    static getInstance() {\n      if (s_instance == null) {\n        s_instance = new CubismShader_WebGL();\n        return s_instance;\n      }\n      return s_instance;\n    }\n    static deleteInstance() {\n      if (s_instance) {\n        s_instance.release();\n        s_instance = void 0;\n      }\n    }\n    constructor() {\n      this._shaderSets = [];\n    }\n    release() {\n      this.releaseShaderProgram();\n    }\n    setupShaderProgram(renderer, textureId, vertexCount, vertexArray, indexArray, uvArray, bufferData, opacity, colorBlendMode, baseColor, isPremultipliedAlpha, matrix4x4, invertedMask) {\n      if (!isPremultipliedAlpha) {\n        CubismLogError(\"NoPremultipliedAlpha is not allowed\");\n      }\n      if (this._shaderSets.length == 0) {\n        this.generateShaders();\n      }\n      let SRC_COLOR;\n      let DST_COLOR;\n      let SRC_ALPHA;\n      let DST_ALPHA;\n      const clippingContextBufferForMask = renderer.getClippingContextBufferForMask();\n      if (clippingContextBufferForMask != null) {\n        const shaderSet = this._shaderSets[ShaderNames.ShaderNames_SetupMask];\n        this.gl.useProgram(shaderSet.shaderProgram);\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n        this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n        if (bufferData.vertex == null) {\n          bufferData.vertex = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (bufferData.uv == null) {\n          bufferData.uv = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n        const channelNo = clippingContextBufferForMask._layoutChannelNo;\n        const colorChannel = clippingContextBufferForMask.getClippingManager().getChannelFlagAsColor(channelNo);\n        this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n        this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, clippingContextBufferForMask._matrixForMask.getArray());\n        const rect = clippingContextBufferForMask._layoutBounds;\n        this.gl.uniform4f(shaderSet.uniformBaseColorLocation, rect.x * 2 - 1, rect.y * 2 - 1, rect.getRight() * 2 - 1, rect.getBottom() * 2 - 1);\n        SRC_COLOR = this.gl.ZERO;\n        DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\n        SRC_ALPHA = this.gl.ZERO;\n        DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n      } else {\n        const clippingContextBufferForDraw = renderer.getClippingContextBufferForDraw();\n        const masked = clippingContextBufferForDraw != null;\n        const offset = masked ? invertedMask ? 2 : 1 : 0;\n        let shaderSet;\n        switch (colorBlendMode) {\n          case CubismBlendMode.CubismBlendMode_Normal:\n          default:\n            shaderSet = this._shaderSets[ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset];\n            SRC_COLOR = this.gl.ONE;\n            DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n            SRC_ALPHA = this.gl.ONE;\n            DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n            break;\n          case CubismBlendMode.CubismBlendMode_Additive:\n            shaderSet = this._shaderSets[ShaderNames.ShaderNames_AddPremultipliedAlpha + offset];\n            SRC_COLOR = this.gl.ONE;\n            DST_COLOR = this.gl.ONE;\n            SRC_ALPHA = this.gl.ZERO;\n            DST_ALPHA = this.gl.ONE;\n            break;\n          case CubismBlendMode.CubismBlendMode_Multiplicative:\n            shaderSet = this._shaderSets[ShaderNames.ShaderNames_MultPremultipliedAlpha + offset];\n            SRC_COLOR = this.gl.DST_COLOR;\n            DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n            SRC_ALPHA = this.gl.ZERO;\n            DST_ALPHA = this.gl.ONE;\n            break;\n        }\n        this.gl.useProgram(shaderSet.shaderProgram);\n        if (bufferData.vertex == null) {\n          bufferData.vertex = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (bufferData.uv == null) {\n          bufferData.uv = this.gl.createBuffer();\n        }\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n        this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n        this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n        if (clippingContextBufferForDraw != null) {\n          this.gl.activeTexture(this.gl.TEXTURE1);\n          const tex = clippingContextBufferForDraw.getClippingManager().getColorBuffer();\n          this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n          this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n          this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, clippingContextBufferForDraw._matrixForDraw.getArray());\n          const channelNo = clippingContextBufferForDraw._layoutChannelNo;\n          const colorChannel = clippingContextBufferForDraw.getClippingManager().getChannelFlagAsColor(channelNo);\n          this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n        }\n        this.gl.activeTexture(this.gl.TEXTURE0);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n        this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n        this.gl.uniformMatrix4fv(shaderSet.uniformMatrixLocation, false, matrix4x4.getArray());\n        this.gl.uniform4f(shaderSet.uniformBaseColorLocation, baseColor.R, baseColor.G, baseColor.B, baseColor.A);\n      }\n      if (bufferData.index == null) {\n        bufferData.index = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\n      this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n      this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\n    }\n    releaseShaderProgram() {\n      for (let i = 0; i < this._shaderSets.length; i++) {\n        this.gl.deleteProgram(this._shaderSets[i].shaderProgram);\n        this._shaderSets[i].shaderProgram = 0;\n      }\n      this._shaderSets = [];\n    }\n    generateShaders() {\n      for (let i = 0; i < shaderCount; i++) {\n        this._shaderSets.push({});\n      }\n      this._shaderSets[0].shaderProgram = this.loadShaderProgram(vertexShaderSrcSetupMask, fragmentShaderSrcsetupMask);\n      this._shaderSets[1].shaderProgram = this.loadShaderProgram(vertexShaderSrc, fragmentShaderSrcPremultipliedAlpha);\n      this._shaderSets[2].shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskPremultipliedAlpha);\n      this._shaderSets[3].shaderProgram = this.loadShaderProgram(vertexShaderSrcMasked, fragmentShaderSrcMaskInvertedPremultipliedAlpha);\n      this._shaderSets[4].shaderProgram = this._shaderSets[1].shaderProgram;\n      this._shaderSets[5].shaderProgram = this._shaderSets[2].shaderProgram;\n      this._shaderSets[6].shaderProgram = this._shaderSets[3].shaderProgram;\n      this._shaderSets[7].shaderProgram = this._shaderSets[1].shaderProgram;\n      this._shaderSets[8].shaderProgram = this._shaderSets[2].shaderProgram;\n      this._shaderSets[9].shaderProgram = this._shaderSets[3].shaderProgram;\n      this._shaderSets[0].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, \"a_position\");\n      this._shaderSets[0].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, \"a_texCoord\");\n      this._shaderSets[0].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"s_texture0\");\n      this._shaderSets[0].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[0].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[0].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, \"u_baseColor\");\n      this._shaderSets[1].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, \"a_position\");\n      this._shaderSets[1].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, \"a_texCoord\");\n      this._shaderSets[1].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"s_texture0\");\n      this._shaderSets[1].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"u_matrix\");\n      this._shaderSets[1].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, \"u_baseColor\");\n      this._shaderSets[2].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, \"a_position\");\n      this._shaderSets[2].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, \"a_texCoord\");\n      this._shaderSets[2].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"s_texture0\");\n      this._shaderSets[2].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"s_texture1\");\n      this._shaderSets[2].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_matrix\");\n      this._shaderSets[2].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[2].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[2].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, \"u_baseColor\");\n      this._shaderSets[3].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, \"a_position\");\n      this._shaderSets[3].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, \"a_texCoord\");\n      this._shaderSets[3].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"s_texture0\");\n      this._shaderSets[3].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"s_texture1\");\n      this._shaderSets[3].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_matrix\");\n      this._shaderSets[3].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[3].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[3].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, \"u_baseColor\");\n      this._shaderSets[4].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, \"a_position\");\n      this._shaderSets[4].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, \"a_texCoord\");\n      this._shaderSets[4].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"s_texture0\");\n      this._shaderSets[4].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"u_matrix\");\n      this._shaderSets[4].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, \"u_baseColor\");\n      this._shaderSets[5].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, \"a_position\");\n      this._shaderSets[5].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, \"a_texCoord\");\n      this._shaderSets[5].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"s_texture0\");\n      this._shaderSets[5].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"s_texture1\");\n      this._shaderSets[5].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_matrix\");\n      this._shaderSets[5].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[5].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[5].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, \"u_baseColor\");\n      this._shaderSets[6].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, \"a_position\");\n      this._shaderSets[6].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, \"a_texCoord\");\n      this._shaderSets[6].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"s_texture0\");\n      this._shaderSets[6].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"s_texture1\");\n      this._shaderSets[6].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_matrix\");\n      this._shaderSets[6].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[6].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[6].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, \"u_baseColor\");\n      this._shaderSets[7].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, \"a_position\");\n      this._shaderSets[7].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, \"a_texCoord\");\n      this._shaderSets[7].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"s_texture0\");\n      this._shaderSets[7].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"u_matrix\");\n      this._shaderSets[7].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, \"u_baseColor\");\n      this._shaderSets[8].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, \"a_position\");\n      this._shaderSets[8].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, \"a_texCoord\");\n      this._shaderSets[8].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"s_texture0\");\n      this._shaderSets[8].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"s_texture1\");\n      this._shaderSets[8].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_matrix\");\n      this._shaderSets[8].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[8].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[8].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, \"u_baseColor\");\n      this._shaderSets[9].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, \"a_position\");\n      this._shaderSets[9].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, \"a_texCoord\");\n      this._shaderSets[9].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"s_texture0\");\n      this._shaderSets[9].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"s_texture1\");\n      this._shaderSets[9].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_matrix\");\n      this._shaderSets[9].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_clipMatrix\");\n      this._shaderSets[9].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_channelFlag\");\n      this._shaderSets[9].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, \"u_baseColor\");\n    }\n    loadShaderProgram(vertexShaderSource, fragmentShaderSource) {\n      let shaderProgram = this.gl.createProgram();\n      let vertShader = this.compileShaderSource(this.gl.VERTEX_SHADER, vertexShaderSource);\n      if (!vertShader) {\n        CubismLogError(\"Vertex shader compile error!\");\n        return 0;\n      }\n      let fragShader = this.compileShaderSource(this.gl.FRAGMENT_SHADER, fragmentShaderSource);\n      if (!fragShader) {\n        CubismLogError(\"Vertex shader compile error!\");\n        return 0;\n      }\n      this.gl.attachShader(shaderProgram, vertShader);\n      this.gl.attachShader(shaderProgram, fragShader);\n      this.gl.linkProgram(shaderProgram);\n      const linkStatus = this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS);\n      if (!linkStatus) {\n        CubismLogError(\"Failed to link program: {0}\", shaderProgram);\n        this.gl.deleteShader(vertShader);\n        this.gl.deleteShader(fragShader);\n        if (shaderProgram) {\n          this.gl.deleteProgram(shaderProgram);\n        }\n        return 0;\n      }\n      this.gl.deleteShader(vertShader);\n      this.gl.deleteShader(fragShader);\n      return shaderProgram;\n    }\n    compileShaderSource(shaderType, shaderSource) {\n      const source = shaderSource;\n      const shader = this.gl.createShader(shaderType);\n      this.gl.shaderSource(shader, source);\n      this.gl.compileShader(shader);\n      if (!shader) {\n        const log = this.gl.getShaderInfoLog(shader);\n        CubismLogError(\"Shader compile log: {0} \", log);\n      }\n      const status = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n      if (!status) {\n        this.gl.deleteShader(shader);\n        return null;\n      }\n      return shader;\n    }\n    setGl(gl) {\n      this.gl = gl;\n    }\n  }\n  var ShaderNames = /* @__PURE__ */ ((ShaderNames2) => {\n    ShaderNames2[ShaderNames2[\"ShaderNames_SetupMask\"] = 0] = \"ShaderNames_SetupMask\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_NormalPremultipliedAlpha\"] = 1] = \"ShaderNames_NormalPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_NormalMaskedPremultipliedAlpha\"] = 2] = \"ShaderNames_NormalMaskedPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\"] = 3] = \"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_AddPremultipliedAlpha\"] = 4] = \"ShaderNames_AddPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_AddMaskedPremultipliedAlpha\"] = 5] = \"ShaderNames_AddMaskedPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_AddMaskedPremultipliedAlphaInverted\"] = 6] = \"ShaderNames_AddMaskedPremultipliedAlphaInverted\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_MultPremultipliedAlpha\"] = 7] = \"ShaderNames_MultPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_MultMaskedPremultipliedAlpha\"] = 8] = \"ShaderNames_MultMaskedPremultipliedAlpha\";\n    ShaderNames2[ShaderNames2[\"ShaderNames_MultMaskedPremultipliedAlphaInverted\"] = 9] = \"ShaderNames_MultMaskedPremultipliedAlphaInverted\";\n    return ShaderNames2;\n  })(ShaderNames || {});\n  const vertexShaderSrcSetupMask = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\n  const fragmentShaderSrcsetupMask = \"precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}\";\n  const vertexShaderSrc = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\n  const vertexShaderSrcMasked = \"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}\";\n  const fragmentShaderSrcPremultipliedAlpha = \"precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}\";\n  const fragmentShaderSrcMaskPremultipliedAlpha = \"precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}\";\n  const fragmentShaderSrcMaskInvertedPremultipliedAlpha = \"precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}\";\n  class CubismRenderer_WebGL extends CubismRenderer {\n    constructor() {\n      super();\n      this._clippingContextBufferForMask = null;\n      this._clippingContextBufferForDraw = null;\n      this._clippingManager = new CubismClippingManager_WebGL();\n      this.firstDraw = true;\n      this._textures = {};\n      this._sortedDrawableIndexList = [];\n      this._bufferData = {\n        vertex: null,\n        uv: null,\n        index: null\n      };\n    }\n    initialize(model) {\n      if (model.isUsingMasking()) {\n        this._clippingManager = new CubismClippingManager_WebGL();\n        this._clippingManager.initialize(model, model.getDrawableCount(), model.getDrawableMasks(), model.getDrawableMaskCounts());\n      }\n      for (let i = model.getDrawableCount() - 1; i >= 0; i--) {\n        this._sortedDrawableIndexList[i] = 0;\n      }\n      super.initialize(model);\n    }\n    bindTexture(modelTextureNo, glTexture) {\n      this._textures[modelTextureNo] = glTexture;\n    }\n    getBindedTextures() {\n      return this._textures;\n    }\n    setClippingMaskBufferSize(size) {\n      this._clippingManager.release();\n      this._clippingManager = new CubismClippingManager_WebGL();\n      this._clippingManager.setClippingMaskBufferSize(size);\n      this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts());\n    }\n    getClippingMaskBufferSize() {\n      return this._clippingManager.getClippingMaskBufferSize();\n    }\n    release() {\n      var _a, _b, _c;\n      const self2 = this;\n      this._clippingManager.release();\n      self2._clippingManager = void 0;\n      (_a = this.gl) == null ? void 0 : _a.deleteBuffer(this._bufferData.vertex);\n      this._bufferData.vertex = null;\n      (_b = this.gl) == null ? void 0 : _b.deleteBuffer(this._bufferData.uv);\n      this._bufferData.uv = null;\n      (_c = this.gl) == null ? void 0 : _c.deleteBuffer(this._bufferData.index);\n      this._bufferData.index = null;\n      self2._bufferData = void 0;\n      self2._textures = void 0;\n    }\n    doDrawModel() {\n      this.preDraw();\n      if (this._clippingManager != null) {\n        this._clippingManager.setupClippingContext(this.getModel(), this);\n      }\n      const drawableCount = this.getModel().getDrawableCount();\n      const renderOrder = this.getModel().getDrawableRenderOrders();\n      for (let i = 0; i < drawableCount; ++i) {\n        const order = renderOrder[i];\n        this._sortedDrawableIndexList[order] = i;\n      }\n      for (let i = 0; i < drawableCount; ++i) {\n        const drawableIndex = this._sortedDrawableIndexList[i];\n        if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n          continue;\n        }\n        this.setClippingContextBufferForDraw(this._clippingManager != null ? this._clippingManager.getClippingContextListForDraw()[drawableIndex] : null);\n        this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n        this.drawMesh(this.getModel().getDrawableTextureIndices(drawableIndex), this.getModel().getDrawableVertexIndexCount(drawableIndex), this.getModel().getDrawableVertexCount(drawableIndex), this.getModel().getDrawableVertexIndices(drawableIndex), this.getModel().getDrawableVertices(drawableIndex), this.getModel().getDrawableVertexUvs(drawableIndex), this.getModel().getDrawableOpacity(drawableIndex), this.getModel().getDrawableBlendMode(drawableIndex), this.getModel().getDrawableInvertedMaskBit(drawableIndex));\n      }\n    }\n    drawMesh(textureNo, indexCount, vertexCount, indexArray, vertexArray, uvArray, opacity, colorBlendMode, invertedMask) {\n      if (this.isCulling()) {\n        this.gl.enable(this.gl.CULL_FACE);\n      } else {\n        this.gl.disable(this.gl.CULL_FACE);\n      }\n      this.gl.frontFace(this.gl.CCW);\n      const modelColorRGBA = this.getModelColor();\n      if (this.getClippingContextBufferForMask() == null) {\n        modelColorRGBA.A *= opacity;\n        if (this.isPremultipliedAlpha()) {\n          modelColorRGBA.R *= modelColorRGBA.A;\n          modelColorRGBA.G *= modelColorRGBA.A;\n          modelColorRGBA.B *= modelColorRGBA.A;\n        }\n      }\n      let drawtexture = null;\n      if (this._textures[textureNo] != null) {\n        drawtexture = this._textures[textureNo];\n      }\n      CubismShader_WebGL.getInstance().setupShaderProgram(this, drawtexture, vertexCount, vertexArray, indexArray, uvArray, this._bufferData, opacity, colorBlendMode, modelColorRGBA, this.isPremultipliedAlpha(), this.getMvpMatrix(), invertedMask);\n      this.gl.drawElements(this.gl.TRIANGLES, indexCount, this.gl.UNSIGNED_SHORT, 0);\n      this.gl.useProgram(null);\n      this.setClippingContextBufferForDraw(null);\n      this.setClippingContextBufferForMask(null);\n    }\n    static doStaticRelease() {\n      CubismShader_WebGL.deleteInstance();\n    }\n    setRenderState(fbo, viewport) {\n      s_fbo = fbo;\n      s_viewport = viewport;\n    }\n    preDraw() {\n      if (this.firstDraw) {\n        this.firstDraw = false;\n        this._anisortopy = this.gl.getExtension(\"EXT_texture_filter_anisotropic\") || this.gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") || this.gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\");\n      }\n      this.gl.disable(this.gl.SCISSOR_TEST);\n      this.gl.disable(this.gl.STENCIL_TEST);\n      this.gl.disable(this.gl.DEPTH_TEST);\n      this.gl.frontFace(this.gl.CW);\n      this.gl.enable(this.gl.BLEND);\n      this.gl.colorMask(true, true, true, true);\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n      this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n    }\n    setClippingContextBufferForMask(clip) {\n      this._clippingContextBufferForMask = clip;\n    }\n    getClippingContextBufferForMask() {\n      return this._clippingContextBufferForMask;\n    }\n    setClippingContextBufferForDraw(clip) {\n      this._clippingContextBufferForDraw = clip;\n    }\n    getClippingContextBufferForDraw() {\n      return this._clippingContextBufferForDraw;\n    }\n    startUp(gl) {\n      this.gl = gl;\n      this._clippingManager.setGL(gl);\n      CubismShader_WebGL.getInstance().setGl(gl);\n    }\n  }\n  CubismRenderer.staticRelease = () => {\n    CubismRenderer_WebGL.doStaticRelease();\n  };\n  const tempMatrix = new CubismMatrix44();\n  class Cubism4InternalModel extends InternalModel {\n    constructor(coreModel, settings, options) {\n      super();\n      this.lipSync = true;\n      this.breath = CubismBreath.create();\n      this.renderer = new CubismRenderer_WebGL();\n      this.idParamAngleX = ParamAngleX;\n      this.idParamAngleY = ParamAngleY;\n      this.idParamAngleZ = ParamAngleZ;\n      this.idParamEyeBallX = ParamEyeBallX;\n      this.idParamEyeBallY = ParamEyeBallY;\n      this.idParamBodyAngleX = ParamBodyAngleX;\n      this.idParamBreath = ParamBreath;\n      this.pixelsPerUnit = 1;\n      this.centeringTransform = new math.Matrix();\n      this.coreModel = coreModel;\n      this.settings = settings;\n      this.motionManager = new Cubism4MotionManager(settings, options);\n      this.init();\n    }\n    init() {\n      var _a;\n      super.init();\n      if (((_a = this.settings.getEyeBlinkParameters()) == null ? void 0 : _a.length) > 0) {\n        this.eyeBlink = CubismEyeBlink.create(this.settings);\n      }\n      this.breath.setParameters([\n        new BreathParameterData(this.idParamAngleX, 0, 15, 6.5345, 0.5),\n        new BreathParameterData(this.idParamAngleY, 0, 8, 3.5345, 0.5),\n        new BreathParameterData(this.idParamAngleZ, 0, 10, 5.5345, 0.5),\n        new BreathParameterData(this.idParamBodyAngleX, 0, 4, 15.5345, 0.5),\n        new BreathParameterData(this.idParamBreath, 0, 0.5, 3.2345, 0.5)\n      ]);\n      this.renderer.initialize(this.coreModel);\n      this.renderer.setIsPremultipliedAlpha(true);\n    }\n    getSize() {\n      return [this.coreModel.getModel().canvasinfo.CanvasWidth, this.coreModel.getModel().canvasinfo.CanvasHeight];\n    }\n    getLayout() {\n      const layout = {};\n      if (this.settings.layout) {\n        for (const key of Object.keys(this.settings.layout)) {\n          const commonKey = key.charAt(0).toLowerCase() + key.slice(1);\n          layout[commonKey] = this.settings.layout[key];\n        }\n      }\n      return layout;\n    }\n    setupLayout() {\n      super.setupLayout();\n      this.pixelsPerUnit = this.coreModel.getModel().canvasinfo.PixelsPerUnit;\n      this.centeringTransform.scale(this.pixelsPerUnit, this.pixelsPerUnit).translate(this.originalWidth / 2, this.originalHeight / 2);\n    }\n    updateWebGLContext(gl, glContextID) {\n      this.renderer.firstDraw = true;\n      this.renderer._bufferData = {\n        vertex: null,\n        uv: null,\n        index: null\n      };\n      this.renderer.startUp(gl);\n      this.renderer._clippingManager._currentFrameNo = glContextID;\n      this.renderer._clippingManager._maskTexture = void 0;\n      CubismShader_WebGL.getInstance()._shaderSets = [];\n    }\n    bindTexture(index, texture) {\n      this.renderer.bindTexture(index, texture);\n    }\n    getHitAreaDefs() {\n      var _a, _b;\n      return (_b = (_a = this.settings.hitAreas) == null ? void 0 : _a.map((hitArea) => ({\n        id: hitArea.Id,\n        name: hitArea.Name,\n        index: this.coreModel.getDrawableIndex(hitArea.Id)\n      }))) != null ? _b : [];\n    }\n    getDrawableIDs() {\n      return this.coreModel.getDrawableIds();\n    }\n    getDrawableIndex(id) {\n      return this.coreModel.getDrawableIndex(id);\n    }\n    getDrawableVertices(drawIndex) {\n      if (typeof drawIndex === \"string\") {\n        drawIndex = this.coreModel.getDrawableIndex(drawIndex);\n        if (drawIndex === -1)\n          throw new TypeError(\"Unable to find drawable ID: \" + drawIndex);\n      }\n      const arr = this.coreModel.getDrawableVertices(drawIndex).slice();\n      for (let i = 0; i < arr.length; i += 2) {\n        arr[i] = arr[i] * this.pixelsPerUnit + this.originalWidth / 2;\n        arr[i + 1] = -arr[i + 1] * this.pixelsPerUnit + this.originalHeight / 2;\n      }\n      return arr;\n    }\n    updateTransform(transform) {\n      this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(transform);\n    }\n    update(dt, now) {\n      var _a, _b, _c, _d;\n      super.update(dt, now);\n      dt /= 1e3;\n      now /= 1e3;\n      const model = this.coreModel;\n      this.emit(\"beforeMotionUpdate\");\n      const motionUpdated = this.motionManager.update(this.coreModel, now);\n      this.emit(\"afterMotionUpdate\");\n      model.saveParameters();\n      (_a = this.motionManager.expressionManager) == null ? void 0 : _a.update(model, now);\n      if (!motionUpdated) {\n        (_b = this.eyeBlink) == null ? void 0 : _b.updateParameters(model, dt);\n      }\n      this.updateFocus();\n      this.updateNaturalMovements(dt * 1e3, now * 1e3);\n      (_c = this.physics) == null ? void 0 : _c.evaluate(model, dt);\n      (_d = this.pose) == null ? void 0 : _d.updateParameters(model, dt);\n      this.emit(\"beforeModelUpdate\");\n      model.update();\n      model.loadParameters();\n    }\n    updateFocus() {\n      this.coreModel.addParameterValueById(this.idParamEyeBallX, this.focusController.x);\n      this.coreModel.addParameterValueById(this.idParamEyeBallY, this.focusController.y);\n      this.coreModel.addParameterValueById(this.idParamAngleX, this.focusController.x * 30);\n      this.coreModel.addParameterValueById(this.idParamAngleY, this.focusController.y * 30);\n      this.coreModel.addParameterValueById(this.idParamAngleZ, this.focusController.x * this.focusController.y * -30);\n      this.coreModel.addParameterValueById(this.idParamBodyAngleX, this.focusController.x * 10);\n    }\n    updateNaturalMovements(dt, now) {\n      var _a;\n      (_a = this.breath) == null ? void 0 : _a.updateParameters(this.coreModel, dt / 1e3);\n    }\n    draw(gl) {\n      const matrix = this.drawingMatrix;\n      const array = tempMatrix.getArray();\n      array[0] = matrix.a;\n      array[1] = matrix.b;\n      array[4] = -matrix.c;\n      array[5] = -matrix.d;\n      array[12] = matrix.tx;\n      array[13] = matrix.ty;\n      this.renderer.setMvpMatrix(tempMatrix);\n      this.renderer.setRenderState(gl.getParameter(gl.FRAMEBUFFER_BINDING), this.viewport);\n      this.renderer.drawModel();\n    }\n    destroy() {\n      super.destroy();\n      this.renderer.release();\n      this.coreModel.release();\n      this.renderer = void 0;\n      this.coreModel = void 0;\n    }\n  }\n  let startupPromise;\n  let startupRetries = 20;\n  function cubism4Ready() {\n    if (CubismFramework.isStarted()) {\n      return Promise.resolve();\n    }\n    startupPromise != null ? startupPromise : startupPromise = new Promise((resolve, reject) => {\n      function startUpWithRetry() {\n        try {\n          startUpCubism4();\n          resolve();\n        } catch (e) {\n          startupRetries--;\n          if (startupRetries < 0) {\n            const err = new Error(\"Failed to start up Cubism 4 framework.\");\n            err.cause = e;\n            reject(err);\n            return;\n          }\n          logger.log(\"Cubism4\", \"Startup failed, retrying 10ms later...\");\n          setTimeout(startUpWithRetry, 10);\n        }\n      }\n      startUpWithRetry();\n    });\n    return startupPromise;\n  }\n  function startUpCubism4(options) {\n    options = Object.assign({\n      logFunction: console.log,\n      loggingLevel: LogLevel.LogLevel_Verbose\n    }, options);\n    CubismFramework.startUp(options);\n    CubismFramework.initialize();\n  }\n  const Epsilon = 1e-3;\n  const DefaultFadeInSeconds = 0.5;\n  class CubismPose {\n    static create(pose3json) {\n      const ret = new CubismPose();\n      if (typeof pose3json.FadeInTime === \"number\") {\n        ret._fadeTimeSeconds = pose3json.FadeInTime;\n        if (ret._fadeTimeSeconds <= 0) {\n          ret._fadeTimeSeconds = DefaultFadeInSeconds;\n        }\n      }\n      const poseListInfo = pose3json.Groups;\n      const poseCount = poseListInfo.length;\n      for (let poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n        const idListInfo = poseListInfo[poseIndex];\n        const idCount = idListInfo.length;\n        let groupCount = 0;\n        for (let groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n          const partInfo = idListInfo[groupIndex];\n          const partData = new PartData();\n          partData.partId = partInfo.Id;\n          const linkListInfo = partInfo.Link;\n          if (linkListInfo) {\n            const linkCount = linkListInfo.length;\n            for (let linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n              const linkPart = new PartData();\n              linkPart.partId = linkListInfo[linkIndex];\n              partData.link.push(linkPart);\n            }\n          }\n          ret._partGroups.push(partData);\n          ++groupCount;\n        }\n        ret._partGroupCounts.push(groupCount);\n      }\n      return ret;\n    }\n    updateParameters(model, deltaTimeSeconds) {\n      if (model != this._lastModel) {\n        this.reset(model);\n      }\n      this._lastModel = model;\n      if (deltaTimeSeconds < 0) {\n        deltaTimeSeconds = 0;\n      }\n      let beginIndex = 0;\n      for (let i = 0; i < this._partGroupCounts.length; i++) {\n        const partGroupCount = this._partGroupCounts[i];\n        this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n        beginIndex += partGroupCount;\n      }\n      this.copyPartOpacities(model);\n    }\n    reset(model) {\n      let beginIndex = 0;\n      for (let i = 0; i < this._partGroupCounts.length; ++i) {\n        const groupCount = this._partGroupCounts[i];\n        for (let j = beginIndex; j < beginIndex + groupCount; ++j) {\n          this._partGroups[j].initialize(model);\n          const partsIndex = this._partGroups[j].partIndex;\n          const paramIndex = this._partGroups[j].parameterIndex;\n          if (partsIndex < 0) {\n            continue;\n          }\n          model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1 : 0);\n          model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1 : 0);\n          for (let k = 0; k < this._partGroups[j].link.length; ++k) {\n            this._partGroups[j].link[k].initialize(model);\n          }\n        }\n        beginIndex += groupCount;\n      }\n    }\n    copyPartOpacities(model) {\n      for (let groupIndex = 0; groupIndex < this._partGroups.length; ++groupIndex) {\n        const partData = this._partGroups[groupIndex];\n        if (partData.link.length == 0) {\n          continue;\n        }\n        const partIndex = this._partGroups[groupIndex].partIndex;\n        const opacity = model.getPartOpacityByIndex(partIndex);\n        for (let linkIndex = 0; linkIndex < partData.link.length; ++linkIndex) {\n          const linkPart = partData.link[linkIndex];\n          const linkPartIndex = linkPart.partIndex;\n          if (linkPartIndex < 0) {\n            continue;\n          }\n          model.setPartOpacityByIndex(linkPartIndex, opacity);\n        }\n      }\n    }\n    doFade(model, deltaTimeSeconds, beginIndex, partGroupCount) {\n      let visiblePartIndex = -1;\n      let newOpacity = 1;\n      const phi = 0.5;\n      const backOpacityThreshold = 0.15;\n      for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n        const partIndex = this._partGroups[i].partIndex;\n        const paramIndex = this._partGroups[i].parameterIndex;\n        if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n          if (visiblePartIndex >= 0) {\n            break;\n          }\n          visiblePartIndex = i;\n          newOpacity = model.getPartOpacityByIndex(partIndex);\n          newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n          if (newOpacity > 1) {\n            newOpacity = 1;\n          }\n        }\n      }\n      if (visiblePartIndex < 0) {\n        visiblePartIndex = 0;\n        newOpacity = 1;\n      }\n      for (let i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n        const partsIndex = this._partGroups[i].partIndex;\n        if (visiblePartIndex == i) {\n          model.setPartOpacityByIndex(partsIndex, newOpacity);\n        } else {\n          let opacity = model.getPartOpacityByIndex(partsIndex);\n          let a1;\n          if (newOpacity < phi) {\n            a1 = newOpacity * (phi - 1) / phi + 1;\n          } else {\n            a1 = (1 - newOpacity) * phi / (1 - phi);\n          }\n          const backOpacity = (1 - a1) * (1 - newOpacity);\n          if (backOpacity > backOpacityThreshold) {\n            a1 = 1 - backOpacityThreshold / (1 - newOpacity);\n          }\n          if (opacity > a1) {\n            opacity = a1;\n          }\n          model.setPartOpacityByIndex(partsIndex, opacity);\n        }\n      }\n    }\n    constructor() {\n      this._fadeTimeSeconds = DefaultFadeInSeconds;\n      this._lastModel = void 0;\n      this._partGroups = [];\n      this._partGroupCounts = [];\n    }\n  }\n  class PartData {\n    constructor(v) {\n      this.parameterIndex = 0;\n      this.partIndex = 0;\n      this.partId = \"\";\n      this.link = [];\n      if (v != void 0) {\n        this.assignment(v);\n      }\n    }\n    assignment(v) {\n      this.partId = v.partId;\n      this.link = v.link.map((link) => link.clone());\n      return this;\n    }\n    initialize(model) {\n      this.parameterIndex = model.getParameterIndex(this.partId);\n      this.partIndex = model.getPartIndex(this.partId);\n      model.setParameterValueByIndex(this.parameterIndex, 1);\n    }\n    clone() {\n      const clonePartData = new PartData();\n      clonePartData.partId = this.partId;\n      clonePartData.parameterIndex = this.parameterIndex;\n      clonePartData.partIndex = this.partIndex;\n      clonePartData.link = this.link.map((link) => link.clone());\n      return clonePartData;\n    }\n  }\n  class CubismModel {\n    update() {\n      this._model.update();\n      this._model.drawables.resetDynamicFlags();\n    }\n    getCanvasWidth() {\n      if (this._model == null) {\n        return 0;\n      }\n      return this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit;\n    }\n    getCanvasHeight() {\n      if (this._model == null) {\n        return 0;\n      }\n      return this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit;\n    }\n    saveParameters() {\n      const parameterCount = this._model.parameters.count;\n      const savedParameterCount = this._savedParameters.length;\n      for (let i = 0; i < parameterCount; ++i) {\n        if (i < savedParameterCount) {\n          this._savedParameters[i] = this._parameterValues[i];\n        } else {\n          this._savedParameters.push(this._parameterValues[i]);\n        }\n      }\n    }\n    getModel() {\n      return this._model;\n    }\n    getPartIndex(partId) {\n      let partIndex;\n      const partCount = this._model.parts.count;\n      for (partIndex = 0; partIndex < partCount; ++partIndex) {\n        if (partId == this._partIds[partIndex]) {\n          return partIndex;\n        }\n      }\n      if (partId in this._notExistPartId) {\n        return this._notExistPartId[partId];\n      }\n      partIndex = partCount + this._notExistPartId.length;\n      this._notExistPartId[partId] = partIndex;\n      this._notExistPartOpacities[partIndex] = 0;\n      return partIndex;\n    }\n    getPartCount() {\n      return this._model.parts.count;\n    }\n    setPartOpacityByIndex(partIndex, opacity) {\n      if (partIndex in this._notExistPartOpacities) {\n        this._notExistPartOpacities[partIndex] = opacity;\n        return;\n      }\n      CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n      this._partOpacities[partIndex] = opacity;\n    }\n    setPartOpacityById(partId, opacity) {\n      const index = this.getPartIndex(partId);\n      if (index < 0) {\n        return;\n      }\n      this.setPartOpacityByIndex(index, opacity);\n    }\n    getPartOpacityByIndex(partIndex) {\n      if (partIndex in this._notExistPartOpacities) {\n        return this._notExistPartOpacities[partIndex];\n      }\n      CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n      return this._partOpacities[partIndex];\n    }\n    getPartOpacityById(partId) {\n      const index = this.getPartIndex(partId);\n      if (index < 0) {\n        return 0;\n      }\n      return this.getPartOpacityByIndex(index);\n    }\n    getParameterIndex(parameterId) {\n      let parameterIndex;\n      const idCount = this._model.parameters.count;\n      for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n        if (parameterId != this._parameterIds[parameterIndex]) {\n          continue;\n        }\n        return parameterIndex;\n      }\n      if (parameterId in this._notExistParameterId) {\n        return this._notExistParameterId[parameterId];\n      }\n      parameterIndex = this._model.parameters.count + Object.keys(this._notExistParameterId).length;\n      this._notExistParameterId[parameterId] = parameterIndex;\n      this._notExistParameterValues[parameterIndex] = 0;\n      return parameterIndex;\n    }\n    getParameterCount() {\n      return this._model.parameters.count;\n    }\n    getParameterMaximumValue(parameterIndex) {\n      return this._model.parameters.maximumValues[parameterIndex];\n    }\n    getParameterMinimumValue(parameterIndex) {\n      return this._model.parameters.minimumValues[parameterIndex];\n    }\n    getParameterDefaultValue(parameterIndex) {\n      return this._model.parameters.defaultValues[parameterIndex];\n    }\n    getParameterValueByIndex(parameterIndex) {\n      if (parameterIndex in this._notExistParameterValues) {\n        return this._notExistParameterValues[parameterIndex];\n      }\n      CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n      return this._parameterValues[parameterIndex];\n    }\n    getParameterValueById(parameterId) {\n      const parameterIndex = this.getParameterIndex(parameterId);\n      return this.getParameterValueByIndex(parameterIndex);\n    }\n    setParameterValueByIndex(parameterIndex, value, weight = 1) {\n      if (parameterIndex in this._notExistParameterValues) {\n        this._notExistParameterValues[parameterIndex] = weight == 1 ? value : this._notExistParameterValues[parameterIndex] * (1 - weight) + value * weight;\n        return;\n      }\n      CSM_ASSERT(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n      if (this._model.parameters.maximumValues[parameterIndex] < value) {\n        value = this._model.parameters.maximumValues[parameterIndex];\n      }\n      if (this._model.parameters.minimumValues[parameterIndex] > value) {\n        value = this._model.parameters.minimumValues[parameterIndex];\n      }\n      this._parameterValues[parameterIndex] = weight == 1 ? value : this._parameterValues[parameterIndex] = this._parameterValues[parameterIndex] * (1 - weight) + value * weight;\n    }\n    setParameterValueById(parameterId, value, weight = 1) {\n      const index = this.getParameterIndex(parameterId);\n      this.setParameterValueByIndex(index, value, weight);\n    }\n    addParameterValueByIndex(parameterIndex, value, weight = 1) {\n      this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) + value * weight);\n    }\n    addParameterValueById(parameterId, value, weight = 1) {\n      const index = this.getParameterIndex(parameterId);\n      this.addParameterValueByIndex(index, value, weight);\n    }\n    multiplyParameterValueById(parameterId, value, weight = 1) {\n      const index = this.getParameterIndex(parameterId);\n      this.multiplyParameterValueByIndex(index, value, weight);\n    }\n    multiplyParameterValueByIndex(parameterIndex, value, weight = 1) {\n      this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) * (1 + (value - 1) * weight));\n    }\n    getDrawableIds() {\n      return this._drawableIds.slice();\n    }\n    getDrawableIndex(drawableId) {\n      const drawableCount = this._model.drawables.count;\n      for (let drawableIndex = 0; drawableIndex < drawableCount; ++drawableIndex) {\n        if (this._drawableIds[drawableIndex] == drawableId) {\n          return drawableIndex;\n        }\n      }\n      return -1;\n    }\n    getDrawableCount() {\n      return this._model.drawables.count;\n    }\n    getDrawableId(drawableIndex) {\n      return this._model.drawables.ids[drawableIndex];\n    }\n    getDrawableRenderOrders() {\n      return this._model.drawables.renderOrders;\n    }\n    getDrawableTextureIndices(drawableIndex) {\n      return this._model.drawables.textureIndices[drawableIndex];\n    }\n    getDrawableDynamicFlagVertexPositionsDidChange(drawableIndex) {\n      const dynamicFlags = this._model.drawables.dynamicFlags;\n      return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableVertexIndexCount(drawableIndex) {\n      return this._model.drawables.indexCounts[drawableIndex];\n    }\n    getDrawableVertexCount(drawableIndex) {\n      return this._model.drawables.vertexCounts[drawableIndex];\n    }\n    getDrawableVertices(drawableIndex) {\n      return this.getDrawableVertexPositions(drawableIndex);\n    }\n    getDrawableVertexIndices(drawableIndex) {\n      return this._model.drawables.indices[drawableIndex];\n    }\n    getDrawableVertexPositions(drawableIndex) {\n      return this._model.drawables.vertexPositions[drawableIndex];\n    }\n    getDrawableVertexUvs(drawableIndex) {\n      return this._model.drawables.vertexUvs[drawableIndex];\n    }\n    getDrawableOpacity(drawableIndex) {\n      return this._model.drawables.opacities[drawableIndex];\n    }\n    getDrawableCulling(drawableIndex) {\n      const constantFlags = this._model.drawables.constantFlags;\n      return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(constantFlags[drawableIndex]);\n    }\n    getDrawableBlendMode(drawableIndex) {\n      const constantFlags = this._model.drawables.constantFlags;\n      return Live2DCubismCore.Utils.hasBlendAdditiveBit(constantFlags[drawableIndex]) ? CubismBlendMode.CubismBlendMode_Additive : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(constantFlags[drawableIndex]) ? CubismBlendMode.CubismBlendMode_Multiplicative : CubismBlendMode.CubismBlendMode_Normal;\n    }\n    getDrawableInvertedMaskBit(drawableIndex) {\n      const constantFlags = this._model.drawables.constantFlags;\n      return Live2DCubismCore.Utils.hasIsInvertedMaskBit(constantFlags[drawableIndex]);\n    }\n    getDrawableMasks() {\n      return this._model.drawables.masks;\n    }\n    getDrawableMaskCounts() {\n      return this._model.drawables.maskCounts;\n    }\n    isUsingMasking() {\n      for (let d = 0; d < this._model.drawables.count; ++d) {\n        if (this._model.drawables.maskCounts[d] <= 0) {\n          continue;\n        }\n        return true;\n      }\n      return false;\n    }\n    getDrawableDynamicFlagIsVisible(drawableIndex) {\n      const dynamicFlags = this._model.drawables.dynamicFlags;\n      return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagVisibilityDidChange(drawableIndex) {\n      const dynamicFlags = this._model.drawables.dynamicFlags;\n      return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagOpacityDidChange(drawableIndex) {\n      const dynamicFlags = this._model.drawables.dynamicFlags;\n      return Live2DCubismCore.Utils.hasOpacityDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    getDrawableDynamicFlagRenderOrderDidChange(drawableIndex) {\n      const dynamicFlags = this._model.drawables.dynamicFlags;\n      return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(dynamicFlags[drawableIndex]);\n    }\n    loadParameters() {\n      let parameterCount = this._model.parameters.count;\n      const savedParameterCount = this._savedParameters.length;\n      if (parameterCount > savedParameterCount) {\n        parameterCount = savedParameterCount;\n      }\n      for (let i = 0; i < parameterCount; ++i) {\n        this._parameterValues[i] = this._savedParameters[i];\n      }\n    }\n    initialize() {\n      this._parameterValues = this._model.parameters.values;\n      this._partOpacities = this._model.parts.opacities;\n      this._parameterMaximumValues = this._model.parameters.maximumValues;\n      this._parameterMinimumValues = this._model.parameters.minimumValues;\n      {\n        const parameterIds = this._model.parameters.ids;\n        const parameterCount = this._model.parameters.count;\n        for (let i = 0; i < parameterCount; ++i) {\n          this._parameterIds.push(parameterIds[i]);\n        }\n      }\n      {\n        const partIds = this._model.parts.ids;\n        const partCount = this._model.parts.count;\n        for (let i = 0; i < partCount; ++i) {\n          this._partIds.push(partIds[i]);\n        }\n      }\n      {\n        const drawableIds = this._model.drawables.ids;\n        const drawableCount = this._model.drawables.count;\n        for (let i = 0; i < drawableCount; ++i) {\n          this._drawableIds.push(drawableIds[i]);\n        }\n      }\n    }\n    constructor(model) {\n      this._model = model;\n      this._savedParameters = [];\n      this._parameterIds = [];\n      this._drawableIds = [];\n      this._partIds = [];\n      this._notExistPartId = {};\n      this._notExistParameterId = {};\n      this._notExistParameterValues = {};\n      this._notExistPartOpacities = {};\n      this.initialize();\n    }\n    release() {\n      this._model.release();\n      this._model = void 0;\n    }\n  }\n  class CubismMoc {\n    static create(mocBytes) {\n      const moc = Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n      if (moc) {\n        return new CubismMoc(moc);\n      }\n      throw new Error(\"Unknown error\");\n    }\n    createModel() {\n      let cubismModel;\n      const model = Live2DCubismCore.Model.fromMoc(this._moc);\n      if (model) {\n        cubismModel = new CubismModel(model);\n        ++this._modelCount;\n        return cubismModel;\n      }\n      throw new Error(\"Unknown error\");\n    }\n    deleteModel(model) {\n      if (model != null) {\n        --this._modelCount;\n      }\n    }\n    constructor(moc) {\n      this._moc = moc;\n      this._modelCount = 0;\n    }\n    release() {\n      this._moc._release();\n      this._moc = void 0;\n    }\n  }\n  var CubismPhysicsTargetType = /* @__PURE__ */ ((CubismPhysicsTargetType2) => {\n    CubismPhysicsTargetType2[CubismPhysicsTargetType2[\"CubismPhysicsTargetType_Parameter\"] = 0] = \"CubismPhysicsTargetType_Parameter\";\n    return CubismPhysicsTargetType2;\n  })(CubismPhysicsTargetType || {});\n  var CubismPhysicsSource = /* @__PURE__ */ ((CubismPhysicsSource2) => {\n    CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_X\"] = 0] = \"CubismPhysicsSource_X\";\n    CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_Y\"] = 1] = \"CubismPhysicsSource_Y\";\n    CubismPhysicsSource2[CubismPhysicsSource2[\"CubismPhysicsSource_Angle\"] = 2] = \"CubismPhysicsSource_Angle\";\n    return CubismPhysicsSource2;\n  })(CubismPhysicsSource || {});\n  class CubismPhysicsParticle {\n    constructor() {\n      this.initialPosition = new CubismVector2(0, 0);\n      this.position = new CubismVector2(0, 0);\n      this.lastPosition = new CubismVector2(0, 0);\n      this.lastGravity = new CubismVector2(0, 0);\n      this.force = new CubismVector2(0, 0);\n      this.velocity = new CubismVector2(0, 0);\n    }\n  }\n  class CubismPhysicsSubRig {\n    constructor() {\n      this.normalizationPosition = {};\n      this.normalizationAngle = {};\n    }\n  }\n  class CubismPhysicsInput {\n    constructor() {\n      this.source = {};\n    }\n  }\n  class CubismPhysicsOutput {\n    constructor() {\n      this.destination = {};\n      this.translationScale = new CubismVector2(0, 0);\n    }\n  }\n  class CubismPhysicsRig {\n    constructor() {\n      this.settings = [];\n      this.inputs = [];\n      this.outputs = [];\n      this.particles = [];\n      this.gravity = new CubismVector2(0, 0);\n      this.wind = new CubismVector2(0, 0);\n    }\n  }\n  class CubismPhysicsJson {\n    constructor(json) {\n      this._json = json;\n    }\n    release() {\n      this._json = void 0;\n    }\n    getGravity() {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this._json.Meta.EffectiveForces.Gravity.X;\n      ret.y = this._json.Meta.EffectiveForces.Gravity.Y;\n      return ret;\n    }\n    getWind() {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this._json.Meta.EffectiveForces.Wind.X;\n      ret.y = this._json.Meta.EffectiveForces.Wind.Y;\n      return ret;\n    }\n    getSubRigCount() {\n      return this._json.Meta.PhysicsSettingCount;\n    }\n    getTotalInputCount() {\n      return this._json.Meta.TotalInputCount;\n    }\n    getTotalOutputCount() {\n      return this._json.Meta.TotalOutputCount;\n    }\n    getVertexCount() {\n      return this._json.Meta.VertexCount;\n    }\n    getNormalizationPositionMinimumValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Minimum;\n    }\n    getNormalizationPositionMaximumValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Maximum;\n    }\n    getNormalizationPositionDefaultValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Position.Default;\n    }\n    getNormalizationAngleMinimumValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Minimum;\n    }\n    getNormalizationAngleMaximumValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Maximum;\n    }\n    getNormalizationAngleDefaultValue(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Normalization.Angle.Default;\n    }\n    getInputCount(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Input.length;\n    }\n    getInputWeight(physicsSettingIndex, inputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Weight;\n    }\n    getInputReflect(physicsSettingIndex, inputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Reflect;\n    }\n    getInputType(physicsSettingIndex, inputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Type;\n    }\n    getInputSourceId(physicsSettingIndex, inputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Input[inputIndex].Source.Id;\n    }\n    getOutputCount(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output.length;\n    }\n    getOutputVertexIndex(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].VertexIndex;\n    }\n    getOutputAngleScale(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Scale;\n    }\n    getOutputWeight(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Weight;\n    }\n    getOutputDestinationId(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Destination.Id;\n    }\n    getOutputType(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Type;\n    }\n    getOutputReflect(physicsSettingIndex, outputIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Output[outputIndex].Reflect;\n    }\n    getParticleCount(physicsSettingIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Vertices.length;\n    }\n    getParticleMobility(physicsSettingIndex, vertexIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Mobility;\n    }\n    getParticleDelay(physicsSettingIndex, vertexIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Delay;\n    }\n    getParticleAcceleration(physicsSettingIndex, vertexIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Acceleration;\n    }\n    getParticleRadius(physicsSettingIndex, vertexIndex) {\n      return this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Radius;\n    }\n    getParticlePosition(physicsSettingIndex, vertexIndex) {\n      const ret = new CubismVector2(0, 0);\n      ret.x = this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Position.X;\n      ret.y = this._json.PhysicsSettings[physicsSettingIndex].Vertices[vertexIndex].Position.Y;\n      return ret;\n    }\n  }\n  const PhysicsTypeTagX = \"X\";\n  const PhysicsTypeTagY = \"Y\";\n  const PhysicsTypeTagAngle = \"Angle\";\n  const AirResistance = 5;\n  const MaximumWeight = 100;\n  const MovementThreshold = 1e-3;\n  class CubismPhysics {\n    static create(json) {\n      const ret = new CubismPhysics();\n      ret.parse(json);\n      ret._physicsRig.gravity.y = 0;\n      return ret;\n    }\n    evaluate(model, deltaTimeSeconds) {\n      let totalAngle;\n      let weight;\n      let radAngle;\n      let outputValue;\n      const totalTranslation = new CubismVector2();\n      let currentSetting;\n      let currentInput;\n      let currentOutput;\n      let currentParticles;\n      let parameterValue;\n      let parameterMaximumValue;\n      let parameterMinimumValue;\n      let parameterDefaultValue;\n      parameterValue = model.getModel().parameters.values;\n      parameterMaximumValue = model.getModel().parameters.maximumValues;\n      parameterMinimumValue = model.getModel().parameters.minimumValues;\n      parameterDefaultValue = model.getModel().parameters.defaultValues;\n      for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n        totalAngle = { angle: 0 };\n        totalTranslation.x = 0;\n        totalTranslation.y = 0;\n        currentSetting = this._physicsRig.settings[settingIndex];\n        currentInput = this._physicsRig.inputs.slice(currentSetting.baseInputIndex);\n        currentOutput = this._physicsRig.outputs.slice(currentSetting.baseOutputIndex);\n        currentParticles = this._physicsRig.particles.slice(currentSetting.baseParticleIndex);\n        for (let i = 0; i < currentSetting.inputCount; ++i) {\n          weight = currentInput[i].weight / MaximumWeight;\n          if (currentInput[i].sourceParameterIndex == -1) {\n            currentInput[i].sourceParameterIndex = model.getParameterIndex(currentInput[i].source.id);\n          }\n          currentInput[i].getNormalizedParameterValue(totalTranslation, totalAngle, parameterValue[currentInput[i].sourceParameterIndex], parameterMinimumValue[currentInput[i].sourceParameterIndex], parameterMaximumValue[currentInput[i].sourceParameterIndex], parameterDefaultValue[currentInput[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInput[i].reflect, weight);\n        }\n        radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n        totalTranslation.x = totalTranslation.x * CubismMath.cos(radAngle) - totalTranslation.y * CubismMath.sin(radAngle);\n        totalTranslation.y = totalTranslation.x * CubismMath.sin(radAngle) + totalTranslation.y * CubismMath.cos(radAngle);\n        updateParticles(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum, deltaTimeSeconds, AirResistance);\n        for (let i = 0; i < currentSetting.outputCount; ++i) {\n          const particleIndex = currentOutput[i].vertexIndex;\n          if (particleIndex < 1 || particleIndex >= currentSetting.particleCount) {\n            break;\n          }\n          if (currentOutput[i].destinationParameterIndex == -1) {\n            currentOutput[i].destinationParameterIndex = model.getParameterIndex(currentOutput[i].destination.id);\n          }\n          const translation = new CubismVector2();\n          translation.x = currentParticles[particleIndex].position.x - currentParticles[particleIndex - 1].position.x;\n          translation.y = currentParticles[particleIndex].position.y - currentParticles[particleIndex - 1].position.y;\n          outputValue = currentOutput[i].getValue(translation, currentParticles, particleIndex, currentOutput[i].reflect, this._options.gravity);\n          const destinationParameterIndex = currentOutput[i].destinationParameterIndex;\n          const outParameterValue = !Float32Array.prototype.slice && \"subarray\" in Float32Array.prototype ? JSON.parse(JSON.stringify(parameterValue.subarray(destinationParameterIndex))) : parameterValue.slice(destinationParameterIndex);\n          updateOutputParameterValue(outParameterValue, parameterMinimumValue[destinationParameterIndex], parameterMaximumValue[destinationParameterIndex], outputValue, currentOutput[i]);\n          for (let offset = destinationParameterIndex, outParamIndex = 0; offset < parameterValue.length; offset++, outParamIndex++) {\n            parameterValue[offset] = outParameterValue[outParamIndex];\n          }\n        }\n      }\n    }\n    setOptions(options) {\n      this._options = options;\n    }\n    getOption() {\n      return this._options;\n    }\n    constructor() {\n      this._options = new Options();\n      this._options.gravity.y = -1;\n      this._options.gravity.x = 0;\n      this._options.wind.x = 0;\n      this._options.wind.y = 0;\n    }\n    release() {\n      this._physicsRig = void 0;\n    }\n    parse(physicsJson) {\n      this._physicsRig = new CubismPhysicsRig();\n      let json = new CubismPhysicsJson(physicsJson);\n      this._physicsRig.gravity = json.getGravity();\n      this._physicsRig.wind = json.getWind();\n      this._physicsRig.subRigCount = json.getSubRigCount();\n      let inputIndex = 0, outputIndex = 0, particleIndex = 0;\n      for (let i = 0; i < this._physicsRig.subRigCount; ++i) {\n        const setting = new CubismPhysicsSubRig();\n        setting.normalizationPosition.minimum = json.getNormalizationPositionMinimumValue(i);\n        setting.normalizationPosition.maximum = json.getNormalizationPositionMaximumValue(i);\n        setting.normalizationPosition.defalut = json.getNormalizationPositionDefaultValue(i);\n        setting.normalizationAngle.minimum = json.getNormalizationAngleMinimumValue(i);\n        setting.normalizationAngle.maximum = json.getNormalizationAngleMaximumValue(i);\n        setting.normalizationAngle.defalut = json.getNormalizationAngleDefaultValue(i);\n        setting.inputCount = json.getInputCount(i);\n        setting.baseInputIndex = inputIndex;\n        inputIndex += setting.inputCount;\n        for (let j = 0; j < setting.inputCount; ++j) {\n          const input = new CubismPhysicsInput();\n          input.sourceParameterIndex = -1;\n          input.weight = json.getInputWeight(i, j);\n          input.reflect = json.getInputReflect(i, j);\n          switch (json.getInputType(i, j)) {\n            case PhysicsTypeTagX:\n              input.type = CubismPhysicsSource.CubismPhysicsSource_X;\n              input.getNormalizedParameterValue = getInputTranslationXFromNormalizedParameterValue;\n              break;\n            case PhysicsTypeTagY:\n              input.type = CubismPhysicsSource.CubismPhysicsSource_Y;\n              input.getNormalizedParameterValue = getInputTranslationYFromNormalizedParamterValue;\n              break;\n            case PhysicsTypeTagAngle:\n              input.type = CubismPhysicsSource.CubismPhysicsSource_Angle;\n              input.getNormalizedParameterValue = getInputAngleFromNormalizedParameterValue;\n              break;\n          }\n          input.source.targetType = CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n          input.source.id = json.getInputSourceId(i, j);\n          this._physicsRig.inputs.push(input);\n        }\n        setting.outputCount = json.getOutputCount(i);\n        setting.baseOutputIndex = outputIndex;\n        outputIndex += setting.outputCount;\n        for (let j = 0; j < setting.outputCount; ++j) {\n          const output = new CubismPhysicsOutput();\n          output.destinationParameterIndex = -1;\n          output.vertexIndex = json.getOutputVertexIndex(i, j);\n          output.angleScale = json.getOutputAngleScale(i, j);\n          output.weight = json.getOutputWeight(i, j);\n          output.destination.targetType = CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n          output.destination.id = json.getOutputDestinationId(i, j);\n          switch (json.getOutputType(i, j)) {\n            case PhysicsTypeTagX:\n              output.type = CubismPhysicsSource.CubismPhysicsSource_X;\n              output.getValue = getOutputTranslationX;\n              output.getScale = getOutputScaleTranslationX;\n              break;\n            case PhysicsTypeTagY:\n              output.type = CubismPhysicsSource.CubismPhysicsSource_Y;\n              output.getValue = getOutputTranslationY;\n              output.getScale = getOutputScaleTranslationY;\n              break;\n            case PhysicsTypeTagAngle:\n              output.type = CubismPhysicsSource.CubismPhysicsSource_Angle;\n              output.getValue = getOutputAngle;\n              output.getScale = getOutputScaleAngle;\n              break;\n          }\n          output.reflect = json.getOutputReflect(i, j);\n          this._physicsRig.outputs.push(output);\n        }\n        setting.particleCount = json.getParticleCount(i);\n        setting.baseParticleIndex = particleIndex;\n        particleIndex += setting.particleCount;\n        for (let j = 0; j < setting.particleCount; ++j) {\n          const particle = new CubismPhysicsParticle();\n          particle.mobility = json.getParticleMobility(i, j);\n          particle.delay = json.getParticleDelay(i, j);\n          particle.acceleration = json.getParticleAcceleration(i, j);\n          particle.radius = json.getParticleRadius(i, j);\n          particle.position = json.getParticlePosition(i, j);\n          this._physicsRig.particles.push(particle);\n        }\n        this._physicsRig.settings.push(setting);\n      }\n      this.initialize();\n      json.release();\n    }\n    initialize() {\n      let strand;\n      let currentSetting;\n      let radius;\n      for (let settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n        currentSetting = this._physicsRig.settings[settingIndex];\n        strand = this._physicsRig.particles.slice(currentSetting.baseParticleIndex);\n        strand[0].initialPosition = new CubismVector2(0, 0);\n        strand[0].lastPosition = new CubismVector2(strand[0].initialPosition.x, strand[0].initialPosition.y);\n        strand[0].lastGravity = new CubismVector2(0, -1);\n        strand[0].lastGravity.y *= -1;\n        strand[0].velocity = new CubismVector2(0, 0);\n        strand[0].force = new CubismVector2(0, 0);\n        for (let i = 1; i < currentSetting.particleCount; ++i) {\n          radius = new CubismVector2(0, 0);\n          radius.y = strand[i].radius;\n          strand[i].initialPosition = new CubismVector2(strand[i - 1].initialPosition.x + radius.x, strand[i - 1].initialPosition.y + radius.y);\n          strand[i].position = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n          strand[i].lastPosition = new CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n          strand[i].lastGravity = new CubismVector2(0, -1);\n          strand[i].lastGravity.y *= -1;\n          strand[i].velocity = new CubismVector2(0, 0);\n          strand[i].force = new CubismVector2(0, 0);\n        }\n      }\n    }\n  }\n  class Options {\n    constructor() {\n      this.gravity = new CubismVector2(0, 0);\n      this.wind = new CubismVector2(0, 0);\n    }\n  }\n  function getInputTranslationXFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.x += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n  }\n  function getInputTranslationYFromNormalizedParamterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n    targetTranslation.y += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n  }\n  function getInputAngleFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizaitionPosition, normalizationAngle, isInverted, weight) {\n    targetAngle.angle += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationAngle.minimum, normalizationAngle.maximum, normalizationAngle.defalut, isInverted) * weight;\n  }\n  function getOutputTranslationX(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue = translation.x;\n    if (isInverted) {\n      outputValue *= -1;\n    }\n    return outputValue;\n  }\n  function getOutputTranslationY(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue = translation.y;\n    if (isInverted) {\n      outputValue *= -1;\n    }\n    return outputValue;\n  }\n  function getOutputAngle(translation, particles, particleIndex, isInverted, parentGravity) {\n    let outputValue;\n    if (particleIndex >= 2) {\n      parentGravity = particles[particleIndex - 1].position.substract(particles[particleIndex - 2].position);\n    } else {\n      parentGravity = parentGravity.multiplyByScaler(-1);\n    }\n    outputValue = CubismMath.directionToRadian(parentGravity, translation);\n    if (isInverted) {\n      outputValue *= -1;\n    }\n    return outputValue;\n  }\n  function getRangeValue(min, max) {\n    return Math.abs(Math.max(min, max) - Math.min(min, max));\n  }\n  function getDefaultValue(min, max) {\n    const minValue = Math.min(min, max);\n    return minValue + getRangeValue(min, max) / 2;\n  }\n  function getOutputScaleTranslationX(translationScale, angleScale) {\n    return translationScale.x;\n  }\n  function getOutputScaleTranslationY(translationScale, angleScale) {\n    return translationScale.y;\n  }\n  function getOutputScaleAngle(translationScale, angleScale) {\n    return angleScale;\n  }\n  function updateParticles(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue, deltaTimeSeconds, airResistance) {\n    let totalRadian;\n    let delay;\n    let radian;\n    let currentGravity;\n    let direction = new CubismVector2(0, 0);\n    let velocity = new CubismVector2(0, 0);\n    let force = new CubismVector2(0, 0);\n    let newDirection = new CubismVector2(0, 0);\n    strand[0].position = new CubismVector2(totalTranslation.x, totalTranslation.y);\n    totalRadian = CubismMath.degreesToRadian(totalAngle);\n    currentGravity = CubismMath.radianToDirection(totalRadian);\n    currentGravity.normalize();\n    for (let i = 1; i < strandCount; ++i) {\n      strand[i].force = currentGravity.multiplyByScaler(strand[i].acceleration).add(windDirection);\n      strand[i].lastPosition = new CubismVector2(strand[i].position.x, strand[i].position.y);\n      delay = strand[i].delay * deltaTimeSeconds * 30;\n      direction = strand[i].position.substract(strand[i - 1].position);\n      radian = CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) / airResistance;\n      direction.x = CubismMath.cos(radian) * direction.x - direction.y * CubismMath.sin(radian);\n      direction.y = CubismMath.sin(radian) * direction.x + direction.y * CubismMath.cos(radian);\n      strand[i].position = strand[i - 1].position.add(direction);\n      velocity = strand[i].velocity.multiplyByScaler(delay);\n      force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n      strand[i].position = strand[i].position.add(velocity).add(force);\n      newDirection = strand[i].position.substract(strand[i - 1].position);\n      newDirection.normalize();\n      strand[i].position = strand[i - 1].position.add(newDirection.multiplyByScaler(strand[i].radius));\n      if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n        strand[i].position.x = 0;\n      }\n      if (delay != 0) {\n        strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n        strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n        strand[i].velocity = strand[i].velocity.multiplyByScaler(strand[i].mobility);\n      }\n      strand[i].force = new CubismVector2(0, 0);\n      strand[i].lastGravity = new CubismVector2(currentGravity.x, currentGravity.y);\n    }\n  }\n  function updateOutputParameterValue(parameterValue, parameterValueMinimum, parameterValueMaximum, translation, output) {\n    let outputScale;\n    let value;\n    let weight;\n    outputScale = output.getScale(output.translationScale, output.angleScale);\n    value = translation * outputScale;\n    if (value < parameterValueMinimum) {\n      if (value < output.valueBelowMinimum) {\n        output.valueBelowMinimum = value;\n      }\n      value = parameterValueMinimum;\n    } else if (value > parameterValueMaximum) {\n      if (value > output.valueExceededMaximum) {\n        output.valueExceededMaximum = value;\n      }\n      value = parameterValueMaximum;\n    }\n    weight = output.weight / MaximumWeight;\n    if (weight >= 1) {\n      parameterValue[0] = value;\n    } else {\n      value = parameterValue[0] * (1 - weight) + value * weight;\n      parameterValue[0] = value;\n    }\n  }\n  function normalizeParameterValue(value, parameterMinimum, parameterMaximum, parameterDefault, normalizedMinimum, normalizedMaximum, normalizedDefault, isInverted) {\n    let result = 0;\n    const maxValue = CubismMath.max(parameterMaximum, parameterMinimum);\n    if (maxValue < value) {\n      value = maxValue;\n    }\n    const minValue = CubismMath.min(parameterMaximum, parameterMinimum);\n    if (minValue > value) {\n      value = minValue;\n    }\n    const minNormValue = CubismMath.min(normalizedMinimum, normalizedMaximum);\n    const maxNormValue = CubismMath.max(normalizedMinimum, normalizedMaximum);\n    const middleNormValue = normalizedDefault;\n    const middleValue = getDefaultValue(minValue, maxValue);\n    const paramValue = value - middleValue;\n    switch (Math.sign(paramValue)) {\n      case 1: {\n        const nLength = maxNormValue - middleNormValue;\n        const pLength = maxValue - middleValue;\n        if (pLength != 0) {\n          result = paramValue * (nLength / pLength);\n          result += middleNormValue;\n        }\n        break;\n      }\n      case -1: {\n        const nLength = minNormValue - middleNormValue;\n        const pLength = minValue - middleValue;\n        if (pLength != 0) {\n          result = paramValue * (nLength / pLength);\n          result += middleNormValue;\n        }\n        break;\n      }\n      case 0: {\n        result = middleNormValue;\n        break;\n      }\n    }\n    return isInverted ? result : result * -1;\n  }\n  Live2DFactory.registerRuntime({\n    version: 4,\n    ready: cubism4Ready,\n    test(source) {\n      return source instanceof Cubism4ModelSettings || Cubism4ModelSettings.isValidJSON(source);\n    },\n    isValidMoc(modelData) {\n      if (modelData.byteLength < 4) {\n        return false;\n      }\n      const view = new Int8Array(modelData, 0, 4);\n      return String.fromCharCode(...view) === \"MOC3\";\n    },\n    createModelSettings(json) {\n      return new Cubism4ModelSettings(json);\n    },\n    createCoreModel(data) {\n      const moc = CubismMoc.create(data);\n      try {\n        const model = moc.createModel();\n        model.__moc = moc;\n        return model;\n      } catch (e) {\n        try {\n          moc.release();\n        } catch (ignored) {\n        }\n        throw e;\n      }\n    },\n    createInternalModel(coreModel, settings, options) {\n      const model = new Cubism4InternalModel(coreModel, settings, options);\n      const coreModelWithMoc = coreModel;\n      if (coreModelWithMoc.__moc) {\n        model.__moc = coreModelWithMoc.__moc;\n        delete coreModelWithMoc.__moc;\n        model.once(\"destroy\", releaseMoc);\n      }\n      return model;\n    },\n    createPhysics(coreModel, data) {\n      return CubismPhysics.create(data);\n    },\n    createPose(coreModel, data) {\n      return CubismPose.create(data);\n    }\n  });\n  function releaseMoc() {\n    var _a;\n    (_a = this.__moc) == null ? void 0 : _a.release();\n  }\n  exports2.Cubism2ExpressionManager = Cubism2ExpressionManager;\n  exports2.Cubism2InternalModel = Cubism2InternalModel;\n  exports2.Cubism2ModelSettings = Cubism2ModelSettings;\n  exports2.Cubism2MotionManager = Cubism2MotionManager;\n  exports2.Cubism4ExpressionManager = Cubism4ExpressionManager;\n  exports2.Cubism4InternalModel = Cubism4InternalModel;\n  exports2.Cubism4ModelSettings = Cubism4ModelSettings;\n  exports2.Cubism4MotionManager = Cubism4MotionManager;\n  exports2.ExpressionManager = ExpressionManager;\n  exports2.FileLoader = FileLoader;\n  exports2.FocusController = FocusController;\n  exports2.InteractionMixin = InteractionMixin;\n  exports2.InternalModel = InternalModel;\n  exports2.LOGICAL_HEIGHT = LOGICAL_HEIGHT;\n  exports2.LOGICAL_WIDTH = LOGICAL_WIDTH;\n  exports2.Live2DExpression = Live2DExpression;\n  exports2.Live2DEyeBlink = Live2DEyeBlink;\n  exports2.Live2DFactory = Live2DFactory;\n  exports2.Live2DLoader = Live2DLoader;\n  exports2.Live2DModel = Live2DModel;\n  exports2.Live2DPhysics = Live2DPhysics;\n  exports2.Live2DPose = Live2DPose;\n  exports2.Live2DTransform = Live2DTransform;\n  exports2.ModelSettings = ModelSettings;\n  exports2.MotionManager = MotionManager;\n  exports2.MotionPreloadStrategy = MotionPreloadStrategy;\n  exports2.MotionPriority = MotionPriority;\n  exports2.MotionState = MotionState;\n  exports2.SoundManager = SoundManager;\n  exports2.VERSION = VERSION;\n  exports2.XHRLoader = XHRLoader;\n  exports2.ZipLoader = ZipLoader;\n  exports2.applyMixins = applyMixins;\n  exports2.clamp = clamp;\n  exports2.copyArray = copyArray;\n  exports2.copyProperty = copyProperty;\n  exports2.cubism4Ready = cubism4Ready;\n  exports2.folderName = folderName;\n  exports2.logger = logger;\n  exports2.rand = rand;\n  exports2.remove = remove;\n  exports2.startUpCubism4 = startUpCubism4;\n  Object.defineProperties(exports2, { __esModule: { value: true }, [Symbol.toStringTag]: { value: \"Module\" } });\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklive2d\"] = self[\"webpackChunklive2d\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1367); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","ref","on","handleMouseDown","handleMouseMove","handleMouseUp","staticRenderFns","_setupProxy","staticClass","handlerClick","drawer","$event","$store","dispatch","live2d","_v","mouseDown","model","value","state","percentage","callback","$$v","$set","expression","defineComponent","name","data","customColor","x","dragging","methods","setTimeout","$refs","per","style","width","e","offsetX","parentElement","clientWidth","clientX","computed","scale","watch","handler","newValue","window","localStorage","setItem","mounted","document","addEventListener","events","code","amplify","reduce","component","websocket","initWebSocket","wsuri","location","host","WebSocket","onopen","websocketonopen","onerror","websocketonerror","onclose","websocketclose","_Message","message","type","base64ToArrayBuffer","base64","binary_string","atob","len","length","bytes","Uint8Array","i","charCodeAt","buffer","arrayAdd","a","audioCtx","analyser","frequencyData","playing","o","async","getWav","store","response","axios","url","voice","method","responseType","run","getByteFrequencyData","arr","push","setMouthOpenY","v","Math","max","min","console","log","model4","internalModel","coreModel","setParameterValueByIndex","parameterIndex","audioData","decodeAudioData","source","createBufferSource","connect","destination","start","motion","onended","send","catch","error","createAnalyser","navigator","mediaDevices","getUserMedia","audio","then","stream","AudioContext","frequencyBinCount","err","alert","__pow","pow","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","rejected","throw","done","apply","CubismBreath","constructor","_breathParameters","_currentTime","static","setParameters","breathParameters","getParameters","updateParameters","deltaTimeSeconds","t","addParameterValueById","parameterId","offset","peak","sin","cycle","weight","BreathParameterData","_CubismEyeBlink","modelSetting","setBlinkingInterval","blinkingInterval","_blinkingIntervalSeconds","setBlinkingSetting","closing","closed","opening","_closingSeconds","_closedSeconds","_openingSeconds","setParameterIds","parameterIds","_parameterIds","getParameterIds","parameterValue","_userTimeSeconds","_blinkingState","EyeState","EyeState_Closing","_stateStartTimeSeconds","EyeState_Closed","EyeState_Opening","EyeState_Interval","_nextBlinkingTime","determinNextBlinkingTiming","EyeState_First","CloseIfZero","setParameterValueById","_a","_b","getEyeBlinkParameters","slice","r","random","CubismEyeBlink","EyeState2","Epsilon","DefaultFadeInSeconds","CubismPose","pose3json","ret","FadeInTime","_fadeTimeSeconds","poseListInfo","Groups","poseCount","poseIndex","idListInfo","idCount","groupCount","groupIndex","partInfo","partData","PartData","partId","Id","linkListInfo","Link","linkCount","linkIndex","linkPart","link","_partGroups","_partGroupCounts","_lastModel","reset","beginIndex","partGroupCount","doFade","copyPartOpacities","j","initialize","partsIndex","partIndex","paramIndex","setPartOpacityByIndex","k","opacity","getPartOpacityByIndex","linkPartIndex","visiblePartIndex","newOpacity","phi","backOpacityThreshold","getParameterValueByIndex","a1","backOpacity","assignment","map","clone","getParameterIndex","getPartIndex","clonePartData","CubismVector2","y","add","vector2","substract","multiply","multiplyByScaler","scalar","division","divisionByScalar","getLength","sqrt","getDistanceWith","dot","normalize","isEqual","rhs","isNotEqual","_CubismMath","cos","abs","cx","isNegativeNumber","Infinity","exp","PI","left","right","degrees","radian","from","to","q1","atan2","q2","directionToRadian","degree","radianToDegrees","totalAngle","b","c","d","range","quadraticEquation","ba","ca","da","p","p3","q","discriminant","center","threshold","mp3","mp33","cosphi","acos","crtr","cbrt","t1","root12","root2","root3","u12","sd","u1","v1","root1","CubismMath","CubismMatrix44","_tr","Float32Array","loadIdentity","dst","n","setMatrix","tr","getArray","getScaleX","getScaleY","getTranslateX","getTranslateY","transformX","src","transformY","invertTransformX","invertTransformY","translateRelative","tr1","translate","translateX","translateY","scaleRelative","multiplyByMatrix","m","cloneMatrix","CubismRenderer","_model","drawModel","getModel","doDrawModel","setMvpMatrix","matrix44","_mvpMatrix4x4","getMvpMatrix","setModelColor","red","green","blue","alpha","_modelColor","R","G","B","A","getModelColor","Object","assign","setIsPremultipliedAlpha","enable","_isPremultipliedAlpha","isPremultipliedAlpha","setIsCulling","culling","_isCulling","isCulling","setAnisotropy","_anisortopy","getAnisotropy","CubismTextureColor","CubismBlendMode","CubismBlendMode2","s_option","s_isStarted","s_isInitialized","Constant","vertexOffset","vertexStep","CubismFramework","option","CubismLogInfo","Live2DCubismCore","_isStarted","Logging","csmSetLogFunction","logFunction","version","Version","csmGetVersion","major","minor","patch","versionNumber","CubismLogWarning","staticRelease","csmGetLogFunction","loggingLevel","LogLevel","LogLevel_Off","LogLevel2","CSM_ASSERT","CubismLogDebug","fmt","_len2","arguments","args","Array","_key2","CubismDebug","print","LogLevel_Debug","_len3","_key3","LogLevel_Info","_len4","_key4","LogLevel_Warning","CubismLogError","_len5","_key5","LogLevel_Error","logLevel","format","getLoggingLevel","logPrint","coreLogFunction","replace","CubismModel","update","drawables","resetDynamicFlags","getCanvasWidth","canvasinfo","CanvasWidth","PixelsPerUnit","getCanvasHeight","CanvasHeight","saveParameters","parameterCount","parameters","count","savedParameterCount","_savedParameters","_parameterValues","partCount","parts","_partIds","_notExistPartId","_notExistPartOpacities","getPartCount","_partOpacities","setPartOpacityById","index","getPartOpacityById","_notExistParameterId","keys","_notExistParameterValues","getParameterCount","getParameterMaximumValue","maximumValues","getParameterMinimumValue","minimumValues","getParameterDefaultValue","defaultValues","getParameterValueById","undefined","user","ids","includes","addParameterValueByIndex","multiplyParameterValueById","multiplyParameterValueByIndex","getDrawableIds","_drawableIds","getDrawableIndex","drawableId","drawableCount","drawableIndex","getDrawableCount","getDrawableId","getDrawableRenderOrders","renderOrders","getDrawableTextureIndices","textureIndices","getDrawableDynamicFlagVertexPositionsDidChange","dynamicFlags","Utils","hasVertexPositionsDidChangeBit","getDrawableVertexIndexCount","indexCounts","getDrawableVertexCount","vertexCounts","getDrawableVertices","getDrawableVertexPositions","getDrawableVertexIndices","indices","vertexPositions","getDrawableVertexUvs","vertexUvs","getDrawableOpacity","opacities","getDrawableCulling","constantFlags","hasIsDoubleSidedBit","getDrawableBlendMode","hasBlendAdditiveBit","CubismBlendMode_Additive","hasBlendMultiplicativeBit","CubismBlendMode_Multiplicative","CubismBlendMode_Normal","getDrawableInvertedMaskBit","hasIsInvertedMaskBit","getDrawableMasks","masks","getDrawableMaskCounts","maskCounts","isUsingMasking","getDrawableDynamicFlagIsVisible","hasIsVisibleBit","getDrawableDynamicFlagVisibilityDidChange","hasVisibilityDidChangeBit","getDrawableDynamicFlagOpacityDidChange","hasOpacityDidChangeBit","getDrawableDynamicFlagRenderOrderDidChange","hasRenderOrderDidChangeBit","loadParameters","values","_parameterMaximumValues","_parameterMinimumValues","partIds","drawableIds","release","CubismMoc","mocBytes","moc","Moc","fromArrayBuffer","Error","createModel","cubismModel","Model","fromMoc","_moc","_modelCount","deleteModel","_release","ACubismMotion","_fadeInSeconds","_fadeOutSeconds","_weight","_offsetSeconds","_firedEventValues","motionQueueEntry","userTimeSeconds","isAvailable","isFinished","isStarted","setIsStarted","setStartTime","setFadeInStartTime","duration","getDuration","getEndTime","setEndTime","getStartTime","fadeWeight","fadeIn","getEasingSine","getFadeInStartTime","fadeOut","setState","doUpdateParameters","setIsFinished","setFadeInTime","fadeInSeconds","setFadeOutTime","fadeOutSeconds","getFadeOutTime","getFadeInTime","setWeight","getWeight","getLoopDuration","setOffsetTime","offsetSeconds","getFiredEvent","beforeCheckTimeSeconds","motionTimeSeconds","setFinishedMotionHandler","onFinishedMotionHandler","_onFinishedMotion","getFinishedMotionHandler","DefaultFadeTime","CubismExpressionMotion","super","_parameters","json","fadeInTime","fadeOutTime","FadeOutTime","Parameters","param","Value","blendType","Blend","ExpressionBlendType","ExpressionBlendType_Multiply","ExpressionBlendType_Overwrite","ExpressionBlendType_Add","item","parameter","CubismConfig","ExpressionBlendType2","CubismConfig2","supportMoreMaskDivisions","setOpacityFromMotion","CubismMotionCurveTarget","CubismMotionCurveTarget2","CubismMotionSegmentType","CubismMotionSegmentType2","CubismMotionPoint","time","CubismMotionSegment","basePointIndex","segmentType","CubismMotionCurve","id","segmentCount","baseSegmentIndex","CubismMotionEvent","fireTime","CubismMotionData","loop","curveCount","eventCount","fps","curves","segments","points","CubismMotionJson","_json","getMotionDuration","Meta","Duration","isMotionLoop","Loop","getEvaluationOptionFlag","flagType","EvaluationOptionFlag","EvaluationOptionFlag_AreBeziersRistricted","AreBeziersRestricted","getMotionCurveCount","CurveCount","getMotionFps","Fps","getMotionTotalSegmentCount","TotalSegmentCount","getMotionTotalPointCount","TotalPointCount","getMotionFadeInTime","getMotionFadeOutTime","getMotionCurveTarget","curveIndex","Curves","Target","getMotionCurveId","getMotionCurveFadeInTime","getMotionCurveFadeOutTime","getMotionCurveSegmentCount","Segments","getMotionCurveSegment","segmentIndex","getEventCount","UserDataCount","getTotalEventValueSize","TotalUserDataSize","getEventTime","userDataIndex","UserData","Time","getEventValue","EvaluationOptionFlag2","EffectNameEyeBlink","EffectNameLipSync","TargetNameModel","TargetNameParameter","TargetNamePartOpacity","UseOldBeziersCurveMotion","lerpPoints","result","linearEvaluate","bezierEvaluate","p01","p12","p23","p012","p123","bezierEvaluateCardanoInterpretation","x1","x2","cx1","cx2","cardanoAlgorithmForBezier","steppedEvaluate","inverseSteppedEvaluate","evaluateCurve","motionData","curve","target","totalSegmentCount","pointPosition","CubismMotionSegmentType_Bezier","segment","evaluate","CubismMotion","_eyeBlinkParameterIds","_lipSyncParameterIds","_sourceFrameRate","_loopDurationSeconds","_isLoop","_isLoopFadeIn","_lastWeight","parse","_motionData","_modelCurveIdEyeBlink","_modelCurveIdLipSync","timeOffsetSeconds","lipSyncValue","Number","MAX_VALUE","eyeBlinkValue","MaxTargetSize","lipSyncFlags","eyeBlinkFlags","tmpFadeIn","tmpFadeOut","CubismMotionCurveTarget_Model","CubismMotionCurveTarget_Parameter","sourceValue","fin","fout","paramWeight","CubismMotionCurveTarget_PartOpacity","setIsLoop","isLoop","setIsLoopFadeIn","loopFadeIn","isLoopFadeIn","setParameterFadeInTime","setParameterFadeOutTime","getParameterFadeInTime","getParameterFadeOutTime","setEffectIds","eyeBlinkParameterIds","lipSyncParameterIds","motionJson","areBeziersRestructed","totalPointCount","segmentPosition","CubismMotionSegmentType_Linear","CubismMotionSegmentType_Stepped","CubismMotionSegmentType_InverseStepped","userdatacount","u","CubismMotionQueueEntry","_autoDelete","_available","_finished","_started","_startTimeSeconds","_fadeInStartTimeSeconds","_endTimeSeconds","_stateTimeSeconds","_stateWeight","_lastEventCheckSeconds","_motionQueueEntryHandle","_isTriggeredFadeOut","_motion","setFadeOut","startFadeOut","newEndTimeSeconds","startTime","endTime","f","setIsAvailable","timeSeconds","getStateTime","getStateWeight","getLastCheckEventSeconds","setLastCheckEventSeconds","checkSeconds","isTriggeredFadeOut","getFadeOutSeconds","CubismMotionQueueManager","_eventCustomData","_motions","startMotion","autoDelete","InvalidMotionQueueEntryHandleValue","splice","isFinishedByHandle","motionQueueEntryNumber","stopAllMotions","getCubismMotionQueueEntry","find","entry","setEventCallback","customData","_eventCallBack","doUpdateMotion","updated","firedList","i2","CubismPhysicsTargetType","CubismPhysicsTargetType2","CubismPhysicsSource","CubismPhysicsSource2","CubismPhysicsParticle","initialPosition","position","lastPosition","lastGravity","force","velocity","CubismPhysicsSubRig","normalizationPosition","normalizationAngle","CubismPhysicsInput","CubismPhysicsOutput","translationScale","CubismPhysicsRig","settings","inputs","outputs","particles","gravity","wind","CubismPhysicsJson","getGravity","EffectiveForces","Gravity","X","Y","getWind","Wind","getSubRigCount","PhysicsSettingCount","getTotalInputCount","TotalInputCount","getTotalOutputCount","TotalOutputCount","getVertexCount","VertexCount","getNormalizationPositionMinimumValue","physicsSettingIndex","PhysicsSettings","Normalization","Position","Minimum","getNormalizationPositionMaximumValue","Maximum","getNormalizationPositionDefaultValue","Default","getNormalizationAngleMinimumValue","Angle","getNormalizationAngleMaximumValue","getNormalizationAngleDefaultValue","getInputCount","Input","getInputWeight","inputIndex","Weight","getInputReflect","Reflect","getInputType","Type","getInputSourceId","Source","getOutputCount","Output","getOutputVertexIndex","outputIndex","VertexIndex","getOutputAngleScale","Scale","getOutputWeight","getOutputDestinationId","Destination","getOutputType","getOutputReflect","getParticleCount","Vertices","getParticleMobility","vertexIndex","Mobility","getParticleDelay","Delay","getParticleAcceleration","Acceleration","getParticleRadius","Radius","getParticlePosition","PhysicsTypeTagX","PhysicsTypeTagY","PhysicsTypeTagAngle","AirResistance","MaximumWeight","MovementThreshold","CubismPhysics","_physicsRig","radAngle","outputValue","totalTranslation","currentSetting","currentInput","currentOutput","currentParticles","parameterMaximumValue","parameterMinimumValue","parameterDefaultValue","settingIndex","subRigCount","angle","baseInputIndex","baseOutputIndex","baseParticleIndex","inputCount","sourceParameterIndex","getNormalizedParameterValue","reflect","degreesToRadian","updateParticles","particleCount","_options","maximum","outputCount","particleIndex","destinationParameterIndex","translation","getValue","outParameterValue","prototype","JSON","stringify","subarray","updateOutputParameterValue","outParamIndex","setOptions","options","getOption","Options","physicsJson","setting","minimum","defalut","input","CubismPhysicsSource_X","getInputTranslationXFromNormalizedParameterValue","CubismPhysicsSource_Y","getInputTranslationYFromNormalizedParamterValue","CubismPhysicsSource_Angle","getInputAngleFromNormalizedParameterValue","targetType","CubismPhysicsTargetType_Parameter","output","angleScale","getOutputTranslationX","getScale","getOutputScaleTranslationX","getOutputTranslationY","getOutputScaleTranslationY","getOutputAngle","getOutputScaleAngle","particle","mobility","delay","acceleration","radius","strand","targetTranslation","targetAngle","isInverted","normalizeParameterValue","normalizaitionPosition","parentGravity","getRangeValue","getDefaultValue","minValue","strandCount","windDirection","thresholdValue","airResistance","totalRadian","currentGravity","direction","newDirection","radianToDirection","parameterValueMinimum","parameterValueMaximum","outputScale","valueBelowMinimum","valueExceededMaximum","parameterMinimum","parameterMaximum","parameterDefault","normalizedMinimum","normalizedMaximum","normalizedDefault","maxValue","minNormValue","maxNormValue","middleNormValue","middleValue","paramValue","sign","nLength","pLength","csmRect","w","h","height","getCenterX","getCenterY","getRight","getBottom","setRect","expand","ColorChannelCount","shaderCount","s_instance","s_viewport","s_fbo","CubismClippingManager_WebGL","getChannelFlagAsColor","channelNo","_channelColors","getMaskRenderTexture","_maskTexture","texture","frameNo","_currentFrameNo","size","_clippingMaskBufferSize","_colorBuffer","gl","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","CubismRenderTextureResource","setGL","calcClippedDrawTotalBounds","clippingContext","clippedDrawTotalMinX","clippedDrawTotalMinY","clippedDrawTotalMaxX","MIN_VALUE","clippedDrawTotalMaxY","clippedDrawCount","_clippedDrawableIndexList","clippedDrawableIndex","drawableVertexCount","drawableVertexes","minX","minY","maxX","maxY","pi","_allClippedDrawRect","_isUsing","_maskRenderTexture","_clippingContextListForMask","_clippingContextListForDraw","_tmpBoundsOnModel","_tmpMatrix","_tmpMatrixForMask","_tmpMatrixForDraw","tmp","self","deleteFramebuffer","deleteTexture","drawableMasks","drawableMaskCounts","findSameClip","CubismClippingContext","addClippedDrawable","setupClippingContext","renderer","usingClipCount","clipIndex","cc","viewport","preDraw","setupLayoutBounds","clearColor","clear","COLOR_BUFFER_BIT","clipContext","allClipedDrawRect","layoutBoundsOnTex01","_layoutBounds","MARGIN","scaleX","scaleY","_matrixForMask","_matrixForDraw","clipDrawCount","_clippingIdCount","clipDrawIndex","_clippingIdList","setClippingContextBufferForMask","drawMesh","sameCount","clipId","div","mod","curClipIndex","layoutCount","_layoutChannelNo","xpos","ypos","getColorBuffer","getClippingContextListForDraw","setClippingMaskBufferSize","getClippingMaskBufferSize","manager","clippingDrawableIndices","clipCount","_owner","getClippingManager","setGl","CubismShader_WebGL","_shaderSets","releaseShaderProgram","setupShaderProgram","textureId","vertexCount","vertexArray","indexArray","uvArray","bufferData","colorBlendMode","baseColor","matrix4x4","invertedMask","SRC_COLOR","DST_COLOR","SRC_ALPHA","DST_ALPHA","generateShaders","clippingContextBufferForMask","getClippingContextBufferForMask","shaderSet","ShaderNames","ShaderNames_SetupMask","useProgram","shaderProgram","activeTexture","TEXTURE0","uniform1i","samplerTexture0Location","vertex","createBuffer","bindBuffer","ARRAY_BUFFER","DYNAMIC_DRAW","enableVertexAttribArray","attributePositionLocation","vertexAttribPointer","FLOAT","uv","attributeTexCoordLocation","colorChannel","uniform4f","uniformChannelFlagLocation","uniformMatrix4fv","uniformClipMatrixLocation","rect","uniformBaseColorLocation","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","clippingContextBufferForDraw","getClippingContextBufferForDraw","masked","ShaderNames_NormalPremultipliedAlpha","ONE","ShaderNames_AddPremultipliedAlpha","ShaderNames_MultPremultipliedAlpha","TEXTURE1","tex","samplerTexture1Location","uniformMatrixLocation","ELEMENT_ARRAY_BUFFER","blendFuncSeparate","deleteProgram","loadShaderProgram","vertexShaderSrcSetupMask","fragmentShaderSrcsetupMask","vertexShaderSrc","fragmentShaderSrcPremultipliedAlpha","vertexShaderSrcMasked","fragmentShaderSrcMaskPremultipliedAlpha","fragmentShaderSrcMaskInvertedPremultipliedAlpha","getAttribLocation","getUniformLocation","vertexShaderSource","fragmentShaderSource","createProgram","vertShader","compileShaderSource","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","attachShader","linkProgram","linkStatus","getProgramParameter","LINK_STATUS","deleteShader","shaderType","shaderSource","shader","createShader","compileShader","getShaderInfoLog","status","getShaderParameter","COMPILE_STATUS","ShaderNames2","CubismRenderer_WebGL","_clippingContextBufferForMask","_clippingContextBufferForDraw","_clippingManager","firstDraw","_textures","_sortedDrawableIndexList","_bufferData","modelTextureNo","glTexture","getBindedTextures","deleteBuffer","renderOrder","order","setClippingContextBufferForDraw","textureNo","indexCount","CULL_FACE","disable","frontFace","CCW","modelColorRGBA","drawtexture","getInstance","drawElements","TRIANGLES","UNSIGNED_SHORT","deleteInstance","setRenderState","fbo","getExtension","SCISSOR_TEST","STENCIL_TEST","DEPTH_TEST","CW","BLEND","colorMask","clip","startUp","doStaticRelease","CubismModelSettingsJson","groups","hitAreas","HitAreas","layout","Layout","FileReferences","expressions","Expressions","motions","Motions","textures","Textures","physics","Physics","pose","Pose","group","Name","Ids","getLipSyncParameters","ParamAngleX","ParamAngleY","ParamAngleZ","ParamEyeBallX","ParamEyeBallY","ParamBodyAngleX","ParamBreath","LOGICAL_WIDTH","LOGICAL_HEIGHT","config","config2","LOG_LEVEL_VERBOSE","LOG_LEVEL_WARNING","LOG_LEVEL_ERROR","LOG_LEVEL_NONE","sound","motionSync","motionFadingDuration","idleMotionFadingDuration","expressionFadingDuration","preserveExpressionOnMotion","cubism4","logger","tag","_len6","messages","_key6","warn","_len7","_key7","_len8","_key8","clamp","num","lower","upper","applyMixins","derivedCtor","baseCtors","forEach","baseCtor","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","folderName","url2","lastSlashIndex","lastIndexOf","remove","array","indexOf","ExpressionManager","EventEmitter","reserveExpressionIndex","destroyed","init","defaultExpression","createExpression","currentExpression","stopAllExpressions","loadExpression","definitions","_loadExpression","setRandomExpression","availableIndices","floor","setExpression","resetExpression","_setExpression","restoreExpression","getExpressionIndex","now","destroy","emit","EPSILON","MAX_SPEED","ACCELERATION_TIME","FocusController","targetX","targetY","vx","vy","focus","instant","dt","dx","dy","maxSpeed","ax","ay","maxA","maxV","ModelSettings","TypeError","resolveURL","path","replaceFiles","replacer","getDefinedFiles","files","file","validateFiles","assertFileExists","expectedFile","shouldThrow","actualPath","essentialFiles","definedFiles","filter","MotionPriority","MotionPriority2","MotionState","debug","currentPriority","reservePriority","reserve","priority","currentGroup","currentIndex","dump","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex","setReservedIdle","setReserved","setCurrent","complete","isActive","shouldRequestIdleMotion","shouldOverrideExpression","requestedGroup","requestedIndex","key","join","TAG$2","VOLUME","SoundManager","volume","_volume","audios","onFinish","onError","Audio","preload","dispose","play","dispatchEvent","ErrorEvent","readyState","HAVE_ENOUGH_DATA","pause","removeAttribute","MotionManager","motionGroups","idleMotionGroup","idle","setupMotions","motionPreload","loadMotion","_loadMotion","_0","_1","_this","NORMAL","definition","currentAudio","soundURL","getSoundFile","readyToPlay","getMotionName","expressionManager","_startMotion","startRandomMotion","groupDefs","_stopAllMotions","IDLE","tempBounds","InternalModel","focusController","originalWidth","originalHeight","localTransform","Matrix","drawingMatrix","textureFlipY","setupLayout","setupHitAreas","getSize","getLayout","centerX","offsetY","centerY","top","bottom","getHitAreaDefs","hitArea","def","hitTest","hitAreaName","isHit","drawIndex","bounds","getDrawableBounds","vertices","updateTransform","transform","copyFrom","append","motionManager","TAG$1","NetworkError","aborted","_XHRLoader","onload","xhr","XMLHttpRequest","allXhrSet","xhrSet","xhrMap","get","Set","set","listeners","cancelXHRs","once","open","onabort","onloadend","delete","abort","WeakMap","XHRLoader","runMiddlewares","middleware","context","fn","bind","err2","loader","createXHR","Live2DLoader","middlewares","textureOptions","resourceOptions","crossorigin","crossOrigin","Texture","event","autoLoad","baseTexture","valid","resource","_live2d_load","errorHandler","removeEventListener","load","TAG","urlToJSON","live2dModel","jsonToSettings","runtime","Live2DFactory","findRuntime","createModelSettings","waitUntilReady","ready","setupOptionals","tasks","createPose","createPhysics","all","setupEssentials","live2DModel","textureLoadings","createInternalModel","modelData","isValidMoc","createCoreModel","_Live2DFactory","runtimes","sort","test","textureLoaded","modelLoaded","readyEventEmitted","live2DModelMiddlewares","handleError","releaseTasks","motionTasksMap","taskGroup","getMotionFile","motionDataType","_a2","taskGroup2","createMotion","expressionTasksMap","getExpressionFile","tasks2","InteractionMixin","_autoInteract","autoInteract","onTap","off","registerInteraction","interactionManager","unregisterInteraction","onPointerMove","tap","global","Live2DTransform","Transform","tempPoint","Point","tempMatrix$1","tickerRef","Live2DModel","Container","anchor","ObservablePoint","onAnchorChange","glContextID","elapsedTime","performance","deltaTime","_autoUpdate","setupLive2DModel","onLoad","tickerClass","autoUpdate","PIXI","Ticker","_destroyed","shared","onTickerUpdate","interactive","pivot","toModelPosition","tx","ty","hitAreaNames","skipUpdate","_recursivePostUpdateTransform","parent","displayObjectUpdateTransform","_tempDisplayObjectParent","worldTransform","applyInverse","containsPoint","point","getBounds","contains","_calculateBounds","_bounds","addFrame","deltaMS","_render","plugins","interaction","batch","geometry","shouldUpdateTexture","CONTEXT_UID","updateWebGLContext","_glTextures","pixelStorei","WebGLRenderingContext","UNPACK_FLIP_Y_WEBGL","touched","textureGC","framebuffer","internalTransform","globalUniforms","uniforms","projectionMatrix","draw","_FileLoader","settingsURL","filePath","resolved","filesMap","fileMap","definedFile","decodeURI","actualFile","webkitRelativePath","URL","createObjectURL","_objectURL","settingsFile","endsWith","settingsText","readText","settingsJSON","reader","FileReader","readAsText","FileLoader","factory","isArray","File","createSettings","encodeURI","upload","objectURL","revokeObjectURL","resourceObjectURL","unshift","_ZipLoader","filePaths","getFilePaths","requiredFilePaths","getFiles","settingsFilePath","paths","ZipLoader","ZIP_PROTOCOL","uid","sourceURL","zipBlob","startsWith","zipReader","unzip","releaseReader","Cubism4ExpressionManager","queueManager","findIndex","create","Cubism4ModelSettings","isValidJSON","every","entries","Sound","Cubism4MotionManager","eyeBlinkIds","lipSyncIds","caller","eventValue","defaultFadingDuration","tempMatrix","Cubism4InternalModel","lipSync","breath","idParamAngleX","idParamAngleY","idParamAngleZ","idParamEyeBallX","idParamEyeBallY","idParamBodyAngleX","idParamBreath","pixelsPerUnit","centeringTransform","eyeBlink","commonKey","charAt","toLowerCase","getDrawableIDs","prepend","_d","motionUpdated","updateFocus","updateNaturalMovements","matrix","getParameter","FRAMEBUFFER_BINDING","startupPromise","startupRetries","cubism4Ready","startUpWithRetry","startUpCubism4","cause","LogLevel_Verbose","releaseMoc","__moc","modelName","app","view","autoStart","backgroundAlpha","stage","addChild","registerRuntime","byteLength","Int8Array","String","fromCharCode","ignored","coreModelWithMoc","components","Drawer","isDragging","lastX","lastY","onresize","created","onmessage","close","clientY","deltaX","deltaY","parseInt","Vue","Vuex","getItem","mutations","actions","increase","decrease","parseFloat","resizeTo","App","beforeCreate","$mount","exports","require","exports2","utils","math","core","display","VERSION","_len","_key","rand","copyProperty","fromKey","toKey","copyArray","self2","MotionPreloadStrategy","MotionPreloadStrategy2","fromURL","Live2D","originalUpdateParam","Live2DMotion","updateParam","call","onFinishHandler","Live2DExpression","AMotion","params","setFadeIn","fade_in","fade_out","calc","defaultValue","val","updateParamExe","motionQueueEnt","setParamFloat","Cubism2ExpressionManager","MotionQueueManager","Cubism2MotionManager","Live2DEyeBlink","blinkInterval","closingDuration","closedDuration","openingDuration","eyeState","eyeParamValue","closedTimer","nextBlinkTimeLeft","leftParam","getParamIndex","rightParam","setEyeParams","tempMatrixArray","Cubism2InternalModel","drawDataCount","disableCulling","eyeballXParamIndex","eyeballYParamIndex","angleXParamIndex","angleYParamIndex","angleZParamIndex","bodyAngleXParamIndex","breathParamIndex","initParams","_ref","initOpacities","_ref2","setPartsOpacity","saveParam","getModelContext","_$aS","drawParamWebGL","clipManager","originalSetupClip","setupClip","modelContext","drawParam","glno","prop","hasOwnProperty","WebGLBuffer","curFrameNo","setTexture","getDrawDataIndex","drawData","getDrawData","getDrawDataID","getTransformedPoints","loadParam","addToParamFloat","Cubism2ModelSettings","copy","SRC_TYPE_MAP","PhysicsHair","Src","SRC_TO_X","SRC_TO_Y","SRC_TO_G_ANGLE","TARGET_TYPE_MAP","Live2DPhysics","physicsHairs","physics_hair","physicsHair","setup","regist","mass","_ref3","ptype","addSrcParam","targets","_ref4","addTargetParam","elapsed","Live2DPartsParam","initIndex","getPartsDataIndex","PartsDataID","getID","Live2DPose","opacityAnimDuration","partsGroups","parts_visible","_ref5","_ref6","l","visible","getParamFloat","normalizePartsOpacityGroup","partsGroup","maxBackOpacity","visibleOpacity","visibleIndex","_ref7","originalOpacity","getPartsOpacity","_ref8","backOp","copyOpacity","_ref9","_ref10","partsIndex2","partGroup","Live2DModelWebGL","loadModel","getError","defineProperties","__esModule","Symbol","toStringTag","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","deferred","O","chunkIds","notFulfilled","getter","enumerable","g","globalThis","Function","obj","nmd","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}